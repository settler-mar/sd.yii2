function ajaxForm(e){function t(e){var t=this,n=t.form,i=t.wrap;e.render?(e.notyfy_class="notify_white",notification.alert(e)):(i.removeClass("loading"),n.removeClass("loading"),e.html?(i.html(e.html),ajaxForm(i)):e.error||(n.removeClass("loading"),n.find("input[type=text],textarea").val(""))),notification.notifi({type:e.error===!1?"success":"err",title:e.error===!1?"Успешно":"Ошибка",message:Array.isArray(e.error)?e.error[0]:e.message?e.message:e.error})}function n(){var e=this,t=(e.form,e.wrap);t.removeClass("loading"),t.html("<h3>Упс... Возникла непредвиденная ошибка<h3><p>Часто это происходит в случае, если вы несколько раз подряд неверно ввели свои учетные данные. Но возможны и другие причины. В любом случае не расстраивайтесь и просто обратитесь к нашему оператору службы поддержки.</p><br><p>Спасибо.</p>"),ajaxForm(t)}function i(e){e.preventDefault();var i=this,s=i.form;i.wrap;s.yiiActiveForm&&s.yiiActiveForm("validate");var a=0==s.find(i.param.error_class).length;if(!a)return!1;var r=s.find("input.required");for(o=0;o<r.length;o++)if(r.eq(o).val().length<1)return!1;s.serializeObject||addSRO();var l=s.serializeObject();return s.addClass("loading"),i.url+=(i.url.indexOf("?")>0?"&":"?")+"rc="+Math.random(),$.post(i.url,l,t.bind(i),"json").fail(n.bind(i)),!1}var s=(!!(window.File&&window.FileReader&&window.FileList&&window.Blob),{error_class:".has-error"});e.find("[required]").addClass("required").removeAttr("required");for(var o=0;o<e.length;o++)wrap=e.eq(o),form=wrap.find("form"),data={form:form,param:s,wrap:wrap},data.url=form.attr("action")||location.href,data.method=form.attr("method")||"post",form.unbind("submit"),form.on("submit",i.bind(data))}function addSRO(){$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}}!function(e){function t(t){var n=e(this),i=null,s=[],o=null,a=null,r=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=3,c=300,d=function(e){s.push({x:e.pageX,y:e.pageY}),s.length>l&&s.shift()},u=function(){a&&clearTimeout(a),r.exitMenu(this)&&(i&&r.deactivate(i),i=null)},h=function(){a&&clearTimeout(a),r.enter(this),m(this)},p=function(){r.exit(this)},f=function(){g(this)},g=function(e){e!=i&&(i&&r.deactivate(i),r.activate(e),i=e)},m=function(e){var t=v();t?a=setTimeout(function(){m(e)},t):g(e)},v=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!i||!e(i).is(r.submenuSelector))return 0;var a=n.offset(),l={x:a.left,y:a.top-r.tolerance},d={x:a.left+n.outerWidth(),y:l.y},u={x:a.left,y:a.top+n.outerHeight()+r.tolerance},h={x:a.left+n.outerWidth(),y:u.y},p=s[s.length-1],f=s[0];if(!p)return 0;if(f||(f=p),f.x<a.left||f.x>h.x||f.y<a.top||f.y>h.y)return 0;if(o&&p.x==o.x&&p.y==o.y)return 0;var g=d,m=h;"left"==r.submenuDirection?(g=u,m=l):"below"==r.submenuDirection?(g=h,m=u):"above"==r.submenuDirection&&(g=l,m=d);var v=t(p,g),y=t(p,m),b=t(f,g),_=t(f,m);return v<b&&y>_?(o=p,c):(o=null,0)};n.mouseleave(u).find(r.rowSelector).mouseenter(h).mouseleave(p).click(f),e(document).mousemove(d)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery),!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.Circles=t()}(this,function(){"use strict";var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t=function(e){var t=e.id;if(this._el=document.getElementById(t),null!==this._el){this._radius=e.radius||10,this._duration=void 0===e.duration?500:e.duration,this._value=0,this._maxValue=e.maxValue||100,this._text=void 0===e.text?function(e){return this.htmlifyNumber(e)}:e.text,this._strokeWidth=e.width||10,this._colors=e.colors||["#EEE","#F00"],this._svg=null,this._movingPath=null,this._wrapContainer=null,this._textContainer=null,this._wrpClass=e.wrpClass||"circles-wrp",this._textClass=e.textClass||"circles-text",this._valClass=e.valueStrokeClass||"circles-valueStroke",this._maxValClass=e.maxValueStrokeClass||"circles-maxValueStroke",this._styleWrapper=e.styleWrapper!==!1,this._styleText=e.styleText!==!1;var n=Math.PI/180*270;this._start=-Math.PI/180*90,this._startPrecise=this._precise(this._start),this._circ=n-this._start,this._generate().update(e.value||0)}};return t.prototype={VERSION:"0.0.6",_generate:function(){return this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._generateSvg()._generateText()._generateWrapper(),this._el.innerHTML="",this._el.appendChild(this._wrapContainer),this},_setPercentage:function(e){this._movingPath.setAttribute("d",this._calculatePath(e,!0)),this._textContainer.innerHTML=this._getText(this.getValueFromPercent(e))},_generateWrapper:function(){return this._wrapContainer=document.createElement("div"),this._wrapContainer.className=this._wrpClass,this._styleWrapper&&(this._wrapContainer.style.position="relative",this._wrapContainer.style.display="inline-block"),this._wrapContainer.appendChild(this._svg),this._wrapContainer.appendChild(this._textContainer),this},_generateText:function(){if(this._textContainer=document.createElement("div"),this._textContainer.className=this._textClass,this._styleText){var e={position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"};for(var t in e)this._textContainer.style[t]=e[t]}return this._textContainer.innerHTML=this._getText(0),this},_getText:function(e){return this._text?(void 0===e&&(e=this._value),e=parseFloat(e.toFixed(2)),"function"==typeof this._text?this._text.call(this,e):this._text):""},_generateSvg:function(){return this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttribute("width",this._svgSize),this._svg.setAttribute("height",this._svgSize),this._generatePath(100,!1,this._colors[0],this._maxValClass)._generatePath(1,!0,this._colors[1],this._valClass),this._movingPath=this._svg.getElementsByTagName("path")[1],this},_generatePath:function(e,t,n,i){var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("fill","transparent"),s.setAttribute("stroke",n),s.setAttribute("stroke-width",this._strokeWidth),s.setAttribute("d",this._calculatePath(e,t)),s.setAttribute("class",i),this._svg.appendChild(s),this},_calculatePath:function(e,t){var n=this._start+e/100*this._circ,i=this._precise(n);return this._arc(i,t)},_arc:function(e,t){var n=e-.001,i=e-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,i,1,this._radius+this._radiusAdjusted*Math.cos(n),this._radius+this._radiusAdjusted*Math.sin(n),t?"":"Z"].join(" ")},_precise:function(e){return Math.round(1e3*e)/1e3},htmlifyNumber:function(e,t,n){t=t||"circles-integer",n=n||"circles-decimals";var i=(e+"").split("."),s='<span class="'+t+'">'+i[0]+"</span>";return i.length>1&&(s+='.<span class="'+n+'">'+i[1].substring(0,2)+"</span>"),s},updateRadius:function(e){return this._radius=e,this._generate().update(!0)},updateWidth:function(e){return this._strokeWidth=e,this._generate().update(!0)},updateColors:function(e){this._colors=e;var t=this._svg.getElementsByTagName("path");return t[0].setAttribute("stroke",e[0]),t[1].setAttribute("stroke",e[1]),this},getPercent:function(){return 100*this._value/this._maxValue},getValueFromPercent:function(e){return this._maxValue*e/100},getValue:function(){return this._value},getMaxValue:function(){return this._maxValue},update:function(t,n){if(t===!0)return this._setPercentage(this.getPercent()),this;if(this._value==t||isNaN(t))return this;void 0===n&&(n=this._duration);var i,s,o,a,r=this,l=r.getPercent(),c=1;return this._value=Math.min(this._maxValue,Math.max(0,t)),n?(i=r.getPercent(),s=i>l,c+=i%1,o=Math.floor(Math.abs(i-l)/c),a=n/o,function d(t){if(s?l+=c:l-=c,s&&l>=i||!s&&i>=l)return void e(function(){r._setPercentage(i)});e(function(){r._setPercentage(l)});var n=Date.now(),o=n-t;o>=a?d(n):setTimeout(function(){d(Date.now())},a-o)}(Date.now()),this):(this._setPercentage(this.getPercent()),this)}},t.create=function(e){return new t(e)},t});var Datepicker;!function(e,t,n){var i,s,o,a="datepicker",r=".datepicker-here",l=!1,c='<div class="datepicker"><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>',d={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},onSelect:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},u={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]};Datepicker=function(e,s){this.el=e,this.$el=t(e),this.opts=t.extend(!0,{},d,s,this.$el.data()),i==n&&(i=t("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this.init()},o=Datepicker,o.prototype={viewIndexes:["days","months","years"],init:function(){l||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.views[this.currentView]=new Datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new Datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date((-86399999136e5)),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("input.adp",this._onInput.bind(this)),t(e).on("resize.adp",this._onResize.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},isWeekend:function(e){return this.opts.weekends.indexOf(e)!==-1},_defineLocale:function(e){"string"==typeof e?(this.loc=Datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=t.extend(!0,{},Datepicker.language.ru)),this.loc=t.extend(!0,{},Datepicker.language.ru,Datepicker.language[e])):this.loc=t.extend(!0,{},Datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay)},_buildDatepickersContainer:function(){l=!0,i.append('<div class="datepickers-container" id="datepickers-container"></div>'),s=t("#datepickers-container")},_buildBaseHtml:function(){var e,n=t('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?n.insertAfter(this.$el):s:n.appendTo(this.$el),this.$datepicker=t(c).appendTo(e),this.$content=t(".datepicker--content",this.$datepicker),this.$nav=t(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return this.opts.onSelect("","",this);var e,t=this.selectedDates,n=o.getParsedDate(t[0]),i=this,s=new Date(n.year,n.month,n.date);e=t.map(function(e){return i.formatDate(i.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(s=t.map(function(e){var t=o.getParsedDate(e);return new Date(t.year,t.month,t.date)})),this.opts.onSelect(e,s,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var n=e,i=this._getWordBoundaryRegExp,s=this.loc,a=o.getDecade(t),r=o.getParsedDate(t);switch(!0){case/@/.test(n):n=n.replace(/@/,t.getTime());case/dd/.test(n):n=n.replace(i("dd"),r.fullDate);case/d/.test(n):n=n.replace(i("d"),r.date);case/DD/.test(n):n=n.replace(i("DD"),s.days[r.day]);case/D/.test(n):n=n.replace(i("D"),s.daysShort[r.day]);case/mm/.test(n):n=n.replace(i("mm"),r.fullMonth);case/m/.test(n):n=n.replace(i("m"),r.month+1);case/MM/.test(n):n=n.replace(i("MM"),this.loc.months[r.month]);case/M/.test(n):n=n.replace(i("M"),s.monthsShort[r.month]);case/yyyy/.test(n):n=n.replace(i("yyyy"),r.year);case/yyyy1/.test(n):n=n.replace(i("yyyy1"),a[0]);case/yyyy2/.test(n):n=n.replace(i("yyyy2"),a[1]);case/yy/.test(n):n=n.replace(i("yy"),r.year.toString().slice(-2))}return n},_getWordBoundaryRegExp:function(e){return new RegExp("\\b(?=[a-zA-Z0-9äöüßÄÖÜ<])"+e+"(?![>a-zA-Z0-9äöüßÄÖÜ])")},selectDate:function(e){var t=this,n=t.opts,i=t.parsedDate,s=t.selectedDates,o=s.length,a="";if(e instanceof Date){if("days"==t.view&&e.getMonth()!=i.month&&n.moveToOtherMonthsOnSelect&&(a=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=i.year&&n.moveToOtherYearsOnSelect&&(a=new Date(e.getFullYear(),0,1)),a&&(t.silent=!0,t.date=a,t.silent=!1,t.nav._render()),n.multipleDates&&!n.range){if(o===n.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else n.range?2==o?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==o?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),n.onSelect&&t._triggerOnChange(),n.autoClose&&(n.multipleDates||n.range?n.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(e){var t=this.selectedDates,n=this;if(e instanceof Date)return t.some(function(i,s){if(o.isSame(i,e))return t.splice(s,1),n.selectedDates.length||(n.minRange="",n.maxRange=""),n.views[n.currentView]._render(),n._setInputValue(),n.opts.onSelect&&n._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,n){var i=arguments.length;return 2==i?this.opts[e]=n:1==i&&"object"==typeof e&&(this.opts=t.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(e,t){return this.selectedDates.some(function(n){return o.isSame(n,e,t)})},_setInputValue:function(){var e,t=this,n=t.opts,i=t.loc.dateFormat,s=n.altFieldDateFormat,o=t.selectedDates.map(function(e){return t.formatDate(i,e)});n.altField&&t.$altField.length&&(e=this.selectedDates.map(function(e){return t.formatDate(s,e)}),e=e.join(this.opts.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.opts.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var n=e.getTime(),i=o.getParsedDate(e),s=o.getParsedDate(this.minDate),a=o.getParsedDate(this.maxDate),r=new Date(i.year,i.month,s.date).getTime(),l=new Date(i.year,i.month,a.date).getTime(),c={day:n>=this.minTime&&n<=this.maxTime,month:r>=this.minTime&&l<=this.maxTime,year:i.year>=s.year&&i.year<=a.year};return t?c[t]:c.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,i=e.data("year")||t.year,s=e.data("month")==n?t.month:e.data("month"),o=e.data("date")||1;return new Date(i,s,o)},_setPositionClasses:function(e){e=e.split(" ");var t=e[0],n=e[1],i="datepicker -"+t+"-"+n+"- -from-"+t+"-";this.visible&&(i+=" active"),this.$datepicker.removeAttr("class").addClass(i)},setPosition:function(e){e=e||this.opts.position;var t,n,i=this._getDimensions(this.$el),s=this._getDimensions(this.$datepicker),o=e.split(" "),a=this.opts.offset,r=o[0],l=o[1];switch(r){case"top":t=i.top-s.height-a;break;case"right":n=i.left+i.width+a;break;case"bottom":t=i.top+i.height+a;break;case"left":n=i.left-s.width-a}switch(l){case"top":t=i.top;break;case"right":n=i.left+i.width-s.width;break;case"bottom":t=i.top+i.height-s.height;break;case"left":n=i.left;break;case"center":/left|right/.test(r)?t=i.top+i.height/2-s.height/2:n=i.left+i.width/2-s.width/2}this.$datepicker.css({left:n,top:t})},show:function(){this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0},hide:function(){this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur()},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_changeView:function(e,t){e=e||this.focused||this.date;var n="up"==t?this.viewIndex+1:this.viewIndex-1;n>2&&(n=2),n<0&&(n=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[n]},_handleHotKey:function(e){var t,n,i,s=o.getParsedDate(this._getFocusedDate()),a=this.opts,r=!1,l=!1,c=!1,d=s.year,u=s.month,h=s.date;switch(e){case"ctrlRight":case"ctrlUp":u+=1,r=!0;break;case"ctrlLeft":case"ctrlDown":u-=1,r=!0;break;case"shiftRight":case"shiftUp":l=!0,d+=1;break;case"shiftLeft":case"shiftDown":l=!0,d-=1;break;case"altRight":case"altUp":c=!0,d+=10;break;case"altLeft":case"altDown":c=!0,d-=10;break;case"ctrlShiftUp":this.up()}i=o.getDaysCount(new Date(d,u)),n=new Date(d,u,h),i<h&&(h=i),n.getTime()<this.minTime?n=this.minDate:n.getTime()>this.maxTime&&(n=this.maxDate),this.focused=n,t=o.getParsedDate(n),r&&a.onChangeMonth&&a.onChangeMonth(t.month,t.year),l&&a.onChangeYear&&a.onChangeYear(t.year),c&&a.onChangeDecade&&a.onChangeDecade(this.curDecade)},_registerKey:function(e){var t=this.keys.some(function(t){return t==e});t||this.keys.push(e)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,n=this,i=this.keys.sort();for(var s in u)e=u[s],i.length==e.length&&e.every(function(e,t){return e==i[t]})&&(n._trigger("hotKey",s),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var n=o.getParsedDate(this._getFocusedDate()),i=n.year,s=n.month,a=n.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t?a-=1:"","month"==t?s-=1:"","year"==t?i-=1:"";break;case 38:"day"==t?a-=7:"","month"==t?s-=3:"","year"==t?i-=4:"";break;case 39:"day"==t?a+=1:"","month"==t?s+=1:"","year"==t?i+=1:"";break;case 40:"day"==t?a+=7:"","month"==t?s+=3:"","year"==t?i+=4:""}var r=new Date(i,s,a);r.getTime()<this.minTime?r=this.minDate:r.getTime()>this.maxTime&&(r=this.maxDate),this.focused=r}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,t){t=t||this.cellType;var n,i=o.getParsedDate(e),s='.datepicker--cell[data-year="'+i.year+'"]';switch(t){case"month":s='[data-month="'+i.month+'"]';break;case"day":s+='[data-month="'+i.month+'"][data-date="'+i.date+'"]'}return n=this.views[this.currentView].$el.find(s),n.length?n:""},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_onShowEvent:function(){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,this.$el.focus()},_onInput:function(){var e=this.$el.val();e||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),t>=37&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var n=this._isSelected(this.focused,this.cellType);n?n&&this.opts.toggleSelected&&this.removeDate(this.focused):this.selectDate(this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var n=t(e.target).closest(".datepicker--cell"),i=this._getDateFromCell(n);this.silent=!0,this.focused&&(this.focused=""),n.addClass("-focus-"),this.focused=i,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){var n=t(e.target).closest(".datepicker--cell");n.removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return o.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new Datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=o.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=o.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return o.getDecade(this.date)}},o.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},o.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay()}},o.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},o.template=function(e,t){return e.replace(/#\{([\w]+)\}/g,function(e,n){if(t[n]||0===t[n])return t[n]})},o.isSame=function(e,t,n){if(!e||!t)return!1;var i=o.getParsedDate(e),s=o.getParsedDate(t),a=n?n:"day",r={day:i.date==s.date&&i.month==s.month&&i.year==s.year,month:i.month==s.month&&i.year==s.year,year:i.year==s.year};return r[a]},o.less=function(e,t,n){return!(!e||!t)&&t.getTime()<e.getTime()},o.bigger=function(e,t,n){return!(!e||!t)&&t.getTime()>e.getTime()},Datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",firstDay:1}},t.fn[a]=function(e){return this.each(function(){if(t.data(this,a)){var n=t.data(this,a);n.opts=t.extend(!0,n.opts,e),n.update()}else t.data(this,a,new Datepicker(this,e))})},t(function(){t(r).datepicker()})}(window,jQuery),function(){var e={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},t=Datepicker;t.Body=function(e,t,n){this.d=e,this.type=t,this.opts=n,this.init()},t.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",$.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=$(e[this.type]).appendTo(this.d.$content),this.$names=$(".datepicker--days-names",this.$el),this.$cells=$(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,n,i){return t=void 0!=t?t:e,n=n?n:"",i=void 0!=i?i:0,i>7?n:7==t?this._getDayNamesHtml(e,0,n,++i):(n+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,n,++i))},_getCellContents:function(e,n){var i="datepicker--cell datepicker--cell-"+n,s=new Date,o=this.d,a=o.opts,r=t.getParsedDate(e),l={},c=r.date;switch(a.onRenderCell&&(l=a.onRenderCell(e,n)||{},c=l.html?l.html:c,i+=l.classes?" "+l.classes:""),n){case"day":o.isWeekend(r.day)&&(i+=" -weekend-"),r.month!=this.d.parsedDate.month&&(i+=" -other-month-",a.selectOtherMonths||(i+=" -disabled-"),a.showOtherMonths||(c=""));break;case"month":c=o.loc[o.opts.monthsField][r.month];break;case"year":var d=o.curDecade;c=r.year,(r.year<d[0]||r.year>d[1])&&(i+=" -other-decade-",a.selectOtherYears||(i+=" -disabled-"),a.showOtherYears||(c=""))}return a.onRenderCell&&(l=a.onRenderCell(e,n)||{},c=l.html?l.html:c,i+=l.classes?" "+l.classes:""),a.range&&(t.isSame(o.minRange,e,n)&&(i+=" -range-from-"),t.isSame(o.maxRange,e,n)&&(i+=" -range-to-"),1==o.selectedDates.length&&o.focused?((t.bigger(o.minRange,e)&&t.less(o.focused,e)||t.less(o.maxRange,e)&&t.bigger(o.focused,e))&&(i+=" -in-range-"),t.less(o.maxRange,e)&&t.isSame(o.focused,e)&&(i+=" -range-from-"),t.bigger(o.minRange,e)&&t.isSame(o.focused,e)&&(i+=" -range-to-")):2==o.selectedDates.length&&t.bigger(o.minRange,e)&&t.less(o.maxRange,e)&&(i+=" -in-range-")),t.isSame(s,e,n)&&(i+=" -current-"),o.focused&&t.isSame(e,o.focused,n)&&(i+=" -focus-"),o._isSelected(e,n)&&(i+=" -selected-"),o._isInRange(e,n)&&!l.disabled||(i+=" -disabled-"),{html:c,classes:i}},_getDaysHtml:function(e){var n=t.getDaysCount(e),i=new Date(e.getFullYear(),e.getMonth(),1).getDay(),s=new Date(e.getFullYear(),e.getMonth(),n).getDay(),o=i-this.d.loc.firstDay,a=6-s+this.d.loc.firstDay;o=o<0?o+7:o,a=a>6?a-7:a;for(var r,l,c=-o+1,d="",u=c,h=n+a;u<=h;u++)l=e.getFullYear(),r=e.getMonth(),d+=this._getDayHtml(new Date(l,r,u));return d},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var n="",i=t.getParsedDate(e),s=0;s<12;)n+=this._getMonthHtml(new Date(i.year,s)),s++;return n},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){var n=(t.getParsedDate(e),t.getDecade(e)),i=n[0]-1,s="",o=i;for(o;o<=n[1]+1;o++)s+=this._getYearHtml(new Date(o,0));return s},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this._renderTypes[this.type].bind(this)()},_update:function(){var e,t,n,i=$(".datepicker--cell",this.$cells),s=this;i.each(function(i,o){t=$(this),n=s.d._getDateFromCell($(this)),e=s._getCellContents(n,s.d.cellType),t.attr("class",e.classes)})},show:function(){this.$el.addClass("active"),this.acitve=!0},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,n=e.data("month")||0,i=e.data("year")||this.d.parsedDate.year;if(this.d.view!=this.opts.minView)return void this.d.down(new Date(i,n,t));var s=new Date(i,n,t),o=this.d._isSelected(s,this.d.cellType);o?o&&this.opts.toggleSelected&&this.d.removeDate(s):this.d.selectDate(s)},_onClickCell:function(e){var t=$(e.target).closest(".datepicker--cell");t.hasClass("-disabled-")||this._handleClick.bind(this)(t)}}}(),function(){var e='<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',t='<div class="datepicker--buttons"></div>',n='<span class="datepicker--button" data-action="#{action}">#{label}</span>';
Datepicker.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},Datepicker.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",$.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",$.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",$.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var t=this._getTitle(this.d.currentDate),n=Datepicker.template(e,$.extend({title:t},this.opts));this.d.$nav.html(n),"years"==this.d.view&&$(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var t={action:e,label:this.d.loc[e]},i=Datepicker.template(n,t);$("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(i)},_addButtonsContainer:function(){this.d.$datepicker.append(t),this.$buttonsContainer=$(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,n=e.year,i=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(n,t-1,i),"month")||this._disableNav("prev"),this.d._isInRange(new Date(n,t+1,i),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(n-1,t,i),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n+1,t,i),"year")||this._disableNav("next");break;case"years":this.d._isInRange(new Date(n-10,t,i),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n+10,t,i),"year")||this._disableNav("next")}}},_disableNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var t=$(e.target).closest("[data-action]"),n=t.data("action");this.d[n]()},_onClickNavTitle:function(e){if(!$(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:this.options.themeClassName=this.options.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=e("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;e.each(this.options.buttons,function(t,n){var s=e("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+t).attr("title",n.title).appendTo(i.$bar.find(".noty_buttons")).on("click",function(t){e.isFunction(n.onClick)&&n.onClick.call(s,i,t)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===e.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector),[t.options.within]),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),-1==e.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),"string"==typeof t.options.animation.open?(t.$bar.css("height",t.$bar.innerHeight()),t.$bar.on("click",function(e){t.wasClicked=!0}),t.$bar.show().addClass(t.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0,t.hasOwnProperty("wasClicked")&&(t.$bar.off("click",function(e){t.wasClicked=!0}),t.close())})):t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var t=this;if(this.showing)return void t.$bar.queue(function(){t.close.apply(t)});if(!this.shown&&!this.showing){var n=[];return e.each(e.noty.queue,function(e,i){i.options.id!=t.options.id&&n.push(i)}),void(e.noty.queue=n)}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),"string"==typeof t.options.animation.close?t.$bar.addClass(t.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t),t.closeCleanUp()}):t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.closeCleanUp()})}},closeCleanUp:function(){var t=this;t.options.modal&&(e.notyRenderer.setModalCount(-1),0==e.notyRenderer.getModalCount()&&e(".noty_modal").fadeOut(t.options.animation.fadeSpeed,function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),0==e.notyRenderer.getLayoutCountFor(t)&&e(t.options.layout.container.selector).remove(),"undefined"!=typeof t.$bar&&null!==t.$bar&&("string"==typeof t.options.animation.close?(t.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),t.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){t.$bar.remove(),t.$bar=null,t.closed=!0,t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t)})):(t.$bar.remove(),t.$bar=null,t.closed=!0)),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render()},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,"undefined"!=typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(n){var i=Object.create(t).init(n);return i.options.killer&&e.noty.closeAll(),i.options.force?e.noty.queue.unshift(i):e.noty.queue.push(i),e.notyRenderer.render(),"object"==e.noty.returns?i:i.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];"object"===e.type(t)?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" > li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?0==t.options.custom.find(t.options.layout.container.selector).length?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):0==e(t.options.layout.container.selector).length?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){if(0==e(".noty_modal").length){var n=e("<div/>").addClass("noty_modal").addClass(t.options.theme).data("noty_modal_count",0);t.options.theme.modal&&t.options.theme.modal.css&&n.css(t.options.theme.modal.css),n.prependTo(e("body")).fadeIn(t.options.animation.fadeSpeed),e.inArray("backdrop",t.options.closeWith)>-1&&n.on("click",function(t){e.noty.closeAll()})}},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,n){return e(t.options.layout.container.selector).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+n)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return!!e.noty.store.hasOwnProperty(t)&&e.noty.store[t]},e.noty.close=function(t){return!!e.noty.get(t)&&e.noty.get(t).close()},e.noty.setText=function(t,n){return!!e.noty.get(t)&&e.noty.get(t).setText(n)},e.noty.setType=function(t,n){return!!e.noty.get(t)&&e.noty.get(t).setType(n)},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var n=window.alert;return e.noty.consumeAlert=function(t){window.alert=function(n){t?t.text=n:t={text:n},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=n},e.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500,fadeSpeed:"fast"},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).on("resize",function(){e.each(e.noty.layouts,function(t,n){n.container.style.apply(e(n.container.selector))})}),window.noty=function(t){return e.notyRenderer.init(t)},e.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){e(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},e.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){e(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){e(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){e(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"}):e(this).animate({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){e(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){e(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){e(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},e.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){e(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},e.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){e(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){e(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){e(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.themes.bootstrapTheme={name:"bootstrapTheme",modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){var t=this.options.layout.container.selector;switch(e(t).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("list-group-item").css("padding","0px"),this.options.type){case"alert":case"notification":this.$bar.addClass("list-group-item-info");break;case"warning":this.$bar.addClass("list-group-item-warning");break;case"error":this.$bar.addClass("list-group-item-danger");break;case"information":this.$bar.addClass("list-group-item-info");break;case"success":this.$bar.addClass("list-group-item-success")}this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"})},callback:{onShow:function(){},onClose:function(){}}},e.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var t=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),e(t).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAQAAAClM0ndAAAAhklEQVR4AdXO0QrCMBBE0bttkk38/w8WRERpdyjzVOc+HxhIHqJGMQcFFkpYRQotLLSw0IJ5aBdovruMYDA/kT8plF9ZKLFQcgF18hDj1SbQOMlCA4kao0iiXmah7qBWPdxpohsgVZyj7e5I9KcID+EhiDI5gxBYKLBQYKHAQoGFAoEks/YEGHYKB7hFxf0AAAAASUVORK5CYII=') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}},e.noty.themes.relax={name:"relax",helpers:{},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",margin:"4px 0",borderRadius:"2px"}),this.$message.css({fontSize:"14px",lineHeight:"16px",textAlign:"center",padding:"10px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderTop:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderBottom:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#dedede",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#FF8181",borderColor:"#e25353",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#78C5E7",borderColor:"#3badd6",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#BCF5BC",borderColor:"#7cdd77",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){},onClose:function(){}}},window.noty}),jQuery(document).ready(function(){function e(){return window.getComputedStyle(document.querySelector(".cd-main-content"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function t(){var t=e();"mobile"==t&&0==c.parents(".cd-side-nav").length?(n(),c.appendTo(r),d.removeClass("is-hidden").prependTo(r)):("tablet"==t||"desktop"==t)&&c.parents(".cd-side-nav").length>0&&(n(),d.insertAfter(a.find(".cd-logo")),c.appendTo(a.find(".cd-nav"))),i(t),h=!1}function n(){c.detach(),d.detach()}function i(e){"desktop"==e&&$(".has-children.selected").removeClass("selected")}function s(){var t=e();if("mobile"!=t){var n=r.outerHeight(),i=$(window).height(),s=o.outerHeight(),a=$(window).scrollTop();a+i>n&&s-n!=0?r.addClass("is-fixed").css("bottom",0):r.removeClass("is-fixed").attr("style","")}p=!1}var o=$(".cd-main-content"),a=$(".cd-main-header"),r=$(".cd-side-nav"),l=$(".cd-nav-trigger"),c=$(".cd-top-nav"),d=$(".cd-search"),u=$(".account"),h=!1;t(),$(window).on("resize",function(){h||(window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,300),h=!0)});var p=!1;s(),$(window).on("scroll",function(){p||(window.requestAnimationFrame?window.requestAnimationFrame(s):setTimeout(s,300),p=!0)}),l.on("click",function(e){e.preventDefault(),$([r,l]).toggleClass("nav-is-visible")}),$(".has-children > a").on("click",function(t){var n=e(),i=$(this);"mobile"!=n&&"tablet"!=n||(t.preventDefault(),i.parent("li").hasClass("selected")?i.parent("li").removeClass("selected"):(r.find(".has-children.selected").removeClass("selected"),u.removeClass("selected"),i.parent("li").addClass("selected")))}),u.children("a").on("click",function(t){var n=e();$(this);"desktop"==n&&(t.preventDefault(),u.toggleClass("selected"),r.find(".has-children.selected").removeClass("selected"))}),$(document).on("click",function(e){$(e.target).is(".has-children a")||(r.find(".has-children.selected").removeClass("selected"),u.removeClass("selected"))}),r.children("ul").menuAim({activate:function(e){$(e).addClass("hover")},deactivate:function(e){$(e).removeClass("hover")},exitMenu:function(){return r.find(".hover").removeClass("hover"),!0},submenuSelector:".has-children"})}),function(e){function t(t){void 0==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t});try{var n=(new DOMParser).parseFromString(t,"text/xml");if(!e.isXMLDoc(n))throw"Unable to parse XML";var i=e("parsererror",n);if(1==i.length)throw"Error: "+e(n).text();return n}catch(s){var o=void 0==s.name?s:s.name+": "+s.message;return void e(document).trigger("xmlParseError",[o])}}function n(t,n,i){(t.context?e(t.context):e.event).trigger(n,i)}function i(t,n){var s=!0;return"string"==typeof n?e.isFunction(t.test)?t.test(n):t==n:(e.each(t,function(o){return void 0===n[o]?s=!1:void("object"==typeof n[o]&&null!==n[o]?(s&&e.isArray(n[o])&&(s=e.isArray(t[o])&&n[o].length===t[o].length),s=s&&i(t[o],n[o])):s=t[o]&&e.isFunction(t[o].test)?s&&t[o].test(n[o]):s&&t[o]==n[o])}),s)}function s(t,n){return t[n]===e.mockjaxSettings[n]}function o(t,n){if(e.isFunction(t))return t(n);if(e.isFunction(t.url.test)){if(!t.url.test(n.url))return null}else{var s=t.url.indexOf("*");if(t.url!==n.url&&s===-1||!new RegExp(t.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(n.url))return null}return!t.data||n.data&&i(t.data,n.data)?t&&t.type&&t.type.toLowerCase()!=n.type.toLowerCase()?null:t:null}function a(n,i,o){var a=function(s){return function(){return function(){var s;this.status=n.status,this.statusText=n.statusText,this.readyState=4,e.isFunction(n.response)&&n.response(o),"json"==i.dataType&&"object"==typeof n.responseText?this.responseText=JSON.stringify(n.responseText):"xml"==i.dataType?"string"==typeof n.responseXML?(this.responseXML=t(n.responseXML),this.responseText=n.responseXML):this.responseXML=n.responseXML:this.responseText=n.responseText,"number"!=typeof n.status&&"string"!=typeof n.status||(this.status=n.status),"string"==typeof n.statusText&&(this.statusText=n.statusText),s=this.onreadystatechange||this.onload,e.isFunction(s)?(n.isTimeout&&(this.status=-1),s.call(this,n.isTimeout?"timeout":void 0)):n.isTimeout&&(this.status=-1)}.apply(s)}}(this);n.proxy?m({global:!1,url:n.proxy,type:n.proxyType,data:n.data,dataType:"script"===i.dataType?"text/plain":i.dataType,complete:function(e){n.responseXML=e.responseXML,n.responseText=e.responseText,s(n,"status")&&(n.status=e.status),s(n,"statusText")&&(n.statusText=e.statusText),this.responseTimer=setTimeout(a,n.responseTime||0)}}):i.async===!1?a():this.responseTimer=setTimeout(a,n.responseTime||50)}function r(t,n,i,s){return t=e.extend(!0,{},e.mockjaxSettings,t),
"undefined"==typeof t.headers&&(t.headers={}),t.contentType&&(t.headers["content-type"]=t.contentType),{status:t.status,statusText:t.statusText,readyState:1,open:function(){},send:function(){s.fired=!0,a.call(this,t,n,i)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(e,n){t.headers[e]=n},getResponseHeader:function(e){return t.headers&&t.headers[e]?t.headers[e]:"last-modified"==e.toLowerCase()?t.lastModified||(new Date).toString():"etag"==e.toLowerCase()?t.etag||"":"content-type"==e.toLowerCase()?t.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var n="";return e.each(t.headers,function(e,t){n+=e+": "+t+"\n"}),n}}}function l(e,t,n){if(c(e),e.dataType="json",e.data&&b.test(e.data)||b.test(e.url)){u(e,t,n);var i=/^(\w+:)?\/\/([^\/?#]+)/,s=i.exec(e.url),o=s&&(s[1]&&s[1]!==location.protocol||s[2]!==location.host);if(e.dataType="script","GET"===e.type.toUpperCase()&&o){var a=d(e,t,n);return!a||a}}return null}function c(e){"GET"===e.type.toUpperCase()?b.test(e.url)||(e.url+=(/\?/.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?"):e.data&&b.test(e.data)||(e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?")}function d(t,n,i){var s=i&&i.context||t,o=null;return n.response&&e.isFunction(n.response)?n.response(i):"object"==typeof n.responseText?e.globalEval("("+JSON.stringify(n.responseText)+")"):e.globalEval("("+n.responseText+")"),h(t,s,n),p(t,s,n),e.Deferred&&(o=new e.Deferred,"object"==typeof n.responseText?o.resolveWith(s,[n.responseText]):o.resolveWith(s,[e.parseJSON(n.responseText)])),o}function u(e,t,n){var i=n&&n.context||e,s=e.jsonpCallback||"jsonp"+_++;e.data&&(e.data=(e.data+"").replace(b,"="+s+"$1")),e.url=e.url.replace(b,"="+s+"$1"),window[s]=window[s]||function(n){data=n,h(e,i,t),p(e,i,t),window[s]=void 0;try{delete window[s]}catch(o){}head&&head.removeChild(script)}}function h(e,t,i){e.success&&e.success.call(t,i.responseText||"",status,{}),e.global&&n(e,"ajaxSuccess",[{},e])}function p(t,i){t.complete&&t.complete.call(i,{},status),t.global&&n("ajaxComplete",[{},t]),t.global&&!--e.active&&e.event.trigger("ajaxStop")}function f(t,n){var i,s,a;"object"==typeof t?(n=t,t=void 0):(n=n||{},n.url=t),s=e.extend(!0,{},e.ajaxSettings,n);for(var c=0;c<v.length;c++)if(v[c]&&(a=o(v[c],s)))return y.push(s),e.mockjaxSettings.log(a,s),s.dataType&&"JSONP"===s.dataType.toUpperCase()&&(i=l(s,a,n))?i:(a.cache=s.cache,a.timeout=s.timeout,a.global=s.global,g(a,n),function(t,n,s,o){i=m.call(e,e.extend(!0,{},s,{xhr:function(){return r(t,n,s,o)}}))}(a,s,n,v[c]),i);if(e.mockjaxSettings.throwUnmocked===!0)throw"AJAX not mocked: "+n.url;return m.apply(e,[n])}function g(e,t){if(e.url instanceof RegExp&&e.hasOwnProperty("urlParams")){var n=e.url.exec(t.url);if(1!==n.length){n.shift();var i=0,s=n.length,o=e.urlParams.length,a=Math.min(s,o),r={};for(i;i<a;i++){var l=e.urlParams[i];r[l]=n[i]}t.urlParams=r}}}var m=e.ajax,v=[],y=[],b=/=\?(&|$)/,_=(new Date).getTime();e.extend({ajax:f}),e.mockjaxSettings={log:function(t,n){if(t.logging!==!1&&("undefined"!=typeof t.logging||e.mockjaxSettings.logging!==!1)&&window.console&&console.log){var i="MOCK "+n.type.toUpperCase()+": "+n.url,s=e.extend({},n);if("function"==typeof console.log)console.log(i,s);else try{console.log(i+" "+JSON.stringify(s))}catch(o){console.log(i)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,throwUnmocked:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},e.mockjax=function(e){var t=v.length;return v[t]=e,t},e.mockjaxClear=function(e){1==arguments.length?v[e]=null:v=[],y=[]},e.mockjax.handler=function(e){if(1==arguments.length)return v[e]},e.mockjax.mockedAjaxCalls=function(){return y}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(e){"use strict";function t(n,i){var s=function(){},o=this,a={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:s,onSearchComplete:s,onSearchError:s,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return e.value.toLowerCase().indexOf(n)!==-1},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};o.element=n,o.el=e(n),o.suggestions=[],o.badQueries=[],o.selectedIndex=-1,o.currentValue=o.element.value,o.intervalId=0,o.cachedResponse={},o.onChangeInterval=null,o.onChange=null,o.isLocal=!1,o.suggestionsContainer=null,o.noSuggestionsContainer=null,o.options=e.extend({},a,i),o.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},o.hint=null,o.hintValue="",o.selection=null,o.initialize(),o.setOptions(i)}var n=function(){return{escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}}}(),i={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};t.utils=n,e.Autocomplete=t,t.formatResult=function(e,t){if(!t)return e.value;var i="("+n.escapeRegExChars(t)+")";return e.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},t.prototype={killerFn:null,initialize:function(){var n,i=this,s="."+i.classes.suggestion,o=i.classes.selected,a=i.options;i.element.setAttribute("autocomplete","off"),i.killerFn=function(t){0===e(t.target).closest("."+i.options.containerClass).length&&(i.killSuggestions(),i.disableKillerFn())},i.noSuggestionsContainer=e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),i.suggestionsContainer=t.utils.createNode(a.containerClass),n=e(i.suggestionsContainer),n.appendTo(a.appendTo),"auto"!==a.width&&n.width(a.width),n.on("mouseover.autocomplete",s,function(){i.activate(e(this).data("index"))}),n.on("mouseout.autocomplete",function(){i.selectedIndex=-1,n.children("."+o).removeClass(o)}),n.on("click.autocomplete",s,function(){i.select(e(this).data("index"))}),i.fixPositionCapture=function(){i.visible&&i.fixPosition()},e(window).on("resize.autocomplete",i.fixPositionCapture),i.el.on("keydown.autocomplete",function(e){i.onKeyPress(e)}),i.el.on("keyup.autocomplete",function(e){i.onKeyUp(e)}),i.el.on("blur.autocomplete",function(){i.onBlur()}),i.el.on("focus.autocomplete",function(){i.onFocus()}),i.el.on("change.autocomplete",function(e){i.onKeyUp(e)}),i.el.on("input.autocomplete",function(e){i.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),e.el.val().length>=e.options.minChars&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var n=this,i=n.options;e.extend(i,t),n.isLocal=e.isArray(i.lookup),n.isLocal&&(i.lookup=n.verifySuggestionsFormat(i.lookup)),i.orientation=n.validateOrientation(i.orientation,"bottom"),e(n.suggestionsContainer).css({"max-height":i.maxHeight+"px",width:i.width+"px","z-index":i.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,n=e(t.suggestionsContainer),i=n.parent().get(0);if(i===document.body||t.options.forceFixPosition){var s=t.options.orientation,o=n.outerHeight(),a=t.el.outerHeight(),r=t.el.offset(),l={top:r.top,left:r.left};if("auto"===s){var c=e(window).height(),d=e(window).scrollTop(),u=-d+r.top-o,h=d+c-(r.top+a+o);s=Math.max(u,h)===u?"top":"bottom"}if("top"===s?l.top+=-o:l.top+=a,i!==document.body){var p,f=n.css("opacity");t.visible||n.css("opacity",0).show(),p=n.offsetParent().offset(),l.top-=p.top,l.left-=p.left,t.visible||n.css("opacity",f).hide()}"auto"===t.options.width&&(l.width=t.el.outerWidth()-2+"px"),n.css(l)}},enableKillerFn:function(){var t=this;e(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;e(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this,n=t.el.val().length,i=t.element.selectionStart;return"number"==typeof i?i===n:!document.selection||(e=document.selection.createRange(),e.moveStart("character",-n),n===e.text.length)},onKeyPress:function(e){var t=this;if(!t.disabled&&!t.visible&&e.which===i.DOWN&&t.currentValue)return void t.suggest();if(!t.disabled&&t.visible){switch(e.which){case i.ESC:t.el.val(t.currentValue),t.hide();break;case i.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case i.TAB:if(t.hint&&t.options.onHint)return void t.selectHint();if(t.selectedIndex===-1)return void t.hide();if(t.select(t.selectedIndex),t.options.tabDisabled===!1)return;break;case i.RETURN:if(t.selectedIndex===-1)return void t.hide();t.select(t.selectedIndex);break;case i.UP:t.moveUp();break;case i.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case i.UP:case i.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t=this,n=t.options,i=t.el.val(),s=t.getQuery(i);return t.selection&&t.currentValue!==s&&(t.selection=null,(n.onInvalidateSelection||e.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=i,t.selectedIndex=-1,n.triggerSelectOnValidInput&&t.isExactMatch(s)?void t.select(0):void(s.length<n.minChars?t.hide():t.getSuggestions(s))},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(t){var n,i=this.options.delimiter;return i?(n=t.split(i),e.trim(n[n.length-1])):t},getSuggestionsLocal:function(t){var n,i=this,s=i.options,o=t.toLowerCase(),a=s.lookupFilter,r=parseInt(s.lookupLimit,10);return n={suggestions:e.grep(s.lookup,function(e){return a(e,t,o)})},r&&n.suggestions.length>r&&(n.suggestions=n.suggestions.slice(0,r)),n},getSuggestions:function(t){var n,i,s,o,a=this,r=a.options,l=r.serviceUrl;if(r.params[r.paramName]=t,i=r.ignoreParams?null:r.params,r.onSearchStart.call(a.element,r.params)!==!1){if(e.isFunction(r.lookup))return void r.lookup(t,function(e){a.suggestions=e.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,e.suggestions)});a.isLocal?n=a.getSuggestionsLocal(t):(e.isFunction(l)&&(l=l.call(a.element,t)),s=l+"?"+e.param(i||{}),n=a.cachedResponse[s]),n&&e.isArray(n.suggestions)?(a.suggestions=n.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,n.suggestions)):a.isBadQuery(t)?r.onSearchComplete.call(a.element,t,[]):(a.abortAjax(),o={url:l,data:i,type:r.type,dataType:r.dataType},e.extend(o,r.ajaxSettings),a.currentRequest=e.ajax(o).done(function(e){var n;a.currentRequest=null,n=r.transformResult(e,t),a.processResponse(n,t,s),r.onSearchComplete.call(a.element,t,n.suggestions)}).fail(function(e,n,i){r.onSearchError.call(a.element,t,e,n,i)}))}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,n=t.length;n--;)if(0===e.indexOf(t[n]))return!0;return!1},hide:function(){var t=this,n=e(t.suggestionsContainer);e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,n),t.visible=!1,t.selectedIndex=-1,clearInterval(t.onChangeInterval),e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var t,n=this,i=n.options,s=i.groupBy,o=i.formatResult,a=n.getQuery(n.currentValue),r=n.classes.suggestion,l=n.classes.selected,c=e(n.suggestionsContainer),d=e(n.noSuggestionsContainer),u=i.beforeRender,h="",p=function(e,n){var i=e.data[s];return t===i?"":(t=i,'<div class="autocomplete-group"><strong>'+t+"</strong></div>")};return i.triggerSelectOnValidInput&&n.isExactMatch(a)?void n.select(0):(e.each(n.suggestions,function(e,t){s&&(h+=p(t,a,e)),h+='<div class="'+r+'" data-index="'+e+'">'+o(t,a)+"</div>"}),this.adjustContainerWidth(),d.detach(),c.html(h),e.isFunction(u)&&u.call(n.element,c),n.fixPosition(),c.show(),i.autoSelectFirst&&(n.selectedIndex=0,c.scrollTop(0),c.children("."+r).first().addClass(l)),n.visible=!0,void n.findBestHint())},noSuggestions:function(){var t=this,n=e(t.suggestionsContainer),i=e(t.noSuggestionsContainer);this.adjustContainerWidth(),i.detach(),n.empty(),n.append(i),t.fixPosition(),n.show(),t.visible=!0},adjustContainerWidth:function(){var t,n=this,i=n.options,s=e(n.suggestionsContainer);"auto"===i.width&&(t=n.el.outerWidth()-2,s.width(t>0?t:300))},findBestHint:function(){var t=this,n=t.el.val().toLowerCase(),i=null;n&&(e.each(t.suggestions,function(e,t){var s=0===t.value.toLowerCase().indexOf(n);return s&&(i=t),!s}),t.signalHint(i))},signalHint:function(t){var n="",i=this;t&&(n=i.currentValue+t.value.substr(i.currentValue.length)),i.hintValue!==n&&(i.hintValue=n,i.hint=t,(this.options.onHint||e.noop)(n))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},validateOrientation:function(t,n){return t=e.trim(t||"").toLowerCase(),e.inArray(t,["auto","bottom","top"])===-1&&(t=n),t},processResponse:function(e,t,n){var i=this,s=i.options;e.suggestions=i.verifySuggestionsFormat(e.suggestions),s.noCache||(i.cachedResponse[n]=e,s.preventBadQueries&&0===e.suggestions.length&&i.badQueries.push(t)),t===i.getQuery(i.currentValue)&&(i.suggestions=e.suggestions,i.suggest())},activate:function(t){var n,i=this,s=i.classes.selected,o=e(i.suggestionsContainer),a=o.find("."+i.classes.suggestion);return o.find("."+s).removeClass(s),i.selectedIndex=t,i.selectedIndex!==-1&&a.length>i.selectedIndex?(n=a.get(i.selectedIndex),e(n).addClass(s),n):null},selectHint:function(){var t=this,n=e.inArray(t.hint,t.suggestions);t.select(n)},select:function(e){var t=this;t.hide(),t.onSelect(e)},moveUp:function(){var t=this;if(t.selectedIndex!==-1)return 0===t.selectedIndex?(e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var n=this,i=n.activate(t);if(i){var s,o,a,r=e(i).outerHeight();s=i.offsetTop,o=e(n.suggestionsContainer).scrollTop(),a=o+n.options.maxHeight-r,s<o?e(n.suggestionsContainer).scrollTop(s):s>a&&e(n.suggestionsContainer).scrollTop(s-n.options.maxHeight+r),n.options.preserveInput||n.el.val(n.getValue(n.suggestions[t].value)),n.signalHint(null)}},onSelect:function(t){var n=this,i=n.options.onSelect,s=n.suggestions[t];n.currentValue=n.getValue(s.value),n.currentValue===n.el.val()||n.options.preserveInput||n.el.val(n.currentValue),n.signalHint(null),n.suggestions=[],n.selection=s,e.isFunction(i)&&i.call(n.element,s)},getValue:function(e){var t,n,i=this,s=i.options.delimiter;return s?(t=i.currentValue,n=t.split(s),1===n.length?e:t.substr(0,t.length-n[n.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=e.fn.devbridgeAutocomplete=function(n,i){var s="autocomplete";return 0===arguments.length?this.first().data(s):this.each(function(){var o=e(this),a=o.data(s);"string"==typeof n?a&&"function"==typeof a[n]&&a[n](i):(a&&a.dispose&&a.dispose(),a=new t(this,n),o.data(s,a))})}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,i;!function(t){function s(e,t){return _.call(e,t)}function o(e,t){var n,i,s,o,a,r,l,c,d,u,h,p=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&w.test(e[a])&&(e[a]=e[a].replace(w,"")),e=p.slice(0,p.length-1).concat(e),d=0;d<e.length;d+=1)if(h=e[d],"."===h)e.splice(d,1),d-=1;else if(".."===h){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||g)&&f){for(n=e.split("/"),d=n.length;d>0;d-=1){if(i=n.slice(0,d).join("/"),p)for(u=p.length;u>0;u-=1)if(s=f[p.slice(0,u).join("/")],s&&(s=s[i])){o=s,r=d;break}if(o)break;!l&&g&&g[i]&&(l=g[i],c=d)}!o&&l&&(o=l,r=c),o&&(n.splice(0,r,o),e=n.join("/"))}return e}function a(e,n){return function(){var i=x.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),p.apply(t,i.concat([e,n]))}}function r(e){return function(t){return o(t,e)}}function l(e){return function(t){m[e]=t}}function c(e){if(s(v,e)){var n=v[e];delete v[e],b[e]=!0,h.apply(t,n)}if(!s(m,e)&&!s(b,e))throw new Error("No "+e);return m[e]}function d(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return y&&y.config&&y.config[e]||{}}}var h,p,f,g,m={},v={},y={},b={},_=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;f=function(e,t){var n,i=d(e),s=i[0];return e=i[1],s&&(s=o(s,t),n=c(s)),s?e=n&&n.normalize?n.normalize(e,r(t)):o(e,t):(e=o(e,t),i=d(e),s=i[0],e=i[1],s&&(n=c(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:n}},g={require:function(e){return a(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},h=function(e,n,i,o){var r,d,u,h,p,y,_=[],x=typeof i;if(o=o||e,"undefined"===x||"function"===x){for(n=!n.length&&i.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(h=f(n[p],o),d=h.f,"require"===d)_[p]=g.require(e);else if("exports"===d)_[p]=g.exports(e),y=!0;else if("module"===d)r=_[p]=g.module(e);else if(s(m,d)||s(v,d)||s(b,d))_[p]=c(d);else{if(!h.p)throw new Error(e+" missing "+d);h.p.load(h.n,a(o,!0),l(d),{}),_[p]=m[d]}u=i?i.apply(m[e],_):void 0,e&&(r&&r.exports!==t&&r.exports!==m[e]?m[e]=r.exports:u===t&&y||(m[e]=u))}else e&&(m[e]=i)},e=n=p=function(e,n,i,s,o){if("string"==typeof e)return g[e]?g[e](n):c(f(e,n).f);if(!e.splice){if(y=e,y.deps&&p(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=s,s=o),s?h(t,e,n,i):setTimeout(function(){h(t,e,n,i)},4),p},p.config=function(e){return p(e)},e._defined=m,i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),s(m,e)||s(v,e)||(v[e]=[e,t,n])},i.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t){var s=t[i];"function"==typeof s&&"constructor"!==i&&n.push(i)}return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var s in t)i.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,s=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),s=n.prototype.constructor),s.apply(this,arguments)}function s(){this.constructor=i}var o=t(n),a=t(e);n.displayName=e.displayName,i.prototype=new s;for(var r=0;r<a.length;r++){var l=a[r];i.prototype[l]=e.prototype[l]}for(var c=(function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var s=n.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,t),s.apply(this,arguments)}}),d=0;d<o.length;d++){var u=o[d];i.prototype[u]=c(u)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;i>n;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;e>n;n++){var i=Math.floor(36*Math.random());t+=i.toString(36)}return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var s=0;s<n.length;s++){var o=n[s];o=o.substring(0,1).toLowerCase()+o.substring(1),o in i||(i[o]={}),s==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),s=n.style.overflowX,o=n.style.overflowY;return(s!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===s||"scroll"===o||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),s=this.options.get("translations").get(t.message);i.append(n(s(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],s=this.option(i);t.push(s)}this.$results.append(t)},n.prototype.position=function(e,t){var n=t.find(".select2-results");n.append(e)},n.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()}),s=t.$results.find(".select2-results__option[aria-selected]");s.each(function(){var t=e(this),n=e.data(this,"data"),s=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(s,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var s in i){var o=i[s];n.setAttribute(s,o)}if(t.children){var a=e(n),r=document.createElement("strong");r.className="select2-results__group",e(r),this.template(t,r);for(var l=[],c=0;c<t.children.length;c++){var d=t.children[c],u=this.option(d);l.push(u)}var h=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(l),a.append(r),a.append(h)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var i=this,s=t.id+"-results";this.$results.attr("id",s),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=i.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var s=n-1;0===e.length&&(s=0);var o=t.eq(s);o.trigger("mouseenter");var a=i.$results.offset().top,r=o.offset().top,l=i.$results.scrollTop()+(r-a);0===s?i.$results.scrollTop(0):0>r-a&&i.$results.scrollTop(l)}}),t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e),s=n+1;if(!(s>=t.length)){var o=t.eq(s);o.trigger("mouseenter");var a=i.$results.offset().top+i.$results.outerHeight(!1),r=o.offset().top+o.outerHeight(!1),l=i.$results.scrollTop()+r-a;0===s?i.$results.scrollTop(0):r>a&&i.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){i.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,s=e.deltaY>0&&t-e.deltaY<=0,o=e.deltaY<0&&n<=i.$results.height();s?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),s=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:s}):i.trigger("close",{})):void i.trigger("select",{originalEvent:t,data:s})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),n=t.index(e),i=this.$results.offset().top,s=e.offset().top,o=this.$results.scrollTop()+(s-i),a=s-i;o-=2*e.outerHeight(!1),2>=n?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),s=this.options.get("escapeMarkup"),o=i(t,n);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=s(o):e(n).append(o)},n}),t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e,t){var i=this,s=(e.id+"-container",e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",s),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),i=n.closest(".select2"),s=e(".select2.select2-container--open");s.each(function(){var t=e(this);if(this!=i[0]){var n=t.data("element");n.select2("close")}})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){var n=t.find(".selection");n.append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.");
},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function s(){s.__super__.constructor.apply(this,arguments)}return n.Extend(s,t),s.prototype.render=function(){var e=s.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},s.prototype.bind=function(e,t){var n=this;s.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()}),e.on("selection:update",function(e){n.update(e.data)})},s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},s.prototype.display=function(e,t){var n=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(n(e,t))},s.prototype.selectionContainer=function(){return e("<span></span>")},s.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)},s}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,n){var s=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){s.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!s.options.get("disabled")){var n=e(this),i=n.parent(),o=i.data("data");s.trigger("unselect",{originalEvent:t,data:o})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(n(e,t))},i.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var s=e[i],o=this.selectionContainer(),a=this.display(s,o);o.append(a),o.prop("title",s.title||s.text),o.data("data",s),t.push(o)}var r=this.$selection.find(".select2-selection__rendered");n.appendMany(r,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id,i=t.length>1;if(i||n)return e.call(this,t);this.clear();var s=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(s)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),s=0;s<i.length;s++){var o={data:i[s]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||(n.which==t.DELETE||n.which==t.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,t,i){var s=this;e.call(this,t,i),t.on("open",function(){s.$search.trigger("focus")}),t.on("close",function(){s.$search.val(""),s.$search.removeAttr("aria-activedescendant"),s.$search.trigger("focus")}),t.on("enable",function(){s.$search.prop("disabled",!1),s._transferTabIndex()}),t.on("disable",function(){s.$search.prop("disabled",!0)}),t.on("focus",function(e){s.$search.trigger("focus")}),t.on("results:focus",function(e){s.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){s.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){s._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===n.BACKSPACE&&""===s.$search.val()){var i=s.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var o=i.data("data");s.searchRemoveChoice(o),e.preventDefault()}}});var o=document.documentMode,a=o&&11>=o;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return a?void s.$selection.off("input.search input.searchcheck"):void s.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(a&&"input"===e.type)return void s.$selection.off("input.search input.searchcheck");var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&s.handleSearch(e)})},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=.75*t+"em"}this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var s=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,o)){n=n||{};var i=e.Event("select2:"+t,{params:n});s.$element.trigger(i),-1!==e.inArray(t,a)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return e}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),i+=null!=n.id?"-"+n.id.toString():"-"+e.generateChars(4)},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),s=i.item(e);t.push(s)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var s=[];e=[e],e.push.apply(e,i);for(var o=0;o<e.length;o++){var a=e[o].id;-1===n.inArray(a,s)&&s.push(a)}t.$element.val(s),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple"))return e.selected=!1,n(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(i){for(var s=[],o=0;o<i.length;o++){var a=i[o].id;a!==e.id&&-1===n.inArray(a,s)&&s.push(a)}t.$element.val(s),t.$element.trigger("change")})},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],s=this,o=this.$element.children();o.each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var o=s.item(t),a=s.matches(e,o);null!==a&&i.push(a)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),s=this._normalizeItem(e);return s.element=t,n.data(t,"data",s),i},i.prototype.item=function(e){var t={};if(t=n.data(e[0],"data"),null!=t)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),s=[],o=0;o<i.length;o++){var a=n(i[o]),r=this.item(a);s.push(r)}t.children=s}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){var n=this.options.get("matcher");return n(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){function i(e){return function(){return n(this).val()==e.id}}for(var s=this,o=this.$element.find("option"),a=o.map(function(){return s.item(n(this)).id}).get(),r=[],l=0;l<e.length;l++){var c=this._normalizeItem(e[l]);if(n.inArray(c.id,a)>=0){var d=o.filter(i(c)),u=this.item(d),h=n.extend(!0,{},c,u),p=this.option(h);d.replaceWith(p)}else{var f=this.option(c);if(c.children){var g=this.convertToOptions(c.children);t.appendMany(f,g)}r.push(f)}}return r},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var s=n.ajax(e);return s.then(t),s.fail(i),s}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=o.transport(o,function(i){var o=s.processResults(i,e);s.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(o)},function(){i.status&&"0"===i.status||s.trigger("results:message",{message:"errorLoading"})});s._request=i}var s=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var s=i.get("tags"),o=i.get("createTag");void 0!==o&&(this.createTag=o);var a=i.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,n,i),e.isArray(s))for(var r=0;r<s.length;r++){var l=s[r],c=this._normalizeItem(l),d=this.option(c);this.$element.append(d)}}return t.prototype.query=function(e,t,n){function i(e,o){for(var a=e.results,r=0;r<a.length;r++){var l=a[r],c=null!=l.children&&!i({results:l.children},!0),d=l.text===t.term;if(d||c)return!o&&(e.data=a,void n(e))}if(o)return!0;var u=s.createTag(t);if(null!=u){var h=s.option(u);h.attr("data-select2-tag",!0),s.addOptions([h]),s.insertTag(a,u)}e.results=a,n(e)}var s=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,n):void e.call(this,t,i)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){var n=(this._lastTag,this.$element.find("option[data-select2-tag]"));n.each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){function s(t){var n=a._normalizeItem(t),i=a.$element.find("option").filter(function(){return e(this).val()===n.id});if(!i.length){var s=a.option(n);s.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([s])}o(n)}function o(e){a.trigger("select",{data:e})}var a=this;n.term=n.term||"";var r=this.tokenizer(n,this.options,s);r.term!==n.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),n.term=r.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,s){for(var o=i.get("tokenSeparators")||[],a=n.term,r=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};r<a.length;){var c=a[r];if(-1!==e.inArray(c,o)){var d=a.substr(0,r),u=e.extend({},n,{term:d}),h=l(u);null!=h?(s(h),a=a.substr(r+1)||"",r=0):r++}else r++}return{term:a}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(s){var o=null!=s?s.length:0;return i.maximumSelectionLength>0&&o>=i.maximumSelectionLength?void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):void e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var s=this;t.call(this,n,i),this.$search.on("keydown",function(e){s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){s.handleSearch(e)}),n.on("open",function(){s.$search.attr("tabindex",0),s.$search.focus(),window.setTimeout(function(){s.$search.focus()},0)}),n.on("close",function(){s.$search.attr("tabindex",-1),s.$search.val("")}),n.on("focus",function(){n.isOpen()&&s.$search.focus()}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){var t=s.showSearch(e);t?s.$searchContainer.removeClass("select2-search--hide"):s.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var s=t[i];this.placeholder.id===s.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var s=this;t.call(this,n,i),n.on("query",function(e){s.lastParams=e,s.loading=!0}),n.on("query:append",function(e){s.lastParams=e,s.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,s.$loadingMore[0]);if(!s.loading&&t){var n=s.$results.offset().top+s.$results.outerHeight(!1),i=s.$loadingMore.offset().top+s.$loadingMore.outerHeight(!1);n+50>=i&&s.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,s=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),s||(s=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var s=this,o="scroll.select2."+i.id,a="resize.select2."+i.id,r="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(o,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(o+" "+a+" "+r,function(e){s._positionDropdown(),s._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var s="scroll.select2."+i.id,o="resize.select2."+i.id,a="orientationchange.select2."+i.id,r=this.$container.parents().filter(t.hasScroll);r.off(s),e(window).off(s+" "+o+" "+a)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),s=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=o.top,a.bottom=o.top+a.height;var r={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},c=l.top<o.top-r.height,d=l.bottom>o.bottom+r.height,u={left:o.left,top:a.bottom},h=this.$dropdownParent;"static"===h.css("position")&&(h=h.offsetParent());var p=h.offset();u.top-=p.top,u.left-=p.left,n||i||(s="below"),d||!c||n?!c&&d&&n&&(s="below"):s="above",("above"==s||n&&"below"!==s)&&(u.top=a.top-p.top-r.height),null!=s&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)),this.$dropdownContainer.css(u)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var s=t[i];s.children?n+=e(s.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),
e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var s=i.data("data");null!=s.element&&s.element.selected||null==s.element&&s.selected||this.trigger("select",{data:s})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){var t=e.minimum-e.input.length,n="Please enter "+t+" or more characters";return n},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,s,o,a,r,l,c,d,u,h,p,f,g,m,v,y,b,_,x,w,$,C,k,D,S,A){function T(){this.reset()}T.prototype.apply=function(u){if(u=e.extend(!0,{},this.defaults,u),null==u.dataAdapter){if(null!=u.ajax?u.dataAdapter=f:null!=u.data?u.dataAdapter=p:u.dataAdapter=h,u.minimumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,b)),u.tags&&(u.dataAdapter=c.Decorate(u.dataAdapter,g)),(null!=u.tokenSeparators||null!=u.tokenizer)&&(u.dataAdapter=c.Decorate(u.dataAdapter,m)),null!=u.query){var A=t(u.amdBase+"compat/query");u.dataAdapter=c.Decorate(u.dataAdapter,A)}if(null!=u.initSelection){var T=t(u.amdBase+"compat/initSelection");u.dataAdapter=c.Decorate(u.dataAdapter,T)}}if(null==u.resultsAdapter&&(u.resultsAdapter=n,null!=u.ajax&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,$)),null!=u.placeholder&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,w)),u.selectOnClose&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,D))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=_;else{var j=c.Decorate(_,x);u.dropdownAdapter=j}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,k)),u.closeOnSelect&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,S)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var O=t(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=c.Decorate(u.dropdownAdapter,O)}u.dropdownAdapter=c.Decorate(u.dropdownAdapter,C)}if(null==u.selectionAdapter){if(u.multiple?u.selectionAdapter=s:u.selectionAdapter=i,null!=u.placeholder&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,o)),u.allowClear&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,a)),u.multiple&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,r)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var R=t(u.amdBase+"compat/containerCss");u.selectionAdapter=c.Decorate(u.selectionAdapter,R)}u.selectionAdapter=c.Decorate(u.selectionAdapter,l)}if("string"==typeof u.language)if(u.language.indexOf("-")>0){var I=u.language.split("-"),E=I[0];u.language=[u.language,E]}else u.language=[u.language];if(e.isArray(u.language)){var F=new d;u.language.push("en");for(var M=u.language,L=0;L<M.length;L++){var q=M[L],P={};try{P=d.loadPath(q)}catch(N){try{q=this.defaults.amdLanguageBase+q,P=d.loadPath(q)}catch(H){u.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+q+'" could not be automatically loaded. A fallback will be used instead.');continue}}F.extend(P)}u.translations=F}else{var z=d.loadPath(this.defaults.amdLanguageBase+"en"),B=new d(u.language);B.extend(z),u.translations=B}return u},T.prototype.reset=function(){function t(e){function t(e){return u[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(i,s){if(""===e.trim(i.term))return s;if(s.children&&s.children.length>0){for(var o=e.extend(!0,{},s),a=s.children.length-1;a>=0;a--){var r=s.children[a],l=n(i,r);null==l&&o.children.splice(a,1)}return o.children.length>0?o:n(i,o)}var c=t(s.text).toUpperCase(),d=t(i.term).toUpperCase();return c.indexOf(d)>-1?s:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:A,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},T.prototype.set=function(t,n){var i=e.camelCase(t),s={};s[i]=n;var o=c._convertData(s);e.extend(this.defaults,o)};var j=new T;return j}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function s(t,s){if(this.options=t,null!=s&&this.fromElement(s),this.options=n.apply(this.options),s&&s.is("input")){var o=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return s.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var s={};s=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var o=t.extend(!0,{},s);o=i._convertData(o);for(var a in o)t.inArray(a,n)>-1||(t.isPlainObject(this.options[a])?t.extend(this.options[a],o[a]):this.options[a]=o[a]);return this},s.prototype.get=function(e){return this.options[e]},s.prototype.set=function(e,t){this.options[e]=t},s}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var s=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),s.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var a=this.render();this._placeContainer(a);var r=this.options.get("selectionAdapter");this.selection=new r(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var c=this.options.get("resultsAdapter");this.results=new c(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){d.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(s,n.Observable),s.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},s.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},s.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var s=e.outerWidth(!1);return 0>=s?"auto":s+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var a=o.split(";"),r=0,l=a.length;l>r;r+=1){var c=a[r].replace(/\s/g,""),d=c.match(n);if(null!==d&&d.length>=1)return d[1]}return null}return t},s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},s.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},s.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},s.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,s){-1===e.inArray(i,n)&&t.trigger(i,s)})},s.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},s.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},s.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},s.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var s=0;s<t.addedNodes.length;s++){var o=t.addedNodes[s];o.selected&&(n=!0)}else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},s.prototype.trigger=function(e,t){var n=s.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var o=i[e],a={prevented:!1,name:e,args:t};if(n.call(this,o,a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},s.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},s.prototype.open=function(){this.isOpen()||this.trigger("query",{})},s.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},s.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},s.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},s.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},s.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},s.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},s.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},s.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},s.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},s}),t.define("select2/compat/utils",["jquery"],function(e){function t(t,n,i){var s,o,a=[];s=e.trim(t.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&a.push(this)})),s=e.trim(n.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(o=i(this),null!=o&&a.push(o))})),t.attr("class",a.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var s=i.call(this),o=this.options.get("containerCssClass")||"";e.isFunction(o)&&(o=o(this.$element));var a=this.options.get("adaptContainerCssClass");if(a=a||n,-1!==o.indexOf(":all:")){o=o.replace(":all:","");var r=a;a=function(e){var t=r(e);return null!=t?t+" "+e:e}}var l=this.options.get("containerCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(s,this.$element,a),s.css(l),s.addClass(o),s},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var s=i.call(this),o=this.options.get("dropdownCssClass")||"";e.isFunction(o)&&(o=o(this.$element));var a=this.options.get("adaptDropdownCssClass");if(a=a||n,-1!==o.indexOf(":all:")){o=o.replace(":all:","");var r=a;a=function(e){var t=r(e);return null!=t?t+" "+e:e}}var l=this.options.get("dropdownCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(s,this.$element,a),s.css(l),s.addClass(o),s},i}),t.define("select2/compat/initSelection",["jquery"],function(e){function t(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return t.prototype.current=function(t,n){var i=this;return this._isInitialized?void t.call(this,n):void this.initSelection.call(null,this.$element,function(t){i._isInitialized=!0,e.isArray(t)||(t=[t]),n(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(e){function t(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,n)}return t.prototype.current=function(t,n){function i(t,n){var s=[];return t.selected||-1!==e.inArray(t.id,n)?(t.selected=!0,s.push(t)):t.selected=!1,t.children&&s.push.apply(s,i(t.children,n)),s}for(var s=[],o=0;o<this._currentData.length;o++){var a=this._currentData[o];s.push.apply(s,i(a,this.$element.val().split(this._valueSeparator)))}n(s)},t.prototype.select=function(t,n){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+n.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(t){e.map(t,function(e){e.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change")},t.prototype.unselect=function(e,t){var n=this;t.selected=!1,this.current(function(e){for(var i=[],s=0;s<e.length;s++){var o=e[s];t.id!=o.id&&i.push(o.id)}n.$element.val(i.join(n._valueSeparator)),n.$element.trigger("change")})},t.prototype.query=function(e,t,n){for(var i=[],s=0;s<this._currentData.length;s++){var o=this._currentData[s],a=this.matches(t,o);null!==a&&i.push(a)}n({results:i})},t.prototype.addOptions=function(t,n){var i=e.map(n,function(t){return e.data(t[0],"data")});this._currentData.push.apply(this._currentData,i)},t}),t.define("select2/compat/matcher",["jquery"],function(e){function t(t){function n(n,i){var s=e.extend(!0,{},i);if(null==n.term||""===e.trim(n.term))return s;if(i.children){for(var o=i.children.length-1;o>=0;o--){var a=i.children[o],r=t(n.term,a.text,a);r||s.children.splice(o,1)}if(s.children.length>0)return s}return t(n.term,i.text,i)?s:null}return n}return t}),t.define("select2/compat/query",[],function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n;var i=this.options.get("query");i.call(null,t)},e}),t.define("select2/dropdown/attachContainer",[],function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){var i=n.find(".dropdown-wrapper");i.append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e}),t.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(i.join(" "),function(e){e.stopPropagation()})},e}),t.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(i.join(" "),function(e){e.stopPropagation()})},e}),function(n){"function"==typeof t.define&&t.define.amd?t.define("jquery-mousewheel",["jquery"],n):"object"==typeof exports?module.exports=n:n(e)}(function(e){function t(t){var a=t||window.event,r=l.call(arguments,1),c=0,u=0,h=0,p=0,f=0,g=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(h=-1*a.detail),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(u=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(u=-1*h,h=0),c=0===h?u:h,"deltaY"in a&&(h=-1*a.deltaY,c=h),"deltaX"in a&&(u=a.deltaX,0===h&&(c=-1*u)),0!==h||0!==u){if(1===a.deltaMode){var m=e.data(this,"mousewheel-line-height");c*=m,h*=m,u*=m}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,h*=v,u*=v}if(p=Math.max(Math.abs(h),Math.abs(u)),(!o||o>p)&&(o=p,i(a,p)&&(o/=40)),i(a,p)&&(c/=40,u/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/o),u=Math[u>=1?"floor":"ceil"](u/o),h=Math[h>=1?"floor":"ceil"](h/o),d.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=t.clientX-y.left,g=t.clientY-y.top}return t.deltaX=u,t.deltaY=h,t.deltaFactor=o,t.offsetX=f,t.offsetY=g,t.deltaMode=0,r.unshift(t,c,u,h),s&&clearTimeout(s),s=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function n(){o=null}function i(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var s,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=a.length;c;)e.event.fixHooks[a[--c]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=r.length;n;)this.addEventListener(r[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=r.length;n;)this.removeEventListener(r[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,i){if(null==e.fn.select2){var s=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"==typeof t)return this.each(function(){var i=e.extend(!0,{},t);new n(e(this),i)}),this;if("string"==typeof t){var i,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=n[t].apply(n,o)}),e.inArray(t,s)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),$(function(){$("input[name=d_from], input[name=d_to]").datepicker({dateFormat:"yyyy-mm-dd"}),$("form[name=categories-edit-stores] input[type=checkbox]").click(function(){var e=$(this),t=$("form[name=categories-edit-stores]");if(e.is(":checked")&&"0"!=e.attr("data-parent-id"))t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1).prop("checked",!0);else if(!e.is(":checked")&&"0"!=e.attr("data-parent-id")){var n=!0;t.find("input[data-parent-id="+e.attr("data-parent-id")+"]").each(function(){$(this).is(":checked")&&(n=!1)}),n&&t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1)}}),$(".select2-users").select2({ajax:{url:"/admin/users/list",type:"post",dataType:"json",delay:250,data:function(e){return{email:e.term}},processResults:function(e){return{results:e}},cache:!0},placeholder:"Выберите пользователя",minimumInputLength:1}),$(".input-datepicker").datepicker({dateFormat:"yyyy-mm-dd"}),$("#charity-checkbox-0").click(function(){var e=this.checked;Array.from(document.getElementsByClassName("charity-checkbox")).forEach(function(t){t.checked=e})}),$(".ajax-confirm").on("click",function(e){e.preventDefault(),$this=$(this),data={question:$this.data("question")||"Вы увуренны?",title:$this.data("title")||"Подтверждение действия",callbackYes:function(){$this=$(this),$.post("/admin/stores/import-cat/id:"+$this.data("store"),function(e){e.error?notification.notifi({message:e.error,type:"err"}):location.reload()},"json").fail(function(){notification.notifi({message:"Ошибка передачи данных",type:"err"})})},obj:$this},notification.confirm(data)})}),$(function(){$(".get_admitad").on("click",function(e){e.preventDefault(),href=this.href||"",$(".user_data").html(""),ad=$(".admitad_data"),ad.addClass("loading"),ad.removeClass("normal_load"),ad.text(""),tr=ad.closest("tr"),ids=[];for(var t=0;t<tr.length;t++)id=tr.eq(t).data("key"),id&&ids.push(id);return 0==ids.length?(ad.removeClass("loading"),void alert("Нет заказов для проверки")):($.post("/admin/payments/admitad-test",{ids:ids,update:href.indexOf("update")>0?1:0},function(e){ad=$(".admitad_data"),ad.text("данные не найдены"),ad.removeClass("loading"),tr=ad.closest("tr");for(var t=0;t<tr.length;t++){var n=tr.eq(t);if(id=n.data("key"),e[id]){tds=n.find(".admitad_data");for(var i=0;i<tds.length;i++){var s=tds.eq(i);key=s.data("col"),e[id][key]&&(s.html(e[id][key]),s.addClass("normal_load"))}}}e.user_data&&(user=e.user_data,user_data="<H2>Баланс пользователя "+user.email+" ("+user.uid+") обновлен</H2>",user_data+="<table class='table table-sum'>",user_data+="<tr>",user_data+="<th></th>",user_data+="<th>Старые данные</th>",user_data+="<th>Новые данные</th>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_pending+"</td>",user_data+="<td class='value'>"+user["new"].cnt_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_pending+"</td>",user_data+="<td class='value'>"+user["new"].sum_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_declined+"</td>",user_data+="<td class='value'>"+user["new"].cnt_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_declined+"</td>",user_data+="<td class='value'>"+user["new"].sum_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].cnt_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].sum_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Баланс (общий)</td>",user_data+="<td class='value'>"+user.old.balans+"</td>",user_data+="<td class='value'>"+user["new"].balans+"</td>",user_data+="</tr>",user_data+="</table>",$(".user_data").html(user_data))},"json").fail(function(){ad.removeClass("loading"),alert("Ошибка обработки запроса")}),!1)})});var megaslider=function(){function e(e){if(0!=e.length){e.wrap('<div class="select_img">'),e=e.parent(),e.append('<button type="button" class="file_button"><i class="mce-ico mce-i-browse"></i></button>');for(var t=0;t<e.length;t++){var n=e.eq(t).find("input");n.attr("id")||n.attr("id","file_"+t+"_"+Date.now());var i=n.attr("id");mihaildev.elFinder.register(i,function(e,t){return $("#"+t).val(e.url).change(),!0})}$(document).on("click",".file_button",function(){var e=$(this).prev(),t=e.attr("id");mihaildev.elFinder.openManager({url:"/manager/elfinder?filter=image&callback="+t+"&lang=ru",width:"auto",height:"auto",id:t})})}}function t(e){var t='<input class="'+(e.inputClass||"")+'" value="'+(e.value||"")+'">';if(e.label&&(t="<label><span>"+e.label+"</span>"+t+"</label>"),e.parent&&(t="<"+e.parent+">"+t+"</"+e.parent+">"),t=$(t),e.onChange){var n;e.bind?(e.bind.input=t.find("input"),n=e.onChange.bind(e.bind)):n=e.onChange.bind(t.find("input")),t.find("input").on("change",n)}return t}function n(e){var t=$("<select/>"),n=D[0][e.gr];e.index!==!1&&(n=n[e.index]),n[e.param]?e.value=n[e.param]:e.value=0,e.start_option&&t.append(e.start_option);for(var i=0;i<e.list.length;i++){var s,o=e.list[i];0==e.val_type?s=e.list[i]:1==e.val_type?s=i:2==e.val_type&&(s=i,o=e.val_list[i]);var a=s==e.value?"selected":"";"selected"==a&&t.attr("t_val",e.list[i]);var r='<option value="'+s+'" '+a+">"+o+"</option>";2==e.val_type&&(r=$(r).attr("code",e.list[i])),t.append(r)}if(t.on("change",function(){e=this;var t=e.el.val(),n=e.el.find("option[value="+t+"]"),i=n.text(),s=n.attr("code");
s||(s=i),e.index!==!1?D[0][e.gr][e.index][e.param]=t:D[0][e.gr][e.param]=t,e.obj.removeClass(e.prefix+e.el.attr("t_val")),e.obj.addClass(e.prefix+s),e.el.attr("t_val",s),$("textarea#slide_data").text(JSON.stringify(D[0]))}.bind({el:t,obj:e.obj,gr:e.gr,index:e.index,param:e.param,prefix:e.prefix||""})),e.parent){var l=$("<"+e.parent+"/>");return l.append(t),l}return t}function s(e){var t,i=[];return 0==e.type&&i.push("<span>Анимация появления</span>"),i.push(n({list:U,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"show_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Задержка появления</span>"),i.push(n({list:P,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"show_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(i.push("<br/>"),i.push("<span>Анимация исчезновения</span>")),i.push(n({list:V,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"hide_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Задержка исчезновения</span>"),i.push(n({list:N,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"hide_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(t=$('<div class="anim_sel"/>'),t.append(i)),1==e.type&&(t=i),t}function o(){$("#w1").remove(),$("#w1_button").remove(),D[0].mobile=D[0].mobile.split("?")[0];var i=$("#mega_slider_controle"),o=$('<div class="btn_box"/>');i.append("<h2>Управление</h2>"),i.append($("<textarea/>",{text:JSON.stringify(D[0]),id:"slide_data",name:x}));var l=$('<button class=""/>').text("Активировать слайд");o.append(l),l.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).addClass("slider-active"),$("#mega_slider .slide").eq(0).removeClass("hide_slide")});var l=$('<button class=""/>').text("Деактивировать слайд");o.append(l),l.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).removeClass("slider-active"),$("#mega_slider .slide").eq(0).addClass("hide_slide")}),i.append(o),i.append("<h2>Общие параметры</h2>"),i.append(t({value:D[0].mobile,label:"Слайд для телефона",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),D[0].mobile=$(this).val(),$(".mob_bg").eq(0).css("background-image","url("+D[0].mobile+")"),$("textarea#slide_data").text(JSON.stringify(D[0]))}})),i.append(t({value:D[0].fon,label:"Осноной фон",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),D[0].fon=$(this).val(),$("#mega_slider .slide").eq(0).css("background-image","url("+D[0].fon+")"),$("textarea#slide_data").text(JSON.stringify(D[0]))}}));var c=$('<div class="btns"/>');c.append("<h3>Кнопка перехода(для ПК версии)</h3>"),c.append(t({value:D[0].button.text,label:"Текст",onChange:function(e){e.preventDefault(),D[0].button.text=$(this).val(),$("#mega_slider .slider__href").eq(0).text(D[0].button.text),$("textarea#slide_data").text(JSON.stringify(D[0]))}}));var d=$("#mega_slider .slider__href").eq(0);c.append("<br/>"),c.append("<span>Оформление кнопки</span>"),c.append(n({list:B,val_type:0,obj:d,gr:"button",index:!1,param:"color"})),c.append("<br/>"),c.append("<span>Положение кнопки</span>"),c.append(n({list:L,val_list:q,val_type:2,obj:d.parent().parent(),gr:"button",index:!1,param:"pos"})),c.append(s({type:0,obj:d.parent(),gr:"button",index:!1})),i.append(c);var u=$('<div class="fixed_layer"/>');u.append("<h2>Статические слои</h2>");var h="<th>№</th><th>Картинка</th><th>Положение</th><th>Слой на всю высоту</th><th>Анимация появления</th><th>Задержка появления</th><th>Анимация исчезновения</th><th>Задержка исчезновения</th><th>Действие</th>";C=$('<table border="1"><tr>'+h+"</tr></table>");var p=D[0].fixed;if(p&&p.length>0)for(var f=0;f<p.length;f++)a(p[f]);u.append(C);var g=$("<button/>",{text:"Добавить слой"});g.on("click",function(t){t.preventDefault(),p=a(!1),e(p.editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:D})),u.append(g),i.append(u);var u=$('<div class="paralax_layer"/>');u.append("<h2>Паралакс слои</h2>");var h="<th>№</th><th>Картинка</th><th>Положение</th><th>Удаленность (целое положительное число)</th><th>Действие</th>";k=$('<table border="1"><tr>'+h+"</tr></table>");var p=D[0].paralax;if(p&&p.length>0)for(var f=0;f<p.length;f++)r(p[f]);u.append(k);var g=$("<button/>",{text:"Добавить слой"});g.on("click",function(t){t.preventDefault(),p=r(!1),e(p.editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:D})),u.append(g),i.append(u),e(i.find(".fileSelect"))}function a(e){var i=C.find("tr").length-1;if(!e){e={img:"",full_height:0,pos:0,show_delay:1,show_animation:"lightSpeedIn",hide_delay:1,hide_animation:"bounceOut"},D[0].fixed.push(e);var o=$("#mega_slider .fixed_group");u(e,o,!0)}var a=$("<tr/>");a.append('<td class="td_counter"/>'),a.append(t({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{gr:"fixed",index:i,param:"img",obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer")},onChange:function(e){e.preventDefault();var t=this;t.obj.css("background-image","url("+t.input.val()+")"),D[0].fixed[t.index].img=t.input.val(),$("textarea#slide_data").text(JSON.stringify(D[0]))}})),a.append(n({list:L,val_list:q,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"pos",parent:"td"})),a.append(n({list:z,val_list:H,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"full_height",parent:"td"})),a.append(s({type:1,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer"),gr:"fixed",index:i,parent:"td"}));var r=$("<button/>",{text:"Удалить"});r.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].fixed.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:r,slider_data:D}));var l=$("<td/>").append(r);return a.append(l),C.append(a),{editor:a,data:e}}function r(e){var i=k.find("tr").length-1;if(!e){e={img:"",z:1},D[0].paralax.push(e);var s=$("#mega_slider .parallax__group");d(e,s)}var o=$("<tr/>");o.append('<td class="td_counter"/>'),o.append(t({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span")},onChange:function(e){e.preventDefault();var t=this;t.obj.css("background-image","url("+t.input.val()+")"),D[0].paralax[t.index].img=t.input.val(),$("textarea#slide_data").text(JSON.stringify(D[0]))}})),o.append(n({list:L,val_list:q,val_type:2,obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span"),gr:"paralax",index:i,param:"pos",parent:"td",start_option:'<option value="" code="">на весь экран</option>'})),o.append(t({value:e.z,label:!1,parent:"td",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i)},onChange:function(e){e.preventDefault();var t=this;t.obj.attr("z",t.input.val()),D[0].paralax[t.index].z=t.input.val(),$("textarea#slide_data").text(JSON.stringify(D[0]))}}));var a=$("<button/>",{text:"Удалить"});a.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].paralax.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:a,slider_data:D}));var r=$("<td/>").append(a);return o.append(r),k.append(o),{editor:o,data:e}}function l(e,t){var n=$("<div/>",{"class":"animation_layer"});return"undefined"!=typeof t.show_delay&&(n.addClass(P[t.show_delay]),t.show_animation&&n.addClass("slide_"+t.show_animation)),"undefined"!=typeof t.hide_delay&&(n.addClass(N[t.hide_delay]),t.hide_animation&&n.addClass("slide_"+t.hide_animation)),e.append(n),e}function c(e){var t=$('<div class="slide"/>'),n=$('<a class="mob_bg" href="'+e.button.href+'"/>');if(n.css("background-image","url("+e.mobile+")"),t.append(n),R)return t;if(e.fon&&t.css("background-image","url("+e.fon+")"),e.paralax&&e.paralax.length>0){for(var i=$('<div class="parallax__group"/>'),s=0;s<e.paralax.length;s++)d(e.paralax[s],i);t.append(i)}for(var o=$('<div class="fixed_group"/>'),s=0;s<e.fixed.length;s++)u(e.fixed[s],o);var a=$("<div class='fixed__layer'/>");a.addClass(L[e.button.pos]);var r=$("<a class='slider__href'/>");return r.attr("href",e.button.href),r.text(e.button.text),r.addClass(e.button.color),a=l(a,e.button),a.find("div").append(r),o.append(a),t.append(o),t}function d(e,t){var n=$('<div class="parallax__layer">');n.attr("z",e.z||10*i);var s=$("<span class='slider__text'/>");e.pos&&s.addClass(L[e.pos]),s.css("background-image","url("+e.img+")"),n.append(s),t.append(n)}function u(e,t,n){var i=$("<div class='fixed__layer'/>");i.addClass(L[e.pos]),e.full_height&&i.addClass("fixed__full-height"),i=l(i,e),i.find(".animation_layer").css("background-image","url("+e.img+")"),n?t.find(".slider__href").closest(".fixed__layer").before(i):t.append(i)}function h(){if(!$("#mega_slider").hasClass("stop_slide")){var e=$(".slide_select_box .slide_select"),t=e.length,n=$(".slide_select_box .slider-active").index()+1;n>=t&&(n=0),e.eq(n).click(),setTimeout(h,M)}}function p(e){var t=$("<img/>");t.on("load",function(){y--,0==y&&(b.append(c(D[F])),_.find("li").eq(F).removeClass("disabled"),0==F&&(b.find(".slide").addClass("first_show").addClass("slider-active"),_.find("li").eq(0).addClass("slider-active"),x||setTimeout(function(){$(this).find(".first_show").removeClass("first_show")}.bind(b),5e3),R===!1&&(A=$(S+" .slider-active .parallax__group>*"),j=0,T=setInterval(v,100)),x?o():(w=setTimeout(h,M),$(".slide_select_box").on("click",".slide_select",function(){var e=$(this);if(!e.hasClass("slider-active")){var t=e.index();$(".slide_select_box .slider-active").removeClass("slider-active"),e.addClass("slider-active"),$(S+" .slide.slider-active").removeClass("slider-active"),$(S+" .slide").eq(t).addClass("slider-active"),A=$(S+" .slider-active .parallax__group>*")}}),$("#mega_slider").hover(function(){clearTimeout(w),$("#mega_slider").addClass("stop_slide")},function(){w=setTimeout(h,M),$("#mega_slider").removeClass("stop_slide")}))),F++,F<D.length&&f())}).on("error",function(){y--}),t.prop("src",e)}function f(){var e=D[F];if(y=1,R===!1){if(y++,p(e.fon),e.paralax&&e.paralax.length>0){y+=e.paralax.length;for(var t=0;t<e.paralax.length;t++)p(e.paralax[t].img)}if(e.fixed&&e.fixed.length>0){y+=e.fixed.length;for(var t=0;t<e.fixed.length;t++)p(e.fixed[t].img)}}p(e.mobile)}function g(e){function t(){var e=performance.now();if(i=$(this),e-=parseInt(i.attr("time")),e>I)R=!0;else{var t=screen.height>screen.width?screen.height:screen.width;R=t<E}1==R&&$(S).addClass("mobile_mode"),F=0,f()}var n=performance.now(),i=$("<img/>");i.attr("time",n),i.on("load",t()),D.length>0?(D[0].mobile=D[0].mobile+"?r="+Math.random(),i.prop("src",D[0].mobile)):t().bind(i)}function m(e,t){D=e,x=t;var n=$(S);n.html(""),b=$("<div/>",{"class":"slides"});var i=$("<div/>",{"class":"slide_control"});_=$("<ul/>",{"class":"slide_select_box"});var s='<div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>';n.html(s),g(e[0]);for(var o=0;o<e.length;o++)_.append('<li class="slide_select disabled"/>');n.append(b),i.append(_),n.append(i)}function v(){if(!A)return!1;for(var e=(j-10)/2,t=0;t<A.length;t++){var n=A.eq(t),i=n.attr("z"),s="rotate3d(0.1,0.8,0,"+e+"deg) scale("+(1+.5*i)+") translateZ(-"+(10+20*i)+"px)";n.css("transform",s)}j+=.1*O,j>=20&&(O=-O),j<=0&&(O=-O)}var y,b,_,x,w,C,k,D=!1,S="section#mega_slider",A=!1,T=!1,j=0,O=1,R=-1,I=300,E=700,F=0,M=5e3,L=["slider__text-lt","slider__text-ct","slider__text-rt","slider__text-lc","slider__text-cc","slider__text-rc","slider__text-lb","slider__text-cb","slider__text-rb"],q=["Лево верх","центр верх","право верх","Лево центр","центр","право центр","Лево низ","центр низ","право низ"],P=["show_no_delay","show_delay_05","show_delay_10","show_delay_15","show_delay_20","show_delay_25","show_delay_30"],N=["hide_no_delay","hide_delay_05","hide_delay_10","hide_delay_15","hide_delay_20"],H=["no","yes"],z=["","fixed__full-height"],B=["none","bordo"],U=["not_animate","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","fadeIn","fadeInDown","fadeInLeft","fadeInRight","fadeInUp","flipInX","flipInY","lightSpeedIn","rotateIn","rotateInDownLeft","rotateInUpLeft","rotateInUpRight","jackInTheBox","rollIn","zoomIn"],V=["not_animate","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeOut","fadeOutDown","fadeOutLeft","fadeOutRight","fadeOutUp","flipOutX","lipOutY","lightSpeedOut","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","hinge","rollOut"];return{init:m}}();!function(e){function t(e){this.init(e)}function n(){var e=this;e["this"].parent().removeClass("ajaxSavingFailed"),e["this"].parent().removeClass("ajaxSavingOk")}t.prototype.init=function(t){tagName=t.tagName.toLowerCase(),t=e(t),"input"==tagName||"select"==tagName?obj=t:obj=t.find("input,select"),post_url=t.attr("save_url"),uid=t.attr("uid");for(var i=0;i<obj.length;i++){var s={url:post_url,id:uid,"this":obj.eq(i)};s["this"].off("change").on("change",function(){var t=this,i=t["this"].val(),s=t["this"].attr("type");s&&"checkbox"==s.toLowerCase()&&(t["this"].prop("checked")||(i=0));var o={id:t.id,value:i,name:t["this"].attr("name")};t["this"].parent().addClass("ajaxInSaving"),e.post(t.url,o,function(){var e=this;e["this"].parent().removeClass("ajaxInSaving"),e["this"].parent().addClass("ajaxSavingOk"),setTimeout(n.bind(e),3e3)}.bind(t)).fail(function(){var e=this;e["this"].parent().removeClass("ajaxInSaving"),e["this"].parent().addClass("ajaxSavingFailed"),setTimeout(n.bind(e),4e3)}.bind(t))}.bind(s))}},e.fn.ajax_save=function(){return e(this).each(function(){new t(this)}),this}}(jQuery),$(".ajax_save").ajax_save(),$(function(){function e(){$this=$(this),post={id:$this.attr("uid"),type:$this.attr("mode")},$.post($this.attr("url"),post,function(e){return e&&"err"==e?(msg=$this.data("remove-error"),msg||(msg="Невозможно удалить элемент"),void notification.notifi({message:msg,type:"err"})):(mode=$this.attr("mode"),mode||(mode="rm"),"rm"==mode&&(rm=$this.closest(".to_remove"),rm_class=rm.attr("rm_class"),rm_class&&$(rm_class).remove(),rm.remove(),notification.notifi({message:"Успешное удаление.",type:"info"})),void("reload"==mode&&(location.reload(),location.href=location.href)))}).fail(function(){notification.notifi({message:"Ошибка удалния",type:"err"})})}$("body").on("click",".ajax_remove",function(){notification.confirm({callbackYes:e,obj:$(this)})})});var notification=function(){function e(){h=!0,u=$(".notification_box"),u.length>0||($("body").append("<div class='notification_box'></div>"),u=$(".notification_box"),u.on("click",".notify_control",t),u.on("click",".notify_close",t),u.on("click",n))}function t(){$("html").removeClass("show_notifi"),$(".notification_box .notify_content").html("")}function n(e){var n=e.target||e.srcElement;"notification_box"==n.className&&t()}function i(t){t||(t={}),t=objects(f,t),h||e(),notyfy_class="notify_box ",t.notyfy_class&&(notyfy_class+=t.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+=t.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=t.question,box_html+="</div>",(t.buttonYes||t.buttonNo)&&(box_html+='<div class="notify_control">',t.buttonYes&&(box_html+="<"+t.buttonTag+' class="notify_btn_yes" '+t.buttonYesDop+">"+t.buttonYes+"</"+t.buttonTag+">"),t.buttonNo&&(box_html+="<"+t.buttonTag+' class="notify_btn_no" '+t.buttonNoDop+">"+t.buttonNo+"</"+t.buttonTag+">"),box_html+="</div>"),box_html+="</div>",u.html(box_html),setTimeout(function(){$("html").addClass("show_notifi")},100)}function s(t){t||(t={}),t=objects(p,t),h||e(),box_html='<div class="notify_box">',box_html+='<div class="notify_title">',box_html+=t.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=t.question,box_html+="</div>",(t.buttonYes||t.buttonNo)&&(box_html+='<div class="notify_control">',t.buttonYes&&(box_html+='<div class="notify_btn_yes">'+t.buttonYes+"</div>"),t.buttonNo&&(box_html+='<div class="notify_btn_no">'+t.buttonNo+"</div>"),box_html+="</div>"),box_html+="</div>",u.html(box_html),0!=t.callbackYes&&u.find(".notify_btn_yes").on("click",t.callbackYes.bind(t.obj)),0!=t.callbackNo&&u.find(".notify_btn_no").on("click",t.callbackNo.bind(t.obj)),setTimeout(function(){$("html").addClass("show_notifi")},100)}function o(e){e||(e={});var t={time:e.time||0===e.time?e.time:d};a||(a=$("<ul/>",{"class":"notification_container"}),$("body").append(a),g());var n=$("<li/>",{"class":"notification_item"});e.type&&n.addClass("notification_item-"+e.type);var i=$("<span/>",{"class":"notification_close"});t.close=i,n.append(i);var s=$("<div/>",{"class":"notification_content"});if(e.title&&e.title.length>0){var o=$("<h5/>",{"class":"notification_title"});o.html(e.title),s.append(o)}var r=$("<div/>",{"class":"notification_text"});if(r.html(e.message),e.img&&e.img.length>0){var l=$("<div/>",{"class":"notification_img"});l.css("background-image","url("+e.img+")");var c=$("<div/>",{"class":"wrap"});c.append(l),c.append(r),s.append(c)}else s.append(r);n.append(s),a.append(n),t.time>0&&(t.timer=setTimeout(y.bind(i),t.time)),n.data("option",t)}var a,r=0,l=null,c="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",d=1e4,u=!1,h=!1,p={title:"Удаление",question:"Вы действительно хотите удалить?",buttonYes:"Да",buttonNo:"Нет",callbackYes:!1,callbackNo:!1,obj:!1,buttonTag:"div",buttonYesDop:"",buttonNoDop:""},f={title:"",question:"Сообщение",buttonYes:"Да",callbackYes:!1,buttonTag:"div",obj:!1},g=function(){$("body").on("click",".notification_close",y),$("body").on("mouseenter",".notification_container",m),$("body").on("mouseleave",".notification_container",v)},m=function(e){e&&e.preventDefault(),null!=l&&(clearTimeout(l),l=null),a.find(".notification_item").each(function(e){var t=$(this).data("option");t.timer&&clearTimeout(t.timer)}),r=1},v=function(){a.find(".notification_item").each(function(e){$this=$(this);var t=$this.data("option");t.time>0&&(t.timer=setTimeout(y.bind(t.close),t.time-1500+100*e),$this.data("option",t))}),r=0},y=function(e){e&&e.preventDefault();var t=$(this).parent();t.on(c,function(){$(this).remove()}),t.addClass("notification_hide")};return{alert:i,confirm:s,notifi:o}}();$("[ref=popup]").on("click",function(e){e.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.alert(data)}),$(".disabled").on("click",function(e){e.preventDefault(),$this=$(this),data=$this.data(),data.button_yes&&(data.buttonYes=data.button_yes),notification.alert(data)}),$(function(){function e(e){$this=$(this),mode=$this.attr("mode"),"rate"==mode&&($parent=$this.closest(".acordion_content"),$parent=$parent.find("table"),e=$(e),e.ajax_save(),$parent.append(e)),"tariff"==mode&&($parent=$this.closest(".acordion_content"),e=$(e),e.find(".ajax_save").ajax_save(),$parent.append(e)),"action"==mode&&($parent=$this.closest(".cpa_box"),e=$(e),e.find(".ajax_save").ajax_save(),$parent.append(e)),"cpa"==mode&&(e=JSON.parse(e),$parent=$this.closest(".tarif_select_blk"),$parent.prepend(e.tab_head_suf),$parent.find(".tab_control").append(e.tab_head_but).ajax_save(),e=$(e.tab_body),e.find(".ajax_save").ajax_save(),$parent.find(".content_tab").append(e))}$("body").on("click",".add_shop_element",function(){$this=$(this),post={code:$this.attr("code"),parent:$this.attr("parent"),type:$this.attr("mode")},updateElement=e.bind($this),$.post("/admin/stores/ajax_insert/"+$this.attr("mode"),post,updateElement).fail(function(){alert("Ошибка добавления")})})}),addSRO();var accordionControl=$(".accordion .accordion-control");accordionControl.on("click",function(e){return e.preventDefault(),$this=$(this),$accordion=$this.closest(".accordion"),$accordion.hasClass("open")?($accordion.find(".accordion-content").hide(300),$accordion.removeClass("open")):($accordion.find(".accordion-content").show(300),$accordion.addClass("open")),!1}),accordionControl.show(),objects=function(e,t){var n,i=t;for(n in e)e.hasOwnProperty(n)&&(i[n]=n in t?t[n]:e[n]);return i},$(document).ready(function(){function e(){data=this,0==data.type?data.img.attr("src",data.src):(data.img.css("background-image","url("+data.src+")"),data.img.removeClass("no_ava"))}imgs=$("section:not(.navigation)").find(".logo img");for(var t=0;t<imgs.length;t++)img=imgs.eq(t),n=img.attr("src"),img.attr("src","/images/template-logo.jpg"),data={src:n,img:img,type:0},image=$("<img/>",{src:n}).on("load",e.bind(data));imgs=$(".comment-photo");for(var t=0;t<imgs.length;t++)if(img=imgs.eq(t),!img.hasClass("no_ava")){var n=img.css("background-image");n=n.replace('url("',""),n=n.replace('")',""),img.addClass("no_ava"),img.css("background-image","url(/images/no_ava.png)"),data={src:n,img:img,type:1},image=$("<img/>",{src:n}).on("load",e.bind(data))}}),function(){for(els=$(".ajax_load"),i=0;i<els.length;i++)el=els.eq(i),url=el.attr("res"),$.get(url,function(e){$this=$(this),$this.html(e),ajaxForm($this)}.bind(el))}(),$("input[type=file]").on("change",function(e){var t=e.target.files,n=t[0];if(!n.type.match("image.*"))return!1;var i=new FileReader;data={el:this,f:n},i.onload=function(e){return function(t){img=$('[for="'+e.el.name+'"]'),img.length>0&&img.attr("src",t.target.result)}}(data),i.readAsDataURL(n)}),$("body").on("click","a.ajaxFormOpen",function(e){e.preventDefault(),href=this.href.split("#"),href=href[href.length-1],data={buttonYes:!1,notyfy_class:"notify_white loading",question:""},modal_class=$(this).data("modal-class"),notification.alert(data),$.get("/"+href,function(e){$(".notify_box").removeClass("loading"),$(".notify_box .notify_content").html(e.html),ajaxForm($(".notify_box .notify_content")),modal_class&&$(".notify_box .notify_content .row").addClass(modal_class)},"json")}),$(".ajax-action").click(function(e){e.preventDefault();var t=$(this).data("value"),n=$(this).attr("href"),i=$("#grid-ajax-action").yiiGridView("getSelectedRows");if(i.length>0){if(!confirm("Подтвердите изменение записей"))return null;$.ajax({url:n,type:"post",dataType:"json",data:{status:t,id:i}}).success(function(e){$("#grid-ajax-action").yiiGridView("applyFilter"),0!=e.error&&notification.notifi({message:"Произошла ошибка!",type:"err"})}).fail(function(e){notification.notifi({message:"Произошла ошибка!",type:"err"})})}else notification.notifi({message:"Необходимо выбрать элементы!",type:"err"})}),$(document).ready(function(){$(".editible[disabled]").on("click",function(){$(this).prop("disabled",!1)}),$(".editible[disabled]").on("mousedown",function(){$(this).prop("disabled",!1)}),btn='<button class=unlock><i class="fa fa-unlock fa-4" aria-hidden="true"></i></button>',btn=$(btn),btn.on("click",function(e){return e.preventDefault(),$this=$(this),inp=$this.prev(),inp.prop("disabled",!1),!1}),$(".editible[disabled]").after(btn)}),$(function(){var e={control:{headerStoresMenu:$("#top").find(".submenu-handl"),storesSubmenus:$("#top").find(".submenu-handl").find(".submenu"),events:function(){var e=this;e.headerStoresMenu.hover(function(){var t=$(this).find(".submenu");$(window).width()>991&&(clearTimeout(e.storeHide),e.storesSubmenus.css("display","none"),e.storeShow=setTimeout(function(){t.clearQueue(),t.css("display","block").animate({opacity:1},350)},200))},function(){var t=$(this).find(".submenu");$(window).width()>991&&(clearTimeout(e.storeShow),e.storeHide=setTimeout(function(){t.clearQueue(),t.animate({opacity:0},200,function(){$(this).css("display","none")})},300))})}}};e.control.events()}),$(document).ready(function(){function e(e){var t=e.parent();if(0!=t.length&&"A"!=t[0].tagName){m_w=t.width()-30;var i=e.width();e.width("auto"),"IMG"==e[0].tagName&&i>e.width()&&(i=e.width()),n>50&&m_w>n&&(m_w=n),i>m_w>m_w?("IFRAME"==e[0].tagName&&(k=i/m_w,e.height(e.height()/k)),e.width(m_w)):e.width(i)}}function t(){var t=$(this);e(t)}var n=screen.width-40,s=$(".container img,.container iframe");for($(".container img").height("auto"),i=0;i<s.length;i++)if(el=s.eq(i),"IFRAME"==el[0].tagName)e(el);else{var o=el.attr("src");image=$("<img/>",{src:o}),image.on("load",t.bind(el))}}),function(){window.opener&&(document.referrer.indexOf("secretdiscounter")<0||(href=window.opener.location.href,href.indexOf("socials")>0||href.indexOf("login")>0||href.indexOf("admin")>0||href.indexOf("account")>0||(href.indexOf("store")>0||href.indexOf("coupon")>0||href.indexOf("settings")>0?window.opener.location.reload():window.opener.location.href=location.href,window.close())))}(),function(){function e(){var e=this,t=e.img;t.wrap('<div class="download"></div>');var n=t.parent();$("body").append(e.el),size=e.el.width()+"x"+e.el.height(),e.el.remove(),n.append("<span>"+size+'</span> <a href="'+e.src+'" download>Скачать</a>')}for(var t=$(".downloads_img img"),n=0;n<t.length;n++){var i=t.eq(n),s=i.attr("src");image=$("<img/>",{src:s}),data={src:s,img:i,el:image},image.on("load",e.bind(data))}}();