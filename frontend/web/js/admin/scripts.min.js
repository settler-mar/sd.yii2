var lg=function(){var s={};function n(e){if(e=e.replace(/\s+/g," "),str=e.match(/\{(.*?)\}/g),null!=str)for(i=0;i<str.length;i++)str_t=str[i].replace(/ /g,""),e=e.replace(str[i],str_t);return e}return url="/language/"+document.documentElement.lang+".json",$.get(url,function(e){for(var t in e)e[t]=n(e[t]);s=e;var i=new CustomEvent("language_loaded");document.dispatchEvent(i)},"json"),function(e,t){if("undefined"==typeof s[e])return console.log("lang not found: "+e),e;if(e=s[e],"object"==typeof t)for(var i in t)e=e.split("{"+i+"}").join(t[i]);return e}}(),Datepicker;if(function(b){b.fn.menuAim=function(e){return this.each(function(){(function t(e){var f=b(this),g=null,m=[],y=null,i=null,v=b.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:b.noop,exit:b.noop,activate:b.noop,deactivate:b.noop,exitMenu:b.noop},e),s=function(e){e!=g&&(g&&v.deactivate(g),v.activate(e),g=e)},n=function(e){var t=o();t?i=setTimeout(function(){n(e)},t):s(e)},o=function(){if(!g||!b(g).is(v.submenuSelector))return 0;var e=f.offset(),t={x:e.left,y:e.top-v.tolerance},i={x:e.left+f.outerWidth(),y:t.y},s={x:e.left,y:e.top+f.outerHeight()+v.tolerance},n={x:e.left+f.outerWidth(),y:s.y},o=m[m.length-1],r=m[0];if(!o)return 0;if(r||(r=o),r.x<e.left||r.x>n.x||r.y<e.top||r.y>n.y)return 0;if(y&&o.x==y.x&&o.y==y.y)return 0;function a(e,t){return(t.y-e.y)/(t.x-e.x)}var l=i,c=n;"left"==v.submenuDirection?(l=s,c=t):"below"==v.submenuDirection?(l=n,c=s):"above"==v.submenuDirection&&(l=t,c=i);var u=a(o,l),h=a(o,c),p=a(r,l),d=a(r,c);return u<p&&d<h?(y=o,300):(y=null,0)};f.mouseleave(function(){i&&clearTimeout(i);v.exitMenu(this)&&(g&&v.deactivate(g),g=null)}).find(v.rowSelector).mouseenter(function(){i&&clearTimeout(i);v.enter(this),n(this)}).mouseleave(function(){v.exit(this)}).click(function(){s(this)}),b(document).mousemove(function(e){m.push({x:e.pageX,y:e.pageY}),3<m.length&&m.shift()})}).call(this,e)}),this}}(jQuery),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.Circles=t()}(this,function(){"use strict";var u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t=function(e){var t=e.id;if(this._el=document.getElementById(t),null!==this._el){this._radius=e.radius||10,this._duration=void 0===e.duration?500:e.duration,this._value=0,this._maxValue=e.maxValue||100,this._text=void 0===e.text?function(e){return this.htmlifyNumber(e)}:e.text,this._strokeWidth=e.width||10,this._colors=e.colors||["#EEE","#F00"],this._svg=null,this._movingPath=null,this._wrapContainer=null,this._textContainer=null,this._wrpClass=e.wrpClass||"circles-wrp",this._textClass=e.textClass||"circles-text",this._valClass=e.valueStrokeClass||"circles-valueStroke",this._maxValClass=e.maxValueStrokeClass||"circles-maxValueStroke",this._styleWrapper=!1!==e.styleWrapper,this._styleText=!1!==e.styleText;var i=Math.PI/180*270;this._start=-Math.PI/180*90,this._startPrecise=this._precise(this._start),this._circ=i-this._start,this._generate().update(e.value||0)}};return t.prototype={VERSION:"0.0.6",_generate:function(){return this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._generateSvg()._generateText()._generateWrapper(),this._el.innerHTML="",this._el.appendChild(this._wrapContainer),this},_setPercentage:function(e){this._movingPath.setAttribute("d",this._calculatePath(e,!0)),this._textContainer.innerHTML=this._getText(this.getValueFromPercent(e))},_generateWrapper:function(){return this._wrapContainer=document.createElement("div"),this._wrapContainer.className=this._wrpClass,this._styleWrapper&&(this._wrapContainer.style.position="relative",this._wrapContainer.style.display="inline-block"),this._wrapContainer.appendChild(this._svg),this._wrapContainer.appendChild(this._textContainer),this},_generateText:function(){if(this._textContainer=document.createElement("div"),this._textContainer.className=this._textClass,this._styleText){var e={position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"};for(var t in e)this._textContainer.style[t]=e[t]}return this._textContainer.innerHTML=this._getText(0),this},_getText:function(e){return this._text?(void 0===e&&(e=this._value),e=parseFloat(e.toFixed(2)),"function"==typeof this._text?this._text.call(this,e):this._text):""},_generateSvg:function(){return this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttribute("width",this._svgSize),this._svg.setAttribute("height",this._svgSize),this._generatePath(100,!1,this._colors[0],this._maxValClass)._generatePath(1,!0,this._colors[1],this._valClass),this._movingPath=this._svg.getElementsByTagName("path")[1],this},_generatePath:function(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("fill","transparent"),n.setAttribute("stroke",i),n.setAttribute("stroke-width",this._strokeWidth),n.setAttribute("d",this._calculatePath(e,t)),n.setAttribute("class",s),this._svg.appendChild(n),this},_calculatePath:function(e,t){var i=this._start+e/100*this._circ,s=this._precise(i);return this._arc(s,t)},_arc:function(e,t){var i=e-.001,s=e-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,s,1,this._radius+this._radiusAdjusted*Math.cos(i),this._radius+this._radiusAdjusted*Math.sin(i),t?"":"Z"].join(" ")},_precise:function(e){return Math.round(1e3*e)/1e3},htmlifyNumber:function(e,t,i){t=t||"circles-integer",i=i||"circles-decimals";var s=(e+"").split("."),n='<span class="'+t+'">'+s[0]+"</span>";return 1<s.length&&(n+='.<span class="'+i+'">'+s[1].substring(0,2)+"</span>"),n},updateRadius:function(e){return this._radius=e,this._generate().update(!0)},updateWidth:function(e){return this._strokeWidth=e,this._generate().update(!0)},updateColors:function(e){this._colors=e;var t=this._svg.getElementsByTagName("path");return t[0].setAttribute("stroke",e[0]),t[1].setAttribute("stroke",e[1]),this},getPercent:function(){return 100*this._value/this._maxValue},getValueFromPercent:function(e){return this._maxValue*e/100},getValue:function(){return this._value},getMaxValue:function(){return this._maxValue},update:function(e,t){if(!0===e)return this._setPercentage(this.getPercent()),this;if(this._value==e||isNaN(e))return this;void 0===t&&(t=this._duration);var s,n,i,o,r=this,a=r.getPercent(),l=1;return this._value=Math.min(this._maxValue,Math.max(0,e)),t?(s=r.getPercent(),n=a<s,l+=s%1,i=Math.floor(Math.abs(s-a)/l),o=t/i,function c(e){if(n?a+=l:a-=l,n&&s<=a||!n&&a<=s)u(function(){r._setPercentage(s)});else{u(function(){r._setPercentage(a)});var t=Date.now(),i=t-e;o<=i?c(t):setTimeout(function(){c(Date.now())},o-i)}}(Date.now())):this._setPercentage(this.getPercent()),this}},t.create=function(e){return new t(e)},t}),function(e,s,t){var i,n,p,o="datepicker",r=!1,a={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},onSelect:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},l={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]};(p=Datepicker=function(e,t){this.el=e,this.$el=s(e),this.opts=s.extend(!0,{},a,t,this.$el.data()),null==i&&(i=s("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?s(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this.init()}).prototype={viewIndexes:["days","months","years"],init:function(){r||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.views[this.currentView]=new Datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new Datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("input.adp",this._onInput.bind(this)),s(e).on("resize.adp",this._onResize.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){this.loc="string"==typeof e?(this.loc=Datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=s.extend(!0,{},Datepicker.language.ru)),s.extend(!0,{},Datepicker.language.ru,Datepicker.language[e])):s.extend(!0,{},Datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay)},_buildDatepickersContainer:function(){r=!0,i.append('<div class="datepickers-container" id="datepickers-container"></div>'),n=s("#datepickers-container")},_buildBaseHtml:function(){var e,t=s('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?t.insertAfter(this.$el):n:t.appendTo(this.$el),this.$datepicker=s('<div class="datepicker"><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>').appendTo(e),this.$content=s(".datepicker--content",this.$datepicker),this.$nav=s(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return this.opts.onSelect("","",this);var e,t=this.selectedDates,i=p.getParsedDate(t[0]),s=this,n=new Date(i.year,i.month,i.date);e=t.map(function(e){return s.formatDate(s.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(n=t.map(function(e){var t=p.getParsedDate(e);return new Date(t.year,t.month,t.date)})),this.opts.onSelect(e,n,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i=e,s=this._getWordBoundaryRegExp,n=this.loc,o=p.getDecade(t),r=p.getParsedDate(t);switch(!0){case/@/.test(i):i=i.replace(/@/,t.getTime());case/dd/.test(i):i=i.replace(s("dd"),r.fullDate);case/d/.test(i):i=i.replace(s("d"),r.date);case/DD/.test(i):i=i.replace(s("DD"),n.days[r.day]);case/D/.test(i):i=i.replace(s("D"),n.daysShort[r.day]);case/mm/.test(i):i=i.replace(s("mm"),r.fullMonth);case/m/.test(i):i=i.replace(s("m"),r.month+1);case/MM/.test(i):i=i.replace(s("MM"),this.loc.months[r.month]);case/M/.test(i):i=i.replace(s("M"),n.monthsShort[r.month]);case/yyyy/.test(i):i=i.replace(s("yyyy"),r.year);case/yyyy1/.test(i):i=i.replace(s("yyyy1"),o[0]);case/yyyy2/.test(i):i=i.replace(s("yyyy2"),o[1]);case/yy/.test(i):i=i.replace(s("yy"),r.year.toString().slice(-2))}return i},_getWordBoundaryRegExp:function(e){return new RegExp("\\b(?=[a-zA-Z0-9äöüßÄÖÜ<])"+e+"(?![>a-zA-Z0-9äöüßÄÖÜ])")},selectDate:function(e){var t=this,i=t.opts,s=t.parsedDate,n=t.selectedDates.length,o="";if(e instanceof Date){if("days"==t.view&&e.getMonth()!=s.month&&i.moveToOtherMonthsOnSelect&&(o=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=s.year&&i.moveToOtherYearsOnSelect&&(o=new Date(e.getFullYear(),0,1)),o&&(t.silent=!0,t.date=o,t.silent=!1,t.nav._render()),i.multipleDates&&!i.range){if(n===i.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else i.range?2==n?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==n?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),i.onSelect&&t._triggerOnChange(),i.autoClose&&(i.multipleDates||i.range?i.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(i){var s=this.selectedDates,n=this;if(i instanceof Date)return s.some(function(e,t){if(p.isSame(e,i))return s.splice(t,1),n.selectedDates.length||(n.minRange="",n.maxRange=""),n.views[n.currentView]._render(),n._setInputValue(),n.opts.onSelect&&n._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,t){var i=arguments.length;return 2==i?this.opts[e]=t:1==i&&"object"==typeof e&&(this.opts=s.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(t,i){return this.selectedDates.some(function(e){return p.isSame(e,t,i)})},_setInputValue:function(){var e,t=this,i=t.opts,s=t.loc.dateFormat,n=i.altFieldDateFormat,o=t.selectedDates.map(function(e){return t.formatDate(s,e)});i.altField&&t.$altField.length&&(e=(e=this.selectedDates.map(function(e){return t.formatDate(n,e)})).join(this.opts.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.opts.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var i=e.getTime(),s=p.getParsedDate(e),n=p.getParsedDate(this.minDate),o=p.getParsedDate(this.maxDate),r=new Date(s.year,s.month,n.date).getTime(),a=new Date(s.year,s.month,o.date).getTime(),l={day:i>=this.minTime&&i<=this.maxTime,month:r>=this.minTime&&a<=this.maxTime,year:s.year>=n.year&&s.year<=o.year};return t?l[t]:l.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,i=e.data("year")||t.year,s=null==e.data("month")?t.month:e.data("month"),n=e.data("date")||1;return new Date(i,s,n)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],i="datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(i+=" active"),this.$datepicker.removeAttr("class").addClass(i)},setPosition:function(e){e=e||this.opts.position;var t,i,s=this._getDimensions(this.$el),n=this._getDimensions(this.$datepicker),o=e.split(" "),r=this.opts.offset,a=o[0],l=o[1];switch(a){case"top":t=s.top-n.height-r;break;case"right":i=s.left+s.width+r;break;case"bottom":t=s.top+s.height+r;break;case"left":i=s.left-n.width-r}switch(l){case"top":t=s.top;break;case"right":i=s.left+s.width-n.width;break;case"bottom":t=s.top+s.height-n.height;break;case"left":i=s.left;break;case"center":/left|right/.test(a)?t=s.top+s.height/2-n.height/2:i=s.left+s.width/2-n.width/2}this.$datepicker.css({left:i,top:t})},show:function(){this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0},hide:function(){this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur()},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_changeView:function(e,t){e=e||this.focused||this.date;var i="up"==t?this.viewIndex+1:this.viewIndex-1;2<i&&(i=2),i<0&&(i=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[i]},_handleHotKey:function(e){var t,i,s,n=p.getParsedDate(this._getFocusedDate()),o=this.opts,r=!1,a=!1,l=!1,c=n.year,u=n.month,h=n.date;switch(e){case"ctrlRight":case"ctrlUp":u+=1,r=!0;break;case"ctrlLeft":case"ctrlDown":u-=1,r=!0;break;case"shiftRight":case"shiftUp":a=!0,c+=1;break;case"shiftLeft":case"shiftDown":a=!0,c-=1;break;case"altRight":case"altUp":l=!0,c+=10;break;case"altLeft":case"altDown":l=!0,c-=10;break;case"ctrlShiftUp":this.up()}s=p.getDaysCount(new Date(c,u)),i=new Date(c,u,h),s<h&&(h=s),i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i,t=p.getParsedDate(i),r&&o.onChangeMonth&&o.onChangeMonth(t.month,t.year),a&&o.onChangeYear&&o.onChangeYear(t.year),l&&o.onChangeDecade&&o.onChangeDecade(this.curDecade)},_registerKey:function(t){this.keys.some(function(e){return e==t})||this.keys.push(t)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,i=this.keys.sort();for(var s in l)e=l[s],i.length==e.length&&e.every(function(e,t){return e==i[t]})&&(this._trigger("hotKey",s),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=p.getParsedDate(this._getFocusedDate()),s=i.year,n=i.month,o=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(o-=1),"month"==t&&(n-=1),"year"==t&&(s-=1);break;case 38:"day"==t&&(o-=7),"month"==t&&(n-=3),"year"==t&&(s-=4);break;case 39:"day"==t&&(o+=1),"month"==t&&(n+=1),"year"==t&&(s+=1);break;case 40:"day"==t&&(o+=7),"month"==t&&(n+=3),"year"==t&&(s+=4)}var r=new Date(s,n,o);r.getTime()<this.minTime?r=this.minDate:r.getTime()>this.maxTime&&(r=this.maxDate),this.focused=r}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,t){t=t||this.cellType;var i,s=p.getParsedDate(e),n='.datepicker--cell[data-year="'+s.year+'"]';switch(t){case"month":n='[data-month="'+s.month+'"]';break;case"day":n+='[data-month="'+s.month+'"][data-date="'+s.date+'"]'}return(i=this.views[this.currentView].$el.find(n)).length?i:""},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_onShowEvent:function(){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,this.$el.focus()},_onInput:function(){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),37<=t&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var i=this._isSelected(this.focused,this.cellType);i?i&&this.opts.toggleSelected&&this.removeDate(this.focused):this.selectDate(this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var t=s(e.target).closest(".datepicker--cell"),i=this._getDateFromCell(t);this.silent=!0,this.focused&&(this.focused=""),t.addClass("-focus-"),this.focused=i,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",p.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){s(e.target).closest(".datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",p.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return p.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new Datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=p.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=p.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return p.getDecade(this.date)}},p.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},p.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay()}},p.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},p.template=function(e,i){return e.replace(/#\{([\w]+)\}/g,function(e,t){if(i[t]||0===i[t])return i[t]})},p.isSame=function(e,t,i){if(!e||!t)return!1;var s=p.getParsedDate(e),n=p.getParsedDate(t),o=i||"day";return{day:s.date==n.date&&s.month==n.month&&s.year==n.year,month:s.month==n.month&&s.year==n.year,year:s.year==n.year}[o]},p.less=function(e,t,i){return!(!e||!t)&&t.getTime()<e.getTime()},p.bigger=function(e,t,i){return!(!e||!t)&&t.getTime()>e.getTime()},Datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",firstDay:1}},s.fn[o]=function(t){return this.each(function(){if(s.data(this,o)){var e=s.data(this,o);e.opts=s.extend(!0,e.opts,t),e.update()}else s.data(this,o,new Datepicker(this,t))})},s(function(){s(".datepicker-here").datepicker()})}(window,jQuery),function(){var e={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},h=Datepicker;h.Body=function(e,t,i){this.d=e,this.type=t,this.opts=i,this.init()},h.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",$.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=$(e[this.type]).appendTo(this.d.$content),this.$names=$(".datepicker--days-names",this.$el),this.$cells=$(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,i,s){return t=t!=undefined?t:e,i=i||"",7<(s=s!=undefined?s:0)?i:7==t?this._getDayNamesHtml(e,0,i,++s):(i+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,i,++s))},_getCellContents:function(e,t){var i="datepicker--cell datepicker--cell-"+t,s=new Date,n=this.d,o=n.opts,r=h.getParsedDate(e),a={},l=r.date;switch(o.onRenderCell&&(l=(a=o.onRenderCell(e,t)||{}).html?a.html:l,i+=a.classes?" "+a.classes:""),t){case"day":n.isWeekend(r.day)&&(i+=" -weekend-"),r.month!=this.d.parsedDate.month&&(i+=" -other-month-",o.selectOtherMonths||(i+=" -disabled-"),o.showOtherMonths||(l=""));break;case"month":l=n.loc[n.opts.monthsField][r.month];break;case"year":var c=n.curDecade;l=r.year,(r.year<c[0]||r.year>c[1])&&(i+=" -other-decade-",o.selectOtherYears||(i+=" -disabled-"),o.showOtherYears||(l=""))}return o.onRenderCell&&(l=(a=o.onRenderCell(e,t)||{}).html?a.html:l,i+=a.classes?" "+a.classes:""),o.range&&(h.isSame(n.minRange,e,t)&&(i+=" -range-from-"),h.isSame(n.maxRange,e,t)&&(i+=" -range-to-"),1==n.selectedDates.length&&n.focused?((h.bigger(n.minRange,e)&&h.less(n.focused,e)||h.less(n.maxRange,e)&&h.bigger(n.focused,e))&&(i+=" -in-range-"),h.less(n.maxRange,e)&&h.isSame(n.focused,e)&&(i+=" -range-from-"),h.bigger(n.minRange,e)&&h.isSame(n.focused,e)&&(i+=" -range-to-")):2==n.selectedDates.length&&h.bigger(n.minRange,e)&&h.less(n.maxRange,e)&&(i+=" -in-range-")),h.isSame(s,e,t)&&(i+=" -current-"),n.focused&&h.isSame(e,n.focused,t)&&(i+=" -focus-"),n._isSelected(e,t)&&(i+=" -selected-"),n._isInRange(e,t)&&!a.disabled||(i+=" -disabled-"),{html:l,classes:i}},_getDaysHtml:function(e){for(var t,i,s=h.getDaysCount(e),n=new Date(e.getFullYear(),e.getMonth(),1).getDay(),o=new Date(e.getFullYear(),e.getMonth(),s).getDay(),r=n-this.d.loc.firstDay,a=6-o+this.d.loc.firstDay,l="",c=1-(r=r<0?r+7:r),u=s+(a=6<a?a-7:a);c<=u;c++)i=e.getFullYear(),t=e.getMonth(),l+=this._getDayHtml(new Date(i,t,c));return l},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",i=h.getParsedDate(e),s=0;s<12;)t+=this._getMonthHtml(new Date(i.year,s)),s++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){h.getParsedDate(e);for(var t=h.getDecade(e),i="",s=t[0]-1;s<=t[1]+1;s++)i+=this._getYearHtml(new Date(s,0));return i},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this._renderTypes[this.type].bind(this)()},_update:function(){var i,s,n,e=$(".datepicker--cell",this.$cells),o=this;e.each(function(e,t){s=$(this),n=o.d._getDateFromCell($(this)),i=o._getCellContents(n,o.d.cellType),s.attr("class",i.classes)})},show:function(){this.$el.addClass("active"),this.acitve=!0},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,s=e.data("year")||this.d.parsedDate.year;if(this.d.view==this.opts.minView){var n=new Date(s,i,t),o=this.d._isSelected(n,this.d.cellType);o?o&&this.opts.toggleSelected&&this.d.removeDate(n):this.d.selectDate(n)}else this.d.down(new Date(s,i,t))},_onClickCell:function(e){var t=$(e.target).closest(".datepicker--cell");t.hasClass("-disabled-")||this._handleClick.bind(this)(t)}}}(),Datepicker.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},Datepicker.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",$.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",$.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",$.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),t=Datepicker.template('<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',$.extend({title:e},this.opts));this.d.$nav.html(t),"years"==this.d.view&&$(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var t={action:e,label:this.d.loc[e]},i=Datepicker.template('<span class="datepicker--button" data-action="#{action}">#{label}</span>',t);$("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(i)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="datepicker--buttons"></div>'),this.$buttonsContainer=$(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,i=e.year,s=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(i,t-1,s),"month")||this._disableNav("prev"),this.d._isInRange(new Date(i,t+1,s),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(i-1,t,s),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+1,t,s),"year")||this._disableNav("next");break;case"years":this.d._isInRange(new Date(i-10,t,s),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+10,t,s),"year")||this._disableNav("next")}}},_disableNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var t=$(e.target).closest("[data-action]").data("action");this.d[t]()},_onClickNavTitle:function(e){if(!$(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}},function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(n){"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var i={init:function(e){return this.options=n.extend({},n.noty.defaults,e),this.options.layout=this.options.custom?n.noty.layouts.inline:n.noty.layouts[this.options.layout],n.noty.themes[this.options.theme]?this.options.theme=n.noty.themes[this.options.theme]:this.options.themeClassName=this.options.theme,this.options=n.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this._build(),this},_build:function(){var e=n('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?n(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var t=n("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(t):this.$bar.append(t);var s=this;n.each(this.options.buttons,function(e,t){var i=n("<button/>").addClass(t.addClass?t.addClass:"gray").html(t.text).attr("id",t.id?t.id:"button-"+e).attr("title",t.title).appendTo(s.$bar.find(".noty_buttons")).on("click",function(e){n.isFunction(t.onClick)&&t.onClick.call(i,s,e)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),n.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):n(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===n.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(n(t.options.layout.container.selector),[t.options.within]),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),-1<n.inArray("click",t.options.closeWith)&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),-1<n.inArray("hover",t.options.closeWith)&&t.$bar.one("mouseenter",function(){t.close()}),-1<n.inArray("button",t.options.closeWith)&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),-1==n.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),"string"==typeof t.options.animation.open?(t.$bar.css("height",t.$bar.innerHeight()),t.$bar.on("click",function(e){t.wasClicked=!0}),t.$bar.show().addClass(t.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0,t.hasOwnProperty("wasClicked")&&(t.$bar.off("click",function(e){t.wasClicked=!0}),t.close())})):t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var i=this;if(this.showing)return void i.$bar.queue(function(){i.close.apply(i)});if(!this.shown&&!this.showing){var s=[];return n.each(n.noty.queue,function(e,t){t.options.id!=i.options.id&&s.push(t)}),void(n.noty.queue=s)}i.$bar.addClass("i-am-closing-now"),i.options.callback.onClose&&i.options.callback.onClose.apply(i),"string"==typeof i.options.animation.close?i.$bar.addClass(i.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.options.callback.afterClose&&i.options.callback.afterClose.apply(i),i.closeCleanUp()}):i.$bar.clearQueue().stop().animate(i.options.animation.close,i.options.animation.speed,i.options.animation.easing,function(){i.options.callback.afterClose&&i.options.callback.afterClose.apply(i)}).promise().done(function(){i.closeCleanUp()})}},closeCleanUp:function(){var e=this;e.options.modal&&(n.notyRenderer.setModalCount(-1),0==n.notyRenderer.getModalCount()&&n(".noty_modal").fadeOut(e.options.animation.fadeSpeed,function(){n(this).remove()})),n.notyRenderer.setLayoutCountFor(e,-1),0==n.notyRenderer.getLayoutCountFor(e)&&n(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&("string"==typeof e.options.animation.close?(e.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),e.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.$bar.remove(),e.$bar=null,e.closed=!0,e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e)})):(e.$bar.remove(),e.$bar=null,e.closed=!0)),delete n.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(n.noty.ontap=!0,n.notyRenderer.render()),0<e.options.maxVisible&&e.options.dismissQueue&&n.notyRenderer.render()},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){"undefined"!=typeof(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};n.notyRenderer={},n.notyRenderer.init=function(e){var t=Object.create(i).init(e);return t.options.killer&&n.noty.closeAll(),t.options.force?n.noty.queue.unshift(t):n.noty.queue.push(t),n.notyRenderer.render(),"object"==n.noty.returns?t:t.options.id},n.notyRenderer.render=function(){var e=n.noty.queue[0];"object"===n.type(e)?e.options.dismissQueue?0<e.options.maxVisible?n(e.options.layout.container.selector+" > li").length<e.options.maxVisible&&n.notyRenderer.show(n.noty.queue.shift()):n.notyRenderer.show(n.noty.queue.shift()):n.noty.ontap&&(n.notyRenderer.show(n.noty.queue.shift()),n.noty.ontap=!1):n.noty.ontap=!0},n.notyRenderer.show=function(e){e.options.modal&&(n.notyRenderer.createModalFor(e),n.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append(n(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==n(e.options.layout.container.selector).length?n("body").append(n(e.options.layout.container.object).addClass("i-am-new")):n(e.options.layout.container.selector).removeClass("i-am-new"),n.notyRenderer.setLayoutCountFor(e,1),e.show()},n.notyRenderer.createModalFor=function(e){if(0==n(".noty_modal").length){var t=n("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&t.css(e.options.theme.modal.css),t.prependTo(n("body")).fadeIn(e.options.animation.fadeSpeed),-1<n.inArray("backdrop",e.options.closeWith)&&t.on("click",function(e){n.noty.closeAll()})}},n.notyRenderer.getLayoutCountFor=function(e){return n(e.options.layout.container.selector).data("noty_layout_count")||0},n.notyRenderer.setLayoutCountFor=function(e,t){return n(e.options.layout.container.selector).data("noty_layout_count",n.notyRenderer.getLayoutCountFor(e)+t)},n.notyRenderer.getModalCount=function(){return n(".noty_modal").data("noty_modal_count")||0},n.notyRenderer.setModalCount=function(e){return n(".noty_modal").data("noty_modal_count",n.notyRenderer.getModalCount()+e)},n.fn.noty=function(e){return e.custom=n(this),n.notyRenderer.init(e)},n.noty={},n.noty.queue=[],n.noty.ontap=!0,n.noty.layouts={},n.noty.themes={},n.noty.returns="object",n.noty.store={},n.noty.get=function(e){return!!n.noty.store.hasOwnProperty(e)&&n.noty.store[e]},n.noty.close=function(e){return!!n.noty.get(e)&&n.noty.get(e).close()},n.noty.setText=function(e,t){return!!n.noty.get(e)&&n.noty.get(e).setText(t)},n.noty.setType=function(e,t){return!!n.noty.get(e)&&n.noty.get(e).setType(t)},n.noty.clearQueue=function(){n.noty.queue=[]},n.noty.closeAll=function(){n.noty.clearQueue(),n.each(n.noty.store,function(e,t){t.close()})};var e=window.alert;return n.noty.consumeAlert=function(t){window.alert=function(e){t?t.text=e:t={text:e},n.notyRenderer.init(t)}},n.noty.stopConsumeAlert=function(){window.alert=e},n.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500,fadeSpeed:"fast"},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},n(window).on("resize",function(){n.each(n.noty.layouts,function(e,t){t.container.style.apply(n(t.container.selector))})}),window.noty=function(e){return n.notyRenderer.init(e)},n.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){n(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},n.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){n(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),n(this).css({left:(n(window).width()-n(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){n(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&n(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){n(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&n(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){n(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=n(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");n("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),n(this).hasClass("i-am-new")?n(this).css({left:(n(window).width()-n(this).outerWidth(!1))/2+"px",top:(n(window).height()-t)/2+"px"}):n(this).animate({left:(n(window).width()-n(this).outerWidth(!1))/2+"px",top:(n(window).height()-t)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){n(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=n(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");n("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),n(this).hasClass("i-am-new")?n(this).css({top:(n(window).height()-t)/2+"px"}):n(this).animate({top:(n(window).height()-t)/2+"px"},500),window.innerWidth<600&&n(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){n(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=n(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");n("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),n(this).hasClass("i-am-new")?n(this).css({top:(n(window).height()-t)/2+"px"}):n(this).animate({top:(n(window).height()-t)/2+"px"},500),window.innerWidth<600&&n(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){n(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},n.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){n(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},n.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){n(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),n(this).css({left:(n(window).width()-n(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){n(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&n(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){n(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&n(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},n.noty.themes.bootstrapTheme={name:"bootstrapTheme",modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){var e=this.options.layout.container.selector;switch(n(e).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("list-group-item").css("padding","0px"),this.options.type){case"alert":case"notification":this.$bar.addClass("list-group-item-info");break;case"warning":this.$bar.addClass("list-group-item-warning");break;case"error":this.$bar.addClass("list-group-item-danger");break;case"information":this.$bar.addClass("list-group-item-info");break;case"success":this.$bar.addClass("list-group-item-success")}this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"})},callback:{onShow:function(){},onClose:function(){}}},n.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":n(e).css({borderRadius:"0px 0px 0px 0px"}),n(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":n(e).css({borderRadius:"0px 0px 0px 0px"}),n(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),n(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":n(e).css({borderRadius:"0px 0px 0px 0px"}),n(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAQAAAClM0ndAAAAhklEQVR4AdXO0QrCMBBE0bttkk38/w8WRERpdyjzVOc+HxhIHqJGMQcFFkpYRQotLLSw0IJ5aBdovruMYDA/kT8plF9ZKLFQcgF18hDj1SbQOMlCA4kao0iiXmah7qBWPdxpohsgVZyj7e5I9KcID+EhiDI5gxBYKLBQYKHAQoGFAoEks/YEGHYKB7hFxf0AAAAASUVORK5CYII=') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){n(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){n(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){n.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){n.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}},n.noty.themes.relax={name:"relax",helpers:{},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",margin:"4px 0",borderRadius:"2px"}),this.$message.css({fontSize:"14px",lineHeight:"16px",textAlign:"center",padding:"10px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){n(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){n(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderTop:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderBottom:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#dedede",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#FF8181",borderColor:"#e25353",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#78C5E7",borderColor:"#3badd6",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#BCF5BC",borderColor:"#7cdd77",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){},onClose:function(){}}},window.noty}),function(c){var l=c.ajax,r=[],a=[],u=/=\?(&|$)/,h=(new Date).getTime();function s(e,t,i){(e.context?c(e.context):c.event).trigger(t,i)}function o(e,t){return e[t]===c.mockjaxSettings[t]}function p(e,t){if(c.isFunction(e))return e(t);if(c.isFunction(e.url.test)){if(!e.url.test(t.url))return null}else{var i=e.url.indexOf("*");if(e.url!==t.url&&-1===i||!new RegExp(e.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(t.url))return null}return!e.data||t.data&&function n(t,i){var s=!0;return"string"==typeof i?c.isFunction(t.test)?t.test(i):t==i:(c.each(t,function(e){if(i[e]===undefined)return s=!1;s="object"==typeof i[e]&&null!==i[e]?(s&&c.isArray(i[e])&&(s=c.isArray(t[e])&&i[e].length===t[e].length),s&&n(t[e],i[e])):t[e]&&c.isFunction(t[e].test)?s&&t[e].test(i[e]):s&&t[e]==i[e]}),s)}(e.data,t.data)?e&&e.type&&e.type.toLowerCase()!=t.type.toLowerCase()?null:e:null}function d(t,i,s){var e,n=(e=this,function(){return function(){var e;this.status=t.status,this.statusText=t.statusText,this.readyState=4,c.isFunction(t.response)&&t.response(s),"json"==i.dataType&&"object"==typeof t.responseText?this.responseText=JSON.stringify(t.responseText):"xml"==i.dataType?"string"==typeof t.responseXML?(this.responseXML=function n(e){window.DOMParser==undefined&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t});try{var t=(new DOMParser).parseFromString(e,"text/xml");if(!c.isXMLDoc(t))throw"Unable to parse XML";if(1==c("parsererror",t).length)throw"Error: "+c(t).text();return t}catch(s){var i=s.name==undefined?s:s.name+": "+s.message;return c(document).trigger("xmlParseError",[i]),undefined}}(t.responseXML),this.responseText=t.responseXML):this.responseXML=t.responseXML:this.responseText=t.responseText,"number"!=typeof t.status&&"string"!=typeof t.status||(this.status=t.status),"string"==typeof t.statusText&&(this.statusText=t.statusText),e=this.onreadystatechange||this.onload,c.isFunction(e)?(t.isTimeout&&(this.status=-1),e.call(this,t.isTimeout?"timeout":undefined)):t.isTimeout&&(this.status=-1)}.apply(e)});t.proxy?l({global:!1,url:t.proxy,type:t.proxyType,data:t.data,dataType:"script"===i.dataType?"text/plain":i.dataType,complete:function(e){t.responseXML=e.responseXML,t.responseText=e.responseText,o(t,"status")&&(t.status=e.status),o(t,"statusText")&&(t.statusText=e.statusText),this.responseTimer=setTimeout(n,t.responseTime||0)}}):!1===i.async?n():this.responseTimer=setTimeout(n,t.responseTime||50)}function f(e,t,i){if(function r(e){"GET"===e.type.toUpperCase()?u.test(e.url)||(e.url+=(/\?/.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?"):e.data&&u.test(e.data)||(e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?")}(e),e.dataType="json",e.data&&u.test(e.data)||u.test(e.url)){!function a(i,s,e){var n=e&&e.context||i,o=i.jsonpCallback||"jsonp"+h++;i.data&&(i.data=(i.data+"").replace(u,"="+o+"$1"));i.url=i.url.replace(u,"="+o+"$1"),window[o]=window[o]||function(e){data=e,g(i,n,s),m(i,n),window[o]=undefined;try{delete window[o]}catch(t){}head&&head.removeChild(script)}}(e,t,i);var s=/^(\w+:)?\/\/([^\/?#]+)/.exec(e.url),n=s&&(s[1]&&s[1]!==location.protocol||s[2]!==location.host);if(e.dataType="script","GET"===e.type.toUpperCase()&&n){var o=function l(e,t,i){var s=i&&i.context||e,n=null;t.response&&c.isFunction(t.response)?t.response(i):"object"==typeof t.responseText?c.globalEval("("+JSON.stringify(t.responseText)+")"):c.globalEval("("+t.responseText+")");g(e,s,t),m(e,s),c.Deferred&&(n=new c.Deferred,"object"==typeof t.responseText?n.resolveWith(s,[t.responseText]):n.resolveWith(s,[c.parseJSON(t.responseText)]));return n}(e,t,i);return o||!0}}return null}function g(e,t,i){e.success&&e.success.call(t,i.responseText||"",status,{}),e.global&&s(e,"ajaxSuccess",[{},e])}function m(e,t){e.complete&&e.complete.call(t,{},status),e.global&&s("ajaxComplete",[{},e]),e.global&&!--c.active&&c.event.trigger("ajaxStop")}function y(e,t){if(e.url instanceof RegExp&&e.hasOwnProperty("urlParams")){var i=e.url.exec(t.url);if(1!==i.length){i.shift();for(var s=0,n=i.length,o=e.urlParams.length,r=Math.min(n,o),a={};s<r;s++){a[e.urlParams[s]]=i[s]}t.urlParams=a}}}c.extend({ajax:function v(e,t){var i,s,n;"object"==typeof e?(t=e,e=undefined):(t=t||{}).url=e,s=c.extend(!0,{},c.ajaxSettings,t);for(var o=0;o<r.length;o++)if(r[o]&&(n=p(r[o],s)))return a.push(s),c.mockjaxSettings.log(n,s),s.dataType&&"JSONP"===s.dataType.toUpperCase()&&(i=f(s,n,t))||(n.cache=s.cache,n.timeout=s.timeout,n.global=s.global,y(n,t),function(n,o,r,a){i=l.call(c,c.extend(!0,{},r,{xhr:function(){return s=n,e=o,t=r,i=a,"undefined"==typeof(s=c.extend(!0,{},c.mockjaxSettings,s)).headers&&(s.headers={}),s.contentType&&(s.headers["content-type"]=s.contentType),{status:s.status,statusText:s.statusText,readyState:1,open:function(){},send:function(){i.fired=!0,d.call(this,s,e,t)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(e,t){s.headers[e]=t},getResponseHeader:function(e){return s.headers&&s.headers[e]?s.headers[e]:"last-modified"==e.toLowerCase()?s.lastModified||(new Date).toString():"etag"==e.toLowerCase()?s.etag||"":"content-type"==e.toLowerCase()?s.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var i="";return c.each(s.headers,function(e,t){i+=e+": "+t+"\n"}),i}};var s,e,t,i}}))}(n,s,t,r[o])),i;if(!0===c.mockjaxSettings.throwUnmocked)throw"AJAX not mocked: "+t.url;return l.apply(c,[t])}}),c.mockjaxSettings={log:function(e,t){if(!1!==e.logging&&("undefined"!=typeof e.logging||!1!==c.mockjaxSettings.logging)&&window.console&&console.log){var i="MOCK "+t.type.toUpperCase()+": "+t.url,s=c.extend({},t);if("function"==typeof console.log)console.log(i,s);else try{console.log(i+" "+JSON.stringify(s))}catch(n){console.log(i)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,throwUnmocked:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},c.mockjax=function(e){var t=r.length;return r[t]=e,t},c.mockjaxClear=function(e){1==arguments.length?r[e]=null:r=[],a=[]},c.mockjax.handler=function(e){if(1==arguments.length)return r[e]},c.mockjax.mockedAjaxCalls=function(){return a}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"function"==typeof require?e(require("jquery")):e(jQuery)}(function(f){"use strict";var s={escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},i=27,n=9,o=13,r=38,a=39,l=40;function c(e,t){var i=function(){},s=this,n={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:c.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:i,onSearchComplete:i,onSearchError:i,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,i){return-1!==e.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(e){return"string"==typeof e?f.parseJSON(e):e},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};s.element=e,s.el=f(e),s.suggestions=[],s.badQueries=[],s.selectedIndex=-1,s.currentValue=s.element.value,s.intervalId=0,s.cachedResponse={},s.onChangeInterval=null,s.onChange=null,s.isLocal=!1,s.suggestionsContainer=null,s.noSuggestionsContainer=null,s.options=f.extend({},n,t),s.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},s.hint=null,s.hintValue="",s.selection=null,s.initialize(),s.setOptions(t)}c.utils=s,(f.Autocomplete=c).formatResult=function(e,t){if(!t)return e.value;var i="("+s.escapeRegExChars(t)+")";return e.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},c.prototype={killerFn:null,initialize:function(){var e,t=this,i="."+t.classes.suggestion,s=t.classes.selected,n=t.options;t.element.setAttribute("autocomplete","off"),t.killerFn=function(e){0===f(e.target).closest("."+t.options.containerClass).length&&(t.killSuggestions(),t.disableKillerFn())},t.noSuggestionsContainer=f('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),t.suggestionsContainer=c.utils.createNode(n.containerClass),(e=f(t.suggestionsContainer)).appendTo(n.appendTo),"auto"!==n.width&&e.width(n.width),e.on("mouseover.autocomplete",i,function(){t.activate(f(this).data("index"))}),e.on("mouseout.autocomplete",function(){t.selectedIndex=-1,e.children("."+s).removeClass(s)}),e.on("click.autocomplete",i,function(){t.select(f(this).data("index"))}),t.fixPositionCapture=function(){t.visible&&t.fixPosition()},f(window).on("resize.autocomplete",t.fixPositionCapture),t.el.on("keydown.autocomplete",function(e){t.onKeyPress(e)}),t.el.on("keyup.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("blur.autocomplete",function(){t.onBlur()}),t.el.on("focus.autocomplete",function(){t.onFocus()}),t.el.on("change.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("input.autocomplete",function(e){t.onKeyUp(e)})},onFocus:function(){this.fixPosition(),this.el.val().length>=this.options.minChars&&this.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(e){var t=this,i=t.options;f.extend(i,e),t.isLocal=f.isArray(i.lookup),t.isLocal&&(i.lookup=t.verifySuggestionsFormat(i.lookup)),i.orientation=t.validateOrientation(i.orientation,"bottom"),f(t.suggestionsContainer).css({"max-height":i.maxHeight+"px",width:i.width+"px","z-index":i.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearInterval(this.onChangeInterval),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var e=this,t=f(e.suggestionsContainer),i=t.parent().get(0);if(i===document.body||e.options.forceFixPosition){var s=e.options.orientation,n=t.outerHeight(),o=e.el.outerHeight(),r=e.el.offset(),a={top:r.top,left:r.left};if("auto"===s){var l=f(window).height(),c=f(window).scrollTop(),u=-c+r.top-n,h=c+l-(r.top+o+n);s=Math.max(u,h)===u?"top":"bottom"}if(a.top+="top"===s?-n:o,i!==document.body){var p,d=t.css("opacity");e.visible||t.css("opacity",0).show(),p=t.offsetParent().offset(),a.top-=p.top,a.left-=p.left,e.visible||t.css("opacity",d).hide()}"auto"===e.options.width&&(a.width=e.el.outerWidth()-2+"px"),t.css(a)}},enableKillerFn:function(){f(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){f(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this.el.val().length,i=this.element.selectionStart;return"number"==typeof i?i===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==l||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case i:t.el.val(t.currentValue),t.hide();break;case a:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case n:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case o:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case r:t.moveUp();break;case l:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case r:case l:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),0<t.options.deferRequestBy?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var e=this,t=e.options,i=e.el.val(),s=e.getQuery(i);e.selection&&e.currentValue!==s&&(e.selection=null,(t.onInvalidateSelection||f.noop).call(e.element)),clearInterval(e.onChangeInterval),e.currentValue=i,e.selectedIndex=-1,t.triggerSelectOnValidInput&&e.isExactMatch(s)?e.select(0):s.length<t.minChars?e.hide():e.getSuggestions(s)},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(e){var t,i=this.options.delimiter;return i?(t=e.split(i),f.trim(t[t.length-1])):e},getSuggestionsLocal:function(t){var e,i=this.options,s=t.toLowerCase(),n=i.lookupFilter,o=parseInt(i.lookupLimit,10);return e={suggestions:f.grep(i.lookup,function(e){return n(e,t,s)})},o&&e.suggestions.length>o&&(e.suggestions=e.suggestions.slice(0,o)),e},getSuggestions:function(s){var e,t,i,n,o=this,r=o.options,a=r.serviceUrl;r.params[r.paramName]=s,t=r.ignoreParams?null:r.params,!1!==r.onSearchStart.call(o.element,r.params)&&(f.isFunction(r.lookup)?r.lookup(s,function(e){o.suggestions=e.suggestions,o.suggest(),r.onSearchComplete.call(o.element,s,e.suggestions)}):(e=o.isLocal?o.getSuggestionsLocal(s):(f.isFunction(a)&&(a=a.call(o.element,s)),i=a+"?"+f.param(t||{}),o.cachedResponse[i]))&&f.isArray(e.suggestions)?(o.suggestions=e.suggestions,o.suggest(),r.onSearchComplete.call(o.element,s,e.suggestions)):o.isBadQuery(s)?r.onSearchComplete.call(o.element,s,[]):(o.abortAjax(),n={url:a,data:t,type:r.type,dataType:r.dataType},f.extend(n,r.ajaxSettings),o.currentRequest=f.ajax(n).done(function(e){var t;o.currentRequest=null,t=r.transformResult(e,s),o.processResponse(t,s,i),r.onSearchComplete.call(o.element,s,t.suggestions)}).fail(function(e,t,i){r.onSearchError.call(o.element,s,e,t,i)})))},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(0===e.indexOf(t[i]))return!0;return!1},hide:function(){var e=this,t=f(e.suggestionsContainer);f.isFunction(e.options.onHide)&&e.visible&&e.options.onHide.call(e.element,t),e.visible=!1,e.selectedIndex=-1,clearInterval(e.onChangeInterval),f(e.suggestionsContainer).hide(),e.signalHint(null)},suggest:function(){if(0!==this.suggestions.length){var s,e=this,t=e.options,n=t.groupBy,o=t.formatResult,r=e.getQuery(e.currentValue),a=e.classes.suggestion,i=e.classes.selected,l=f(e.suggestionsContainer),c=f(e.noSuggestionsContainer),u=t.beforeRender,h="";t.triggerSelectOnValidInput&&e.isExactMatch(r)?e.select(0):(f.each(e.suggestions,function(e,t){var i;n&&(h+=(i=t.data[n],s===i?"":'<div class="autocomplete-group"><strong>'+(s=i)+"</strong></div>")),h+='<div class="'+a+'" data-index="'+e+'">'+o(t,r)+"</div>"}),this.adjustContainerWidth(),c.detach(),l.html(h),f.isFunction(u)&&u.call(e.element,l),e.fixPosition(),l.show(),t.autoSelectFirst&&(e.selectedIndex=0,l.scrollTop(0),l.children("."+a).first().addClass(i)),e.visible=!0,e.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var e=f(this.suggestionsContainer),t=f(this.noSuggestionsContainer);this.adjustContainerWidth(),t.detach(),e.empty(),e.append(t),this.fixPosition(),e.show(),this.visible=!0},adjustContainerWidth:function(){var e,t=this.options,i=f(this.suggestionsContainer);"auto"===t.width&&(e=this.el.outerWidth()-2,i.width(0<e?e:300))},findBestHint:function(){var s=this.el.val().toLowerCase(),n=null;s&&(f.each(this.suggestions,function(e,t){var i=0===t.value.toLowerCase().indexOf(s);return i&&(n=t),!i}),this.signalHint(n))},signalHint:function(e){var t="",i=this;e&&(t=i.currentValue+e.value.substr(i.currentValue.length)),i.hintValue!==t&&(i.hintValue=t,i.hint=e,(this.options.onHint||f.noop)(t))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?f.map(e,function(e){return{value:e,data:null}}):e},validateOrientation:function(e,t){return e=f.trim(e||"").toLowerCase(),-1===f.inArray(e,["auto","bottom","top"])&&(e=t),e},processResponse:function(e,t,i){var s=this,n=s.options;e.suggestions=s.verifySuggestionsFormat(e.suggestions),n.noCache||(s.cachedResponse[i]=e,n.preventBadQueries&&0===e.suggestions.length&&s.badQueries.push(t)),t===s.getQuery(s.currentValue)&&(s.suggestions=e.suggestions,s.suggest())},activate:function(e){var t,i=this,s=i.classes.selected,n=f(i.suggestionsContainer),o=n.find("."+i.classes.suggestion);return n.find("."+s).removeClass(s),i.selectedIndex=e,-1!==i.selectedIndex&&o.length>i.selectedIndex?(t=o.get(i.selectedIndex),f(t).addClass(s),t):null},selectHint:function(){var e=f.inArray(this.hint,this.suggestions);this.select(e)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var e=this;if(-1!==e.selectedIndex)return 0===e.selectedIndex?(f(e.suggestionsContainer).children().first().removeClass(e.classes.selected),e.selectedIndex=-1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var t=this,i=t.activate(e);if(i){var s,n,o,r=f(i).outerHeight();s=i.offsetTop,o=(n=f(t.suggestionsContainer).scrollTop())+t.options.maxHeight-r,s<n?f(t.suggestionsContainer).scrollTop(s):o<s&&f(t.suggestionsContainer).scrollTop(s-t.options.maxHeight+r),t.options.preserveInput||t.el.val(t.getValue(t.suggestions[e].value)),t.signalHint(null)}},onSelect:function(e){var t=this,i=t.options.onSelect,s=t.suggestions[e];t.currentValue=t.getValue(s.value),t.currentValue===t.el.val()||t.options.preserveInput||t.el.val(t.currentValue),t.signalHint(null),t.suggestions=[],t.selection=s,f.isFunction(i)&&i.call(t.element,s)},getValue:function(e){var t,i,s=this.options.delimiter;return s?1===(i=(t=this.currentValue).split(s)).length?e:t.substr(0,t.length-i[i.length-1].length)+e:e},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),this.disableKillerFn(),f(window).off("resize.autocomplete",this.fixPositionCapture),f(this.suggestionsContainer).remove()}},f.fn.autocomplete=f.fn.devbridgeAutocomplete=function(i,s){var n="autocomplete";return 0===arguments.length?this.first().data(n):this.each(function(){var e=f(this),t=e.data(n);"string"==typeof i?t&&"function"==typeof t[i]&&t[i](s):(t&&t.dispose&&t.dispose(),t=new c(this,i),e.data(n,t))})}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(i){var e=function(){if(i&&i.fn&&i.fn.select2&&i.fn.select2.amd)var e=i.fn.select2.amd;var t,n,c,u;return e&&e.requirejs||(e?c=e:e={},function(p){function d(e,t){return i.call(e,t)}function r(e,t){var i,s,n,o,r,a,l,c,u,h,p,d=t&&t.split("/"),f=x.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(r=(e=e.split("/")).length-1,x.nodeIdCompat&&k.test(e[r])&&(e[r]=e[r].replace(k,"")),e=d.slice(0,d.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(p=e[u]))e.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===e[2]||".."===e[0]))break;0<u&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||g)&&f){for(u=(i=e.split("/")).length;0<u;u-=1){if(s=i.slice(0,u).join("/"),d)for(h=d.length;0<h;h-=1)if((n=f[d.slice(0,h).join("/")])&&(n=n[s])){o=n,a=u;break}if(o)break;!l&&g&&g[s]&&(l=g[s],c=u)}!o&&l&&(o=l,a=c),o&&(i.splice(0,a,o),e=i.join("/"))}return e}function f(t,i){return function(){var e=s.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),l.apply(p,e.concat([t,i]))}}function g(t){return function(e){b[t]=e}}function m(e){if(d(_,e)){var t=_[e];delete _[e],w[e]=!0,o.apply(p,t)}if(!d(b,e)&&!d(w,e))throw new Error("No "+e);return b[e]}function a(e){var t,i=e?e.indexOf("!"):-1;return-1<i&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}var o,l,y,v,b={},_={},x={},w={},i=Object.prototype.hasOwnProperty,s=[].slice,k=/\.js$/;y=function(e,t){var i,s=a(e),n=s[0];return e=s[1],n&&(i=m(n=r(n,t))),n?e=i&&i.normalize?i.normalize(e,function o(t){return function(e){return r(e,t)}}(t)):r(e,t):(n=(s=a(e=r(e,t)))[0],e=s[1],n&&(i=m(n))),{f:n?n+"!"+e:e,n:e,pr:n,p:i}},v={require:function(e){return f(e)},exports:function(e){var t=b[e];return void 0!==t?t:b[e]={}},module:function(e){return{id:e,uri:"",exports:b[e],config:function t(e){return function(){return x&&x.config&&x.config[e]||{}}}(e)}}},o=function(e,t,i,s){var n,o,r,a,l,c,u=[],h=typeof i;if(s=s||e,"undefined"===h||"function"===h){for(t=!t.length&&i.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(a=y(t[l],s)).f))u[l]=v.require(e);else if("exports"===o)u[l]=v.exports(e),c=!0;else if("module"===o)n=u[l]=v.module(e);else if(d(b,o)||d(_,o)||d(w,o))u[l]=m(o);else{if(!a.p)throw new Error(e+" missing "+o);a.p.load(a.n,f(s,!0),g(o),{}),u[l]=b[o]}r=i?i.apply(b[e],u):void 0,e&&(n&&n.exports!==p&&n.exports!==b[e]?b[e]=n.exports:r===p&&c||(b[e]=r))}else e&&(b[e]=i)},n=c=l=function(e,t,i,s,n){if("string"==typeof e)return v[e]?v[e](t):m(y(e,t).f);if(!e.splice){if((x=e).deps&&l(x.deps,x.callback),!t)return;t.splice?(e=t,t=i,i=null):e=p}return t=t||function(){},"function"==typeof i&&(i=s,s=n),s?o(p,e,t,i):setTimeout(function(){o(p,e,t,i)},4),l},l.config=function(e){return l(e)},n._defined=b,(u=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),d(b,e)||d(_,e)||(_[e]=[e,t,i])}).amd={jQuery:!0}}(),e.requirejs=n,e.require=c,e.define=u),e.define("almond",function(){}),e.define("jquery",[],function(){var e=i||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(o){function h(e){var t=e.prototype,i=[];for(var s in t){"function"==typeof t[s]&&"constructor"!==s&&i.push(s)}return i}var e={Extend:function(e,t){function i(){this.constructor=e}var s={}.hasOwnProperty;for(var n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},Decorate:function(s,n){function o(){var e=Array.prototype.unshift,t=n.prototype.constructor.length,i=s.prototype.constructor;0<t&&(e.call(arguments,s.prototype.constructor),i=n.prototype.constructor),i.apply(this,arguments)}var e=h(n),t=h(s);n.displayName=s.displayName,o.prototype=new function u(){this.constructor=o};for(var i=0;i<t.length;i++){var r=t[i];o.prototype[r]=s.prototype[r]}for(var a=function(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var i=n.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),i.apply(this,arguments)}},l=0;l<e.length;l++){var c=e[l];o.prototype[c]=a(c)}return o}},t=function(){this.listeners={}};return t.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},t.prototype.trigger=function(e){var t=Array.prototype.slice,i=t.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),(i[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},t.prototype.invoke=function(e,t){for(var i=0,s=e.length;i<s;i++)e[i].apply(this,t)},e.Observable=t,e.generateChars=function(e){for(var t="",i=0;i<e;i++){t+=Math.floor(36*Math.random()).toString(36)}return t},e.bind=function(e,t){return function(){e.apply(t,arguments)}},e._convertData=function(e){for(var t in e){var i=t.split("-"),s=e;if(1!==i.length){for(var n=0;n<i.length;n++){var o=i[n];(o=o.substring(0,1).toLowerCase()+o.substring(1))in s||(s[o]={}),n==i.length-1&&(s[o]=e[t]),s=s[o]}delete e[t]}}return e},e.hasScroll=function(e,t){var i=o(t),s=t.style.overflowX,n=t.style.overflowY;return(s!==n||"hidden"!==n&&"visible"!==n)&&("scroll"===s||"scroll"===n||(i.innerHeight()<t.scrollHeight||i.innerWidth()<t.scrollWidth))},e.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},e.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var i=o();o.map(t,function(e){i=i.add(e)}),t=i}e.append(t)},e}),e.define("select2/results",["jquery","./utils"],function(p,e){function s(e,t,i){this.$element=e,this.data=i,this.options=t,s.__super__.constructor.call(this)}return e.Extend(s,e.Observable),s.prototype.render=function(){var e=p('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},s.prototype.clear=function(){this.$results.empty()},s.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=p('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),s=this.options.get("translations").get(e.message);i.append(t(s(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},s.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},s.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var s=e.results[i],n=this.option(s);t.push(n)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},s.prototype.position=function(e,t){t.find(".select2-results").append(e)},s.prototype.sort=function(e){return this.options.get("sorter")(e)},s.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},s.prototype.setClasses=function(){var t=this;this.data.current(function(e){var s=p.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=p(this),t=p.data(this,"data"),i=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<p.inArray(i,s)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},s.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},i=this.option(t);i.className+=" loading-results",this.$results.prepend(i)},s.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},s.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var s in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var n=i[s];t.setAttribute(s,n)}if(e.children){var o=p(t),r=document.createElement("strong");r.className="select2-results__group",p(r),this.template(e,r);for(var a=[],l=0;l<e.children.length;l++){var c=e.children[l],u=this.option(c);a.push(u)}var h=p("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(a),o.append(r),o.append(h)}else this.template(e,t);return p.data(t,"data",e),t},s.prototype.bind=function(t,e){var l=this,i=t.id+"-results";this.$results.attr("id",i),t.on("results:all",function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("results:append",function(e){l.append(e.data),t.isOpen()&&l.setClasses()}),t.on("query",function(e){l.hideMessages(),l.showLoading(e)}),t.on("select",function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),t.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=l.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),i=t.index(e);if(0!==i){var s=i-1;0===e.length&&(s=0);var n=t.eq(s);n.trigger("mouseenter");var o=l.$results.offset().top,r=n.offset().top,a=l.$results.scrollTop()+(r-o);0===s?l.$results.scrollTop(0):r-o<0&&l.$results.scrollTop(a)}}),t.on("results:next",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),i=t.index(e)+1;if(!(i>=t.length)){var s=t.eq(i);s.trigger("mouseenter");var n=l.$results.offset().top+l.$results.outerHeight(!1),o=s.offset().top+s.outerHeight(!1),r=l.$results.scrollTop()+o-n;0===i?l.$results.scrollTop(0):n<o&&l.$results.scrollTop(r)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){l.displayMessage(e)}),p.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop(),i=l.$results.get(0).scrollHeight-t+e.deltaY,s=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&i<=l.$results.height();s?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=p(this),i=t.data("data");return"true"===t.attr("aria-selected")?void(l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:i}):l.trigger("close",{})):void l.trigger("select",{originalEvent:e,data:i})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=p(this).data("data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:p(this)})})},s.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},s.prototype.destroy=function(){this.$results.remove()},s.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),i=this.$results.offset().top,s=e.offset().top,n=this.$results.scrollTop()+(s-i),o=s-i;n-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(n)}},s.prototype.template=function(e,t){var i=this.options.get("templateResult"),s=this.options.get("escapeMarkup"),n=i(e,t);null==n?t.style.display="none":"string"==typeof n?t.innerHTML=s(n):p(t).append(n)},s}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(i,e,n){function s(e,t){this.$element=e,this.options=t,s.__super__.constructor.call(this)}return e.Extend(s,e.Observable),s.prototype.render=function(){var e=i('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},s.prototype.bind=function(e,t){var i=this,s=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",s),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},s.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||i.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},s.prototype._attachCloseHandler=function(e){i(document.body).on("mousedown.select2."+e.id,function(e){var t=i(e.target).closest(".select2");i(".select2.select2-container--open").each(function(){var e=i(this);this!=t[0]&&e.data("element").select2("close")})})},s.prototype._detachCloseHandler=function(e){i(document.body).off("mousedown.select2."+e.id)},s.prototype.position=function(e,t){t.find(".selection").append(e)},s.prototype.destroy=function(){this._detachCloseHandler(this.container)},s.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},s}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,s){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,t),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},n.prototype.bind=function(t,e){var i=this;n.__super__.bind.apply(this,arguments);var s=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",s),this.$selection.attr("aria-labelledby",s),this.$selection.on("mousedown",function(e){1===e.which&&i.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||i.$selection.focus()}),t.on("selection:update",function(e){i.update(e.data)})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},n.prototype.selectionContainer=function(){return e("<span></span>")},n.prototype.update=function(e){if(0!==e.length){var t=e[0],i=this.$selection.find(".select2-selection__rendered"),s=this.display(t,i);i.empty().append(s),i.prop("title",t.title||t.text)}else this.clear()},n}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(s,e,a){function n(e,t){n.__super__.constructor.apply(this,arguments)}return a.Extend(n,e),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(e,t){var i=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){i.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!i.options.get("disabled")){var t=s(this).parent().data("data");i.trigger("unselect",{originalEvent:e,data:t})}})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},n.prototype.selectionContainer=function(){return s('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var s=e[i],n=this.selectionContainer(),o=this.display(s,n);n.append(o),n.prop("title",s.title||s.text),n.data("data",s),t.push(n)}var r=this.$selection.find(".select2-selection__rendered");a.appendMany(r,t)}},n}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(e,t){var i=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||i)return e.call(this,t);this.clear();var s=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(s)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(s,n){function e(){}return e.prototype.bind=function(e,t,i){var s=this;e.call(this,t,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){s._handleClear(e)}),t.on("keypress",function(e){s._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();for(var s=i.data("data"),n=0;n<s.length;n++){var o={data:s[n]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},e.prototype._handleKeyboardClear=function(e,t,i){i.isOpen()||(t.which==n.DELETE||t.which==n.BACKSPACE)&&this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var i=s('<span class="select2-selection__clear">&times;</span>');i.data("data",t),this.$selection.find(".select2-selection__rendered").prepend(i)}},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(s,e,r){function t(e,t,i){e.call(this,t,i)}return t.prototype.render=function(e){var t=s('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var i=e.call(this);return this._transferTabIndex(),i},t.prototype.bind=function(e,t,i){var s=this;e.call(this,t,i),t.on("open",function(){s.$search.trigger("focus")}),t.on("close",function(){s.$search.val(""),s.$search.removeAttr("aria-activedescendant"),s.$search.trigger("focus")}),t.on("enable",function(){s.$search.prop("disabled",!1),s._transferTabIndex()}),t.on("disable",function(){s.$search.prop("disabled",!0)}),t.on("focus",function(e){s.$search.trigger("focus")}),t.on("results:focus",function(e){s.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){s.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){s._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented(),e.which===r.BACKSPACE&&""===s.$search.val()){var t=s.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var i=t.data("data");s.searchRemoveChoice(i),e.preventDefault()}}});var n=document.documentMode,o=n&&n<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return o?void s.$selection.off("input.search input.searchcheck"):void s.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&"input"===e.type)s.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=r.SHIFT&&t!=r.CTRL&&t!=r.ALT&&t!=r.TAB&&s.handleSearch(e)}})},t.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},t.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},t.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},t.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},t.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},t.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").innerWidth():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},t}),e.define("select2/selection/eventRelay",["jquery"],function(r){function e(){}return e.prototype.bind=function(e,t,i){var s=this,n=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,t,i),t.on("*",function(e,t){if(-1!==r.inArray(e,n)){t=t||{};var i=r.Event("select2:"+e,{params:t});s.$element.trigger(i),-1!==r.inArray(e,o)&&(t.prevented=i.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,i){function s(e){this.dict=e||{}}return s.prototype.all=function(){return this.dict},s.prototype.get=function(e){return this.dict[e]},s.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},s._cache={},s.loadPath=function(e){if(!(e in s._cache)){var t=i(e);s._cache[e]=t}return new s(s._cache[e])},s}),e.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),e.define("select2/data/base",["../utils"],function(s){function i(e,t){i.__super__.constructor.call(this)}return s.Extend(i,s.Observable),i.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},i.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},i.prototype.bind=function(e,t){},i.prototype.destroy=function(){},i.prototype.generateResultId=function(e,t){var i=e.id+"-result-";return(i+=s.generateChars(4))+(null!=t.id?"-"+t.id.toString():"-"+s.generateChars(4))},i}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,t,a){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var i=[],s=this;this.$element.find(":selected").each(function(){var e=a(this),t=s.item(e);i.push(t)}),e(i)},i.prototype.select=function(n){var o=this;if(n.selected=!0,a(n.element).is("option"))return n.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(e){var t=[];(n=[n]).push.apply(n,e);for(var i=0;i<n.length;i++){var s=n[i].id;-1===a.inArray(s,t)&&t.push(s)}o.$element.val(t),o.$element.trigger("change")});else{var e=n.id;this.$element.val(e),this.$element.trigger("change")}},i.prototype.unselect=function(n){var o=this;if(this.$element.prop("multiple"))return n.selected=!1,a(n.element).is("option")?(n.element.selected=!1,void this.$element.trigger("change")):void this.current(function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i].id;s!==n.id&&-1===a.inArray(s,t)&&t.push(s)}o.$element.val(t),o.$element.trigger("change")})},i.prototype.bind=function(e,t){var i=this;(this.container=e).on("select",function(e){i.select(e.data)}),e.on("unselect",function(e){i.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){a.removeData(this,"data")})},i.prototype.query=function(s,e){var n=[],o=this;this.$element.children().each(function(){var e=a(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),i=o.matches(s,t);null!==i&&n.push(i)}}),e({results:n})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=a(t),s=this._normalizeItem(e);return s.element=t,a.data(t,"data",s),i},i.prototype.item=function(e){var t={};if(null!=(t=a.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),s=[],n=0;n<i.length;n++){var o=a(i[n]),r=this.item(o);s.push(r)}t.children=s}return(t=this._normalizeItem(t)).element=e[0],a.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){a.isPlainObject(e)||(e={id:e,text:e});return null!=(e=a.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),a.extend({},{selected:!1,disabled:!1},e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,f,g){function s(e,t){var i=t.get("data")||[];s.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(i))}return f.Extend(s,e),s.prototype.select=function(i){var e=this.$element.find("option").filter(function(e,t){return t.value==i.id.toString()});0===e.length&&(e=this.option(i),this.addOptions(e)),s.__super__.select.call(this,i)},s.prototype.convertToOptions=function(e){function t(e){return function(){return g(this).val()==e.id}}for(var i=this,s=this.$element.find("option"),n=s.map(function(){return i.item(g(this)).id}).get(),o=[],r=0;r<e.length;r++){var a=this._normalizeItem(e[r]);if(0<=g.inArray(a.id,n)){var l=s.filter(t(a)),c=this.item(l),u=g.extend(!0,{},a,c),h=this.option(u);l.replaceWith(h)}else{var p=this.option(a);if(a.children){var d=this.convertToOptions(a.children);f.appendMany(p,d)}o.push(p)}}return o},s}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,i){var s=o.ajax(e);return s.then(t),s.fail(i),s}};return o.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(i,s){function e(){var e=t.transport(t,function(e){var t=n.processResults(e,i);n.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),s(t)},function(){e.status&&"0"===e.status||n.trigger("results:message",{message:"errorLoading"})});n._request=e}var n=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);"function"==typeof t.url&&(t.url=t.url.call(this.$element,i)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,i)),this.ajaxOptions.delay&&null!=i.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},i}),e.define("select2/data/tags",["jquery"],function(u){function e(e,t,i){var s=i.get("tags"),n=i.get("createTag");void 0!==n&&(this.createTag=n);var o=i.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,i),u.isArray(s))for(var r=0;r<s.length;r++){var a=s[r],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,l,c){var u=this;return this._removeOldTags(),null==l.term||null!=l.page?void e.call(this,l,c):void e.call(this,l,function h(e,t){for(var i=e.results,s=0;s<i.length;s++){var n=i[s],o=null!=n.children&&!h({results:n.children},!0);if(n.text===l.term||o)return!t&&(e.data=i,void c(e))}if(t)return!0;var r=u.createTag(l);if(null!=r){var a=u.option(r);a.attr("data-select2-tag",!0),u.addOptions([a]),u.insertTag(i,r)}e.results=i,c(e)})},e.prototype.createTag=function(e,t){var i=u.trim(t.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(e,t,i){t.unshift(i)},e.prototype._removeOldTags=function(e){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||u(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(h){function e(e,t,i){var s=i.get("tokenizer");void 0!==s&&(this.tokenizer=s),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){e.call(this,t,i),this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,t,i){var n=this;t.term=t.term||"";var s=this.tokenizer(t,this.options,function o(e){var t=n._normalizeItem(e);if(!n.$element.find("option").filter(function(){return h(this).val()===t.id}).length){var i=n.option(t);i.attr("data-select2-tag",!0),n._removeOldTags(),n.addOptions([i])}!function s(e){n.trigger("select",{data:e})}(t)});s.term!==t.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),t.term=s.term),e.call(this,t,i)},e.prototype.tokenizer=function(e,t,i,s){for(var n=i.get("tokenSeparators")||[],o=t.term,r=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};r<o.length;){var l=o[r];if(-1!==h.inArray(l,n)){var c=o.substr(0,r),u=a(h.extend({},t,{term:c}));null!=u?(s(u),o=o.substr(r+1)||"",r=0):r++}else r++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),e.call(this,t,i)}return e.prototype.query=function(i,s,n){var o=this;this.current(function(e){var t=null!=e?e.length:0;return 0<o.maximumSelectionLength&&t>=o.maximumSelectionLength?void o.trigger("results:message",{message:"maximumSelected",args:{maximum:o.maximumSelectionLength}}):void i.call(o,s,n)})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},i.prototype.bind=function(){},i.prototype.position=function(e,t){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(n,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),t.prepend(i),t},t.prototype.bind=function(e,t,i){var s=this;e.call(this,t,i),this.$search.on("keydown",function(e){s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){n(this).off("keyup")}),this.$search.on("keyup input",function(e){s.handleSearch(e)}),t.on("open",function(){s.$search.attr("tabindex",0),s.$search.focus(),window.setTimeout(function(){s.$search.focus()},0)}),t.on("close",function(){s.$search.attr("tabindex",-1),s.$search.val("")}),t.on("focus",function(){t.isOpen()&&s.$search.focus()}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(s.showSearch(e)?s.$searchContainer.removeClass("select2-search--hide"):s.$searchContainer.addClass("select2-search--hide"))})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,s){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i,s)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var i=t.slice(0),s=t.length-1;0<=s;s--){var n=t[s];this.placeholder.id===n.id&&i.splice(s,1)}return i},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,i,s){this.lastParams={},e.call(this,t,i,s),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,i){var s=this;e.call(this,t,i),t.on("query",function(e){s.lastParams=e,s.loading=!0}),t.on("query:append",function(e){s.lastParams=e,s.loading=!0}),this.$results.on("scroll",function(){var e=n.contains(document.documentElement,s.$loadingMore[0]);if(!s.loading&&e){var t=s.$results.offset().top+s.$results.outerHeight(!1);s.$loadingMore.offset().top+s.$loadingMore.outerHeight(!1)<=t+50&&s.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(f,a){function e(e,t,i){this.$dropdownParent=i.get("dropdownParent")||f(document.body),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){var s=this,n=!1;e.call(this,t,i),t.on("open",function(){s._showDropdown(),s._attachPositioningHandler(t),n||(n=!0,t.on("results:all",function(){s._positionDropdown(),s._resizeDropdown()}),t.on("results:append",function(){s._positionDropdown(),s._resizeDropdown()}))}),t.on("close",function(){s._hideDropdown(),s._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,i){t.attr("class",i.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=i},e.prototype.render=function(e){var t=f("<span></span>"),i=e.call(this);return t.append(i),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var i=this,s="scroll.select2."+t.id,n="resize.select2."+t.id,o="orientationchange.select2."+t.id,r=this.$container.parents().filter(a.hasScroll);r.each(function(){f(this).data("select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})}),r.on(s,function(e){var t=f(this).data("select2-scroll-position");f(this).scrollTop(t.y)}),f(window).on(s+" "+n+" "+o,function(e){i._positionDropdown(),i._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var i="scroll.select2."+t.id,s="resize.select2."+t.id,n="orientationchange.select2."+t.id;this.$container.parents().filter(a.hasScroll).off(i),f(window).off(i+" "+s+" "+n)},e.prototype._positionDropdown=function(){var e=f(window),t=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),s=null,n=this.$container.offset();n.bottom=n.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=n.top,o.bottom=n.top+o.height;var r=this.$dropdown.outerHeight(!1),a=e.scrollTop(),l=e.scrollTop()+e.height(),c=a<n.top-r,u=l>n.bottom+r,h={left:n.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var d=p.offset();h.top-=d.top,h.left-=d.left,t||i||(s="below"),u||!c||t?!c&&u&&t&&(s="below"):s="above",("above"==s||t&&"below"!==s)&&(h.top=o.top-d.top-r),null!=s&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)),this.$dropdownContainer.css(h)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,i,s){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,i,s)}return e.prototype.showSearch=function(e,t){return!(function n(e){for(var t=0,i=0;i<e.length;i++){var s=e[i];s.children?t+=n(s.children):t++}return t}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var s=this;e.call(this,t,i),t.on("close",function(e){s._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var i=t.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var s=this.getHighlightedResults();if(!(s.length<1)){var n=s.data("data");null!=n.element&&n.element.selected||null==n.element&&n.selected||this.trigger("select",{data:n})}},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var s=this;e.call(this,t,i),t.on("select",function(e){s._selectTriggered(e)}),t.on("unselect",function(e){s._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(m,y,v,b,_,x,w,k,C,$,A,i,E,D,T,S,P,F,O,I,j,R,z,N,M,L,H,B,e){function t(){this.reset()}return t.prototype.apply=function(e){if(null==(e=m.extend(!0,{},this.defaults,e)).dataAdapter){if(null!=e.ajax?e.dataAdapter=T:null!=e.data?e.dataAdapter=D:e.dataAdapter=E,0<e.minimumInputLength&&(e.dataAdapter=$.Decorate(e.dataAdapter,F)),0<e.maximumInputLength&&(e.dataAdapter=$.Decorate(e.dataAdapter,O)),0<e.maximumSelectionLength&&(e.dataAdapter=$.Decorate(e.dataAdapter,I)),e.tags&&(e.dataAdapter=$.Decorate(e.dataAdapter,S)),(null!=e.tokenSeparators||null!=e.tokenizer)&&(e.dataAdapter=$.Decorate(e.dataAdapter,P)),null!=e.query){var t=y(e.amdBase+"compat/query");e.dataAdapter=$.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var i=y(e.amdBase+"compat/initSelection");e.dataAdapter=$.Decorate(e.dataAdapter,i)}}if(null==e.resultsAdapter&&(e.resultsAdapter=v,null!=e.ajax&&(e.resultsAdapter=$.Decorate(e.resultsAdapter,N)),null!=e.placeholder&&(e.resultsAdapter=$.Decorate(e.resultsAdapter,z)),e.selectOnClose&&(e.resultsAdapter=$.Decorate(e.resultsAdapter,H))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=j;else{var s=$.Decorate(j,R);e.dropdownAdapter=s}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=$.Decorate(e.dropdownAdapter,L)),e.closeOnSelect&&(e.dropdownAdapter=$.Decorate(e.dropdownAdapter,B)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var n=y(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=$.Decorate(e.dropdownAdapter,n)}e.dropdownAdapter=$.Decorate(e.dropdownAdapter,M)}if(null==e.selectionAdapter){if(e.multiple?e.selectionAdapter=_:e.selectionAdapter=b,null!=e.placeholder&&(e.selectionAdapter=$.Decorate(e.selectionAdapter,x)),e.allowClear&&(e.selectionAdapter=$.Decorate(e.selectionAdapter,w)),e.multiple&&(e.selectionAdapter=$.Decorate(e.selectionAdapter,k)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var o=y(e.amdBase+"compat/containerCss");e.selectionAdapter=$.Decorate(e.selectionAdapter,o)}e.selectionAdapter=$.Decorate(e.selectionAdapter,C)}if("string"==typeof e.language)if(0<e.language.indexOf("-")){var r=e.language.split("-")[0];e.language=[e.language,r]}else e.language=[e.language];if(m.isArray(e.language)){var a=new A;e.language.push("en");for(var l=e.language,c=0;c<l.length;c++){var u=l[c],h={};try{h=A.loadPath(u)}catch(f){try{u=this.defaults.amdLanguageBase+u,h=A.loadPath(u)}catch(g){e.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+u+'" could not be automatically loaded. A fallback will be used instead.');continue}}a.extend(h)}e.translations=a}else{var p=A.loadPath(this.defaults.amdLanguageBase+"en"),d=new A(e.language);d.extend(p),e.translations=d}return e},t.prototype.reset=function(){function r(e){return e.replace(/[^\u0000-\u007E]/g,function t(e){return i[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:$.escapeMarkup,language:e,matcher:function a(e,t){if(""===m.trim(e.term))return t;if(t.children&&0<t.children.length){for(var i=m.extend(!0,{},t),s=t.children.length-1;0<=s;s--)null==a(e,t.children[s])&&i.children.splice(s,1);return 0<i.children.length?i:a(e,i)}var n=r(t.text).toUpperCase(),o=r(e.term).toUpperCase();return-1<n.indexOf(o)?t:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},t.prototype.set=function(e,t){var i={};i[m.camelCase(e)]=t;var s=$._convertData(i);m.extend(this.defaults,s)},new t}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(s,o,n,r){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),this.options=n.apply(this.options),t&&t.is("input")){var i=s(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,i)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var i;i=o.fn.jquery&&"1."==o.fn.jquery.substr(0,2)&&e[0].dataset?o.extend(!0,{},e[0].dataset,e.data()):e.data();var s=o.extend(!0,{},i);for(var n in s=r._convertData(s))-1<o.inArray(n,t)||(o.isPlainObject(this.options[n])?o.extend(this.options[n],s[n]):this.options[n]=s[n]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(n,c,i,s){var u=function(e,t){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),u.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var s=this.options.get("dataAdapter");this.dataAdapter=new s(e,this.options);var n=this.render();this._placeContainer(n);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,n);var r=this.options.get("dropdownAdapter");this.dropdown=new r(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,n);var a=this.options.get("resultsAdapter");this.results=new a(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},u.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},u.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var s=this._resolveWidth(e,"style");return null!=s?s:this._resolveWidth(e,"element")}if("element"==t){var n=e.outerWidth(!1);return n<=0?"auto":n+"px"}if("style"!=t)return t;var o=e.attr("style");if("string"!=typeof o)return null;for(var r=o.split(";"),a=0,l=r.length;a<l;a+=1){var c=r[a].replace(/\s/g,"").match(i);if(null!==c&&1<=c.length)return c[1]}return null},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){n.each(e,t._syncA),n.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},u.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(e,t){i.trigger(e,t)})},u.prototype._registerSelectionEvents=function(){var i=this,s=["toggle","focus"];this.selection.on("toggle",function(){i.toggleDropdown()}),this.selection.on("focus",function(e){i.focus(e)}),this.selection.on("*",function(e,t){-1===n.inArray(e,s)&&i.trigger(e,t)})},u.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(e,t){i.trigger(e,t)})},u.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(e,t){i.trigger(e,t)})},u.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container.addClass("select2-container--open")}),this.on("close",function(){i.$container.removeClass("select2-container--open")}),this.on("enable",function(){i.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){i.$container.addClass("select2-container--disabled")}),this.on("blur",function(){i.$container.removeClass("select2-container--focus")}),this.on("query",function(t){i.isOpen()||i.trigger("open",{}),this.dataAdapter.query(t,function(e){i.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){i.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;i.isOpen()?t===s.ESC||t===s.TAB||t===s.UP&&e.altKey?(i.close(),e.preventDefault()):t===s.ENTER?(i.trigger("results:select",{}),e.preventDefault()):t===s.SPACE&&e.ctrlKey?(i.trigger("results:toggle",{}),e.preventDefault()):t===s.UP?(i.trigger("results:previous",{}),e.preventDefault()):t===s.DOWN&&(i.trigger("results:next",{}),e.preventDefault()):(t===s.ENTER||t===s.SPACE||t===s.DOWN&&e.altKey)&&(i.open(),e.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._syncSubtree=function(e,t){var i=!1,s=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var n=0;n<t.addedNodes.length;n++){t.addedNodes[n].selected&&(i=!0)}else t.removedNodes&&0<t.removedNodes.length&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(e){s.trigger("selection:update",{data:e})})}},u.prototype.trigger=function(e,t){var i=u.__super__.trigger,s={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in s){var n=s[e],o={prevented:!1,name:e,args:t};if(i.call(this,n,o),o.prevented)return void(t.prevented=!0)}i.call(this,e,t)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.trigger("query",{})},u.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},u.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},u.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];n.isArray(t)&&(t=n.map(t,function(e){return e.toString()})),this.$element.val(t).trigger("change")},u.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},u.prototype.render=function(){var e=n('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},u}),e.define("select2/compat/utils",["jquery"],function(r){return{syncCssClasses:function a(e,t,i){var s,n,o=[];(s=r.trim(e.attr("class")))&&r((s=""+s).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&o.push(this)}),(s=r.trim(t.attr("class")))&&r((s=""+s).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(n=i(this))&&o.push(n)}),e.attr("class",o.join(" "))}}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(r,a){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),i=this.options.get("containerCssClass")||"";r.isFunction(i)&&(i=i(this.$element));var s=this.options.get("adaptContainerCssClass");if(s=s||l,-1!==i.indexOf(":all:")){i=i.replace(":all:","");var n=s;s=function(e){var t=n(e);return null!=t?t+" "+e:e}}var o=this.options.get("containerCss")||{};return r.isFunction(o)&&(o=o(this.$element)),a.syncCssClasses(t,this.$element,s),t.css(o),t.addClass(i),t},e}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(r,a){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),i=this.options.get("dropdownCssClass")||"";r.isFunction(i)&&(i=i(this.$element));var s=this.options.get("adaptDropdownCssClass");if(s=s||l,-1!==i.indexOf(":all:")){i=i.replace(":all:","");var n=s;s=function(e){var t=n(e);return null!=t?t+" "+e:e}}var o=this.options.get("dropdownCss")||{};return r.isFunction(o)&&(o=o(this.$element)),a.syncCssClasses(t,this.$element,s),t.css(o),t.addClass(i),t},e}),e.define("select2/compat/initSelection",["jquery"],function(s){function e(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,e.call(this,t,i)}return e.prototype.current=function(e,t){var i=this;return this._isInitialized?void e.call(this,t):void this.initSelection.call(null,this.$element,function(e){i._isInitialized=!0,s.isArray(e)||(e=[e]),t(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(r){function e(e,t,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===t.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,i)}return e.prototype.current=function(e,t){function s(e,t){var i=[];return e.selected||-1!==r.inArray(e.id,t)?(e.selected=!0,i.push(e)):e.selected=!1,e.children&&i.push.apply(i,s(e.children,t)),i}for(var i=[],n=0;n<this._currentData.length;n++){var o=this._currentData[n];i.push.apply(i,s(o,this.$element.val().split(this._valueSeparator)))}t(i)},e.prototype.select=function(e,t){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+t.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(e){r.map(e,function(e){e.selected=!1})}),this.$element.val(t.id),this.$element.trigger("change")},e.prototype.unselect=function(e,n){var o=this;n.selected=!1,this.current(function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i];n.id!=s.id&&t.push(s.id)}o.$element.val(t.join(o._valueSeparator)),o.$element.trigger("change")})},e.prototype.query=function(e,t,i){for(var s=[],n=0;n<this._currentData.length;n++){var o=this._currentData[n],r=this.matches(t,o);null!==r&&s.push(r)}i({results:s})},e.prototype.addOptions=function(e,t){var i=r.map(t,function(e){return r.data(e[0],"data")});this._currentData.push.apply(this._currentData,i)},e}),e.define("select2/compat/matcher",["jquery"],function(a){return function e(o){return function r(e,t){var i=a.extend(!0,{},t);if(null==e.term||""===a.trim(e.term))return i;if(t.children){for(var s=t.children.length-1;0<=s;s--){var n=t.children[s];o(e.term,n.text,n)||i.children.splice(s,1)}if(0<i.children.length)return i}return o(e.term,t.text,t)?i:null}}}),e.define("select2/compat/query",[],function(){function e(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.callback=i,this.options.get("query").call(null,t)},e}),e.define("select2/dropdown/attachContainer",[],function(){function e(e,t,i){e.call(this,t,i)}return e.prototype.position=function(e,t,i){i.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},e}),e.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),e.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),t=function(p){function t(e){var t=e||window.event,i=y.call(arguments,1),s=0,n=0,o=0,r=0,a=0,l=0;if((e=p.event.fix(t)).type="mousewheel","detail"in t&&(o=-1*t.detail),"wheelDelta"in t&&(o=t.wheelDelta),"wheelDeltaY"in t&&(o=t.wheelDeltaY),"wheelDeltaX"in t&&(n=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=-1*o,o=0),s=0===o?n:o,"deltaY"in t&&(s=o=-1*t.deltaY),"deltaX"in t&&(n=t.deltaX,0===o&&(s=-1*n)),0!==o||0!==n){if(1===t.deltaMode){var c=p.data(this,"mousewheel-line-height");s*=c,o*=c,n*=c}else if(2===t.deltaMode){var u=p.data(this,"mousewheel-page-height");s*=u,o*=u,n*=u}if(r=Math.max(Math.abs(o),Math.abs(n)),(!m||r<m)&&(f(t,m=r)&&(m/=40)),f(t,r)&&(s/=40,n/=40,o/=40),s=Math[1<=s?"floor":"ceil"](s/m),n=Math[1<=n?"floor":"ceil"](n/m),o=Math[1<=o?"floor":"ceil"](o/m),v.settings.normalizeOffset&&this.getBoundingClientRect){var h=this.getBoundingClientRect();a=e.clientX-h.left,l=e.clientY-h.top}return e.deltaX=n,e.deltaY=o,e.deltaFactor=m,e.offsetX=a,e.offsetY=l,e.deltaMode=0,i.unshift(e,s,n,o),g&&clearTimeout(g),g=setTimeout(d,200),(p.event.dispatch||p.event.handle).apply(this,i)}}function d(){m=null}function f(e,t){return v.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var g,m,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],y=Array.prototype.slice;if(p.event.fixHooks)for(var s=e.length;s;)p.event.fixHooks[e[--s]]=p.event.mouseHooks;var v=p.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t;p.data(this,"mousewheel-line-height",v.getLineHeight(this)),p.data(this,"mousewheel-page-height",v.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null;p.removeData(this,"mousewheel-line-height"),p.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=p(e),i=t["offsetParent"in p.fn?"offsetParent":"parent"]();return i.length||(i=p("body")),parseInt(i.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return p(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};p.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],t):"object"==typeof exports?module.exports=t:t(i),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(n,e,o,t){if(null==n.fn.select2){var r=["open","close","destroy"];n.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=n.extend(!0,{},t);new o(n(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var i,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=n(this).data("select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=e[t].apply(e,s)}),-1<n.inArray(t,r)?this:i}}return null==n.fn.select2.defaults&&(n.fn.select2.defaults=t),o}),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return i.fn.select2.amd=e,t}),$(function(){$("input[name=d_from], input[name=d_to]").datepicker({dateFormat:"yyyy-mm-dd"}),$("form[name=categories-edit-stores] input[type=checkbox]").click(function(){var e=$(this),t=$("form[name=categories-edit-stores]");if(e.is(":checked")&&"0"!=e.attr("data-parent-id"))t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1).prop("checked",!0);else if(!e.is(":checked")&&"0"!=e.attr("data-parent-id")){var i=!0;t.find("input[data-parent-id="+e.attr("data-parent-id")+"]").each(function(){$(this).is(":checked")&&(i=!1)}),i&&t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1)}}),$(".select2-users").select2({ajax:{url:"/admin/users/list",type:"post",dataType:"json",delay:250,data:function(e){return{email:e.term}},processResults:function(e){return{results:e}},cache:!0},placeholder:"Выберите пользователя",minimumInputLength:1}),$(".input-datepicker").datepicker({dateFormat:"yyyy-mm-dd"}),$("#charity-checkbox-0").click(function(){var t=this.checked;Array.from(document.getElementsByClassName("charity-checkbox")).forEach(function(e){e.checked=t})}),$(".ajax-confirm").on("click",function(e){e.preventDefault(),$this=$(this),data={question:$this.data("question")||"Вы увуренны?",title:$this.data("title")||"Подтверждение действия",callbackYes:function(){$this=$(this),$.post("/admin/stores/import-cat/id:"+$this.data("store"),function(e){e.error?notification.notifi({message:e.error,type:"err"}):location.reload()},"json").fail(function(){notification.notifi({message:"Ошибка передачи данных",type:"err"})})},obj:$this},notification.confirm(data)})}),$(function(){$(".get_admitad").on("click",function(e){e.preventDefault(),href=this.href||"",$(".user_data").html(""),ad=$(".admitad_data"),ad.addClass("loading"),ad.removeClass("normal_load"),ad.text(""),tr=ad.closest("tr"),ids=[];for(var t=0;t<tr.length;t++)id=tr.eq(t).data("key"),id&&ids.push(id);return 0==ids.length?(ad.removeClass("loading"),void alert("Нет заказов для проверки")):($.post("/admin/payments/admitad-test",{ids:ids,update:0<href.indexOf("update")?1:0},function(e){ad=$(".admitad_data"),ad.text("данные не найдены"),ad.removeClass("loading"),tr=ad.closest("tr");for(var t=0;t<tr.length;t++){var i=tr.eq(t);if(id=i.data("key"),e[id]){tds=i.find(".admitad_data");for(var s=0;s<tds.length;s++){var n=tds.eq(s);key=n.data("col"),e[id][key]&&(n.html(e[id][key]),n.addClass("normal_load"))}}}e.user_data&&(user=e.user_data,user_data="<H2>Баланс пользователя "+user.email+" ("+user.uid+") обновлен</H2>",user_data+="<table class='table table-sum'>",user_data+="<tr>",user_data+="<th></th>",user_data+="<th>Старые данные</th>",user_data+="<th>Новые данные</th>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_pending+"</td>",user_data+="<td class='value'>"+user["new"].cnt_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_pending+"</td>",user_data+="<td class='value'>"+user["new"].sum_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_declined+"</td>",user_data+="<td class='value'>"+user["new"].cnt_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_declined+"</td>",user_data+="<td class='value'>"+user["new"].sum_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].cnt_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].sum_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Баланс (общий)</td>",user_data+="<td class='value'>"+user.old.balans+"</td>",user_data+="<td class='value'>"+user["new"].balans+"</td>",user_data+="</tr>",user_data+="</table>",$(".user_data").html(user_data))},"json").fail(function(){ad.removeClass("loading"),alert("Ошибка обработки запроса")}),!1)})}),void 0===mihaildev||!mihaildev){var mihaildev={};mihaildev.elFinder={openManager:function(e){var t="menubar=no,toolbar=no,location=no,directories=no,status=no,fullscreen=no";"auto"==e.width&&(e.width=$(window).width()/1.5),"auto"==e.height&&(e.height=$(window).height()/1.5),t=(t=t+",width="+e.width)+",height="+e.height,window.open(e.url,"ElFinderManager"+e.id,t).focus()},functions:{},register:function(e,t){this.functions[e]=t},callFunction:function(e,t){return this.functions[e](t,e)},functionReturnToInput:function(e,t){return jQuery("#"+t).val(e.url),!0}}}var megaslider=function(){var s,r,a,p,n,d,f,g=!1,c="section#mega_slider",o=!1,u=0,l=1,m=-1,h=300,y=700,v=0,b=6e3,_=["slider__text-lt","slider__text-ct","slider__text-rt","slider__text-lc","slider__text-cc","slider__text-rc","slider__text-lb","slider__text-cb","slider__text-rb"],x=["Лево верх","центр верх","право верх","Лево центр","центр","право центр","Лево низ","центр низ","право низ"],w=["show_no_delay","show_delay_05","show_delay_10","show_delay_15","show_delay_20","show_delay_25","show_delay_30"],k=["hide_no_delay","hide_delay_05","hide_delay_10","hide_delay_15","hide_delay_20"],C=["no","yes"],A=["","fixed__full-height"],E=["none","bordo","black","blue","dark-blue","red","orange","green","light-green","dark-green","pink","yellow"],D=["not_animate","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","fadeIn","fadeInDown","fadeInLeft","fadeInRight","fadeInUp","flipInX","flipInY","lightSpeedIn","rotateIn","rotateInDownLeft","rotateInUpLeft","rotateInUpRight","jackInTheBox","rollIn","zoomIn"],T=["not_animate","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeOut","fadeOutDown","fadeOutLeft","fadeOutRight","fadeOutUp","flipOutX","lipOutY","lightSpeedOut","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","hinge","rollOut"];function S(e){if(0!=e.length){e.wrap('<div class="select_img">'),(e=e.parent()).append('<button type="button" class="file_button"><i class="mce-ico mce-i-browse"></i></button>');for(var t=0;t<e.length;t++){var i=e.eq(t).find("input");i.attr("id")||i.attr("id","file_"+t+"_"+Date.now());var s=i.attr("id");mihaildev.elFinder.register(s,function(e,t){return $("#"+t).val(e.url).change(),!0})}$(document).on("click",".file_button",function(){var e=$(this).prev().attr("id");mihaildev.elFinder.openManager({url:"/manager/elfinder?filter=image&callback="+e+"&lang=ru",width:"auto",height:"auto",id:e})})}}function P(e){var t,i='<input class="'+(e.inputClass||"")+'" value="'+(e.value||"")+'">';(e.label&&(i="<label><span>"+e.label+"</span>"+i+"</label>"),e.parent&&(i="<"+e.parent+">"+i+"</"+e.parent+">"),i=$(i),e.onChange)&&(t=e.bind?(e.bind.input=i.find("input"),e.onChange.bind(e.bind)):e.onChange.bind(i.find("input")),i.find("input").on("change",t));return i}function F(n){var e=$("<select/>"),t=g[0][n.gr];!1!==n.index&&(t=t[n.index]),t[n.param]?n.value=t[n.param]:n.value=0,n.start_option&&e.append(n.start_option);for(var i=0;i<n.list.length;i++){var s,o=n.list[i];0==n.val_type?s=n.list[i]:1==n.val_type?s=i:2==n.val_type&&(s=i,o=n.val_list[i]);var r=s==n.value?"selected":"";"selected"==r&&e.attr("t_val",n.list[i]);var a='<option value="'+s+'" '+r+">"+o+"</option>";2==n.val_type&&(a=$(a).attr("code",n.list[i])),e.append(a)}if(e.on("change",function(){var e=(n=this).el.val(),t=n.el.find("option[value="+e+"]"),i=t.text(),s=t.attr("code");s||(s=i),!1!==n.index?g[0][n.gr][n.index][n.param]=e:g[0][n.gr][n.param]=e,n.obj.removeClass(n.prefix+n.el.attr("t_val")),n.obj.addClass(n.prefix+s),n.el.attr("t_val",s),$("textarea#slide_data").text(JSON.stringify(g[0]))}.bind({el:e,obj:n.obj,gr:n.gr,index:n.index,param:n.param,prefix:n.prefix||""})),n.parent){var l=$("<"+n.parent+"/>");return l.append(e),l}return e}function O(e){var t,i=[];return 0==e.type&&i.push("<span>Show animation</span>"),i.push(F({list:D,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"show_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Show delay</span>"),i.push(F({list:w,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"show_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(i.push("<br/>"),i.push("<span>Hide animation</span>")),i.push(F({list:T,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"hide_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Hide delay</span>"),i.push(F({list:k,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"hide_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(t=$('<div class="anim_sel"/>')).append(i),1==e.type&&(t=i),t}function I(e){var i=d.find("tr").length-1;e||(e={img:"",full_height:0,pos:0,show_delay:1,show_animation:"lightSpeedIn",hide_delay:1,hide_animation:"bounceOut"},g[0].fixed.push(e),N(e,$("#mega_slider .fixed_group"),!0));var t=$("<tr/>");t.append('<td class="td_counter"/>'),t.append(P({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{gr:"fixed",index:i,param:"img",obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer")},onChange:function(e){e.preventDefault();this.obj.css("background-image","url("+this.input.val()+")"),g[0].fixed[this.index].img=this.input.val(),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),t.append(F({list:_,val_list:x,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"pos",parent:"td"})),t.append(F({list:A,val_list:C,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"full_height",parent:"td"})),t.append(O({type:1,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer"),gr:"fixed",index:i,parent:"td"}));var s=$("<button/>",{text:"Удалить"});s.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].fixed.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:s,slider_data:g}));var n=$("<td/>").append(s);return t.append(n),d.append(t),{editor:t,data:e}}function j(e){var i=f.find("tr").length-1;e||(e={img:"",z:1},g[0].paralax.push(e),z(e,$("#mega_slider .parallax__group")));var t=$("<tr/>");t.append('<td class="td_counter"/>'),t.append(P({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span")},onChange:function(e){e.preventDefault();this.obj.css("background-image","url("+this.input.val()+")"),g[0].paralax[this.index].img=this.input.val(),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),t.append(F({list:_,val_list:x,val_type:2,obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span"),gr:"paralax",index:i,param:"pos",parent:"td",start_option:'<option value="" code="">на весь экран</option>'})),t.append(P({value:e.z,label:!1,parent:"td",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i)},onChange:function(e){e.preventDefault();this.obj.attr("z",this.input.val()),g[0].paralax[this.index].z=this.input.val(),$("textarea#slide_data").text(JSON.stringify(g[0]))}}));var s=$("<button/>",{text:"Удалить"});s.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].paralax.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:s,slider_data:g}));var n=$("<td/>").append(s);return t.append(n),f.append(t),{editor:t,data:e}}function R(e,t){var i=$("<div/>",{"class":"animation_layer"});return"undefined"!=typeof t.show_delay&&(i.addClass(w[t.show_delay]),t.show_animation&&i.addClass("slide_"+t.show_animation)),"undefined"!=typeof t.hide_delay&&(i.addClass(k[t.hide_delay]),t.hide_animation&&i.addClass("slide_"+t.hide_animation)),e.append(i),e}function z(e,t){var s=$('<div class="parallax__layer">');s.attr("z",e.z||10*i);var n=$("<span class='slider__text'/>");e.pos&&n.addClass(_[e.pos]),n.css("background-image","url("+e.img+")"),s.append(n),t.append(s)}function N(e,t,i){var s=$("<div class='fixed__layer'/>");s.addClass(_[e.pos]),e.full_height&&s.addClass("fixed__full-height"),(s=R(s,e)).find(".animation_layer").css("background-image","url("+e.img+")"),i?t.find(".slider__href").closest(".fixed__layer").before(s):t.append(s)}function M(){if(!$("#mega_slider").hasClass("stop_slide")){var e=$(".slide_select_box .slide_select"),t=e.length,i=$(".slide_select_box .slider-active").index()+1;t<=i&&(i=0),e.eq(i).click(),n=setTimeout(M,b)}}function L(e){var t=$("<img/>");t.on("load",function(){0==--s&&(r.append(function l(e){var t=$('<div class="slide"/>'),i=$('<a class="mob_bg" href="'+e.button.href+'"/>');if(i.css("background-image","url("+e.mobile+")"),t.append(i),m)return t;if(e.fon&&t.css("background-image","url("+e.fon+")"),e.paralax&&0<e.paralax.length){for(var s=$('<div class="parallax__group"/>'),n=0;n<e.paralax.length;n++)z(e.paralax[n],s);t.append(s)}var o=$('<div class="fixed_group"/>');for(n=0;n<e.fixed.length;n++)N(e.fixed[n],o);var r=$("<div class='fixed__layer'/>");r.addClass(_[e.button.pos]);var a=$("<a class='slider__href'/>");return a.attr("href",e.button.href),a.text(e.button.text),a.addClass(e.button.color),(r=R(r,e.button)).find("div").append(a),o.append(r),t.append(o),t}(g[v])),a.find("li").eq(v).removeClass("disabled"),0==v&&(r.find(".slide").addClass("first_show").addClass("slider-active"),a.find("li").eq(0).addClass("slider-active"),p||(n&&clearTimeout(n),n=setTimeout(function(){$(this).find(".first_show").removeClass("first_show")}.bind(r),b)),!1===m&&(o=$(c+" .slider-active .parallax__group>*"),u=0,setInterval(B,100)),p?function h(){$("#w1").remove(),$("#w1_button").remove(),g[0].mobile=g[0].mobile.split("?")[0];var e=$("#mega_slider_controle"),t=$('<div class="btn_box"/>');e.append("<h2>Управление</h2>"),e.append($("<textarea/>",{text:JSON.stringify(g[0]),id:"slide_data",name:p}));var i=$('<button class=""/>').text("Активировать слайд");t.append(i),i.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).addClass("slider-active"),$("#mega_slider .slide").eq(0).removeClass("hide_slide")}),i=$('<button class=""/>').text("Деактивировать слайд"),t.append(i),i.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).removeClass("slider-active"),$("#mega_slider .slide").eq(0).addClass("hide_slide")}),e.append(t),e.append("<h2>Общие параметры</h2>"),e.append(P({value:g[0].mobile,label:"Слайд для телефона",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),g[0].mobile=$(this).val(),$(".mob_bg").eq(0).css("background-image","url("+g[0].mobile+")"),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),e.append(P({value:g[0].fon,label:"Осноной фон",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),g[0].fon=$(this).val(),$("#mega_slider .slide").eq(0).css("background-image","url("+g[0].fon+")"),$("textarea#slide_data").text(JSON.stringify(g[0]))}}));var s=$('<div class="btns"/>');s.append("<h3>Кнопка перехода(для ПК версии)</h3>"),s.append(P({value:g[0].button.text,label:"Текст",onChange:function(e){e.preventDefault(),g[0].button.text=$(this).val(),$("#mega_slider .slider__href").eq(0).text(g[0].button.text),$("textarea#slide_data").text(JSON.stringify(g[0]))}}));var n=$("#mega_slider .slider__href").eq(0);s.append(P({value:g[0].button.href,label:"Ссылка",onChange:function(e){e.preventDefault(),g[0].button.href=$(this).val(),$("#mega_slider .slider__href").eq(0).attr("href",g[0].button.href),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),s.append("<br/>");var o=$("<label/>");s.append(o),o.append("<span>Оформление кнопки</span>"),o.append(F({list:E,val_type:0,obj:n,gr:"button",index:!1,param:"color"})),s.append("<br/>"),o=$("<label/>"),s.append(o),o.append("<span>Положение кнопки</span>"),o.append(F({list:_,val_list:x,val_type:2,obj:n.parent().parent(),gr:"button",index:!1,param:"pos"})),s.append(O({type:0,obj:n.parent(),gr:"button",index:!1})),e.append(s),(r=$('<div class="fixed_layer"/>')).append("<h2>Статические слои</h2>");var r,a,l,c="<th>№</th><th>Картинка</th><th>Положение</th><th>Слой на всю высоту</th><th>Анимация появления</th><th>Задержка появления</th><th>Анимация исчезновения</th><th>Задержка исчезновения</th><th>Действие</th>";if(d=$('<table border="1"><tr>'+c+"</tr></table>"),(a=g[0].fixed)&&0<a.length)for(var u=0;u<a.length;u++)I(a[u]);if(r.append(d),(l=$("<button/>",{text:"Добавить слой"})).on("click",function(e){e.preventDefault(),S((a=I(!1)).editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:g})),r.append(l),e.append(r),(r=$('<div class="paralax_layer"/>')).append("<h2>Паралакс слои</h2>"),c="<th>№</th><th>Картинка</th><th>Положение</th><th>Удаленность (целое положительное число)</th><th>Действие</th>",f=$('<table border="1"><tr>'+c+"</tr></table>"),(a=g[0].paralax)&&0<a.length)for(u=0;u<a.length;u++)j(a[u]);r.append(f),(l=$("<button/>",{text:"Добавить слой"})).on("click",function(e){e.preventDefault(),S((a=j(!1)).editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:g})),r.append(l),e.append(r),S(e.find(".fileSelect"))}():(n&&clearTimeout(n),n=setTimeout(M,b),$(".slide_select_box").on("click",".slide_select",function(){var e=$(this);if(!e.hasClass("slider-active")){var t=e.index();$(".slide_select_box .slider-active").removeClass("slider-active"),e.addClass("slider-active"),$(c+" .slide.slider-active").removeClass("slider-active"),$(c+" .slide").eq(t).addClass("slider-active"),o=$(c+" .slider-active .parallax__group>*")}}),$("#mega_slider").hover(function(){n&&clearTimeout(n),$("#mega_slider").addClass("stop_slide")},function(){n=setTimeout(M,b),$("#mega_slider").removeClass("stop_slide")}))),++v<g.length&&H())}).on("error",function(){s--}),t.prop("src",e)}function H(){var e=g[v];if(!(s=1)===m){if(s++,L(e.fon),e.paralax&&0<e.paralax.length){s+=e.paralax.length;for(var t=0;t<e.paralax.length;t++)L(e.paralax[t].img)}if(e.fixed&&0<e.fixed.length){s+=e.fixed.length;for(t=0;t<e.fixed.length;t++)L(e.fixed[t].img)}}L(e.mobile)}function B(){if(!o)return!1;for(var e=(u-10)/2,t=0;t<o.length;t++){var i=o.eq(t),s=i.attr("z"),n="rotate3d(0.1,0.8,0,"+e+"deg) scale("+(1+.5*s)+") translateZ(-"+(10+20*s)+"px)";i.css("transform",n)}20<=(u+=.1*l)&&(l=-l),u<=0&&(l=-l)}return S($(".fileSelect")),{init:function q(e,t){g=e,p=t;var i=$(c);i.html(""),r=$("<div/>",{"class":"slides"});var s=$("<div/>",{"class":"slide_control"});a=$("<ul/>",{"class":"slide_select_box"}),i.html('<div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>'),function o(e){var t=performance.now(),i=$("<img/>");function s(){var e=performance.now();if(i=$(this),e-=parseInt(i.attr("time")),h<e)m=!0;else{var t=screen.height>screen.width?screen.height:screen.width;m=t<y}1==m&&$(c).addClass("mobile_mode"),v=0,H(),$(".sk-folding-cube").remove()}i.attr("time",t),i.on("load",s()),0<g.length?(g[0].mobile=g[0].mobile+"?r="+Math.random(),i.prop("src",g[0].mobile)):s().bind(i)}(e[0]);for(var n=0;n<e.length;n++)a.append('<li class="slide_select disabled"/>');i.append(r),s.append(a),i.append(s)}}}();!function(n){function e(e){this.init(e)}function o(){this["this"].parent().removeClass("ajaxSavingFailed"),this["this"].parent().removeClass("ajaxSavingOk")}e.prototype.init=function(e){tagName=e.tagName.toLowerCase(),e=n(e),"input"==tagName||"select"==tagName?obj=e:obj=e.find("input,select"),post_url=e.attr("save_url"),uid=e.attr("uid");for(var t=0;t<obj.length;t++){var i={url:post_url,id:uid,"this":obj.eq(t)};i["this"].off("change").on("change",function(){var e=this,t=e["this"].val(),i=e["this"].attr("type");i&&"checkbox"==i.toLowerCase()&&(e["this"].prop("checked")||(t=0));var s={id:e.id,value:t,name:e["this"].attr("name")};e["this"].parent().addClass("ajaxInSaving"),n.post(e.url,s,function(){this["this"].parent().removeClass("ajaxInSaving"),this["this"].parent().addClass("ajaxSavingOk"),setTimeout(o.bind(this),3e3)}.bind(e)).fail(function(){this["this"].parent().removeClass("ajaxInSaving"),this["this"].parent().addClass("ajaxSavingFailed"),setTimeout(o.bind(this),4e3)}.bind(e))}.bind(i))}},n.fn.ajax_save=function(){return n(this).each(function(){new e(this)}),this}}(jQuery),$(".ajax_save").ajax_save(),$(function(){function e(){$this=$(this),post={id:$this.attr("uid"),type:$this.attr("mode")},$.post($this.attr("url"),post,function(e){if(e&&"err"==e)return msg=$this.data("remove-error"),msg||(msg="Невозможно удалить элемент"),void notification.notifi({message:msg,type:"err"});mode=$this.attr("mode"),mode||(mode="rm"),"rm"==mode&&(rm=$this.closest(".to_remove"),rm_class=rm.attr("rm_class"),rm_class&&$(rm_class).remove(),rm.remove(),notification.notifi({message:"Успешное удаление.",type:"info"})),"reload"==mode&&(location.reload(),location.href=location.href)}).fail(function(){notification.notifi({message:"Ошибка удалния",type:"err"})})}$("body").on("click",".ajax_remove",function(){notification.confirm({callbackYes:e,obj:$(this),notyfy_class:"notify_box-alert"})})});var notification=function(){var conteiner,mouseOver=0,timerClearAll=null,animationEnd="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",time=1e4,notification_box=!1,is_init=!1,confirm_opt={callbackYes:!1,callbackNo:!1,obj:!1,buttonTag:"div",buttonYesDop:"",buttonNoDop:""},alert_opt={title:"",question:"message",callbackYes:!1,buttonTag:"div",obj:!1};function testIphone(){/(iPhone|iPad|iPod).*(OS 11)/.test(navigator.userAgent)&&(notification_box.css("position","absolute"),notification_box.css("top",$(document).scrollTop()))}function init(){is_init=!0,0<(notification_box=$(".notification_box")).length||($("body").append("<div class='notification_box'></div>"),(notification_box=$(".notification_box")).on("click",".notify_control",closeModal),notification_box.on("click",".notify_close",closeModal),notification_box.on("click",closeModalFon))}function closeModal(){$("html").removeClass("show_notifi"),$(".notification_box .notify_content").html("")}function closeModalFon(e){"notification_box"==(e.target||e.srcElement).className&&closeModal()}var _setUpListeners=function(){$("body").on("click",".notification_close",_closePopup),$("body").on("mouseenter",".notification_container",_onEnter),$("body").on("mouseleave",".notification_container",_onLeave)},_onEnter=function(e){e&&e.preventDefault(),null!=timerClearAll&&(clearTimeout(timerClearAll),timerClearAll=null),conteiner.find(".notification_item").each(function(e){var t=$(this).data("option");t.timer&&clearTimeout(t.timer)}),mouseOver=1},_onLeave=function(){conteiner.find(".notification_item").each(function(e){$this=$(this);var t=$this.data("option");0<t.time&&(t.timer=setTimeout(_closePopup.bind(t.close),t.time-1500+100*e),$this.data("option",t))}),mouseOver=0},_closePopup=function(e){e&&e.preventDefault();var t=$(this).parent();t.on(animationEnd,function(){$(this).remove()}),t.addClass("notification_hide")};function alert(e){e||(e={}),alert_opt=objects(alert_opt,{buttonYes:lg("yes")}),e=objects(alert_opt,e),is_init||init(),testIphone(),notyfy_class="notify_box ",e.notyfy_class&&(notyfy_class+=e.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+="<div>"+e.title+"</div>",box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=e.question,box_html+="</div>",(e.buttonYes||e.buttonNo)&&(box_html+='<div class="notify_control">',e.buttonYes&&(box_html+="<"+e.buttonTag+' class="notify_btn_yes" '+e.buttonYesDop+">"+e.buttonYes+"</"+e.buttonTag+">"),e.buttonNo&&(box_html+="<"+e.buttonTag+' class="notify_btn_no" '+e.buttonNoDop+">"+e.buttonNo+"</"+e.buttonTag+">"),box_html+="</div>"),box_html+="</div>",notification_box.html(box_html),setTimeout(function(){$("html").addClass("show_notifi")},100)}function confirm(data){if(data||(data={}),confirm_opt=objects(confirm_opt,{title:lg("deleting"),question:lg("are_you_sure_to_delete"),buttonYes:lg("yes"),buttonNo:lg("no")}),data=objects(confirm_opt,data),"string"==typeof data.callbackYes){var code="data.callbackYes = function(){"+data.callbackYes+"}";eval(code)}is_init||init(),testIphone(),notyfy_class="notify_box ",data.notyfy_class&&(notyfy_class+=data.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+=data.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=data.question,box_html+="</div>",(data.buttonYes||data.buttonNo)&&(box_html+='<div class="notify_control">',data.buttonYes&&(box_html+='<div class="notify_btn_yes">'+data.buttonYes+"</div>"),data.buttonNo&&(box_html+='<div class="notify_btn_no">'+data.buttonNo+"</div>"),box_html+="</div>"),box_html+="</div>",notification_box.html(box_html),0!=data.callbackYes&&notification_box.find(".notify_btn_yes").on("click",data.callbackYes.bind(data.obj)),0!=data.callbackNo&&notification_box.find(".notify_btn_no").on("click",data.callbackNo.bind(data.obj)),setTimeout(function(){$("html").addClass("show_notifi")},100)}function notifi(e){e||(e={});var t={time:e.time||0===e.time?e.time:time};conteiner||(conteiner=$("<ul/>",{"class":"notification_container"}),$("body").append(conteiner),_setUpListeners());var i=$("<li/>",{"class":"notification_item"});e.type&&i.addClass("notification_item-"+e.type);var s=$("<span/>",{"class":"notification_close"});t.close=s,i.append(s);var n=$("<div/>",{"class":"notification_content"});if(e.title&&0<e.title.length){var o=$("<h5/>",{"class":"notification_title"});o.html(e.title),n.append(o)}var r=$("<div/>",{"class":"notification_text"});if(r.html(e.message),e.img&&0<e.img.length){var a=$("<div/>",{"class":"notification_img"});a.css("background-image","url("+e.img+")");var l=$("<div/>",{"class":"wrap"});l.append(a),l.append(r),n.append(l)}else n.append(r);i.append(n),conteiner.append(i),0<t.time&&(t.timer=setTimeout(_closePopup.bind(s),t.time)),i.data("option",t)}return{alert:alert,confirm:confirm,notifi:notifi}}();function ajaxForm(e){window.File&&window.FileReader&&window.FileList&&window.Blob;var t,i={error_class:".has-error"},p=!1;function s(e){e.preventDefault();var t=+new Date;if(t-p<2e3)return!1;p=t;var i=this,s=i.form,n=i.wrap;i.wrap_html=n.html();for(var o=!0,r=s.find('input.required, textarea.required, input[id="support-recaptcha"]'),a=0;a<r.length;a++){var l=r.eq(a).closest(".form-group").find(".help-block"),c=l&&l.data("message")?l.data("message"):lg("required");r.eq(a).val().length<1?(l.html(c),o=!1):l.html("")}if(!o)return!1;if(s.yiiActiveForm){s.off("afterValidate"),s.on("afterValidate",function h(e){0==data.form.find(data.param.error_class).length&&d(this);return!0}.bind(i)),s.yiiActiveForm("validate",!0);var u=s.data("yiiActiveForm");return u&&(u.validated=!0,s.data("yiiActiveForm",u),s.yiiActiveForm("validate"),o=u.validated),e.stopImmediatePropagation(),e.stopPropagation(),!1}if(!(o=o&&0==s.find(i.param.error_class).length))return!1;e.stopImmediatePropagation(),e.stopPropagation(),d(i)}function d(e){var t=e.form;t.serializeObject||addSRO();var i=t.serializeObject();t.addClass("loading"),t.html(""),e.wrap.html('<div style="text-align:center;"><p>'+lg("sending_data")+"</p></div>"),e.url+=(0<e.url.indexOf("?")?"&":"?")+"rc="+Math.random(),-1==e.url.indexOf(lang.href_prefix)&&(e.url="/"+lang.href_prefix+e.url,e.url=e.url.replace("//","/").replace("//","/")),$.post(e.url,i,function r(e){p=+new Date;var t=this.form,i=this.wrap,s=this.wrap_html;if(e.render?(e.notyfy_class="notify_white",notification.alert(e)):(i.removeClass("loading"),t.removeClass("loading"),e.html?(i.html(e.html),ajaxForm(i)):e.error||(t.removeClass("loading"),i.html(s),t.find("input[type=text],textarea").val(""),ajaxForm(i))),"object"==typeof e.error)for(var n in e.error)notification.notifi({type:"err",title:e.title?e.title:lg("error"),message:e.error[n]});else if(Array.isArray(e.error))for(var o=0;o<e.error.length;o++)notification.notifi({type:"err",title:e.title?e.title:lg("error"),message:e.error[o]});else(e.error||e.message)&&notification.notifi({type:!1===e.error?"success":"err",title:e.title?e.title:!1===e.error?lg("success"):lg("error"),message:e.message?e.message:e.error})}.bind(e),"json").fail(function s(){p=+new Date,this.form;var e=this.wrap;e.removeClass("loading"),e.html("<h3>"+lg("sorry_not_expected_error")+"<h3>"+lg("it_happens_sometimes")),ajaxForm(e)}.bind(e))}e.find("[required]").addClass("required").removeAttr("required");for(var n=0;n<e.length;n++)t=e.eq(n),form=t.find("form"),data={form:form,param:i,wrap:t},data.url=form.attr("action")||location.href,data.method=form.attr("method")||"post",form.unbind("submit"),form.on("submit",s.bind(data));"function"==typeof placeholder&&placeholder()}function addSRO(){$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}}$("[ref=popup]").on("click",function(e){e.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.alert(data)}),$("[ref=confirm]").on("click",function(e){e.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.confirm(data)}),$(".disabled").on("click",function(e){e.preventDefault(),$this=$(this),data=$this.data(),data.button_yes&&(data.buttonYes=data.button_yes),!1===data.button_yes&&(data.buttonYes=!1),notification.alert(data)}),$(function(){$("body").on("click",".add_shop_element",function(){$this=$(this),post={code:$this.attr("code"),parent:$this.attr("parent"),type:$this.attr("mode")},updateElement=function t(e){$this=$(this),mode=$this.attr("mode"),"rate"==mode&&($parent=$this.closest(".acordion_content"),$parent=$parent.find("table"),(e=$(e)).ajax_save(),$parent.append(e)),"tariff"==mode&&($parent=$this.closest(".acordion_content"),(e=$(e)).find(".ajax_save").ajax_save(),$parent.append(e)),"action"==mode&&($parent=$this.closest(".cpa_box"),(e=$(e)).find(".ajax_save").ajax_save(),$parent.append(e)),"cpa"==mode&&(e=JSON.parse(e),$parent=$this.closest(".tarif_select_blk"),$parent.prepend(e.tab_head_suf),$parent.find(".tab_control").append(e.tab_head_but).ajax_save(),(e=$(e.tab_body)).find(".ajax_save").ajax_save(),$parent.find(".content_tab").append(e))}.bind($this),$.post("/admin/stores/ajax_insert/"+$this.attr("mode"),post,updateElement).fail(function(){alert("Ошибка добавления")})}),$("body").on("click",".cpa_box_change_store",function(){$(".edit_blk_store").toggleClass("hidden")})}),addSRO();var accordionControl=$(".accordion .accordion-control");accordionControl.on("click",function(e){return e.preventDefault(),$this=$(this),$accordion=$this.closest(".accordion"),$accordion.hasClass("open")?($accordion.find(".accordion-content").hide(300),$accordion.removeClass("open")):($accordion.find(".accordion-content").show(300),$accordion.addClass("open")),!1}),accordionControl.show(),objects=function(e,t){var i,s=t;for(i in e)e.hasOwnProperty(i)&&(s[i]=i in t?t[i]:e[i]);return s},$(document).ready(function(){function e(){data=this,0==data.type?data.img.attr("src",data.src):(data.img.css("background-image","url("+data.src+")"),data.img.removeClass("no_ava"))}imgs=$("section:not(.navigation)").find(".logo img");for(var t=0;t<imgs.length;t++)img=imgs.eq(t),i=img.attr("src"),img.attr("src","/images/template-logo.jpg"),data={src:i,img:img,type:0},image=$("<img/>",{src:i}).on("load",e.bind(data));imgs=$(".comment-photo");for(t=0;t<imgs.length;t++)if(img=imgs.eq(t),!img.hasClass("no_ava")){var i=img.css("background-image");i=(i=i.replace('url("',"")).replace('")',""),img.addClass("no_ava"),img.css("background-image","url(/images/no_ava.png)"),data={src:i,img:img,type:1},image=$("<img/>",{src:i}).on("load",e.bind(data))}}),function(){for(els=$(".ajax_load").not("a"),i=0;i<els.length;i++)el=els.eq(i),url=el.attr("res"),$.get(url,function(e){$this=$(this),$this.html(e),ajaxForm($this)}.bind(el))}(),$("input[type=file]").on("change",function(e){var t=e.target.files[0];if(!t.type.match("image.*"))return!1;var i,s=new FileReader;data={el:this,f:t},s.onload=(i=data,function(e){img=$('[for="'+i.el.name+'"]'),0<img.length&&img.attr("src",e.target.result)}),s.readAsDataURL(t)}),$("body").on("click","a.ajaxFormOpen",function(e){e.preventDefault(),href=this.href.split("#"),href=href[href.length-1],data={buttonYes:!1,notyfy_class:"notify_white loading",question:""},modal_class=$(this).data("modal-class"),notification.alert(data),$.get("/"+href,function(e){$(".notify_box").removeClass("loading"),$(".notify_box .notify_content").html(e.html),ajaxForm($(".notify_box .notify_content")),modal_class&&$(".notify_box .notify_content .row").addClass(modal_class)},"json")}),$(".ajax-action").click(function(e){e.preventDefault();var t=$(this).data("value"),i=$(this).attr("href"),s=$("#grid-ajax-action").yiiGridView("getSelectedRows");if(0<s.length){if(!confirm("Подтвердите изменение записей"))return null;$.ajax({url:i,type:"post",dataType:"json",data:{status:t,id:s}}).done(function(e){$("#grid-ajax-action").yiiGridView("applyFilter"),0!=e.error?notification.notifi({message:"Произошла ошибка!",type:"err"}):notification.notifi({message:"Операция выполнена!",type:"success"})}).fail(function(e){302!=e.status&&notification.notifi({message:"Произошла ошибка!",type:"err"})})}else notification.notifi({message:"Необходимо выбрать элементы!",type:"err"})}),$(document).ready(function(){$(".editible[disabled]").on("click",function(){$(this).prop("disabled",!1)}),$(".editible[disabled]").on("mousedown",function(){$(this).prop("disabled",!1)}),btn='<button class=unlock><i class="fa fa-unlock fa-4" aria-hidden="true"></i></button>',btn=$(btn),btn.on("click",function(e){return e.preventDefault(),$this=$(this),inp=$this.prev(),inp.prop("disabled",!1),!1}),$(".editible[disabled]").after(btn)}),$(function(){({control:{headerStoresMenu:$("#top").find(".submenu-handl"),storesSubmenus:$("#top").find(".submenu-handl").find(".submenu"),events:function(){var t=this;t.headerStoresMenu.hover(function(){var e=$(this).find(".submenu");991<$(window).width()&&(clearTimeout(t.storeHide),t.storesSubmenus.css("display","none"),t.storeShow=setTimeout(function(){e.clearQueue(),e.css("display","block").animate({opacity:1},350)},200))},function(){var e=$(this).find(".submenu");991<$(window).width()&&(clearTimeout(t.storeShow),t.storeHide=setTimeout(function(){e.clearQueue(),e.animate({opacity:0},200,function(){$(this).css("display","none")})},300))})}}}).control.events()}),$(document).ready(function(){var s=screen.width-40;function e(e){var t=e.parent();if(0!=t.length&&"A"!=t[0].tagName){m_w=t.width()-30;var i=e.width();e.width("auto"),"IMG"==e[0].tagName&&i>e.width()&&(i=e.width()),50<s&&m_w>s&&(m_w=s),i>m_w>m_w?("IFRAME"==e[0].tagName&&(k=i/m_w,e.height(e.height()/k)),e.width(m_w)):e.width(i)}}function t(){e($(this))}var n=$(".container img,.container iframe");for($(".container img").height("auto"),i=0;i<n.length;i++)if(el=n.eq(i),"IFRAME"==el[0].tagName)e(el);else{var o=el.attr("src");image=$("<img/>",{src:o}),image.on("load",t.bind(el))}}),window.opener&&(document.referrer.indexOf("secretdiscounter")<0||(href=window.opener.location.href,0<href.indexOf("socials")||0<href.indexOf("login")||0<href.indexOf("admin")||0<href.indexOf("account")||(0<href.indexOf("store")||0<href.indexOf("coupon")||0<href.indexOf("settings")?window.opener.location.reload():window.opener.location.href=location.href,window.close()))),function(){function e(){var e=this,t=e.img;t.wrap('<div class="download"></div>');var i=t.parent();$("body").append(e.el),size=e.el.width()+"x"+e.el.height(),e.el.remove(),i.append("<span>"+size+'</span> <a href="'+e.src+'" download>Скачать</a>')}for(var t=$(".downloads_img img"),i=0;i<t.length;i++){var s=t.eq(i),n=s.attr("src");image=$("<img/>",{src:n}),data={src:n,img:s,el:image},image.on("load",e.bind(data))}}(),$("body").on("beforeValidate","form",function(){for(var e=!0,t=$(this).find('input[required="true"], input[aria-required="true"], textarea[required="true"], textarea[aria-required="true"]'),i=!0,s=0;s<t.length;s++)if(t.eq(s).val().length<1&&(e=!1,notification.notifi({type:"err",message:"Необходимо заполнить "+t.eq(s).attr("name")}),i)){i=!1,$("html, body").animate({scrollTop:$(t.eq(s)).offset().top},500);var n=$(t.eq(s)).closest(".cpa_box");if(n)for(var o=n[0].classList,r=0;r<o.length;r++)if(-1<o[r].indexOf("tab_")){var a=o[r].substring(4);$(this).find('input[type="radio"][value="'+a+'"]').prop("checked",!0)}}if(!e)return!1}),function(v){"use strict";var b=function(e){var t=arguments,i=!0,s=1;return e=e.replace(/%s/g,function(){var e=t[s++];return void 0===e?(i=!1,""):e}),i?e:""},s=function(e){for(var t=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],i=0;i<t.length;i++)e=e.replace(t[i].letters,t[i].base);return e};function a(t,e){var i=this,s=t.attr("name")||e.name||"";this.options=e,this.$el=t.hide(),this.$label=this.$el.closest("label"),0===this.$label.length&&this.$el.attr("id")&&(this.$label=v(b('label[for="%s"]',this.$el.attr("id").replace(/:/g,"\\:")))),this.$parent=v(b('<div class="ms-parent %s" %s/>',t.attr("class")||"",b('title="%s"',t.attr("title")))),this.$choice=v(b(['<button type="button" class="ms-choice">','<span class="placeholder">%s</span>',"<div></div>","</button>"].join(""),this.options.placeholder)),this.$drop=v(b('<div class="ms-drop %s"%s></div>',this.options.position,b(' style="width: %s"',this.options.dropWidth))),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",this.options.width||this.$el.css("width")||this.$el.outerWidth()+20),this.selectAllName='data-name="selectAll'+s+'"',this.selectGroupName='data-name="selectGroup'+s+'"',this.selectItemName='data-name="selectItem'+s+'"',this.options.keepOpen||v(document).click(function(e){v(e.target)[0]!==i.$choice[0]&&v(e.target).parents(".ms-choice")[0]!==i.$choice[0]&&(v(e.target)[0]===i.$drop[0]||v(e.target).parents(".ms-drop")[0]!==i.$drop[0]&&e.target!==t[0])&&i.options.isOpen&&i.close()})}a.prototype={constructor:a,init:function(){var i=this,s=v("<ul></ul>");this.$drop.html(""),this.options.filter&&this.$drop.append(['<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"].join("")),this.options.selectAll&&!this.options.single&&s.append(['<li class="ms-select-all">',"<label>",b('<input type="checkbox" %s /> ',this.selectAllName),this.options.selectAllDelimiter[0],this.options.selectAllText,this.options.selectAllDelimiter[1],"</label>","</li>"].join("")),v.each(this.$el.children(),function(e,t){s.append(i.optionToHtml(e,t))}),s.append(b('<li class="ms-no-results">%s</li>',this.options.noMatchesFound)),this.$drop.append(s),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open()},optionToHtml:function(e,t,i,s){var n,o=this,r=v(t),a=r.attr("class")||"",l=b('title="%s"',r.attr("title")),c=this.options.multiple?"multiple":"",u=this.options.single?"radio":"checkbox";if(r.is("option")){var h,p=r.val(),d=o.options.textTemplate(r),f=r.prop("selected"),g=b('style="%s"',this.options.styler(p));return n=s||r.prop("disabled"),(h=v([b('<li class="%s %s" %s %s>',c,a,l,g),b('<label class="%s">',n?"disabled":""),b('<input type="%s" %s%s%s%s>',u,this.selectItemName,f?' checked="checked"':"",n?' disabled="disabled"':"",b(' data-group="%s"',i)),b("<span>%s</span>",d),"</label>","</li>"].join(""))).find("input").val(p),h}if(r.is("optgroup")){var m=o.options.labelTemplate(r),y=v("<div/>");return i="group_"+e,n=r.prop("disabled"),y.append(['<li class="group">',b('<label class="optgroup %s" data-group="%s">',n?"disabled":"",i),this.options.hideOptgroupCheckboxes||this.options.single?"":b('<input type="checkbox" %s %s>',this.selectGroupName,n?'disabled="disabled"':""),m,"</label>","</li>"].join("")),v.each(r.children(),function(e,t){y.append(o.optionToHtml(e,t,i,n))}),y.html()}},events:function(){var s=this,t=function(e){e.preventDefault(),s[s.options.isOpen?"close":"open"]()};this.$label&&this.$label.off("click").on("click",function(e){"label"===e.target.nodeName.toLowerCase()&&e.target===this&&(t(e),s.options.filter&&s.options.isOpen||s.focus(),e.stopPropagation())}),this.$choice.off("click").on("click",t).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$parent.off("keydown").on("keydown",function(e){switch(e.which){case 27:s.close(),s.$choice.focus()}}),this.$searchInput.off("keydown").on("keydown",function(e){9===e.keyCode&&e.shiftKey&&s.close()}).off("keyup").on("keyup",function(e){if(s.options.filterAcceptOnEnter&&(13===e.which||32==e.which)&&s.$searchInput.val())return s.$selectAll.click(),s.close(),void s.focus();s.filter()}),this.$selectAll.off("click").on("click",function(){var e=v(this).prop("checked"),t=s.$selectItems.filter(":visible");t.length===s.$selectItems.length?s[e?"checkAll":"uncheckAll"]():(s.$selectGroups.prop("checked",e),t.prop("checked",e),s.options[e?"onCheckAll":"onUncheckAll"](),s.update())}),this.$selectGroups.off("click").on("click",function(){var e=v(this).parent().attr("data-group"),t=s.$selectItems.filter(":visible").filter(b('[data-group="%s"]',e)),i=t.length!==t.filter(":checked").length;t.prop("checked",i),s.updateSelectAll(),s.update(),s.options.onOptgroupClick({label:v(this).parent().text(),checked:i,children:t.get(),instance:s})}),this.$selectItems.off("click").on("click",function(){if(s.updateSelectAll(),s.update(),s.updateOptGroupSelect(),s.options.onClick({label:v(this).parent().text(),value:v(this).val(),checked:v(this).prop("checked"),instance:s}),s.options.single&&s.options.isOpen&&!s.options.keepOpen&&s.close(),s.options.single){var e=v(this).val();s.$selectItems.filter(function(){return v(this).val()!==e}).each(function(){v(this).prop("checked",!1)}),s.update()}})},open:function(){if(!this.$choice.hasClass("disabled")){if(this.options.isOpen=!0,this.$choice.find(">div").addClass("open"),this.$drop[this.animateMethod("show")](),this.$selectAll.parent().show(),this.$noResults.hide(),this.$el.children().length||(this.$selectAll.parent().hide(),this.$noResults.show()),this.options.container){var e=this.$drop.offset();this.$drop.appendTo(v(this.options.container)),this.$drop.offset({top:e.top,left:e.left})}this.options.filter&&(this.$searchInput.val(""),this.$searchInput.focus(),this.filter()),this.options.onOpen()}},close:function(){this.options.isOpen=!1,this.$choice.find(">div").removeClass("open"),this.$drop[this.animateMethod("hide")](),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose()},animateMethod:function(e){return{show:{fade:"fadeIn",slide:"slideDown"},hide:{fade:"fadeOut",slide:"slideUp"}}[e][this.options.animate]||e},update:function(e){var t=this.options.displayValues?this.getSelects():this.getSelects("text"),i=this.$choice.find(">span"),s=t.length;0===s?i.addClass("placeholder").html(this.options.placeholder):this.options.allSelected&&s===this.$selectItems.length+this.$disableItems.length?i.removeClass("placeholder").html(this.options.allSelected):this.options.ellipsis&&s>this.options.minimumCountSelected?i.removeClass("placeholder").text(t.slice(0,this.options.minimumCountSelected).join(this.options.delimiter)+"..."):this.options.countSelected&&s>this.options.minimumCountSelected?i.removeClass("placeholder").html(this.options.countSelected.replace("#",t.length).replace("%",this.$selectItems.length+this.$disableItems.length)):i.removeClass("placeholder").text(t.join(this.options.delimiter)),this.options.addTitle&&i.prop("title",this.getSelects("text")),this.$el.val(this.getSelects()).trigger("change"),this.$drop.find("li").removeClass("selected"),this.$drop.find("input:checked").each(function(){v(this).parents("li").first().addClass("selected")}),e||this.$el.trigger("change")},updateSelectAll:function(e){var t=this.$selectItems;e||(t=t.filter(":visible")),this.$selectAll.prop("checked",t.length&&t.length===t.filter(":checked").length),!e&&this.$selectAll.prop("checked")&&this.options.onCheckAll()},updateOptGroupSelect:function(){var n=this.$selectItems.filter(":visible");v.each(this.$selectGroups,function(e,t){var i=v(t).parent().attr("data-group"),s=n.filter(b('[data-group="%s"]',i));v(t).prop("checked",s.length&&s.length===s.filter(":checked").length)})},getSelects:function(e){var r=this,a=[],t=[];return this.$drop.find(b("input[%s]:checked",this.selectItemName)).each(function(){a.push(v(this).parents("li").first().text()),t.push(v(this).val())}),"text"===e&&this.$selectGroups.length&&(a=[],this.$selectGroups.each(function(){var e=[],t=v.trim(v(this).parent().text()),i=v(this).parent().data("group"),s=r.$drop.find(b('[%s][data-group="%s"]',r.selectItemName,i)),n=s.filter(":checked");if(n.length){if(e.push("["),e.push(t),s.length>n.length){var o=[];n.each(function(){o.push(v(this).parent().text())}),e.push(": "+o.join(", "))}e.push("]"),a.push(e.join(""))}})),"text"===e?a:t},setSelects:function(e){var n=this;this.$selectItems.prop("checked",!1),this.$disableItems.prop("checked",!1),v.each(e,function(e,t){n.$selectItems.filter(b('[value="%s"]',t)).prop("checked",!0),n.$disableItems.filter(b('[value="%s"]',t)).prop("checked",!0)}),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length+this.$disableItems.filter(":checked").length),v.each(n.$selectGroups,function(e,t){var i=v(t).parent().attr("data-group"),s=n.$selectItems.filter('[data-group="'+i+'"]');v(t).prop("checked",s.length&&s.length===s.filter(":checked").length)}),this.update()},enable:function(){this.$choice.removeClass("disabled")},disable:function(){this.$choice.addClass("disabled")},checkAll:function(){this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems.prop("checked",!1),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},focus:function(){this.$choice.focus(),this.options.onFocus()},blur:function(){this.$choice.blur(),this.options.onBlur()},refresh:function(){this.init()},destroy:function(){this.$el.show(),this.$parent.remove(),this.$el.data("multipleSelect",null)},filter:function(){var i=this,t=v.trim(this.$searchInput.val()).toLowerCase();0===t.length?(this.$selectAll.parent().show(),this.$selectItems.parent().show(),this.$disableItems.parent().show(),this.$selectGroups.parent().show(),this.$noResults.hide()):(this.$selectItems.each(function(){var e=v(this).parent();e[s(e.text().toLowerCase()).indexOf(s(t))<0?"hide":"show"]()}),this.$disableItems.parent().hide(),this.$selectGroups.each(function(){var e=v(this).parent(),t=e.attr("data-group");e[i.$selectItems.filter(":visible").filter(b('[data-group="%s"]',t)).length?"show":"hide"]()}),this.$selectItems.parent().filter(":visible").length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll(),this.options.onFilter(t)}},v.fn.multipleSelect=function(){var s,n=arguments[0],o=arguments,r=["getSelects","setSelects","enable","disable","open","close","checkAll","uncheckAll","focus","blur","refresh","destroy"];return this.each(function(){var e=v(this),t=e.data("multipleSelect"),i=v.extend({},v.fn.multipleSelect.defaults,e.data(),"object"==typeof n&&n);if(t||(t=new a(e,i),e.data("multipleSelect",t)),"string"==typeof n){if(v.inArray(n,r)<0)throw"Unknown method: "+n;s=t[n](o[1])}else t.init(),o[1]&&(s=t[o[1]].apply(t,[].slice.call(o,2)))}),void 0!==s?s:this},v.fn.multipleSelect.defaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllDelimiter:["[","]"],minimumCountSelected:3,ellipsis:!1,multiple:!1,multipleWidth:80,single:!1,filter:!1,width:undefined,dropWidth:undefined,maxHeight:250,container:null,position:"bottom",keepOpen:!1,animate:"none",displayValues:!1,delimiter:", ",addTitle:!1,filterAcceptOnEnter:!1,hideOptgroupCheckboxes:!1,selectAllText:"Select all",allSelected:"All selected",countSelected:"# of % selected",noMatchesFound:"No matches found",styler:function(){return!1},textTemplate:function(e){return e.html()},labelTemplate:function(e){return e.attr("label")},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onFilter:function(){return!1}},v("select[multiple]").multipleSelect()}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(b){b.ui=b.ui||{},b.ui.version="1.12.1";var e,o,i=0,a=Array.prototype.slice;b.cleanData=(o=b.cleanData,function(e){var t,i,s;for(s=0;null!=(i=e[s]);s++)try{(t=b._data(i,"events"))&&t.remove&&b(i).triggerHandler("remove")}catch(n){}o(e)}),b.widget=function(e,i,t){var s,n,o,r={},a=e.split(".")[0],l=a+"-"+(e=e.split(".")[1]);return t||(t=i,i=b.Widget),b.isArray(t)&&(t=b.extend.apply(null,[{}].concat(t))),b.expr[":"][l.toLowerCase()]=function(e){return!!b.data(e,l)},b[a]=b[a]||{},s=b[a][e],n=b[a][e]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new n(e,t)},b.extend(n,s,{version:t.version,_proto:b.extend({},t),_childConstructors:[]}),(o=new i).options=b.widget.extend({},o.options),b.each(t,function(t,o){return b.isFunction(o)?void(r[t]=function(){function s(){return i.prototype[t].apply(this,arguments)}function n(e){return i.prototype[t].apply(this,e)}return function(){var e,t=this._super,i=this._superApply;return this._super=s,this._superApply=n,e=o.apply(this,arguments),this._super=t,this._superApply=i,e}}()):void(r[t]=o)}),n.prototype=b.widget.extend(o,{widgetEventPrefix:s&&o.widgetEventPrefix||e},r,{constructor:n,namespace:a,widgetName:e,widgetFullName:l}),s?(b.each(s._childConstructors,function(e,t){var i=t.prototype;b.widget(i.namespace+"."+i.widgetName,n,t._proto)}),delete s._childConstructors):i._childConstructors.push(n),b.widget.bridge(e,n),n},b.widget.extend=function(e){for(var t,i,s=a.call(arguments,1),n=0,o=s.length;n<o;n++)for(t in s[n])i=s[n][t],s[n].hasOwnProperty(t)&&void 0!==i&&(e[t]=b.isPlainObject(i)?b.isPlainObject(e[t])?b.widget.extend({},e[t],i):b.widget.extend({},i):i);return e},b.widget.bridge=function(o,t){var r=t.prototype.widgetFullName||o;b.fn[o]=function(i){var e="string"==typeof i,s=a.call(arguments,1),n=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=b.data(this,r);return"instance"===i?(n=t,!1):t?b.isFunction(t[i])&&"_"!==i.charAt(0)?(e=t[i].apply(t,s))!==t&&void 0!==e?(n=e&&e.jquery?n.pushStack(e.get()):e,!1):void 0:b.error("no such method '"+i+"' for "+o+" widget instance"):b.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):n=void 0:(s.length&&(i=b.widget.extend.apply(null,[i].concat(s))),this.each(function(){var e=b.data(this,r);e?(e.option(i||{}),e._init&&e._init()):b.data(this,r,new t(i,this))})),n}},b.Widget=function(){},b.Widget._childConstructors=[],b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=b(t||this.defaultElement||this)[0],this.element=b(t),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=b(),this.hoverable=b(),this.focusable=b(),this.classesElementLookup={},t!==this&&(b.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=b(t.style?t.ownerDocument:t.document||t),this.window=b(this.document[0].defaultView||this.document[0].parentWindow)),this.options=b.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){var i=this;this._destroy(),b.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:b.noop,widget:function(){return this.element},option:function(e,t){var i,s,n,o=e;if(0===arguments.length)return b.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(i=e.split(".")).shift(),i.length){for(s=o[e]=b.widget.extend({},this.options[e]),n=0;i.length-1>n;n++)s[i[n]]=s[i[n]]||{},s=s[i[n]];if(e=i.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,s;for(t in e)s=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&s&&s.length&&(i=b(s.get()),this._removeClass(s,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(n){function e(e,t){var i,s;for(s=0;e.length>s;s++)i=r.classesElementLookup[e[s]]||b(),i=n.add?b(b.unique(i.get().concat(n.element.get()))):b(i.not(n.element).get()),r.classesElementLookup[e[s]]=i,o.push(e[s]),t&&n.classes[e[s]]&&o.push(n.classes[e[s]])}var o=[],r=this;return n=b.extend({element:this.element,classes:this.options.classes||{}},n),this._on(n.element,{remove:"_untrackClassesElement"}),n.keys&&e(n.keys.match(/\S+/g)||[],!0),n.extra&&e(n.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(i){var s=this;b.each(s.classesElementLookup,function(e,t){-1!==b.inArray(i.target,t)&&(s.classesElementLookup[e]=b(t.not(i.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof e||null===e,o={extra:n?t:i,keys:n?e:t,element:n?this.element:e,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(r,a,e){var l,c=this;"boolean"!=typeof r&&(e=a,a=r,r=!1),e?(a=l=b(a),this.bindings=this.bindings.add(a)):(e=a,a=this.element,l=this.widget()),b.each(e,function(e,t){function i(){return r||!0!==c.options.disabled&&!b(this).hasClass("ui-state-disabled")?("string"==typeof t?c[t]:t).apply(c,arguments):void 0}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||b.guid++);var s=e.match(/^([\w:-]*)\s*(.*)$/),n=s[1]+c.eventNamespace,o=s[2];o?l.on(n,o,i):a.on(n,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=b(this.bindings.not(e).get()),this.focusable=b(this.focusable.not(e).get()),this.hoverable=b(this.hoverable.not(e).get())},_delay:function(e,t){var i=this;return setTimeout(function s(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(b(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(b(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(b(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(b(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var s,n,o=this.options[e];if(i=i||{},(t=b.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],n=t.originalEvent)for(s in n)s in t||(t[s]=n[s]);return this.element.trigger(t,i),!(b.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},b.each({show:"fadeIn",hide:"fadeOut"},function(o,r){b.Widget.prototype["_"+o]=function(t,e,i){"string"==typeof e&&(e={effect:e});var s,n=e?!0===e||"number"==typeof e?r:e.effect||r:o;"number"==typeof(e=e||{})&&(e={duration:e}),s=!b.isEmptyObject(e),e.complete=i,e.delay&&t.delay(e.delay),s&&b.effects&&b.effects.effect[n]?t[o](e):n!==o&&t[n]?t[n](e.duration,e.easing,i):t.queue(function(e){b(this)[o](),i&&i.call(t[0]),e()})}}),b.widget,b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(t){return function(e){return!!b.data(e,t)}}):function(e,t,i){return!!b.data(e,i[3])}}),b.fn.extend({disableSelection:(e="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),b.fn.scrollParent=function(e){var t=this.css("position"),i="absolute"===t,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var e=b(this);return(!i||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&n.length?n:b(this[0].ownerDocument||document)},b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var n=!1;b(document).on("mouseup",function(){n=!1}),b.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){return!0===b.data(e.target,t.widgetName+".preventClickEvent")?(b.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,i=1===e.which,s=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&b(e.target).closest(this.options.cancel).length;return i&&!s&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?e.preventDefault():(!0===b.data(e.target,this.widgetName+".preventClickEvent")&&b.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0)),!0}},_mouseMove:function(e){if(this._mouseMoved){if(b.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&b.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,n=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),b.ui.plugin={add:function(e,t,i){var s,n=b.ui[e].prototype;for(s in i)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([t,i[s]])},call:function(e,t,i,s){var n,o=e.plugins[t];if(o&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)e.options[o[n][0]]&&o[n][1].apply(e.element,i)}},b.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(a){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},b.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&b(e).trigger("blur")},b.widget("ui.draggable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||0<b(e.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=b(this);return b("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=b.ui.safeActiveElement(this.document[0]);b(e.target).closest(t).length||b.ui.safeBlur(t)},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===b(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!t.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new b.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",b.ui.ddmanager&&b.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,i=!1;return b.ui.ddmanager&&!this.options.dropBehaviour&&(i=b.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),b.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new b.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!b(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,i=b.isFunction(t.helper),s=i?b(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),i&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),b.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,s=this.options,n=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,b(n).width()-this.helperProportions.width-this.margins.left,(b(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),void((i=(t=b(s.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,o,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(i=this.relativeContainer?(s=this.relativeContainer.offset(),[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(n=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-r.grid[1]:n+r.grid[1]:n,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,i){return i=i||this._uiHash(),b.ui.plugin.call(this,e,[t,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),b.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),b.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,i){var s=b.extend({},e,{item:i.element});i.sortables=[],b(i.options.connectToSortable).each(function(){var e=b(this).sortable("instance");e&&!e.options.disabled&&(i.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,s))})},stop:function(t,e,i){var s=b.extend({},e,{item:i.element});i.cancelHelperRemoval=!1,b.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,s))})},drag:function(i,s,n){b.each(n.sortables,function(){var e=!1,t=this;t.positionAbs=n.positionAbs,t.helperProportions=n.helperProportions,t.offset.click=n.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,b.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==t&&this._intersectsWith(this.containerCache)&&b.contains(t.element[0],this.element[0])&&(e=!1),e})),e?(t.isOver||(t.isOver=1,n._parent=s.helper.parent(),t.currentItem=s.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return s.helper[0]},i.target=t.currentItem[0],t._mouseCapture(i,!0),t._mouseStart(i,!0,!0),t.offset.click.top=n.offset.click.top,t.offset.click.left=n.offset.click.left,t.offset.parent.left-=n.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=n.offset.parent.top-t.offset.parent.top,n._trigger("toSortable",i),n.dropped=t.element,b.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,t.fromOutside=n),t.currentItem&&(t._mouseDrag(i),s.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",i,t._uiHash(t)),t._mouseStop(i,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),s.helper.appendTo(n._parent),n._refreshOffsets(i),s.position=n._generatePosition(i,!0),n._trigger("fromSortable",i),n.dropped=!1,b.each(n.sortables,function(){this.refreshPositions()}))})}}),b.ui.plugin.add("draggable","cursor",{start:function(e,t,i){var s=b("body"),n=i.options;s.css("cursor")&&(n._cursor=s.css("cursor")),s.css("cursor",n.cursor)},stop:function(e,t,i){var s=i.options;s._cursor&&b("body").css("cursor",s._cursor)}}),b.ui.plugin.add("draggable","opacity",{start:function(e,t,i){var s=b(t.helper),n=i.options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,t,i){var s=i.options;s._opacity&&b(t.helper).css("opacity",s._opacity)}}),b.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,t,i){var s=i.options,n=!1,o=i.scrollParentNotHidden[0],r=i.document[0];o!==r&&"HTML"!==o.tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+o.offsetHeight-e.pageY<s.scrollSensitivity?o.scrollTop=n=o.scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(o.scrollTop=n=o.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+o.offsetWidth-e.pageX<s.scrollSensitivity?o.scrollLeft=n=o.scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(o.scrollLeft=n=o.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-b(r).scrollTop()<s.scrollSensitivity?n=b(r).scrollTop(b(r).scrollTop()-s.scrollSpeed):b(window).height()-(e.pageY-b(r).scrollTop())<s.scrollSensitivity&&(n=b(r).scrollTop(b(r).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-b(r).scrollLeft()<s.scrollSensitivity?n=b(r).scrollLeft(b(r).scrollLeft()-s.scrollSpeed):b(window).width()-(e.pageX-b(r).scrollLeft())<s.scrollSensitivity&&(n=b(r).scrollLeft(b(r).scrollLeft()+s.scrollSpeed)))),!1!==n&&b.ui.ddmanager&&!s.dropBehaviour&&b.ui.ddmanager.prepareOffsets(i,e)}}),b.ui.plugin.add("draggable","snap",{start:function(e,t,i){var s=i.options;i.snapElements=[],b(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=b(this),t=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,i){var s,n,o,r,a,l,c,u,h,p,d=i.options,f=d.snapTolerance,g=t.offset.left,m=g+i.helperProportions.width,y=t.offset.top,v=y+i.helperProportions.height;for(h=i.snapElements.length-1;0<=h;h--)l=(a=i.snapElements[h].left-i.margins.left)+i.snapElements[h].width,u=(c=i.snapElements[h].top-i.margins.top)+i.snapElements[h].height,m<a-f||l+f<g||v<c-f||u+f<y||!b.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,b.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==d.snapMode&&(s=f>=Math.abs(c-v),n=f>=Math.abs(u-y),o=f>=Math.abs(a-m),r=f>=Math.abs(l-g),s&&(t.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),n&&(t.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),o&&(t.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),r&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),p=s||n||o||r,"outer"!==d.snapMode&&(s=f>=Math.abs(c-y),n=f>=Math.abs(u-v),o=f>=Math.abs(a-g),r=f>=Math.abs(l-m),s&&(t.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),n&&(t.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),o&&(t.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),r&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(s||n||o||r||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,b.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=s||n||o||r||p)}}),b.ui.plugin.add("draggable","stack",{start:function(e,t,i){var s,n=i.options,o=b.makeArray(b(n.stack)).sort(function(e,t){return(parseInt(b(e).css("zIndex"),10)||0)-(parseInt(b(t).css("zIndex"),10)||0)});o.length&&(s=parseInt(b(o[0]).css("zIndex"),10)||0,b(o).each(function(e){b(this).css("zIndex",s+e)}),this.css("zIndex",s+o.length))}}),b.ui.plugin.add("draggable","zIndex",{start:function(e,t,i){var s=b(t.helper),n=i.options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,t,i){var s=i.options;s._zIndex&&b(t.helper).css("zIndex",s._zIndex)}}),b.ui.draggable,b.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=b.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){b.ui.ddmanager.droppables[e]=b.ui.ddmanager.droppables[e]||[],b.ui.ddmanager.droppables[e].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var e=b.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,t){if("accept"===e)this.accept=b.isFunction(t)?t:function(e){return e.is(t)};else if("scope"===e){var i=b.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(t)}this._super(e,t)},_activate:function(e){var t=b.ui.ddmanager.current;this._addActiveClass(),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=b.ui.ddmanager.current;this._removeActiveClass(),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=b.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=b.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(t)))},_drop:function(t,e){var i=e||b.ui.ddmanager.current,s=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=b(this).droppable("instance");return e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&l(i,b.extend(e,{offset:e.element.offset()}),e.options.tolerance,t)?!(s=!0):void 0}),!s&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(i)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var l=b.ui.intersect=function(){function p(e,t,i){return t<=e&&e<t+i}return function(e,t,i,s){if(!t.offset)return!1;var n=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,r=n+e.helperProportions.width,a=o+e.helperProportions.height,l=t.offset.left,c=t.offset.top,u=l+t.proportions().width,h=c+t.proportions().height;switch(i){case"fit":return l<=n&&r<=u&&c<=o&&a<=h;case"intersect":return n+e.helperProportions.width/2>l&&u>r-e.helperProportions.width/2&&o+e.helperProportions.height/2>c&&h>a-e.helperProportions.height/2;case"pointer":return p(s.pageY,c,t.proportions().height)&&p(s.pageX,l,t.proportions().width);case"touch":return(c<=o&&o<=h||c<=a&&a<=h||o<c&&h<a)&&(l<=n&&n<=u||l<=r&&r<=u||n<l&&u<r);default:return!1}}}();!(b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,t){var i,s,n=b.ui.ddmanager.droppables[e.options.scope]||[],o=t?t.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(i=0;n.length>i;i++)if(!(n[i].options.disabled||e&&!n[i].accept.call(n[i].element[0],e.currentItem||e.element))){for(s=0;r.length>s;s++)if(r[s]===n[i].element[0]){n[i].proportions().height=0;continue e}n[i].visible="none"!==n[i].element.css("display"),n[i].visible&&("mousedown"===o&&n[i]._activate.call(n[i],t),n[i].offset=n[i].element.offset(),n[i].proportions({width:n[i].element[0].offsetWidth,height:n[i].element[0].offsetHeight}))}},drop:function(e,t){var i=!1;return b.each((b.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&l(e,this,this.options.tolerance,t)&&(i=this._drop.call(this,t)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))}),i},dragStart:function(e,t){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||b.ui.ddmanager.prepareOffsets(e,t)})},drag:function(o,r){o.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(o,r),b.each(b.ui.ddmanager.droppables[o.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e,t,i,s=l(o,this,this.options.tolerance,r),n=!s&&this.isover?"isout":s&&!this.isover?"isover":null;n&&(this.options.greedy&&(t=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return b(this).droppable("instance").options.scope===t})).length&&((e=b(i[0]).droppable("instance")).greedyChild="isover"===n)),e&&"isover"===n&&(e.isover=!1,e.isout=!0,e._out.call(e,r)),this[n]=!0,this["isout"===n?"isover":"isout"]=!1,this["isover"===n?"_over":"_out"].call(this,r),e&&"isout"===n&&(e.isout=!1,e.isover=!0,e._over.call(e,r)))}})},dragStop:function(e,t){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||b.ui.ddmanager.prepareOffsets(e,t)}})!==b.uiBackCompat&&b.widget("ui.droppable",b.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),b.ui.droppable,b.widget("ui.resizable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(e,t){if("hidden"===b(e).css("overflow"))return!1;var i=t&&"left"===t?"scrollLeft":"scrollTop",s=!1;return 0<e[i]||(e[i]=1,s=0<e[i],e[i]=0,s)},_create:function(){var e,t=this.options,i=this;this._addClass("ui-resizable"),b.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),t.autoHide&&b(this.element).on("mouseenter",function(){t.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){t.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,t=function(e){b(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,t,i,s,n,o=this.options,r=this;if(this.handles=o.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=b(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},t=0;i.length>t;t++)s="ui-resizable-"+(e=b.trim(i[t])),n=b("<div>"),this._addClass(n,"ui-resizable-handle "+s),n.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(n);this._renderAxis=function(e){var t,i,s,n;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String?this.handles[t]=this.element.children(this.handles[t]).first().show():(this.handles[t].jquery||this.handles[t].nodeType)&&(this.handles[t]=b(this.handles[t]),this._on(this.handles[t],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=b(this.handles[t],this.element),n=/sw|ne|nw|se|n|s/.test(t)?i.outerHeight():i.outerWidth(),s=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(s,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[t])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var t,i,s=!1;for(t in this.handles)((i=b(this.handles[t])[0])===e.target||b.contains(i,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var t,i,s,n=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),n.containment&&(t+=b(n.containment).scrollLeft()||0,i+=b(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:t,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=b(".ui-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===s?this.axis+"-resize":s),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t,i,s=this.originalMousePosition,n=this.axis,o=e.pageX-s.left||0,r=e.pageY-s.top||0,a=this._change[n];return this._updatePrevProperties(),a&&(t=a.apply(this,[e,o,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,i,s,n,o,r,a,l=this.options,c=this;return this._helper&&(s=(i=(t=this._proportionallyResizeElements).length&&/textarea/i.test(t[0].nodeName))&&this._hasScroll(t[0],"left")?0:c.sizeDiff.height,n=i?0:c.sizeDiff.width,o={width:c.helper.width()-n,height:c.helper.height()-s},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,a=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(b.extend(o,{top:a,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),o&&c&&(e.left=a-t.minWidth),s&&c&&(e.left=a-t.maxWidth),r&&u&&(e.top=l-t.minHeight),n&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(s[t])||0,i[t]+=parseFloat(n[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){b.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),b.ui.plugin.add("resizable","animate",{stop:function(t){var i=b(this).resizable("instance"),e=i.options,s=i._proportionallyResizeElements,n=s.length&&/textarea/i.test(s[0].nodeName),o=n&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,r=n?0:i.sizeDiff.width,a={width:i.size.width-r,height:i.size.height-o},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(b.extend(a,c&&l?{top:c,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&b(s[0]).css({width:e.width,height:e.height}),i._updateCache(e),i._propagate("resize",t)}})}}),b.ui.plugin.add("resizable","containment",{start:function(){var i,s,e,t,n,o,r,a=b(this).resizable("instance"),l=a.options,c=a.element,u=l.containment,h=u instanceof b?u.get(0):/parent/.test(u)?c.parent().get(0):u;h&&(a.containerElement=b(h),/document/.test(u)||u===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}):(i=b(h),s=[],b(["Top","Right","Left","Bottom"]).each(function(e,t){s[e]=a._num(i.css("padding"+t))}),a.containerOffset=i.offset(),a.containerPosition=i.position(),a.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},e=a.containerOffset,t=a.containerSize.height,n=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:n,r=a._hasScroll(h)?h.scrollHeight:t,a.parentData={element:h,left:e.left,top:e.top,width:o,height:r}))},resize:function(e){var t,i,s,n,o=b(this).resizable("instance"),r=o.options,a=o.containerOffset,l=o.position,c=o._aspectRatio||e.shiftKey,u={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(u=a),l.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?a.left:0),l.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),s=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),o.offset.top=s&&n?(o.offset.left=o.parentData.left+o.position.left,o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.element.offset().top),t=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-u.left:o.offset.left-a.left)),i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-u.top:o.offset.top-a.top)),t+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-t,c&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,c&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var e=b(this).resizable("instance"),t=e.options,i=e.containerOffset,s=e.containerPosition,n=e.containerElement,o=b(e.helper),r=o.offset(),a=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(n.css("position"))&&b(this).css({left:r.left-s.left-i.left,width:a,height:l}),e._helper&&!t.animate&&/static/.test(n.css("position"))&&b(this).css({left:r.left-s.left-i.left,width:a,height:l})}}),b.ui.plugin.add("resizable","alsoResize",{start:function(){var e=b(this).resizable("instance").options;b(e.alsoResize).each(function(){var e=b(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var t=b(this).resizable("instance"),s=t.options,n=t.originalSize,o=t.originalPosition,r={height:t.size.height-n.height||0,width:t.size.width-n.width||0,top:t.position.top-o.top||0,left:t.position.left-o.left||0};b(s.alsoResize).each(function(){var e=b(this),s=b(this).data("ui-resizable-alsoresize"),n={},t=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(t,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&0<=i&&(n[t]=i||null)}),e.css(n)})},stop:function(){b(this).removeData("ui-resizable-alsoresize")}}),b.ui.plugin.add("resizable","ghost",{start:function(){var e=b(this).resizable("instance"),t=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:t.height,width:t.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==b.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=b(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=b(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),b.ui.plugin.add("resizable","grid",{resize:function(){var e,t=b(this).resizable("instance"),i=t.options,s=t.size,n=t.originalSize,o=t.originalPosition,r=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((s.width-n.width)/l)*l,h=Math.round((s.height-n.height)/c)*c,p=n.width+u,d=n.height+h,f=i.maxWidth&&p>i.maxWidth,g=i.maxHeight&&d>i.maxHeight,m=i.minWidth&&i.minWidth>p,y=i.minHeight&&i.minHeight>d;i.grid=a,m&&(p+=l),y&&(d+=c),f&&(p-=l),g&&(d-=c),/^(se|s|e)$/.test(r)?(t.size.width=p,t.size.height=d):/^(ne)$/.test(r)?(t.size.width=p,t.size.height=d,t.position.top=o.top-h):/^(sw)$/.test(r)?(t.size.width=p,t.size.height=d,t.position.left=o.left-u):((d-c<=0||p-l<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),t.position.top=0<d-c?(t.size.height=d,o.top-h):(d=c-e.height,t.size.height=d,o.top+n.height-d),t.position.left=0<p-l?(t.size.width=p,o.left-u):(p=l-e.width,t.size.width=p,o.left+n.width-p))}}),b.ui.resizable,b.widget("ui.selectable",b.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var s=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){s.elementPos=b(s.element[0]).offset(),s.selectees=b(s.options.filter,s.element[0]),s._addClass(s.selectees,"ui-selectee"),s.selectees.each(function(){var e=b(this),t=e.offset(),i={left:t.left-s.elementPos.left,top:t.top-s.elementPos.top};b.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=b("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var s=this,e=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=b(this.element[0]).offset(),this.options.disabled||(this.selectees=b(e.filter,this.element[0]),this._trigger("start",i),b(e.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=b.data(this,"selectable-item");e.startselected=!0,i.metaKey||i.ctrlKey||(s._removeClass(e.$element,"ui-selected"),e.selected=!1,s._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,s._trigger("unselecting",i,{unselecting:e.element}))}),b(i.target).parents().addBack().each(function(){var e,t=b.data(this,"selectable-item");return t?(e=!i.metaKey&&!i.ctrlKey||!t.$element.hasClass("ui-selected"),s._removeClass(t.$element,e?"ui-unselecting":"ui-selected")._addClass(t.$element,e?"ui-selecting":"ui-unselecting"),t.unselecting=!e,t.selecting=e,(t.selected=e)?s._trigger("selecting",i,{selecting:t.element}):s._trigger("unselecting",i,{unselecting:t.element}),!1):void 0}))},_mouseDrag:function(s){if(this.dragged=!0,!this.options.disabled){var e,n=this,o=this.options,r=this.opos[0],a=this.opos[1],l=s.pageX,c=s.pageY;return l<r&&(e=l,l=r,r=e),c<a&&(e=c,c=a,a=e),this.helper.css({left:r,top:a,width:l-r,height:c-a}),this.selectees.each(function(){var e=b.data(this,"selectable-item"),t=!1,i={};e&&e.element!==n.element[0]&&(i.left=e.left+n.elementPos.left,i.right=e.right+n.elementPos.left,i.top=e.top+n.elementPos.top,i.bottom=e.bottom+n.elementPos.top,"touch"===o.tolerance?t=!(i.left>l||r>i.right||i.top>c||a>i.bottom):"fit"===o.tolerance&&(t=i.left>r&&l>i.right&&i.top>a&&c>i.bottom),t?(e.selected&&(n._removeClass(e.$element,"ui-selected"),e.selected=!1),e.unselecting&&(n._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1),e.selecting||(n._addClass(e.$element,"ui-selecting"),e.selecting=!0,n._trigger("selecting",s,{selecting:e.element}))):(e.selecting&&((s.metaKey||s.ctrlKey)&&e.startselected?(n._removeClass(e.$element,"ui-selecting"),e.selecting=!1,n._addClass(e.$element,"ui-selected"),e.selected=!0):(n._removeClass(e.$element,"ui-selecting"),e.selecting=!1,e.startselected&&(n._addClass(e.$element,"ui-unselecting"),e.unselecting=!0),n._trigger("unselecting",s,{unselecting:e.element}))),e.selected&&(s.metaKey||s.ctrlKey||e.startselected||(n._removeClass(e.$element,"ui-selected"),e.selected=!1,n._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,n._trigger("unselecting",s,{unselecting:e.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,b(".ui-unselecting",this.element[0]).each(function(){var e=b.data(this,"selectable-item");i._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1,e.startselected=!1,i._trigger("unselected",t,{unselected:e.element})}),b(".ui-selecting",this.element[0]).each(function(){var e=b.data(this,"selectable-item");i._removeClass(e.$element,"ui-selecting")._addClass(e.$element,"ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,i._trigger("selected",t,{selected:e.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),b.widget("ui.sortable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return t<=e&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),b.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var i=null,s=!1,n=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),b(e.target).parents().each(function(){return b.data(this,n.widgetName+"-item")===n?(i=b(this),!1):void 0}),b.data(e.target,n.widgetName+"-item")===n&&(i=b(e.target)),!!i&&(!(this.options.handle&&!t&&(b(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,t,i){var s,n,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},b.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",o.cursor),this.storedStylesheet=b("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(n)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;0<=s;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return b.ui.ddmanager&&(b.ui.ddmanager.current=this),b.ui.ddmanager&&!o.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var t,i,s,n,o=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),e.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==r&&b.ui.ddmanager&&!o.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t=this.items.length-1;0<=t;t--)if(s=(i=this.items[t]).item[0],(n=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==s&&!b.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!b.contains(this.element[0],s))){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),b.ui.ddmanager&&b.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(e){if(b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,e),this.options.revert){var i=this,s=this.placeholder.offset(),n=this.options.axis,o={};n&&"x"!==n||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,b(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,t);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new b.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},b(e).each(function(){var e=(b(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t.each(function(){i.push(b(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=e.left,r=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||a<s+c&&s+c<l,p="y"===this.options.axis||o<t+u&&t+u<r,d=h&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:t+this.helperProportions.width/2>o&&r>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>a&&l>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!!(s&&n)&&(t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){function t(){r.push(this)}var i,s,n,o,r=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;0<=i;i--)for(s=(n=b(l[i],this.document[0])).length-1;0<=s;s--)(o=b.data(n[s],this.widgetFullName))&&o!==this&&!o.options.disabled&&a.push([b.isFunction(o.options.items)?o.options.items.call(o.element):b(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;0<=i;i--)a[i][0].each(t);return b(r)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=b.grep(this.items,function(e){for(var t=0;i.length>t;t++)if(i[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,i,s,n,o,r,a,l,c=this.items,u=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):b(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(t=h.length-1;0<=t;t--)for(i=(s=b(h[t],this.document[0])).length-1;0<=i;i--)(n=b.data(s[i],this.widgetFullName))&&n!==this&&!n.options.disabled&&(u.push([b.isFunction(n.options.items)?n.options.items.call(n.element[0],e,{item:this.currentItem}):b(n.options.items,n.element),n]),this.containers.push(n));for(t=u.length-1;0<=t;t--)for(o=u[t][1],i=0,l=(r=u[t][0]).length;i<l;i++)(a=b(r[i])).data(this.widgetName+"-item",o),c.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var t,i,s,n;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;0<=t;t--)(i=this.items[t]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?b(this.options.toleranceElement,i.item):i.item,e||(i.width=s.outerWidth(),i.height=s.outerHeight()),n=s.offset(),i.left=n.left,i.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)n=this.containers[t].element.offset(),this.containers[t].containerCache.left=n.left,this.containers[t].containerCache.top=n.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(i){var s,n=(i=i||this).options;n.placeholder&&n.placeholder.constructor!==String||(s=n.placeholder,n.placeholder={element:function(){var e=i.currentItem[0].nodeName.toLowerCase(),t=b("<"+e+">",i.document[0]);return i._addClass(t,"ui-sortable-placeholder",s||i.currentItem[0].className)._removeClass(t,"ui-sortable-helper"),"tbody"===e?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),b("<tr>",i.document[0]).appendTo(t)):"tr"===e?i._createTrPlaceholder(i.currentItem,t):"img"===e&&t.attr("src",i.currentItem.attr("src")),s||t.css("visibility","hidden"),t},update:function(e,t){(!s||n.forcePlaceholderSize)&&(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=b(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(e,t){var i=this;e.children().each(function(){b("<td>&#160;</td>",i.document[0]).attr("colspan",b(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){var t,i,s,n,o,r,a,l,c,u,h=null,p=null;for(t=this.containers.length-1;0<=t;t--)if(!b.contains(this.currentItem[0],this.containers[t].element[0]))if(this._intersectsWith(this.containers[t].containerCache)){if(h&&b.contains(this.containers[t].element[0],h.element[0]))continue;h=this.containers[t],p=t}else this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",e,this._uiHash(this)),this.containers[t].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(s=1e4,n=null,o=(c=h.floating||this._isFloating(this.currentItem))?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",i=this.items.length-1;0<=i;i--)b.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[o],l=!1,e[u]-a>this.items[i][r]/2&&(l=!0),s>Math.abs(e[u]-a)&&(s=Math.abs(e[u]-a),n=this.items[i],this.direction=l?"up":"down"));if(!n&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));n?this._rearrange(e,n,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var t=this.options,i=b.isFunction(t.helper)?b(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||b("parent"!==t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||t.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||t.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),b.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&b.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=b(s.containment)[0],t=b(s.containment).offset(),i="hidden"!==b(e).css("overflow"),this.containment=[t.left+(parseInt(b(e).css("borderLeftWidth"),10)||0)+(parseInt(b(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(b(e).css("borderTopWidth"),10)||0)+(parseInt(b(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(b(e).css("borderLeftWidth"),10)||0)-(parseInt(b(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(b(e).css("borderTopWidth"),10)||0)-(parseInt(b(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop())*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())*i}},_generatePosition:function(e){var t,i,s=this.options,n=e.pageX,o=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(t=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-s.grid[1]:t+s.grid[1]:t,i=this.originalPageX+Math.round((n-this.originalPageX)/s.grid[0])*s.grid[0],n=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(t,i,s){return function(e){s._trigger(t,e,i._uiHash(i))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;0<=s;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===b.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||b([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}})}),editor=function(){var p=!1;!function r(){if(p)return;t=!1,i={},$.get("/admin/template/tpls",function(e){for(index in e)i[index]=Twig.twig({data:e[index]});t=!0},"json"),p={render:function s(e,t){return i[e]?i[e].render(t):""},ready:function e(){return t}};var t,i}();var E=0,d={revert:!0,placeholder:"sortable-placeholder",connectWith:".editor-content-row,.editor-content",handle:".handle",stop:function(e,t){if(t.item.hasClass("ui-draggable")){t.item[0].removeAttribute("class"),t.item[0].removeAttribute("style");var i=t.item.data("tag"),s=t.item.data("sub-tag");if("row"==i){s=[];var n=t.item.find(".blockbuilder-column");for(col_k in n){var o=n[col_k];for(class_k in o.classList){var r=o.classList[class_k];if(0==r.indexOf("col-")){s.push(r.substr(4));break}}}}l(t.item,i,{},s)}var a=t.item.closest(".editor-content-row");0<a.length&&0<a.find(".tag_wrap").length&&a.removeClass("col-empty")},start:function(e,t){var i=t.item.closest(".editor-content-row");0<i.length&&1==i.find(".tag_wrap").length&&i.addClass("col-empty")}};function e(){var e=$(this),t=e.closest(".form-group").find("input"),i=e.val();t.val(i),$(".editor-full").css("background-color",i)}function u(e){var t;t="object"==typeof e?$(".on_edit"):this.el;var i=this.name,s=this.value,n=t.data("params"),o=t.data("data"),r="";if(n[i].isLanguage){var a=$("[name=language]:checked").val();r=o[i][a],o[i][a]=s}else r=o[i],o[i]=s;t.data("data",o),(n=n[i]).sufix&&(s+=n.sufix,r+=n.sufix),n.prefix&&(s=n.prefix+s,r=n.prefix+r);e="this"==n.el?t:t.find(n.el);for(param_k in n.params){var l=n.params[param_k];0==l.indexOf("style.")?(l=l.split("style.")[1],e[0].style[l]=s):"class"==l?(e.removeClass(r),e.addClass(s)):e[0][l]=s}}function l(e,t,i,s){var n=function u(e,t,i){if(!options_list[e])return!1;t=t?Object.assign(t):{};if(t.editor=!0,"table"==e){if(!table_list[i])return!1;t.table=Object.assign(table_list[i]),"undefined"!=typeof t.items&&(t.table_list=t.items),"undefined"!=typeof t.hidden?t.table.hidden=t.hidden:t.table.hidden=[],"undefined"!=typeof t.direction?t.table.type=t.direction:t.direction=t.table.type,"undefined"==typeof t.items&&(t.items=Object.keys(t.table.list))}else"row"==e&&"undefined"==typeof t.rows&&(t.rows=i);var s=p.render("editor_"+e,t);return!!s&&(s="<div class=li_wrap type='"+("row"==e?"row":"content")+"'>"+s+'<i class="glyphicon glyphicon-move handle"></i><i class="glyphicon glyphicon-trash trash"></i></div>')}(t,i,s);if(n){e.addClass("tag_wrap"),e.html(n),e.find(".col-empty").attr("empty_msg","No content here. Drag content from components.");var o=e.find(".li_wrap");if(i&&o.data("data",i),e.data("tag",t),f(t,o,!0,s),"table"==t){e.data("sub-tag",s);var r=e.eq(0).find(".sort_list");r.sortable({revert:!0,placeholder:"sortable-placeholder",stop:function(e,t){for(var i=t.item.closest(".li_wrap"),s=t.item.parent().find("li"),n=i.data("data"),o=[],r=0;r<s.length;r++){var a=s.eq(r).data("name");a&&o.push(a)}n.items=o,i.data("data",n)}}).disableSelection();var a=Object.assign(o.data("data"));"undefined"!=typeof i.items?a.items=i.items:a.items=function h(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}(table_list[s].list),"undefined"!=typeof i.hidden?a.hidden=i.hidden:a.hidden=[],o.data("data",a),r.find(".hide_show").on("click",function(){var e=$(this).closest("li"),t=e.data("name"),i=e.closest(".li_wrap"),s=i.data("data");"undefined"==typeof s.hidden&&(s.hidden=[]);var n=s.hidden.indexOf(t);e.hasClass("el_hidden")?(e.removeClass("el_hidden"),0<=n&&s.hidden.splice(n,1)):(e.addClass("el_hidden"),-1==n&&s.hidden.push(t)),i.data("data",s)})}if("row"==t){var l=e.find(".blockbuilder-row-tool-editor ul").sortable(d);if("undefined"!=typeof i.items)for(var c=0;c<i.items.length;c++)g(l.eq(c),i.items[c])}}else e.remove()}function f(e,t,i,s){var n="",o={};if(t.data("data"))o=t.data("data");else if(o={},"table"==e){var r=table_list[s].type;o.direction=r}var a={};s&&table_list[s]&&table_list[s].hide&&(a=table_list[s].hide);var l={},c=[];tag_params=options_list[e];for(var u=$("[name=language]:checked").val(),h=$("[name=language]"),p=0;p<tag_params.length;p++){n+="<h4>"+(w=tag_params[p].title||tag_params[p].name)+"</h4>";for(var d=0;d<tag_params[p].items.length;d++){var f,g="this"==tag_params[p].items[d].element?t:t.find(tag_params[p].items[d].element),m=tag_params[p].items[d].name,y=!1;l[m]={},"undefined"!=typeof tag_params[p].items[d].param&&(y=tag_params[p].items[d].param.split("|"),l[m].params=y,tag_params[p].items[d].sufix&&(l[m].sufix=tag_params[p].items[d].sufix),tag_params[p].items[d].prefix&&(l[m].prefix=tag_params[p].items[d].prefix));r=tag_params[p].items[d].type;if(l[m].type=r,l[m].el=tag_params[p].items[d].element,l[m].isLanguage=!!tag_params[p].items[d].isLanguage,i){if(f=a[m]?a[m]:o[m]?tag_params[p].items[d].isLanguage?o[m][u]:o[m]:"undefined"==typeof tag_params[p].items[d]["default"]?o[m]:tag_params[p].items[d]["default"],tag_params[p].items[d].isLanguage)if(t.addClass("hasLanguage"),c.push(m),"undefined"==typeof o[m]){o[m]={};for(var v=0;v<h.length;v++){var b=h.eq(v).val();o[m][b]=b+" "+f}f=o[m][u]}else o[m][u]=f;else o[m]=f;if(tag_params[p].items[d].sufix&&(f+=tag_params[p].items[d].sufix),tag_params[p].items[d].prefix&&(f=tag_params[p].items[d].prefix+f),y)for(param_k in y){var _=y[param_k],x=!1;0==_.indexOf("style.")&&(x=!0,_=_.split("style.")[1]),0<g.length&&(x?g[0].style[_]=f:"style"==g[0][_]?g.addClass(f):g[0][_]=f)}}else f=tag_params[p].items[d].isLanguage?o[m][u]:o[m];if("none"!=r&&!a[m])if("ckeditor"!=r){var w=tag_params[p].items[d].title||tag_params[p].items[d].name,k="undefined"!=typeof tag_params[p].items[d].list?tag_params[p].items[d].list:[];if(tag_params[p].items[d].isLanguage?n+="<label class='isLanguage'><span>"+w+"</span><br>":n+="<label>"+w+"<br>","text"==r&&(n+='<input name="'+m+'" value="'+f+'">'),"number"==r&&(n+='<input name="'+m+'" class=num value="'+f+'">'),"color"==r&&(n+='<input name="'+m+'" type=color value="'+f+'">'),"font"==r&&(k=["Arial","Verdana","Times New Roman","Georgia","Verdana","Courier New","Lucida Console"],r="select"),"align"==r&&(k=align_list,r="select"),"select"==r){for(var C in n+='<select name="'+m+'">',k){var A=Array.isArray(k)?k[C]:C;n+="<option value='"+A+"'"+(A==f?"  selected":"")+">"+k[C]+"</option>"}n+="</select>"}n+="</label>"}else if(l[m].editor_id=g.attr("id"),!l[m].editor_id){for(;0<$("#cedit_"+E).length;)E++;l[m].editor_id="cedit_"+E,g.attr("id","cedit_"+E),g.attr("name",m),g.html(f),g.on("change",function(){var e=this.el,t=this.parent,i=e.attr("name"),s=t.data("params"),n=t.data("data"),o=e.val();if(s[i].isLanguage){var r=$("[name=language]:checked").val();n[i][r],n[i][r]=o}else n[i],n[i]=o;t.data("data",n)}.bind({el:g,parent:t})),app.ckeditor_init("cedit_"+E),g.data("data",o)}}}return i&&(t.data("data",o),t.data("lg_var",c)),t.data("params",l),n}function t(){data={data:function u(e){for(var t=[],i=e.find(">li"),s=0;s<i.length;s++){var n=i.eq(s),o=Object.assign(n.find(">.li_wrap").data("data")),r=n.data("tag"),a=n.data("sub-tag"),l={type:r,data:o};if("table"==r&&(l.sub_type=a,l.data&&l.data.table&&delete l.data.table),l.data&&l.data.editor&&delete l.data.editor,"row"==r){$sub_ul=n.find(".editor-content-row"),l.data.items=[];for(var c=0;c<$sub_ul.length;c++)l.data.items.push(u($sub_ul.eq(c)))}t.push(l)}return t}($(".editor-content"))},els=$("#content-subject,#content-text").find(".hasLanguage");for(var e=0;e<els.length;e++){var t=els.eq(e),i=t.data("data");data[t.attr("name")]=i}return data}function g(e,t){e.html("");for(var i=0;i<t.length;i++){var s=$("<li/>");e.append(s),l(s,t[i].type,t[i].data,t[i].sub_type)}0<e.find(">li").length&&e.removeClass("col-empty")}function i(e){if(p.ready()){"string"==typeof e&&(e=JSON.parse(e));var t=$(".editor-content");"undefined"!=typeof e.data&&g(t,e.data),"undefined"!=typeof e.subject&&$("#content-subject input").data("data",e.subject),"undefined"!=typeof e.text&&$("#content-text input").data("data",e.text),$("[name=language]").change()}else setTimeout(function(){editor.setData(this)}.bind(e),100)}function s(){var e=$("[name=language]:checked").val(),t=$(this),i=t.data("data");i[e]=t.val(),t.data("data",i)}$("#editor-components li").draggable({connectToSortable:".editor-content,.editor-content-row",helper:"clone",revert:"invalid",opacity:.5}).disableSelection(),$("#editor-row li").draggable({connectToSortable:".editor-content",helper:"clone",revert:"invalid",opacity:.5}).disableSelection(),$(".editor-content").on("click","a",function(e){return e.preventDefault(),e.preventDefault(),e.stopPropagation(),!1}),$(".editor-panel .width").on("change",function(){$(".editor-content").css("width",this.value)}),$(".editor-panel .color").closest(".form-group").find("input").on("change",e).on("input",e).on("keyup",e),$("[name=language]").on("change",function(){var e=$(".editor-content .on_edit");0<e.length&&(e.removeClass("on_edit"),e.click());for(var t=$("[name=language]:checked").val(),i=$(".editor-content .hasLanguage"),s=0;s<i.length;s++){var n=(c=i.eq(s)).data("lg_var"),o=c.data("data"),r=c.data("params");for(name_i in n){var a=n[name_i];if("ckeditor"!=r[a].type){var l="undefined"!=typeof o[a]&&"undefined"!=typeof o[a][t]?o[a][t]:"";u.bind({name:a,value:l,el:c})()}else CKEDITOR.instances[r[a].editor_id].setData(o[a][t])}}i=$("#content-subject,#content-text").find(".hasLanguage");for(s=0;s<i.length;s++){var c;l="undefined"!=typeof(o=(c=i.eq(s)).data("data"))[t]?o[t]:"";c.val(l)}}),$(".editor-content").sortable(d).on("click",".li_wrap",function(e){if($this=$(this),!$this.hasClass("on_edit")){$this.closest(".editor-content").find(".on_edit").removeClass("on_edit"),$this.addClass("on_edit");var t=$('.editor-panel [href="#editor-option"]');t.parent().removeClass("hidden"),tab_select.bind(t[0])(e);var i=$("#editor-option");return i.html(f($this.parent().data("tag"),$this,!1,$this.parent().data("subTag"))),i.find("input,select").on("change",u).on("input",u).on("keyup",u),!1}}).on("click",".trash",function(e){e.preventDefault(),e.stopPropagation();var t=$(this),i=t.closest(".tag_wrap");if(t.closest(".li_wrap").hasClass("on_edit")){var s=$('.editor-panel [href="#editor-option"]');s.parent().hasClass("active")&&tab_select.bind(s.closest("ul").find("li:first").find("a")[0])(e),s.parent().addClass("hidden")}var n=t.closest(".editor-content-row");0<n.length&&1==n.find(".tag_wrap").length&&n.addClass("col-empty"),i.remove()});var n=$("<input/>",{"class":"hasLanguage",name:"subject"}).data("data",{}).on("keyup",s);$("#content-subject").append("Тема письма").append(n);n=$("<textarea/>",{"class":"hasLanguage",name:"text"}).data("data",{}).on("keyup",s);$("#content-text").append(n);var o=$(".w_editor");return 1==o.length&&(o.hide(),i(JSON.parse(o.val())),$(".editor-panel .btn-save").on("click",function(){$(".w_editor").val(JSON.stringify(t())),$(".w_editor").closest("form").submit()})),{getData:t,setData:i,sort_params:d}}(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Twig=t():e.Twig=t()}(this,function(){return function(i){function s(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return i[e].call(t.exports,t,t.exports,s),t.loaded=!0,t.exports}var n={};return s.m=i,s.c=n,s.p="",s(0)}([function(e,t,i){var s={VERSION:"0.10.2"};i(1)(s),i(2)(s),i(3)(s),i(5)(s),i(6)(s),i(7)(s),i(17)(s),i(18)(s),i(22)(s),i(23)(s),i(24)(s),i(25)(s),i(26)(s),i(27)(s),i(28)(s),e.exports=s.exports},function(e,t){e.exports=function(v){"use strict";return v.trace=!1,v.debug=!1,v.cache=!0,v.noop=function(){},v.placeholders={parent:"{{|PARENT|}}"},v.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(null==e)throw new TypeError;var i=Object(e),s=i.length>>>0;if(0===s)return-1;var n=0;if(0<arguments.length&&((n=Number(t))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),s<=n)return-1;for(var o=0<=n?n:Math.max(s-Math.abs(n),0);o<s;o++)if(o in i&&i[o]===t)return o;return e==t?0:-1},v.forEach=function(e,t,i){if(Array.prototype.forEach)return e.forEach(t,i);var s,n;if(null==e)throw new TypeError(" this is null or not defined");var o=Object(e),r=o.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(i&&(s=i),n=0;n<r;){var a;n in o&&(a=o[n],t.call(s,a,n,o)),n++}},v.merge=function(t,i,s){return v.forEach(Object.keys(i),function(e){(!s||e in t)&&(t[e]=i[e])}),t},v.Error=function(e,t){this.message=e,this.name="TwigException",this.type="TwigException",this.file=t},v.Error.prototype.toString=function(){return this.name+": "+this.message},v.log={trace:function(){v.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){v.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?"undefined"!=typeof console.error?v.log.error=function(){console.error.apply(console,arguments)}:"undefined"!=typeof console.log&&(v.log.error=function(){console.log.apply(console,arguments)}):v.log.error=function(){},v.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},v.token={},v.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},v.token.definitions=[{type:v.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:v.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:v.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:v.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:v.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:v.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:v.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:v.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:v.token.type.output,open:"{{",close:"}}"},{type:v.token.type.logic,open:"{%",close:"%}"},{type:v.token.type.comment,open:"{#",close:"#}"}],v.token.strings=['"',"'"],v.token.findStart=function(e){var t,i,s,n,o={position:null,close_position:null,def:null};for(t=0;t<v.token.definitions.length;t++)i=v.token.definitions[t],s=e.indexOf(i.open),n=e.indexOf(i.close),v.log.trace("Twig.token.findStart: ","Searching for ",i.open," found at ",s),0<=s&&i.open.length!==i.close.length&&n<0||(0<=s&&(null===o.position||s<o.position)?(o.position=s,o.def=i,o.close_position=n):0<=s&&null!==o.position&&s===o.position&&(i.open.length>o.def.open.length?(o.position=s,o.def=i,o.close_position=n):i.open.length===o.def.open.length&&(i.close.length,o.def.close.length,0<=n&&n<o.close_position&&(o.position=s,o.def=i,o.close_position=n))));return delete o.close_position,o},v.token.findEnd=function(e,t,i){for(var s,n,o=null,r=!1,a=0,l=null,c=null,u=null,h=null,p=null,d=null;!r;){if(c=l=null,!(0<=(u=e.indexOf(t.close,a))))throw new v.Error("Unable to find closing bracket '"+t.close+"' opened near template position "+i);if(o=u,r=!0,t.type===v.token.type.comment)break;if(t.type===v.token.type.raw)break;for(n=v.token.strings.length,s=0;s<n;s+=1)0<(p=e.indexOf(v.token.strings[s],a))&&p<u&&(null===l||p<l)&&(l=p,c=v.token.strings[s]);if(null!==l)for(h=l+1,o=null,r=!1;;){if((d=e.indexOf(c,h))<0)throw"Unclosed string in template";if("\\"!==e.substr(d-1,1)){a=d+1;break}h=d+1}}return o},v.tokenize=function(e){for(var t=[],i=0,s=null,n=null;0<e.length;)if(s=v.token.findStart(e),v.log.trace("Twig.tokenize: ","Found token: ",s),null!==s.position){if(0<s.position&&t.push({type:v.token.type.raw,value:e.substring(0,s.position)}),e=e.substr(s.position+s.def.open.length),i+=s.position+s.def.open.length,n=v.token.findEnd(e,s.def,i),v.log.trace("Twig.tokenize: ","Token ends at ",n),t.push({type:s.def.type,value:e.substring(0,n).trim()}),"\n"===e.substr(n+s.def.close.length,1))switch(s.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":n+=1}e=e.substr(n+s.def.close.length),i+=n+s.def.close.length}else t.push({type:v.token.type.raw,value:e}),e="";return t},v.compile=function(e){try{for(var t=[],i=[],s=[],n=null,o=null,r=null,a=null,l=null,c=null,u=null,h=null,p=null,d=null,f=null,g=null,m=function(e){v.expression.compile.apply(this,[e]),0<i.length?s.push(e):t.push(e)},y=function(e){if(o=v.logic.compile.apply(this,[e]),d=o.type,f=v.logic.handler[d].open,g=v.logic.handler[d].next,v.log.trace("Twig.compile: ","Compiled logic token to ",o," next is: ",g," open is : ",f),void 0!==f&&!f){if(a=i.pop(),u=v.logic.handler[a.type],v.indexOf(u.next,d)<0)throw new Error(d+" not expected after a "+a.type);a.output=a.output||[],a.output=a.output.concat(s),s=[],p={type:v.token.type.logic,token:a},0<i.length?s.push(p):t.push(p)}void 0!==g&&0<g.length?(v.log.trace("Twig.compile: ","Pushing ",o," to logic stack."),0<i.length&&((a=i.pop()).output=a.output||[],a.output=a.output.concat(s),i.push(a),s=[]),i.push(o)):void 0!==f&&f&&(p={type:v.token.type.logic,token:o},0<i.length?s.push(p):t.push(p))};0<e.length;){switch(n=e.shift(),l=t[t.length-1],c=s[s.length-1],h=e[0],v.log.trace("Compiling token ",n),n.type){case v.token.type.raw:0<i.length?s.push(n):t.push(n);break;case v.token.type.logic:y.call(this,n);break;case v.token.type.comment:break;case v.token.type.output:m.call(this,n);break;case v.token.type.logic_whitespace_pre:case v.token.type.logic_whitespace_post:case v.token.type.logic_whitespace_both:case v.token.type.output_whitespace_pre:case v.token.type.output_whitespace_post:case v.token.type.output_whitespace_both:switch(n.type!==v.token.type.output_whitespace_post&&n.type!==v.token.type.logic_whitespace_post&&(l&&l.type===v.token.type.raw&&(t.pop(),null===l.value.match(/^\s*$/)&&(l.value=l.value.trim(),t.push(l))),c&&c.type===v.token.type.raw&&(s.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),s.push(c)))),n.type){case v.token.type.output_whitespace_pre:case v.token.type.output_whitespace_post:case v.token.type.output_whitespace_both:m.call(this,n);break;case v.token.type.logic_whitespace_pre:case v.token.type.logic_whitespace_post:case v.token.type.logic_whitespace_both:y.call(this,n)}n.type!==v.token.type.output_whitespace_pre&&n.type!==v.token.type.logic_whitespace_pre&&h&&h.type===v.token.type.raw&&(e.shift(),null===h.value.match(/^\s*$/)&&(h.value=h.value.trim(),e.unshift(h)))}v.log.trace("Twig.compile: "," Output: ",t," Logic Stack: ",i," Pending Output: ",s)}if(0<i.length)throw r=i.pop(),new Error("Unable to find an end tag for "+r.type+", expecting one of "+r.next);return t}catch(e){if(this.options.rethrow)throw"TwigException"!=e.type||e.file||(e.file=this.id),e;v.log.error("Error compiling twig template "+this.id+": "),e.stack?v.log.error(e.stack):v.log.error(e.toString())}},v.parse=function(e,i,t){function s(e){if(o.options.rethrow)throw"string"==typeof e&&(e=new v.Error(e)),"TwigException"!=e.type||e.file||(e.file=o.id),e;if(v.log.error("Error parsing twig template "+o.id+": "),e.stack?v.log.error(e.stack):v.log.error(e.toString()),v.debug)return e.toString()}var n,o=this,r=[],a=null,l=!0,c=!0;if(n=v.async.forEach(e,function(e){switch(v.log.debug("Twig.parse: ","Parsing token: ",e),e.type){case v.token.type.raw:r.push(v.filters.raw(e.value));break;case v.token.type.logic:var t=e.token;return v.logic.parseAsync.apply(o,[t,i,c]).then(function(e){void 0!==e.chain&&(c=e.chain),void 0!==e.context&&(i=e.context),void 0!==e.output&&r.push(e.output)});case v.token.type.comment:break;case v.token.type.output_whitespace_pre:case v.token.type.output_whitespace_post:case v.token.type.output_whitespace_both:case v.token.type.output:return v.log.debug("Twig.parse: ","Output token: ",e.stack),v.expression.parseAsync.apply(o,[e.stack,i]).then(function(e){r.push(e)})}}).then(function(){return r=v.output.apply(o,[r]),l=!1,r})["catch"](function(e){t&&s(e),a=e}),t)return n;if(null!==a)return s(a);if(l)throw new v.Error("You are using Twig.js in sync mode in combination with async extensions.");return r},v.prepare=function(e){var t,i;return v.log.debug("Twig.prepare: ","Tokenizing ",e),i=v.tokenize.apply(this,[e]),v.log.debug("Twig.prepare: ","Compiling ",i),t=v.compile.apply(this,[i]),v.log.debug("Twig.prepare: ","Compiled ",t),t},v.output=function(e){if(!this.options.autoescape)return e.join("");var t="html";"string"==typeof this.options.autoescape&&(t=this.options.autoescape);var i=[];return v.forEach(e,function(e){e&&!0!==e.twig_markup&&e.twig_markup!=t&&(e=v.filters.escape(e,[t])),i.push(e)}),v.Markup(i.join(""))},v.Templates={loaders:{},parsers:{},registry:{}},v.validateId=function(e){if("prototype"===e)throw new v.Error(e+" is not a valid twig identifier");if(v.cache&&v.Templates.registry.hasOwnProperty(e))throw new v.Error("There is already a template with the ID "+e);return!0},v.Templates.registerLoader=function(e,t,i){if("function"!=typeof t)throw new v.Error("Unable to add loader for "+e+": Invalid function reference given.");i&&(t=t.bind(i)),this.loaders[e]=t},v.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},v.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},v.Templates.registerParser=function(e,t,i){if("function"!=typeof t)throw new v.Error("Unable to add parser for "+e+": Invalid function regerence given.");i&&(t=t.bind(i)),this.parsers[e]=t},v.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},v.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},v.Templates.save=function(e){if(void 0===e.id)throw new v.Error("Unable to save template with no id");v.Templates.registry[e.id]=e},v.Templates.load=function(e){return v.Templates.registry.hasOwnProperty(e)?v.Templates.registry[e]:null},v.Templates.loadRemote=function(e,t,i,s){return void 0===t.async&&(t.async=!0),void 0===t.id&&(t.id=e),v.cache&&v.Templates.registry.hasOwnProperty(t.id)?("function"==typeof i&&i(v.Templates.registry[t.id]),v.Templates.registry[t.id]):(t.parser=t.parser||"twig",(this.loaders[t.method]||this.loaders.fs).apply(this,arguments))},v.Template=function(e){var t=e.data,i=e.id,s=e.blocks,n=e.macros||{},o=e.base,r=e.path,a=e.url,l=e.name,c=e.method,u=e.options;this.id=i,this.method=c,this.base=o,this.path=r,this.url=a,this.name=l,this.macros=n,this.options=u,this.reset(s),function h(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e}("String",t)?this.tokens=v.prepare.apply(this,[t]):this.tokens=t,void 0!==i&&v.Templates.save(this)},v.Template.prototype.reset=function(e){v.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:e||{}},this.extend=null},v.Template.prototype.render=function(e,i,t){i=i||{};var s,n,o,r=this,a=null,l=!0;this.context=e||{},this.reset(),i.blocks&&(this.blocks=i.blocks),i.macros&&(this.macros=i.macros);if(o=v.parseAsync.apply(this,[this.tokens,this.context]).then(function(e){var t;return r.extend?(r.options.allowInlineIncludes&&(t=v.Templates.load(r.extend))&&(t.options=r.options),t||(n=v.path.parsePath(r,r.extend),t=v.Templates.loadRemote(n,{method:r.getLoaderMethod(),base:r.base,async:!1,id:n,options:r.options})),r.parent=t,r.parent.renderAsync(r.context,{blocks:r.blocks})):"blocks"==i.output?r.blocks:"macros"==i.output?r.macros:e}).then(function(e){return l=!1,s=e})["catch"](function(e){if(t)throw e;a=e}),t)return o;if(null!==a)throw a;if(l)throw new v.Error("You are using Twig.js in sync mode in combination with async extensions.");return s},v.Template.prototype.importFile=function(e){var t,i;if(this.url||!this.options.allowInlineIncludes)return t=v.path.parsePath(this,e),v.Templates.loadRemote(t,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:t});if(e=this.path?v.path.parsePath(this,e):e,!(i=v.Templates.load(e))&&!(i=v.Templates.loadRemote(t,{id:e,method:this.getLoaderMethod(),async:!1,path:e,options:this.options})))throw new v.Error("Unable to find the template "+e);return i.options=this.options,i},v.Template.prototype.importBlocks=function(e,t){var i=this.importFile(e),s=this.context,n=this;t=t||!1,i.render(s),v.forEach(Object.keys(i.blocks),function(e){(t||void 0===n.blocks[e])&&(n.blocks[e]=i.blocks[e],n.importedBlocks.push(e))})},v.Template.prototype.importMacros=function(e){var t=v.path.parsePath(this,e);return v.Templates.loadRemote(t,{method:this.getLoaderMethod(),async:!1,id:t})},v.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},v.Template.prototype.compile=function(e){return v.compiler.compile(this,e)},v.Markup=function(e,t){return void 0===t&&(t=!0),"string"==typeof e&&0<e.length&&((e=new String(e)).twig_markup=t),e},v}},function(e,t){e.exports=function(o){return o.compiler={module:{}},o.compiler.compile=function(e,t){var i,s=JSON.stringify(e.tokens),n=e.id;if(t.module){if(void 0===o.compiler.module[t.module])throw new o.Error("Unable to find module type "+t.module);i=o.compiler.module[t.module](n,s,t.twig)}else i=o.compiler.wrap(n,s);return i},o.compiler.module={amd:function(e,t,i){return'define(["'+i+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+o.compiler.wrap(e,t)+"\n\treturn templates;\n});"},node:function(e,t){return'var twig = require("twig").twig;\nexports.template = '+o.compiler.wrap(e,t)},cjs2:function(e,t,i){return'module.declare([{ twig: "'+i+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+o.compiler.wrap(e,t)+"\n});"}},o.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},o}},function(e,t,i){e.exports=function(h){"use strict";function c(e,t,i){return t?h.expression.parseAsync.apply(e,[t,i]):h.Promise.resolve(!1)}for(h.expression={},i(4)(h),h.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if"],h.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},h.expression.set={operations:[h.expression.type.filter,h.expression.type.operator.unary,h.expression.type.operator.binary,h.expression.type.array.end,h.expression.type.object.end,h.expression.type.parameter.end,h.expression.type.subexpression.end,h.expression.type.comma,h.expression.type.test],expressions:[h.expression.type._function,h.expression.type.bool,h.expression.type.string,h.expression.type.variable,h.expression.type.number,h.expression.type._null,h.expression.type.context,h.expression.type.parameter.start,h.expression.type.array.start,h.expression.type.object.start,h.expression.type.subexpression.start,h.expression.type.operator.unary]},h.expression.set.operations_extended=h.expression.set.operations.concat([h.expression.type.key.period,h.expression.type.key.brackets,h.expression.type.slice]),h.expression.fn={compile:{push:function(e,t,i){i.push(e)},push_both:function(e,t,i){i.push(e),t.push(e)}},parse:{push:function(e,t,i){t.push(e)},push_value:function(e,t,i){t.push(e.value)}}},h.expression.definitions=[{type:h.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*(\s?as)?)/,next:h.expression.set.operations.concat([h.expression.type.parameter.start]),compile:function(e,t,i){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(i,s,e){var n=s.pop();return c(this,i.params,e).then(function(e){var t=h.test(i.filter,n,e);"not"==i.modifier?s.push(!t):s.push(t)})}},{type:h.expression.type.comma,regex:/^,/,next:h.expression.set.expressions.concat([h.expression.type.array.end,h.expression.type.object.end]),compile:function(e,t,i){var s,n=t.length-1;for(delete e.match,delete e.value;0<=n;n--){if((s=t.pop()).type===h.expression.type.object.start||s.type===h.expression.type.parameter.start||s.type===h.expression.type.array.start){t.push(s);break}i.push(s)}i.push(e)}},{type:h.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:h.expression.set.operations,compile:function(e,t,i){e.value=Number(e.value),i.push(e)},parse:h.expression.fn.parse.push_value},{type:h.expression.type.operator.binary,regex:/(^\?\:|^(b\-and)|^(b\-or)|^(b\-xor)|^[\+\-~%\?]|^[\:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[\(|\s+]|^(or)[\(|\s+]|^(in)[\(|\s+]|^(not in)[\(|\s+]|^\.\.)/,next:h.expression.set.expressions,transform:function(e,t){switch(e[0]){case"and(":case"or(":case"in(":case"not in(":return t[t.length-1].value=e[2],e[0];default:return""}},compile:function(e,t,i){delete e.match,e.value=e.value.trim();var s=e.value,n=h.expression.operator.lookup(s,e);for(h.log.trace("Twig.expression.compile: ","Operator: ",n," from ",s);0<t.length&&(t[t.length-1].type==h.expression.type.operator.unary||t[t.length-1].type==h.expression.type.operator.binary)&&(n.associativity===h.expression.operator.leftToRight&&n.precidence>=t[t.length-1].precidence||n.associativity===h.expression.operator.rightToLeft&&n.precidence>t[t.length-1].precidence);){var o=t.pop();i.push(o)}if(":"===s){if(!t[t.length-1]||"?"!==t[t.length-1].value){var r=i.pop();if(r.type===h.expression.type.string||r.type===h.expression.type.variable)e.key=r.value;else if(r.type===h.expression.type.number)e.key=r.value.toString();else{if(!r.expression||r.type!==h.expression.type.parameter.end&&r.type!=h.expression.type.subexpression.end)throw new h.Error("Unexpected value before ':' of "+r.type+" = "+r.value);e.params=r.params}return void i.push(e)}}else t.push(n)},parse:function(t,i,s){if(t.key)i.push(t);else{if(t.params)return h.expression.parseAsync.apply(this,[t.params,s]).then(function(e){t.key=e,i.push(t),s.loop||delete t.params});h.expression.operator.parse(t.value,i)}}},{type:h.expression.type.operator.unary,regex:/(^not\s+)/,next:h.expression.set.expressions,compile:function(e,t,i){delete e.match,e.value=e.value.trim();var s=e.value,n=h.expression.operator.lookup(s,e);for(h.log.trace("Twig.expression.compile: ","Operator: ",n," from ",s);0<t.length&&(t[t.length-1].type==h.expression.type.operator.unary||t[t.length-1].type==h.expression.type.operator.binary)&&(n.associativity===h.expression.operator.leftToRight&&n.precidence>=t[t.length-1].precidence||n.associativity===h.expression.operator.rightToLeft&&n.precidence>t[t.length-1].precidence);){var o=t.pop();i.push(o)}t.push(n)},parse:function(e,t,i){h.expression.operator.parse(e.value,t)}},{type:h.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:h.expression.set.operations_extended,compile:function(e,t,i){var s=e.value;delete e.match,s='"'===s.substring(0,1)?s.replace('\\"','"'):s.replace("\\'","'"),e.value=s.substring(1,s.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),h.log.trace("Twig.expression.compile: ","String value: ",e.value),i.push(e)},parse:h.expression.fn.parse.push_value},{type:h.expression.type.subexpression.start,regex:/^\(/,next:h.expression.set.expressions.concat([h.expression.type.subexpression.end]),compile:function(e,t,i){e.value="(",i.push(e),t.push(e)},parse:h.expression.fn.parse.push},{type:h.expression.type.subexpression.end,regex:/^\)/,next:h.expression.set.operations_extended,validate:function(e,t){for(var i=t.length-1,s=!1,n=!1,o=0;!s&&0<=i;){var r=t[i];(s=r.type===h.expression.type.subexpression.start)&&n&&(s=n=!1),r.type===h.expression.type.parameter.start?o++:r.type===h.expression.type.parameter.end?o--:r.type===h.expression.type.subexpression.end&&(n=!0),i--}return s&&0===o},compile:function(e,t,i){var s,n=e;for(s=t.pop();0<t.length&&s.type!=h.expression.type.subexpression.start;)i.push(s),s=t.pop();for(var o=[];e.type!==h.expression.type.subexpression.start;)o.unshift(e),e=i.pop();o.unshift(e),void 0===(s=t[t.length-1])||s.type!==h.expression.type._function&&s.type!==h.expression.type.filter&&s.type!==h.expression.type.test&&s.type!==h.expression.type.key.brackets?(n.expression=!0,o.pop(),o.shift(),n.params=o,i.push(n)):(n.expression=!1,s.params=o)},parse:function(e,t,i){if(e.expression)return h.expression.parseAsync.apply(this,[e.params,i]).then(function(e){t.push(e)});throw new h.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:h.expression.type.parameter.start,regex:/^\(/,next:h.expression.set.expressions.concat([h.expression.type.parameter.end]),validate:function(e,t){var i=t[t.length-1];return i&&h.indexOf(h.expression.reservedWords,i.value.trim())<0},compile:h.expression.fn.compile.push_both,parse:h.expression.fn.parse.push},{type:h.expression.type.parameter.end,regex:/^\)/,next:h.expression.set.operations_extended,compile:function(e,t,i){var s,n=e;for(s=t.pop();0<t.length&&s.type!=h.expression.type.parameter.start;)i.push(s),s=t.pop();for(var o=[];e.type!==h.expression.type.parameter.start;)o.unshift(e),e=i.pop();o.unshift(e),void 0===(e=i[i.length-1])||e.type!==h.expression.type._function&&e.type!==h.expression.type.filter&&e.type!==h.expression.type.test&&e.type!==h.expression.type.key.brackets?(n.expression=!0,o.pop(),o.shift(),n.params=o,i.push(n)):(n.expression=!1,e.params=o)},parse:function(e,t,i){var s=[],n=!1,o=null;if(e.expression)return h.expression.parseAsync.apply(this,[e.params,i]).then(function(e){t.push(e)});for(;0<t.length;){if((o=t.pop())&&o.type&&o.type==h.expression.type.parameter.start){n=!0;break}s.unshift(o)}if(!n)throw new h.Error("Expected end of parameter set.");t.push(s)}},{type:h.expression.type.slice,regex:/^\[(\d*\:\d*)\]/,next:h.expression.set.operations_extended,compile:function(e,t,i){var s=e.match[1].split(":"),n=s[0]?parseInt(s[0]):void 0,o=s[1]?parseInt(s[1]):void 0;e.value="slice",e.params=[n,o],o||(e.params=[n]),i.push(e)},parse:function(e,t,i){var s=t.pop(),n=e.params;t.push(h.filter.apply(this,[e.value,s,n]))}},{type:h.expression.type.array.start,regex:/^\[/,next:h.expression.set.expressions.concat([h.expression.type.array.end]),compile:h.expression.fn.compile.push_both,parse:h.expression.fn.parse.push},{type:h.expression.type.array.end,regex:/^\]/,next:h.expression.set.operations_extended,compile:function(e,t,i){for(var s,n=t.length-1;0<=n&&(s=t.pop()).type!==h.expression.type.array.start;n--)i.push(s);i.push(e)},parse:function(e,t,i){for(var s=[],n=!1,o=null;0<t.length;){if((o=t.pop()).type&&o.type==h.expression.type.array.start){n=!0;break}s.unshift(o)}if(!n)throw new h.Error("Expected end of array.");t.push(s)}},{type:h.expression.type.object.start,regex:/^\{/,next:h.expression.set.expressions.concat([h.expression.type.object.end]),compile:h.expression.fn.compile.push_both,parse:h.expression.fn.parse.push},{type:h.expression.type.object.end,regex:/^\}/,next:h.expression.set.operations_extended,compile:function(e,t,i){for(var s,n=t.length-1;0<=n&&(!(s=t.pop())||s.type!==h.expression.type.object.start);n--)i.push(s);i.push(e)},parse:function(e,t,i){for(var s={},n=!1,o=null,r=!1,a=null;0<t.length;){if((o=t.pop())&&o.type&&o.type===h.expression.type.object.start){n=!0;break}if(o&&o.type&&(o.type===h.expression.type.operator.binary||o.type===h.expression.type.operator.unary)&&o.key){if(!r)throw new h.Error("Missing value for key '"+o.key+"' in object definition.");s[o.key]=a,void 0===s._keys&&(s._keys=[]),s._keys.unshift(o.key),a=null,r=!1}else r=!0,a=o}if(!n)throw new h.Error("Unexpected end of object.");t.push(s)}},{type:h.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:h.expression.set.operations_extended.concat([h.expression.type.parameter.start]),compile:function(e,t,i){e.value=e.match[1],i.push(e)},parse:function(t,i,e){var s=this,n=i.pop();return c(this,t.params,e).then(function(e){return h.filter.apply(s,[t.value,n,e])}).then(function(e){i.push(e)})}},{type:h.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:h.expression.type.parameter.start,validate:function(e,t){return e[1]&&h.indexOf(h.expression.reservedWords,e[1])<0},transform:function(e,t){return"("},compile:function(e,t,i){var s=e.match[1];e.fn=s,delete e.match,delete e.value,i.push(e)},parse:function(e,t,i){var s,n=this,o=e.fn;return c(this,e.params,i).then(function(e){if(h.functions[o])s=h.functions[o].apply(n,e);else{if("function"!=typeof i[o])throw new h.Error(o+" function does not exist and is not defined in the context");s=i[o].apply(i,e)}return s}).then(function(e){t.push(e)})}},{type:h.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:h.expression.set.operations_extended.concat([h.expression.type.parameter.start]),compile:h.expression.fn.compile.push,validate:function(e,t){return h.indexOf(h.expression.reservedWords,e[0])<0},parse:function(e,t,i){return h.expression.resolveAsync.apply(this,[i[e.value],i]).then(function(e){t.push(e)})}},{type:h.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:h.expression.set.operations_extended.concat([h.expression.type.parameter.start]),compile:function(e,t,i){e.key=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(e,t,i,s){var n,o=this,r=e.key,a=t.pop();return c(this,e.params,i).then(function(e){if(null==a){if(o.options.strict_variables)throw new h.Error("Can't access a key "+r+" on an null or undefined object.");n=void 0}else{var t=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};n="object"==typeof a&&r in a?a[r]:void 0!==a["get"+t(r)]?a["get"+t(r)]:void 0!==a["is"+t(r)]?a["is"+t(r)]:void 0}return h.expression.resolveAsync.apply(o,[n,i,e,s,a])}).then(function(e){t.push(e)})}},{type:h.expression.type.key.brackets,regex:/^\[([^\]\:]*)\]/,next:h.expression.set.operations_extended.concat([h.expression.type.parameter.start]),compile:function(e,t,i){var s=e.match[1];delete e.value,delete e.match,e.stack=h.expression.compile({value:s}).stack,i.push(e)},parse:function(t,i,s,n){var o,r,a=this,l=null;return c(this,t.params,s).then(function(e){return l=e,h.expression.parseAsync.apply(a,[t.stack,s])}).then(function(e){if(null!=(o=i.pop()))return r="object"==typeof o&&e in o?o[e]:null,h.expression.resolveAsync.apply(a,[r,o,l,n]);if(a.options.strict_variables)throw new h.Error("Can't access a key "+e+" on an null or undefined object.");return null}).then(function(e){i.push(e)})}},{type:h.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:h.expression.set.operations,compile:function(e,t,i){delete e.match,e.value=null,i.push(e)},parse:h.expression.fn.parse.push_value},{type:h.expression.type.context,regex:/^_context/,next:h.expression.set.operations_extended.concat([h.expression.type.parameter.start]),compile:h.expression.fn.compile.push,parse:function(e,t,i){t.push(i)}},{type:h.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:h.expression.set.operations,compile:function(e,t,i){e.value="true"===e.match[0].toLowerCase(),delete e.match,i.push(e)},parse:h.expression.fn.parse.push_value}],h.expression.resolveAsync=function(t,i,e,s,n){if("function"!=typeof t)return h.Promise.resolve(t);var o=h.Promise.resolve(e);if(s&&s.type===h.expression.type.parameter.end){o=o.then(function(){return s.params&&h.expression.parseAsync.apply(this,[s.params,i,!0])}).then(function(e){return s.cleanup=!0,e})}return o.then(function(e){return t.apply(n||i,e||[])})},h.expression.resolve=function(e,t,i,s,n){var o,r=!0;if(h.expression.resolveAsync.apply(this,[e,t,i,s,n]).then(function(e){r=!1,o=e}),r)throw new h.Error("You are using Twig.js in sync mode in combination with async extensions.");return o},h.expression.handler={},h.expression.extendType=function(e){h.expression.type[e]="Twig.expression.type."+e},h.expression.extend=function(e){if(!e.type)throw new h.Error("Unable to extend logic definition. No type provided for "+e);h.expression.handler[e.type]=e};0<h.expression.definitions.length;)h.expression.extend(h.expression.definitions.shift());return h.expression.tokenize=function(e){var t,i,s,n,o,r,a=[],l=0,c=null,u=[];for(r=function(){var e=Array.prototype.slice.apply(arguments);return e.pop(),e.pop(),h.log.trace("Twig.expression.tokenize","Matched a ",t," regular expression of ",e),c&&h.indexOf(c,t)<0?(u.push(t+" cannot follow a "+a[a.length-1].type+" at template:"+l+" near '"+e[0].substring(0,20)+"...'"),e[0]):h.expression.handler[t].validate&&!h.expression.handler[t].validate(e,a)?e[0]:(u=[],a.push({type:t,value:e[0],match:e}),o=!0,c=n,l+=e[0].length,h.expression.handler[t].transform?h.expression.handler[t].transform(e,a):"")},h.log.debug("Twig.expression.tokenize","Tokenizing expression ",e);0<e.length;){for(t in e=e.trim(),h.expression.handler)if(h.expression.handler.hasOwnProperty(t)){for(n=h.expression.handler[t].next,i=h.expression.handler[t].regex,h.log.trace("Checking type ",t," on ",e),s=i instanceof Array?i:[i],o=!1;0<s.length;)i=s.pop(),e=e.replace(i,r);if(o)break}if(!o)throw 0<u.length?new h.Error(u.join(" OR ")):new h.Error("Unable to parse '"+e+"' at template position"+l)}return h.log.trace("Twig.expression.tokenize","Tokenized to ",a),a},h.expression.compile=function(e){var t=e.value,i=h.expression.tokenize(t),s=null,n=[],o=[],r=null;for(h.log.trace("Twig.expression.compile: ","Compiling ",t);0<i.length;)s=i.shift(),r=h.expression.handler[s.type],h.log.trace("Twig.expression.compile: ","Compiling ",s),r.compile&&r.compile(s,o,n),h.log.trace("Twig.expression.compile: ","Stack is",o),h.log.trace("Twig.expression.compile: ","Output is",n);for(;0<o.length;)n.push(o.pop());return h.log.trace("Twig.expression.compile: ","Final output is",n),e.stack=n,delete e.value,e},h.expression.parse=function(s,n,t,i){var o=this;s instanceof Array||(s=[s]);var r,e,a=[],l=!0,c=null,u=[];if(e=h.async.forEach(s,function(e,t){if(!e.cleanup){var i=null;return s.length>t+1&&(r=s[t+1]),(c=h.expression.handler[e.type]).parse&&(i=c.parse.apply(o,[e,a,n,r])),n.loop&&e.type===h.expression.type.operator.binary&&u.push(e),i}}).then(function(){if(h.forEach(u,function(e){e.params&&e.key&&delete e.key}),t){for(var e=[];0<a.length;)e.unshift(a.pop());a.push(e)}if(i)return h.Promise.resolve(a.pop())}).then(function(e){return l=!1,e}),i)return e;if(l)throw new h.Error("You are using Twig.js in sync mode in combination with async extensions.");return a.pop()},h}},function(e,t){e.exports=function(o){"use strict";o.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var r=function(e,t){if(null==t)return null;if(void 0!==t.indexOf)return e===t||""!==e&&-1<t.indexOf(e);var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1};return o.expression.operator.lookup=function(e,t){switch(e){case"..":t.precidence=20,t.associativity=o.expression.operator.leftToRight;break;case",":t.precidence=18,t.associativity=o.expression.operator.leftToRight;break;case"?:":case"?":case":":t.precidence=16,t.associativity=o.expression.operator.rightToLeft;break;case"or":t.precidence=14,t.associativity=o.expression.operator.leftToRight;break;case"and":t.precidence=13,t.associativity=o.expression.operator.leftToRight;break;case"b-or":t.precidence=12,t.associativity=o.expression.operator.leftToRight;break;case"b-xor":t.precidence=11,t.associativity=o.expression.operator.leftToRight;break;case"b-and":t.precidence=10,t.associativity=o.expression.operator.leftToRight;break;case"==":case"!=":t.precidence=9,t.associativity=o.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":t.precidence=8,t.associativity=o.expression.operator.leftToRight;break;case"~":case"+":case"-":t.precidence=6,t.associativity=o.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":t.precidence=5,t.associativity=o.expression.operator.leftToRight;break;case"not":t.precidence=3,t.associativity=o.expression.operator.rightToLeft;break;default:throw new o.Error("Failed to lookup operator: "+e+" is an unknown operator.")}return t.operator=e,t},o.expression.operator.parse=function(e,t){var i,s,n;switch(o.log.trace("Twig.expression.operator.parse: ","Handling ",e),"?"===e&&(n=t.pop()),s=t.pop(),"not"!==e&&(i=t.pop()),"in"!==e&&"not in"!==e&&(i&&Array.isArray(i)&&(i=i.length),s&&Array.isArray(s)&&(s=s.length)),e){case":":break;case"?:":o.lib.boolval(i)?t.push(i):t.push(s);break;case"?":void 0===i&&(i=s,s=n,n=void 0),o.lib.boolval(i)?t.push(s):t.push(n);break;case"+":s=parseFloat(s),i=parseFloat(i),t.push(i+s);break;case"-":s=parseFloat(s),i=parseFloat(i),t.push(i-s);break;case"*":s=parseFloat(s),i=parseFloat(i),t.push(i*s);break;case"/":s=parseFloat(s),i=parseFloat(i),t.push(i/s);break;case"//":s=parseFloat(s),i=parseFloat(i),t.push(Math.floor(i/s));break;case"%":s=parseFloat(s),i=parseFloat(i),t.push(i%s);break;case"~":t.push((null!=i?i.toString():"")+(null!=s?s.toString():""));break;case"not":case"!":t.push(!o.lib.boolval(s));break;case"<":t.push(i<s);break;case"<=":t.push(i<=s);break;case">":t.push(s<i);break;case">=":t.push(s<=i);break;case"===":t.push(i===s);break;case"==":t.push(i==s);break;case"!==":t.push(i!==s);break;case"!=":t.push(i!=s);break;case"or":t.push(o.lib.boolval(i)||o.lib.boolval(s));break;case"b-or":t.push(i|s);break;case"b-xor":t.push(i^s);break;case"and":t.push(o.lib.boolval(i)&&o.lib.boolval(s));break;case"b-and":t.push(i&s);break;case"**":t.push(Math.pow(i,s));break;case"not in":t.push(!r(i,s));break;case"in":t.push(r(i,s));break;case"..":t.push(o.functions.range(i,s));break;default:throw new o.Error("Failed to parse operator: "+e+" is an unknown operator.")}},o}},function(e,t){e.exports=function(l){function o(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e}return l.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,i){return t+i.toUpperCase()})},length:function(e){return l.lib.is("Array",e)||"string"==typeof e?e.length:l.lib.is("Object",e)?void 0===e._keys?Object.keys(e).length:e._keys.length:0},reverse:function(e){if(o("Array",e))return e.reverse();if(o("String",e))return e.split("").reverse().join("");if(o("Object",e)){var t=e._keys||Object.keys(e).reverse();return e._keys=t,e}},sort:function(s){if(o("Array",s))return s.sort();if(o("Object",s)){delete s._keys;var e=Object.keys(s).sort(function(e,t){var i;return s[e]>s[t]==!(s[e]<=s[t])?s[e]>s[t]?1:s[e]<s[t]?-1:0:isNaN(i=parseFloat(s[e]))||isNaN(b1=parseFloat(s[t]))?"string"==typeof s[e]?s[e]>s[t].toString()?1:s[e]<s[t].toString()?-1:0:"string"==typeof s[t]?s[e].toString()>s[t]?1:s[e].toString()<s[t]?-1:0:null:i>b1?1:i<b1?-1:0});return s._keys=e,s}},keys:function(t){if(null!=t){var e=t._keys||Object.keys(t),i=[];return l.forEach(e,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&i.push(e)}),i}},url_encode:function(e){if(null!=e){var t=encodeURIComponent(e);return t.replace("'","%27")}},join:function(t,e){if(null!=t){var i="",s=[],n=null;return e&&e[0]&&(i=e[0]),o("Array",t)?s=t:(n=t._keys||Object.keys(t),l.forEach(n,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&s.push(t[e])})),s.join(i)}},"default":function(e,t){if(void 0!==t&&1<t.length)throw new l.Error("default filter expects one argument");return null==e||""===e?void 0===t?"":t[0]:e},json_encode:function(t){if(null==t)return"null";if("object"==typeof t&&o("Array",t))return i=[],l.forEach(t,function(e){i.push(l.filters.json_encode(e))}),"["+i.join(",")+"]";if("object"!=typeof t)return JSON.stringify(t);var e=t._keys||Object.keys(t),i=[];return l.forEach(e,function(e){i.push(JSON.stringify(e)+":"+l.filters.json_encode(t[e]))}),"{"+i.join(",")+"}"},merge:function(i,e){var s=[],n=0,t=[];if(o("Array",i)?l.forEach(e,function(e){o("Array",e)||(s={})}):s={},o("Array",s)||(s._keys=[]),o("Array",i)?l.forEach(i,function(e){s._keys&&s._keys.push(n),s[n]=e,n++}):(t=i._keys||Object.keys(i),l.forEach(t,function(e){s[e]=i[e],s._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&n<=t&&(n=t+1)})),l.forEach(e,function(i){o("Array",i)?l.forEach(i,function(e){s._keys&&s._keys.push(n),s[n]=e,n++}):(t=i._keys||Object.keys(i),l.forEach(t,function(e){s[e]||s._keys.push(e),s[e]=i[e];var t=parseInt(e,10);!isNaN(t)&&n<=t&&(n=t+1)}))}),0===e.length)throw new l.Error("Filter merge expects at least one parameter");return s},date:function(e,t){var i=l.functions.date(e),s=t&&t.length?t[0]:"F j, Y H:i";return l.lib.date(s,i)},date_modify:function(e,t){if(null!=e){if(void 0===t||1!==t.length)throw new l.Error("date_modify filter expects 1 argument");var i,s=t[0];return l.lib.is("Date",e)&&(i=l.lib.strtotime(s,e.getTime()/1e3)),l.lib.is("String",e)&&(i=l.lib.strtotime(s,l.lib.strtotime(e))),l.lib.is("Number",e)&&(i=l.lib.strtotime(s,e)),new Date(1e3*i)}},replace:function(e,t){if(null!=e){var i,s=t[0];for(i in s)s.hasOwnProperty(i)&&"_keys"!==i&&(e=l.lib.replaceAll(e,i,s[i]));return e}},format:function(e,t){if(null!=e)return l.lib.vsprintf(e,t)},striptags:function(e){if(null!=e)return l.lib.strip_tags(e)},escape:function(e,t){if(null!=e){var i="html";if(t&&t.length&&!0!==t[0]&&(i=t[0]),"html"==i){var s=e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return l.Markup(s,"html")}if("js"==i){s=e.toString();for(var n="",o=0;o<s.length;o++)if(s[o].match(/^[a-zA-Z0-9,\._]$/))n+=s[o];else{n+=(r=s.charCodeAt(o))<128?"\\x"+r.toString(16).toUpperCase():l.lib.sprintf("\\u%04s",r.toString(16).toUpperCase())}return l.Markup(n,"js")}if("css"==i){for(s=e.toString(),n="",o=0;o<s.length;o++)if(s[o].match(/^[a-zA-Z0-9]$/))n+=s[o];else{n+="\\"+(r=s.charCodeAt(o)).toString(16).toUpperCase()+" "}return l.Markup(n,"css")}if("url"==i){n=l.filters.url_encode(e);return l.Markup(n,"url")}if("html_attr"!=i)throw new l.Error("escape strategy unsupported");for(s=e.toString(),n="",o=0;o<s.length;o++)if(s[o].match(/^[a-zA-Z0-9,\.\-_]$/))n+=s[o];else if(s[o].match(/^[&<>"]$/))n+=s[o].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var r;n+=(r=s.charCodeAt(o))<=31&&9!=r&&10!=r&&13!=r?"&#xFFFD;":r<128?l.lib.sprintf("&#x%02s;",r.toString(16).toUpperCase()):l.lib.sprintf("&#x%04s;",r.toString(16).toUpperCase())}return l.Markup(n,"html_attr")}},e:function(e,t){return l.filters.escape(e,t)},nl2br:function(e){if(null!=e){var t="BACKSLASH_n_replace",i="<br />"+t;return e=l.filters.escape(e).replace(/\r\n/g,i).replace(/\r/g,i).replace(/\n/g,i),e=l.lib.replaceAll(e,t,"\n"),l.Markup(e)}},number_format:function(e,t){var i=e,s=t&&t[0]?t[0]:void 0,n=t&&void 0!==t[1]?t[1]:".",o=t&&void 0!==t[2]?t[2]:",";i=(i+"").replace(/[^0-9+\-Ee.]/g,"");var r,a,l,c=isFinite(+i)?+i:0,u=isFinite(+s)?Math.abs(s):0,h="";return 3<(h=(u?(r=c,a=u,l=Math.pow(10,a),""+Math.round(r*l)/l):""+Math.round(c)).split("."))[0].length&&(h[0]=h[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(h[1]||"").length<u&&(h[1]=h[1]||"",h[1]+=new Array(u-h[1].length+1).join("0")),h.join(n)},trim:function(e,t){if(null!=e){var i,s=l.filters.escape(""+e);i=t&&t[0]?""+t[0]:" \n\r\t\f\x0B            ​\u2028\u2029　";for(var n=0;n<s.length;n++)if(-1===i.indexOf(s.charAt(n))){s=s.substring(n);break}for(n=s.length-1;0<=n;n--)if(-1===i.indexOf(s.charAt(n))){s=s.substring(0,n+1);break}return-1===i.indexOf(s.charAt(0))?s:""}},truncate:function(e,t){var i=30,s=!1,n="...";if(e+="",t&&(t[0]&&(i=t[0]),t[1]&&(s=t[1]),t[2]&&(n=t[2])),e.length>i){if(s&&-1===(i=e.indexOf(" ",i)))return e;e=e.substr(0,i)+n}return e},slice:function(e,t){if(null!=e){if(void 0===t||t.length<1)throw new l.Error("slice filter expects at least 1 argument");var i=t[0]||0,s=1<t.length?t[1]:e.length,n=0<=i?i:Math.max(e.length+i,0);if(l.lib.is("Array",e)){for(var o=[],r=n;r<n+s&&r<e.length;r++)o.push(e[r]);return o}if(l.lib.is("String",e))return e.substr(n,s);throw new l.Error("slice filter expects value to be an array or string")}},abs:function(e){if(null!=e)return Math.abs(e)},first:function(e){if(o("Array",e))return e[0];if(o("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(e,t){if(null!=e){if(void 0===t||t.length<1||2<t.length)throw new l.Error("split filter expects 1 or 2 argument");if(l.lib.is("String",e)){var i=t[0],s=t[1],n=e.split(i);if(void 0===s)return n;if(s<0)return e.split(i,n.length+s);var o=[];if(""==i)for(;0<n.length;){for(var r="",a=0;a<s&&0<n.length;a++)r+=n.shift();o.push(r)}else{for(a=0;a<s-1&&0<n.length;a++)o.push(n.shift());0<n.length&&o.push(n.join(i))}return o}throw new l.Error("split filter expects value to be a string")}},last:function(e){var t;return l.lib.is("Object",e)?e[(t=void 0===e._keys?Object.keys(e):e._keys)[t.length-1]]:e[e.length-1]},raw:function(e){return l.Markup(e)},batch:function(e,t){var i,s,n,o=t.shift(),r=t.shift();if(!l.lib.is("Array",e))throw new l.Error("batch filter expects items to be an array");if(!l.lib.is("Number",o))throw new l.Error("batch filter expects size to be a number");if(o=Math.ceil(o),i=l.lib.chunkArray(e,o),r&&e.length%o!=0){for(n=o-(s=i.pop()).length;n--;)s.push(r);i.push(s)}return i},round:function(e,t){var i=0<(t=t||[]).length?t[0]:0,s=1<t.length?t[1]:"common";if(e=parseFloat(e),i&&!l.lib.is("Number",i))throw new l.Error("round filter expects precision to be a number");if("common"===s)return l.lib.round(e,i);if(!l.lib.is("Function",Math[s]))throw new l.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[s](e*Math.pow(10,i))/Math.pow(10,i)}},l.filter=function(e,t,i){if(!l.filters[e])throw"Unable to find filter "+e;return l.filters[e].apply(this,[t,i])},l.filter.extend=function(e,t){l.filters[e]=t},l}},function(a,e){a.exports=function(r){return r.functions={range:function(e,t,i){var s,n,o=[],r=i||1,a=!1;if(!((n=isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(a=!0,s=e.charCodeAt(0),t.charCodeAt(0)):(s=isNaN(e)?0:e,isNaN(t)?0:t):(s=parseInt(e,10),parseInt(t,10)))<s))for(;s<=n;)o.push(a?String.fromCharCode(s):s),s+=r;else for(;n<=s;)o.push(a?String.fromCharCode(s):s),s-=r;return o},cycle:function(e,t){return e[t%e.length]},dump:function(){var i=0,s="",e=Array.prototype.slice.call(arguments),n=function(e){for(var t="";0<e;)e--,t+="  ";return t},o=function(e){s+=n(i),"object"==typeof e?t(e):"function"==typeof e?s+="function()\n":"string"==typeof e?s+="string("+e.length+') "'+e+'"\n':"number"==typeof e?s+="number("+e+")\n":"boolean"==typeof e&&(s+="bool("+e+")\n")},t=function(e){var t;if(null===e)s+="NULL\n";else if(void 0===e)s+="undefined\n";else if("object"==typeof e){for(t in s+=n(i)+typeof e,i++,s+="("+function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(e)+") {\n",e)s+=n(i)+"["+t+"]=> \n",o(e[t]);s+=n(--i)+"}\n"}else o(e)};return 0==e.length&&e.push(this.context),r.forEach(e,function(e){t(e)}),s},date:function(e,t){var i;if(null==e||""===e)i=new Date;else if(r.lib.is("Date",e))i=e;else if(r.lib.is("String",e))i=e.match(/^[0-9]+$/)?new Date(1e3*e):new Date(1e3*r.lib.strtotime(e));else{if(!r.lib.is("Number",e))throw new r.Error("Unable to parse date "+e);i=new Date(1e3*e)}return i},block:function(e){return this.originalBlockTokens[e]?r.logic.parse.apply(this,[this.originalBlockTokens[e],this.context]).output:this.blocks[e]},parent:function(){return r.placeholders.parent},attribute:function(e,t,i){return r.lib.is("Object",e)&&e.hasOwnProperty(t)?"function"==typeof e[t]?e[t].apply(void 0,i):e[t]:e[t]||void 0},max:function(e){return r.lib.is("Object",e)?(delete e._keys,r.lib.max(e)):r.lib.max.apply(null,arguments)},min:function(e){return r.lib.is("Object",e)?(delete e._keys,r.lib.min(e)):r.lib.min.apply(null,arguments)},template_from_string:function(e){return void 0===e&&(e=""),r.Templates.parsers.twig({options:this.options,data:e})},random:function(e){function t(e){var t=Math.floor(Math.random()*o),i=[0,e],s=Math.min.apply(null,i),n=Math.max.apply(null,i);return s+Math.floor((n-s+1)*t/o)}var o=2147483648;if(r.lib.is("Number",e))return t(e);if(r.lib.is("String",e))return e.charAt(t(e.length-1));if(r.lib.is("Array",e))return e[t(e.length-1)];if(r.lib.is("Object",e)){var i=Object.keys(e);return e[i[t(i.length-1)]]}return t(o-1)},source:function(e,t){var i,s,n=!1,o={id:e,path:void 0!==a&&"undefined"!=typeof a.exports&&"undefined"==typeof window?(s="fs",__dirname+"/"+e):(s="ajax",e),method:s,parser:"source",async:!1,fetchTemplateSource:!0};void 0===t&&(t=!1);try{null==(i=r.Templates.loadRemote(e,o))?i="":n=!0}catch(a){r.log.debug("Twig.functions.source: ","Problem loading template  ",a)}return n||t?i:'Template "{name}" is not defined.'.replace("{name}",e)}},r._function=function(e,t,i){if(!r.functions[e])throw"Unable to find function "+e;return r.functions[e](t,i)},r._function.extend=function(e,t){r.functions[e]=t},r}},function(e,t,i){e.exports=function(o){return o.lib={},o.lib.sprintf=i(8),o.lib.vsprintf=i(9),o.lib.round=i(10),o.lib.max=i(11),o.lib.min=i(12),o.lib.strip_tags=i(13),o.lib.strtotime=i(14),o.lib.date=i(15),o.lib.boolval=i(16),o.lib.is=function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e},o.lib.copy=function(e){var t,i={};for(t in e)i[t]=e[t];return i},o.lib.extend=function(e,t){var i,s=Object.keys(t);for(i=s.length;i--;)e[s[i]]=t[s[i]];return e},o.lib.replaceAll=function(e,t,i){return e.split(t).join(i)},o.lib.chunkArray=function(e,t){var i=[],s=0,n=e.length;if(t<1||!o.lib.is("Array",e))return[];for(;s<n;)i.push(e.slice(s,s+=t));return i},o}},function(e,t){"use strict";e.exports=function(){var v=arguments,b=0,e=v[b++],_=function(e,t,i,s){i||(i=" ");var n=e.length>=t?"":new Array(1+t-e.length>>>0).join(i);return s?e+n:n+e},x=function(e,t,i,s,n,o){var r=s-e.length;return 0<r&&(e=i||!n?_(e,s,o,i):[e.slice(0,t.length),_("",r,"0",!0),e.slice(t.length)].join("")),e},w=function(e,t,i,s,n,o,r){var a=e>>>0;return e=(i=i&&a&&{2:"0b",8:"0",16:"0x"}[t]||"")+_(a.toString(t),o||0,"0",!1),x(e,i,s,n,r)},k=function(e,t,i,s,n,o){return null!=s&&(e=e.slice(0,s)),x(e,"",t,i,n,o)};return e.replace(/%%|%(\d+\$)?([\-+'#0 ]*)(\*\d+\$|\*|\d+)?(?:\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,i,s,n,o){var r,a,l,c,u;if("%%"===e)return"%";var h,p=!1,d="",f=!1,g=!1,m=" ",y=i.length;for(h=0;h<y;h++)switch(i.charAt(h)){case" ":d=" ";break;case"+":d="+";break;case"-":p=!0;break;case"'":m=i.charAt(h+1);break;case"0":f=!0,m="0";break;case"#":g=!0}if((s=s?"*"===s?+v[b++]:"*"===s.charAt(0)?+v[s.slice(1,-1)]:+s:0)<0&&(s=-s,p=!0),!isFinite(s))throw new Error("sprintf: (minimum-)width must be finite");switch(n=n?"*"===n?+v[b++]:"*"===n.charAt(0)?+v[n.slice(1,-1)]:+n:-1<"fFeE".indexOf(o)?6:"d"===o?0:void 0,u=t?v[t.slice(0,-1)]:v[b++],o){case"s":return k(u+"",p,s,n,f,m);case"c":return k(String.fromCharCode(+u),p,s,n,f);case"b":return w(u,2,g,p,s,n,f);case"o":return w(u,8,g,p,s,n,f);case"x":return w(u,16,g,p,s,n,f);case"X":return w(u,16,g,p,s,n,f).toUpperCase();case"u":return w(u,10,g,p,s,n,f);case"i":case"d":return r=+u||0,u=(a=(r=Math.round(r-r%1))<0?"-":d)+_(String(Math.abs(r)),n,"0",!1),x(u,a,p,s,f);case"e":case"E":case"f":case"F":case"g":case"G":return a=(r=+u)<0?"-":d,l=["toExponential","toFixed","toPrecision"]["efg".indexOf(o.toLowerCase())],c=["toString","toUpperCase"]["eEfFgG".indexOf(o)%2],u=a+Math.abs(r)[l](n),x(u,a,p,s,f)[c]();default:return e}})}},function(e,t,i){"use strict";e.exports=function(e,t){return i(8).apply(this,[e].concat(t))}},function(e,t){"use strict";e.exports=function(e,t,i){var s,n,o,r;if(t|=0,o=(e*=s=Math.pow(10,t))%1==.5*(r=0<e|-(e<0)),n=Math.floor(e),o)switch(i){case"PHP_ROUND_HALF_DOWN":e=n+(r<0);break;case"PHP_ROUND_HALF_EVEN":e=n+n%2*r;break;case"PHP_ROUND_HALF_ODD":e=n+!(n%2);break;default:e=n+(0<r)}return(o?e:Math.round(e))/s}},function(e,t){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(){var a,e,t,i=0,s=arguments,n=s.length,l=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},o=function a(e,t){var i=0,s=0,n=0,o=0,r=0;if(e===t)return 0;if("object"!==(void 0===e?"undefined":c(e)))return"object"===(void 0===t?"undefined":c(t))?1:isNaN(t)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0===t?0:0<t?1:-1:t===e?0:e<t?1:-1;if("object"!==(void 0===t?"undefined":c(t)))return-1;if(e=l(e),t=l(t),(r=e.length)<(o=t.length))return 1;if(o<r)return-1;for(i=0,s=r;i<s;++i){if(1===(n=a(e[i],t[i])))return 1;if(-1===n)return-1}return 0};if(0===n)throw new Error("At least one value should be passed to max()");if(1===n){if("object"!==c(s[0]))throw new Error("Wrong parameter count for max()");if(0===(a=l(s[0])).length)throw new Error("Array must contain at least one element for max()")}else a=s;for(e=a[0],i=1,t=a.length;i<t;++i)1===o(e,a[i])&&(e=a[i]);return e}},function(e,t){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(){var a,e,t,i=0,s=arguments,n=s.length,l=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},o=function a(e,t){var i=0,s=0,n=0,o=0,r=0;if(e===t)return 0;if("object"!==(void 0===e?"undefined":c(e)))return"object"===(void 0===t?"undefined":c(t))?1:isNaN(t)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0===t?0:0<t?1:-1:t===e?0:e<t?1:-1;if("object"!==(void 0===t?"undefined":c(t)))return-1;if(e=l(e),t=l(t),(r=e.length)<(o=t.length))return 1;if(o<r)return-1;for(i=0,s=r;i<s;++i){if(1===(n=a(e[i],t[i])))return 1;if(-1===n)return-1}return 0};if(0===n)throw new Error("At least one value should be passed to min()");if(1===n){if("object"!==c(s[0]))throw new Error("Wrong parameter count for min()");if(0===(a=l(s[0])).length)throw new Error("Array must contain at least one element for min()")}else a=s;for(e=a[0],i=1,t=a.length;i<t;++i)-1===o(e,a[i])&&(e=a[i]);return e}},function(e,t){"use strict";e.exports=function(e,i){i=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,t){return-1<i.indexOf("<"+t.toLowerCase()+">")?e:""})}},function(e,t){"use strict";e.exports=function(e,t){function i(e){var t=e.split(" "),i=t[0],s=t[1].substring(0,3),n=/\d+/.test(i),o=("last"===i?-1:1)*("ago"===t[2]?-1:1);if(n&&(o*=parseInt(i,10)),c.hasOwnProperty(s)&&!t[1].match(/^mon(day|\.)?$/i))return a["set"+c[s]](a["get"+c[s]]()+o);if("wee"===s)return a.setDate(a.getDate()+7*o);if("next"===i||"last"===i)!function r(e,t,i){var s,n=l[t];void 0!==n&&(0==(s=n-a.getDay())?s=7*i:0<s&&"last"===e?s-=7:s<0&&"next"===e&&(s+=7),a.setDate(a.getDate()+s))}(i,s,o);else if(!n)return!1;return!0}var s,n,o,r,a,l,c,u,h,p;if(!e)return!1;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();var d=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if((n=e.match(d))&&n[2]===n[4])if(1901<n[1])switch(n[2]){case"-":return!(12<n[3]||31<n[5])&&new Date(n[1],parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3;case".":return!1;case"/":return!(12<n[3]||31<n[5])&&new Date(n[1],parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3}else if(1901<n[5])switch(n[2]){case"-":case".":return!(12<n[3]||31<n[1])&&new Date(n[5],parseInt(n[3],10)-1,n[1],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3;case"/":return!(12<n[1]||31<n[3])&&new Date(n[5],parseInt(n[1],10)-1,n[3],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3}else switch(n[2]){case"-":return!(12<n[3]||31<n[5]||n[1]<70&&38<n[1])&&(r=0<=n[1]&&n[1]<=38?+n[1]+2e3:n[1],new Date(r,parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3);case".":return 70<=n[5]?!(12<n[3]||31<n[1])&&new Date(n[5],parseInt(n[3],10)-1,n[1],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3:n[5]<60&&!n[6]&&(!(23<n[1]||59<n[3])&&(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),n[1]||0,n[3]||0,n[5]||0,n[9]||0)/1e3));case"/":return!(12<n[1]||31<n[3]||n[5]<70&&38<n[5])&&(r=0<=n[5]&&n[5]<=38?+n[5]+2e3:n[5],new Date(r,parseInt(n[1],10)-1,n[3],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3);case":":return!(23<n[1]||59<n[3]||59<n[5])&&(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),n[1]||0,n[3]||0,n[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(s=Date.parse(e)))return s/1e3|0;if(d=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),(n=e.match(d))&&("z"===n[4]?n[4]="Z":n[4].match(/^([\+-][0-9]{2})$/)&&(n[4]=n[4]+":00"),!isNaN(s=Date.parse(n[1]+"T"+n[2]+n[4]))))return s/1e3|0;if(a=t?new Date(1e3*t):new Date,l={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},c={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},"([+-]?\\d+\\s"+(h="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)")+"|(last|next)\\s"+h+")(\\sago)?",!(n=e.match(new RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi"))))return!1;for(p=0,u=n.length;p<u;p++)if(!i(n[p]))return!1;return a.getTime()/1e3}},function(e,t){"use strict";e.exports=function(e,t){var s,i,n=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],o=/\\?(.?)/gi,r=function(e,t){return i[e]?i[e]():t},a=function(e,t){for(e=String(e);e.length<t;)e="0"+e;return e};i={d:function(){return a(i.j(),2)},D:function(){return i.l().slice(0,3)},j:function(){return s.getDate()},l:function(){return n[i.w()]+"day"},N:function(){return i.w()||7},S:function(){var e=i.j(),t=e%10;return t<=3&&1===parseInt(e%100/10,10)&&(t=0),["st","nd","rd"][t-1]||"th"},w:function(){return s.getDay()},z:function(){var e=new Date(i.Y(),i.n()-1,i.j()),t=new Date(i.Y(),0,1);return Math.round((e-t)/864e5)},W:function(){var e=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),t=new Date(e.getFullYear(),0,4);return a(1+Math.round((e-t)/864e5/7),2)},F:function(){return n[6+i.n()]},m:function(){return a(i.n(),2)},M:function(){return i.F().slice(0,3)},n:function(){return s.getMonth()+1},t:function(){return new Date(i.Y(),i.n(),0).getDate()},L:function(){var e=i.Y();return e%4==0&e%100!=0|e%400==0},o:function(){var e=i.n(),t=i.W();return i.Y()+(12===e&&t<9?1:1===e&&9<t?-1:0)},Y:function(){return s.getFullYear()},y:function(){return i.Y().toString().slice(-2)},a:function(){return 11<s.getHours()?"pm":"am"},A:function(){return i.a().toUpperCase()},B:function(){var e=3600*s.getUTCHours(),t=60*s.getUTCMinutes(),i=s.getUTCSeconds();return a(Math.floor((e+t+i+3600)/86.4)%1e3,3)},g:function(){return i.G()%12||12},G:function(){return s.getHours()},h:function(){return a(i.g(),2)},H:function(){return a(i.G(),2)},i:function(){return a(s.getMinutes(),2)},s:function(){return a(s.getSeconds(),2)},u:function(){return a(1e3*s.getMilliseconds(),6)},e:function(){throw new Error("Not supported (see source code of date() for timezone on how to add support)")},I:function(){return new Date(i.Y(),0)-Date.UTC(i.Y(),0)!=new Date(i.Y(),6)-Date.UTC(i.Y(),6)?1:0},O:function(){var e=s.getTimezoneOffset(),t=Math.abs(e);return(0<e?"-":"+")+a(100*Math.floor(t/60)+t%60,4)},P:function(){var e=i.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-s.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(o,r)},r:function(){return"D, d M Y H:i:s O".replace(o,r)},U:function(){return s/1e3|0}};var l,c;return l=e,s=void 0===(c=t)?new Date:c instanceof Date?new Date(c):new Date(1e3*c),l.replace(o,r)}},function(e,t){"use strict";e.exports=function(e){return!1!==e&&0!==e&&0!==e&&""!==e&&"0"!==e&&(!Array.isArray(e)||0!==e.length)&&null!=e}},function(e,t){e.exports=function(c){"use strict";c.Templates.registerLoader("ajax",function(t,i,s,n){var o,r,a=i.precompiled,l=this.parsers[i.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new c.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return(r=new XMLHttpRequest).onreadystatechange=function(){var e=null;4===r.readyState&&(200===r.status||window.cordova&&0==r.status?(c.log.debug("Got template ",r.responseText),e=!0===a?JSON.parse(r.responseText):r.responseText,i.url=t,i.data=e,o=l.call(this,i),"function"==typeof s&&s(o)):"function"==typeof n&&n(r))},r.open("GET",t,!!i.async),r.send(),!!i.async||o})}},function(e,t,i){e.exports=function(u){"use strict";var h,t;try{h=i(19),t=i(20)}catch(u){}u.Templates.registerLoader("fs",function(i,s,n,o){var r,e,a=s.precompiled,l=this.parsers[s.parser]||this.parser.twig;if(!h||!t)throw new u.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var c=function(e,t){return e?void("function"==typeof o&&o(e)):(!0===a&&(t=JSON.parse(t)),s.data=t,s.path=s.path||i,r=l.call(this,s),void("function"==typeof n&&n(r)))};if(s.path=s.path||i,s.async)return h.stat(s.path,function(e,t){return e||!t.isFile()?void("function"==typeof o&&o(new u.Error("Unable to find template file "+s.path))):void h.readFile(s.path,"utf8",c)}),!0;try{if(!h.statSync(s.path).isFile())throw new u.Error("Unable to find template file "+s.path)}catch(h){throw new u.Error("Unable to find template file "+s.path)}return e=h.readFileSync(s.path,"utf8"),c(void 0,e),r})}},function(e,t){},function(e,c,t){(function(n){function o(e,t){for(var i=0,s=e.length-1;0<=s;s--){var n=e[s];"."===n?e.splice(s,1):".."===n?(e.splice(s,1),i++):i&&(e.splice(s,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var i=[],s=0;s<e.length;s++)t(e[s],s,e)&&i.push(e[s]);return i}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return t.exec(e).slice(1)};c.resolve=function(){for(var e="",t=!1,i=arguments.length-1;-1<=i&&!t;i--){var s=0<=i?arguments[i]:n.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,t="/"===s.charAt(0))}return(t?"/":"")+(e=o(r(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},c.normalize=function(e){var t=c.isAbsolute(e),i="/"===s(e,-1);return(e=o(r(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},c.isAbsolute=function(e){return"/"===e.charAt(0)},c.join=function(){var e=Array.prototype.slice.call(arguments,0);return c.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},c.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;0<=i&&""===e[i];i--);return i<t?[]:e.slice(t,i-t+1)}e=c.resolve(e).substr(1),t=c.resolve(t).substr(1);for(var s=i(e.split("/")),n=i(t.split("/")),o=Math.min(s.length,n.length),r=o,a=0;a<o;a++)if(s[a]!==n[a]){r=a;break}var l=[];for(a=r;a<s.length;a++)l.push("..");return(l=l.concat(n.slice(r))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(e){var t=a(e),i=t[0],s=t[1];return i||s?(s&&(s=s.substr(0,s.length-1)),i+s):"."},c.basename=function(e,t){var i=a(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},c.extname=function(e){return a(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(c,t(21))},function(e,s){function t(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(s){try{return c.call(null,e,0)}catch(s){return c.call(this,e,0)}}}function r(){f&&p&&(f=!1,p.length?d=p.concat(d):g=-1,d.length&&a())}function a(){if(!f){var e=o(r);f=!0;for(var t=d.length;t;){for(p=d,d=[];++g<t;)p&&p[g].run();g=-1,t=d.length}p=null,f=!1,function i(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(s){try{return u.call(null,e)}catch(s){return u.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function i(){}var c,u,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:t}catch(e){c=t}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var p,d=[],f=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new l(e,t)),1!==d.length||f||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=i,h.addListener=i,h.once=i,h.off=i,h.removeListener=i,h.removeAllListeners=i,h.emit=i,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){e.exports=function(d){"use strict";for(d.logic={},d.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},d.logic.definitions=[{type:d.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[d.logic.type.else_,d.logic.type.elseif,d.logic.type.endif],open:!0,compile:function(e){var t=e.match[1];return e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:t}]).stack,delete e.match,e},parse:function(t,i,s){var n=this;return d.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return s=!0,d.lib.boolval(e)?(s=!1,d.parseAsync.apply(n,[t.output,i])):""}).then(function(e){return{chain:s,output:e}})}},{type:d.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[d.logic.type.else_,d.logic.type.elseif,d.logic.type.endif],open:!1,compile:function(e){var t=e.match[1];return e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:t}]).stack,delete e.match,e},parse:function(t,i,s){var n=this;return d.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return s&&d.lib.boolval(e)?(s=!1,d.parseAsync.apply(n,[t.output,i])):""}).then(function(e){return{chain:s,output:e}})}},{type:d.logic.type.else_,regex:/^else$/,next:[d.logic.type.endif,d.logic.type.endfor],open:!1,parse:function(e,t,i){var s=d.Promise.resolve("");return i&&(s=d.parseAsync.apply(this,[e.output,t])),s.then(function(e){return{chain:i,output:e}})}},{type:d.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:d.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[d.logic.type.else_,d.logic.type.endfor],open:!0,compile:function(e){var t=e.match[1],i=e.match[2],s=e.match[3],n=null;if(e.key_var=null,e.value_var=null,0<=t.indexOf(",")){if(2!==(n=t.split(",")).length)throw new d.Error("Invalid expression in for loop: "+t);e.key_var=n[0].trim(),e.value_var=n[1].trim()}else e.value_var=t;return e.expression=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:i}]).stack,s&&(e.conditional=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:s}]).stack),delete e.match,e},parse:function(r,a,e){var l,i,c=[],u=0,h=this,p=r.conditional,s=function(e,t){var i,s,n,o=d.ChildContext(a);o[r.value_var]=t,r.key_var&&(o[r.key_var]=e),o.loop=(s=l,{index:(i=u)+1,index0:i,revindex:(n=void 0!==p)?void 0:s-i,revindex0:n?void 0:s-i-1,first:0===i,last:n?void 0:i===s-1,length:n?void 0:s,parent:a}),(void 0===p?d.Promise.resolve(!0):d.expression.parseAsync.apply(h,[p,o])).then(function(e){if(e)return d.parseAsync.apply(h,[r.output,o]).then(function(e){c.push(e),u+=1})}).then(function(){delete o.loop,delete o[r.value_var],delete o[r.key_var],d.merge(a,o,!0)})};return d.expression.parseAsync.apply(this,[r.expression,a]).then(function(t){return d.lib.is("Array",t)?(l=t.length,d.async.forEach(t,function(e){return s(u,e)})):d.lib.is("Object",t)&&(i=void 0!==t._keys?t._keys:Object.keys(t),l=i.length,d.forEach(i,function(e){"_keys"!==e&&s(e,t[e])})),{chain:0===c.length,output:d.output.apply(h,[c])}})}},{type:d.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:d.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim(),i=e.match[2],s=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:i}]).stack;return e.key=t,e.expression=s,delete e.match,e},parse:function(e,t,i){var s=e.key;return d.expression.parseAsync.apply(this,[e.expression,t]).then(function(e){return e===t&&(e=d.lib.copy(e)),t[s]=e,{chain:i,context:t}})}},{type:d.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[d.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(e,t,i){var s=this,n=e.key;return d.parseAsync.apply(this,[e.output,t]).then(function(e){return s.context[n]=e,t[n]=e,{chain:i,context:t}})}},{type:d.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:d.logic.type.filter,regex:/^filter\s+(.+)$/,next:[d.logic.type.endfilter],open:!0,compile:function(e){var t="|"+e.match[1].trim();return e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:t}]).stack,delete e.match,e},parse:function(i,s,t){return d.parseAsync.apply(this,[i.output,s]).then(function(e){var t=[{type:d.expression.type.string,value:e}].concat(i.stack);return d.expression.parseAsync.apply(that,[t,s])}).then(function(e){return{chain:t,output:e}})}},{type:d.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:d.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[d.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,i,e){var s,n=this,o=d.Promise.resolve(),r=-1<d.indexOf(this.importedBlocks,t.block),a=this.blocks[t.block]&&-1<d.indexOf(this.blocks[t.block],d.placeholders.parent);return(void 0===this.blocks[t.block]||r||a||i.loop||t.overwrite)&&(o=(o=t.expression?d.expression.parseAsync.apply(this,[t.output,i]).then(function(e){return d.expression.parseAsync.apply(n,[{type:d.expression.type.string,value:e},i])}):d.parseAsync.apply(this,[t.output,i]).then(function(e){return d.expression.parseAsync.apply(n,[{type:d.expression.type.string,value:e},i])})).then(function(e){r&&n.importedBlocks.splice(n.importedBlocks.indexOf(t.block),1),n.blocks[t.block]=a?d.Markup(n.blocks[t.block].replace(d.placeholders.parent,e)):e,n.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}})),o.then(function(){return s=n.child.blocks[t.block]?n.child.blocks[t.block]:n.blocks[t.block],{chain:e,output:s}})}},{type:d.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(e){return e.expression=e.match[2].trim(),e.output=d.expression.compile({type:d.expression.type.expression,value:e.expression}).stack,e.block=e.match[1].trim(),delete e.match,e},parse:function(e,t,i){return d.logic.handler[d.logic.type.block].parse.apply(this,arguments)}},{type:d.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:d.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim();return delete e.match,e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:t}]).stack,e},parse:function(e,t,i){var s=this,n=d.ChildContext(t);return d.expression.parseAsync.apply(this,[e.stack,t]).then(function(e){return s.extend=e,(e instanceof d.Template?e:s.importFile(e)).renderAsync(n)}).then(function(){return d.lib.extend(t,n),{chain:i,output:""}})}},{type:d.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim();return delete e.match,e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:t}]).stack,e},parse:function(e,t,i){var s=this;return d.expression.parseAsync.apply(this,[e.stack,t]).then(function(e){return s.importBlocks(e),{chain:i,output:""}})}},{type:d.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile:function(e){var t=e.match,i=t[1].trim(),s=void 0!==t[2],n=t[3],o=void 0!==t[4]&&t[4].length;return delete e.match,e.only=o,e.ignoreMissing=s,e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:i}]).stack,void 0!==n&&(e.withStack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:n.trim()}]).stack),e},parse:function(t,e,i){var s,n,o={},r=this,a=d.Promise.resolve();return t.only||(o=d.ChildContext(e)),void 0!==t.withStack&&(a=d.expression.parseAsync.apply(this,[t.withStack,e]).then(function(e){for(s in e)e.hasOwnProperty(s)&&(o[s]=e[s])})),a.then(function(){return d.expression.parseAsync.apply(r,[t.stack,e])}).then(function(e){if(e instanceof d.Template)n=e;else try{n=r.importFile(e)}catch(d){if(t.ignoreMissing)return"";throw d}return n.renderAsync(o)}).then(function(e){return{chain:i,output:e}})}},{type:d.logic.type.spaceless,regex:/^spaceless$/,next:[d.logic.type.endspaceless],open:!0,parse:function(e,t,i){return d.parseAsync.apply(this,[e.output,t]).then(function(e){var t=e.replace(/>\s+</g,"><").trim();return t=d.Markup(t),{chain:i,output:t}})}},{type:d.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:d.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[d.logic.type.endmacro],open:!0,compile:function(e){for(var t=e.match[1],i=e.match[2].split(/[\s,]+/),s=0;s<i.length;s++)for(var n=0;n<i.length;n++)if(i[s]===i[n]&&s!==n)throw new d.Error("Duplicate arguments for parameter: "+i[s]);return e.macroName=t,e.parameters=i,delete e.match,e},parse:function(s,e,t){var n=this;return this.macros[s.macroName]=function(){for(var e={_self:n.macros},t=0;t<s.parameters.length;t++){var i=s.parameters[t];"undefined"!=typeof arguments[t]?e[i]=arguments[t]:e[i]=void 0}return d.parseAsync.apply(n,[s.output,e])},{chain:t,output:""}}},{type:d.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:d.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim(),i=e.match[2].trim();return delete e.match,e.expression=t,e.contextName=i,e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:t}]).stack,e},parse:function(t,i,e){var s=this,n={chain:e,output:""};return"_self"===t.expression?(i[t.contextName]=this.macros,d.Promise.resolve(n)):d.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return s.importFile(e||t.expression)}).then(function(e){return i[t.contextName]=e.renderAsync({},{output:"macros"}),n})}},{type:d.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(e){for(var t=e.match[1].trim(),i=e.match[2].trim().split(/\s*,\s*/),s={},n=0;n<i.length;n++){var o=i[n],r=o.match(/^([a-zA-Z0-9_]+)\s+as\s+([a-zA-Z0-9_]+)$/);r?s[r[1].trim()]=r[2].trim():o.match(/^([a-zA-Z0-9_]+)$/)&&(s[o]=o)}return delete e.match,e.expression=t,e.macroNames=s,e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:t}]).stack,e},parse:function(i,s,n){var t=this,e=d.Promise.resolve(this.macros);return"_self"!==i.expression&&(e=d.expression.parseAsync.apply(this,[i.stack,s]).then(function(e){return t.importFile(e||i.expression)}).then(function(e){return e.renderAsync({},{output:"macros"})})),e.then(function(e){for(var t in i.macroNames)e.hasOwnProperty(t)&&(s[i.macroNames[t]]=e[t]);return{chain:n,output:""}})}},{type:d.logic.type.embed,regex:/^embed\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[d.logic.type.endembed],open:!0,compile:function(e){var t=e.match,i=t[1].trim(),s=void 0!==t[2],n=t[3],o=void 0!==t[4]&&t[4].length;return delete e.match,e.only=o,e.ignoreMissing=s,e.stack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:i}]).stack,void 0!==n&&(e.withStack=d.expression.compile.apply(this,[{type:d.expression.type.expression,value:n.trim()}]).stack),e},parse:function(t,e,i){var s,n,o={},r=this,a=d.Promise.resolve();if(!t.only)for(s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);return void 0!==t.withStack&&(a=d.expression.parseAsync.apply(this,[t.withStack,e]).then(function(e){for(s in e)e.hasOwnProperty(s)&&(o[s]=e[s])})),a.then(function(){return d.expression.parseAsync.apply(r,[t.stack,o])}).then(function(e){if(e instanceof d.Template)n=e;else try{n=r.importFile(e)}catch(d){if(t.ignoreMissing)return"";throw d}return r.blocks={},d.parseAsync.apply(r,[t.output,o]).then(function(){return n.renderAsync(o,{blocks:r.blocks})})}).then(function(e){return{chain:i,output:e}})}},{type:d.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],d.logic.handler={},d.logic.extendType=function(e,t){t=t||"Twig.logic.type"+e,d.logic.type[e]=t},d.logic.extend=function(e){if(!e.type)throw new d.Error("Unable to extend logic definition. No type provided for "+e);d.logic.extendType(e.type),d.logic.handler[e.type]=e};0<d.logic.definitions.length;)d.logic.extend(d.logic.definitions.shift());return d.logic.compile=function(e){var t=e.value.trim(),i=d.logic.tokenize.apply(this,[t]),s=d.logic.handler[i.type];return s.compile&&(i=s.compile.apply(this,[i]),d.log.trace("Twig.logic.compile: ","Compiled logic token to ",i)),i},d.logic.tokenize=function(e){var t={},i=null,s=null,n=null,o=null,r=null;for(i in e=e.trim(),d.logic.handler)if(d.logic.handler.hasOwnProperty(i))for(s=d.logic.handler[i].type,o=[],(n=d.logic.handler[i].regex)instanceof Array?o=n:o.push(n);0<o.length;)if(null!==(r=o.shift().exec(e.trim())))return t.type=s,t.match=r,d.log.trace("Twig.logic.tokenize: ","Matched a ",s," regular expression of ",r),t;throw new d.Error("Unable to parse '"+e.trim()+"'")},d.logic.parse=function(e,t,i,s){var n,o,r="",a=!0;if(t=t||{},d.log.debug("Twig.logic.parse: ","Parsing logic token ",e),(o=d.logic.handler[e.type]).parse&&(r=o.parse.apply(this,[e,t,i])),(n=d.isPromise(r)?r:d.Promise.resolve(r)).then(function(e){a=!1,r=e}),s)return n||d.Promise.resolve(r);if(a)throw new d.Error("You are using Twig.js in sync mode in combination with async extensions.");return r},d}},function(e,t){e.exports=function(e){"use strict";e.Templates.registerParser("source",function(e){return e.data||""})}},function(e,t){e.exports=function(t){"use strict";t.Templates.registerParser("twig",function(e){return new t.Template(e)})}},function(e,t,h){e.exports=function(u){"use strict";return u.path={},u.path.parsePath=function(e,t){var i=null;t=t||"";if("object"==typeof e&&"object"==typeof e.options&&(i=e.options.namespaces),"object"==typeof i&&0<t.indexOf("::")||0<=t.indexOf("@")){for(var s in i)i.hasOwnProperty(s)&&(t=(t=t.replace(s+"::",i[s])).replace("@"+s,i[s]));return t}return u.path.relativePath(e,t)},u.path.relativePath=function(e,t){var i,s,n,o="/",r=[];t=t||"";if(e.url)i="undefined"!=typeof e.base?e.base+("/"===e.base.charAt(e.base.length-1)?"":"/"):e.url;else if(e.path){var a=h(20),l=a.sep||o,c=new RegExp("^\\.{1,2}"+l.replace("\\","\\\\"));t=t.replace(/\//g,l),i=(i=void 0!==e.base&&null==t.match(c)?(t=t.replace(e.base,""),e.base+l):a.normalize(e.path)).replace(l+l,l),o=l}else{if(!e.name&&!e.id||!e.method||"fs"===e.method||"ajax"===e.method)throw new u.Error("Cannot extend an inline template.");i=e.base||e.name||e.id}for((s=i.split(o)).pop(),s=s.concat(t.split(o));0<s.length;)"."==(n=s.shift())||(".."==n&&0<r.length&&".."!=r[r.length-1]?r.pop():r.push(n));return r.join(o)},u}},function(e,t){e.exports=function(s){"use strict";return s.tests={empty:function(e){if(null==e)return!0;if("number"==typeof e)return!1;if(e.length&&0<e.length)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2==1},even:function(e){return e%2==0},divisibleby:function(e,t){return e%t[0]==0},defined:function(e){return void 0!==e},none:function(e){return null===e},"null":function(e){return this.none(e)},"same as":function(e,t){return e===t[0]},sameas:function(e,t){return console.warn("`sameas` is deprecated use `same as`"),s.tests["same as"](e,t)},iterable:function(e){return e&&(s.lib.is("Array",e)||s.lib.is("Object",e))}},s.test=function(e,t,i){if(!s.tests[e])throw"Test "+e+" is not defined.";return s.tests[e](t,i)},s.test.extend=function(e,t){s.tests[e]=t},s}},function(e,t){e.exports=function(u){"use strict";return u.parseAsync=function(e,t){return u.parse.apply(this,[e,t,!0])},u.expression.parseAsync=function(e,t,i){return u.expression.parse.apply(this,[e,t,i,!0])},u.logic.parseAsync=function(e,t,i){return u.logic.parse.apply(this,[e,t,i,!0])},u.Template.prototype.renderAsync=function(e,t){return this.render(e,t,!0)},u.async={},u.isPromise=function(e){return e&&"function"==typeof e.then},u.Promise=function(e){function i(e,t){o=e,r=t,function i(){l&&(u.forEach(l,function(e){a(e.resolve,e.reject)}),l=null)}()}function s(e){i("reject",e)}function a(e,t){var i={resolve:e,reject:t};return"unknown"==o?(l=l||[]).push(i):void(i[o]&&i[o](r))}function n(e,t,i){var s=!1;try{e(function(e){s||(s=!0,t(e))},function(e){s||(s=!0,i(e))})}catch(e){s=!0,i(e)}}var o="unknown",r=null,l=null;return n(e,function c(e){try{if(!u.isPromise(e))return function t(e){i("resolve",e)}(e);n(e.then.bind(e),c,s)}catch(u){s(u)}},s),{then:function(s,n){var o="function"==typeof s,r="function"==typeof n;return new u.Promise(function(t,i){a(function(e){if(o)try{t(s(e))}catch(t){i(t)}else t(e)},function(e){if(r)try{t(n(e))}catch(t){i(t)}else i(e)})})},"catch":function(e){return this.then(null,e)}}},u.Promise.resolve=function(t){return new u.Promise(function(e){e(t)})},u.Promise.reject=function(i){return new u.Promise(function(e,t){t(i)})},u.Promise.all=function(e){var i=[];return u.async.forEach(e,function(e,t){return u.isPromise(e)?e.then(function(e){i[t]=e}):void(i[t]=e)}).then(function(){return i})},u.async.forEach=function(t,i){function s(e){a.reject(e)}function n(e){return u.isPromise(e)?void e.then(n,s):o()}function o(){var e=r++;return e==t.length?void a.resolve():void n(i(t[e],e))}var r=0,a={},e=new u.Promise(function(e,t){a={resolve:e,reject:t}});return o(),e},u}},function(e,t){e.exports=function(a){"use strict";return a.exports={VERSION:a.VERSION},a.exports.twig=function(e){var t=e.id,i={strict_variables:e.strict_variables||!1,autoescape:null!=e.autoescape&&e.autoescape||!1,allowInlineIncludes:e.allowInlineIncludes||!1,rethrow:e.rethrow||!1,namespaces:e.namespaces};if(a.cache&&t&&a.validateId(t),void 0!==e.debug&&(a.debug=e.debug),void 0!==e.trace&&(a.trace=e.trace),void 0!==e.data)return a.Templates.parsers.twig({data:e.data,path:e.hasOwnProperty("path")?e.path:void 0,module:e.module,id:t,options:i});if(void 0!==e.ref){if(void 0!==e.id)throw new a.Error("Both ref and id cannot be set on a twig.js template.");return a.Templates.load(e.ref)}if(void 0===e.method)return void 0!==e.href?a.Templates.loadRemote(e.href,{id:t,method:"ajax",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error):void 0!==e.path?a.Templates.loadRemote(e.path,{id:t,method:"fs",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error):void 0;if(!a.Templates.isRegisteredLoader(e.method))throw new a.Error('Loader for "'+e.method+'" is not defined.');return a.Templates.loadRemote(e.name||e.href||e.path||t||void 0,{id:t,method:e.method,parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error)},a.exports.extendFilter=function(e,t){a.filter.extend(e,t)},a.exports.extendFunction=function(e,t){a._function.extend(e,t)},a.exports.extendTest=function(e,t){a.test.extend(e,t)},a.exports.extendTag=function(e){a.logic.extend(e)},a.exports.extend=function(e){e(a)},a.exports.compile=function(e,t){var i,s=t.filename,n=t.filename;return i=new a.Template({data:e,path:n,id:s,options:t.settings["twig options"]}),function(e){return i.render(e)}},a.exports.renderFile=function(e,t,i){"function"==typeof t&&(i=t,t={});var s=(t=t||{}).settings||{},n={path:e,base:s.views,load:function(e){i(null,""+e.render(t))}},o=s["twig options"];if(o)for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r]);a.exports.twig(n)},a.exports.__express=a.exports.renderFile,a.exports.cache=function(e){a.cache=e},a.exports.path=a.path,a.exports.filters=a.filters,a}}])});