var lg=function(){var n={};function s(e){if(e=e.replace(/\s+/g," "),str=e.match(/\{(.*?)\}/g),null!=str)for(i=0;i<str.length;i++)str_t=str[i].replace(/ /g,""),e=e.replace(str[i],str_t);return e}return url="/language/"+document.documentElement.lang+".json",$.get(url,function(e){for(var t in e)e[t]=s(e[t]);n=e;var i=new CustomEvent("language_loaded");document.dispatchEvent(i)},"json"),function(e,t){if("undefined"==typeof n[e])return console.log("lang not found: "+e),e;if(e=n[e],"object"==typeof t)for(var i in t)e=e.split("{"+i+"}").join(t[i]);return e}}(),Datepicker;if(function(_){_.fn.menuAim=function(e){return this.each(function(){(function t(e){var f=_(this),g=null,m=[],v=null,i=null,y=_.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:_.noop,exit:_.noop,activate:_.noop,deactivate:_.noop,exitMenu:_.noop},e),n=function(e){e!=g&&(g&&y.deactivate(g),y.activate(e),g=e)},s=function(e){var t=o();t?i=setTimeout(function(){s(e)},t):n(e)},o=function(){if(!g||!_(g).is(y.submenuSelector))return 0;var e=f.offset(),t={x:e.left,y:e.top-y.tolerance},i={x:e.left+f.outerWidth(),y:t.y},n={x:e.left,y:e.top+f.outerHeight()+y.tolerance},s={x:e.left+f.outerWidth(),y:n.y},o=m[m.length-1],a=m[0];if(!o)return 0;if(a||(a=o),a.x<e.left||a.x>s.x||a.y<e.top||a.y>s.y)return 0;if(v&&o.x==v.x&&o.y==v.y)return 0;function r(e,t){return(t.y-e.y)/(t.x-e.x)}var l=i,u=s;"left"==y.submenuDirection?(l=n,u=t):"below"==y.submenuDirection?(l=s,u=n):"above"==y.submenuDirection&&(l=t,u=i);var c=r(o,l),d=r(o,u),p=r(a,l),h=r(a,u);return c<p&&h<d?(v=o,300):(v=null,0)};f.mouseleave(function(){i&&clearTimeout(i);y.exitMenu(this)&&(g&&y.deactivate(g),g=null)}).find(y.rowSelector).mouseenter(function(){i&&clearTimeout(i);y.enter(this),s(this)}).mouseleave(function(){y.exit(this)}).click(function(){n(this)}),_(document).mousemove(function(e){m.push({x:e.pageX,y:e.pageY}),3<m.length&&m.shift()})}).call(this,e)}),this}}(jQuery),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.Circles=t()}(this,function(){"use strict";var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t=function(e){var t=e.id;if(this._el=document.getElementById(t),null!==this._el){this._radius=e.radius||10,this._duration=void 0===e.duration?500:e.duration,this._value=0,this._maxValue=e.maxValue||100,this._text=void 0===e.text?function(e){return this.htmlifyNumber(e)}:e.text,this._strokeWidth=e.width||10,this._colors=e.colors||["#EEE","#F00"],this._svg=null,this._movingPath=null,this._wrapContainer=null,this._textContainer=null,this._wrpClass=e.wrpClass||"circles-wrp",this._textClass=e.textClass||"circles-text",this._valClass=e.valueStrokeClass||"circles-valueStroke",this._maxValClass=e.maxValueStrokeClass||"circles-maxValueStroke",this._styleWrapper=!1!==e.styleWrapper,this._styleText=!1!==e.styleText;var i=Math.PI/180*270;this._start=-Math.PI/180*90,this._startPrecise=this._precise(this._start),this._circ=i-this._start,this._generate().update(e.value||0)}};return t.prototype={VERSION:"0.0.6",_generate:function(){return this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._generateSvg()._generateText()._generateWrapper(),this._el.innerHTML="",this._el.appendChild(this._wrapContainer),this},_setPercentage:function(e){this._movingPath.setAttribute("d",this._calculatePath(e,!0)),this._textContainer.innerHTML=this._getText(this.getValueFromPercent(e))},_generateWrapper:function(){return this._wrapContainer=document.createElement("div"),this._wrapContainer.className=this._wrpClass,this._styleWrapper&&(this._wrapContainer.style.position="relative",this._wrapContainer.style.display="inline-block"),this._wrapContainer.appendChild(this._svg),this._wrapContainer.appendChild(this._textContainer),this},_generateText:function(){if(this._textContainer=document.createElement("div"),this._textContainer.className=this._textClass,this._styleText){var e={position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"};for(var t in e)this._textContainer.style[t]=e[t]}return this._textContainer.innerHTML=this._getText(0),this},_getText:function(e){return this._text?(void 0===e&&(e=this._value),e=parseFloat(e.toFixed(2)),"function"==typeof this._text?this._text.call(this,e):this._text):""},_generateSvg:function(){return this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttribute("width",this._svgSize),this._svg.setAttribute("height",this._svgSize),this._generatePath(100,!1,this._colors[0],this._maxValClass)._generatePath(1,!0,this._colors[1],this._valClass),this._movingPath=this._svg.getElementsByTagName("path")[1],this},_generatePath:function(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("fill","transparent"),s.setAttribute("stroke",i),s.setAttribute("stroke-width",this._strokeWidth),s.setAttribute("d",this._calculatePath(e,t)),s.setAttribute("class",n),this._svg.appendChild(s),this},_calculatePath:function(e,t){var i=this._start+e/100*this._circ,n=this._precise(i);return this._arc(n,t)},_arc:function(e,t){var i=e-.001,n=e-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,n,1,this._radius+this._radiusAdjusted*Math.cos(i),this._radius+this._radiusAdjusted*Math.sin(i),t?"":"Z"].join(" ")},_precise:function(e){return Math.round(1e3*e)/1e3},htmlifyNumber:function(e,t,i){t=t||"circles-integer",i=i||"circles-decimals";var n=(e+"").split("."),s='<span class="'+t+'">'+n[0]+"</span>";return 1<n.length&&(s+='.<span class="'+i+'">'+n[1].substring(0,2)+"</span>"),s},updateRadius:function(e){return this._radius=e,this._generate().update(!0)},updateWidth:function(e){return this._strokeWidth=e,this._generate().update(!0)},updateColors:function(e){this._colors=e;var t=this._svg.getElementsByTagName("path");return t[0].setAttribute("stroke",e[0]),t[1].setAttribute("stroke",e[1]),this},getPercent:function(){return 100*this._value/this._maxValue},getValueFromPercent:function(e){return this._maxValue*e/100},getValue:function(){return this._value},getMaxValue:function(){return this._maxValue},update:function(e,t){if(!0===e)return this._setPercentage(this.getPercent()),this;if(this._value==e||isNaN(e))return this;void 0===t&&(t=this._duration);var n,s,i,o,a=this,r=a.getPercent(),l=1;return this._value=Math.min(this._maxValue,Math.max(0,e)),t?(n=a.getPercent(),s=r<n,l+=n%1,i=Math.floor(Math.abs(n-r)/l),o=t/i,function u(e){if(s?r+=l:r-=l,s&&n<=r||!s&&r<=n)c(function(){a._setPercentage(n)});else{c(function(){a._setPercentage(r)});var t=Date.now(),i=t-e;o<=i?u(t):setTimeout(function(){u(Date.now())},o-i)}}(Date.now())):this._setPercentage(this.getPercent()),this}},t.create=function(e){return new t(e)},t}),function(e,n,t){var i,s,p,o="datepicker",a=!1,r={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},onSelect:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},l={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]};(p=Datepicker=function(e,t){this.el=e,this.$el=n(e),this.opts=n.extend(!0,{},r,t,this.$el.data()),null==i&&(i=n("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?n(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this.init()}).prototype={viewIndexes:["days","months","years"],init:function(){a||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.views[this.currentView]=new Datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new Datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("input.adp",this._onInput.bind(this)),n(e).on("resize.adp",this._onResize.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){this.loc="string"==typeof e?(this.loc=Datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=n.extend(!0,{},Datepicker.language.ru)),n.extend(!0,{},Datepicker.language.ru,Datepicker.language[e])):n.extend(!0,{},Datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay)},_buildDatepickersContainer:function(){a=!0,i.append('<div class="datepickers-container" id="datepickers-container"></div>'),s=n("#datepickers-container")},_buildBaseHtml:function(){var e,t=n('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?t.insertAfter(this.$el):s:t.appendTo(this.$el),this.$datepicker=n('<div class="datepicker"><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>').appendTo(e),this.$content=n(".datepicker--content",this.$datepicker),this.$nav=n(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return this.opts.onSelect("","",this);var e,t=this.selectedDates,i=p.getParsedDate(t[0]),n=this,s=new Date(i.year,i.month,i.date);e=t.map(function(e){return n.formatDate(n.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(s=t.map(function(e){var t=p.getParsedDate(e);return new Date(t.year,t.month,t.date)})),this.opts.onSelect(e,s,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i=e,n=this._getWordBoundaryRegExp,s=this.loc,o=p.getDecade(t),a=p.getParsedDate(t);switch(!0){case/@/.test(i):i=i.replace(/@/,t.getTime());case/dd/.test(i):i=i.replace(n("dd"),a.fullDate);case/d/.test(i):i=i.replace(n("d"),a.date);case/DD/.test(i):i=i.replace(n("DD"),s.days[a.day]);case/D/.test(i):i=i.replace(n("D"),s.daysShort[a.day]);case/mm/.test(i):i=i.replace(n("mm"),a.fullMonth);case/m/.test(i):i=i.replace(n("m"),a.month+1);case/MM/.test(i):i=i.replace(n("MM"),this.loc.months[a.month]);case/M/.test(i):i=i.replace(n("M"),s.monthsShort[a.month]);case/yyyy/.test(i):i=i.replace(n("yyyy"),a.year);case/yyyy1/.test(i):i=i.replace(n("yyyy1"),o[0]);case/yyyy2/.test(i):i=i.replace(n("yyyy2"),o[1]);case/yy/.test(i):i=i.replace(n("yy"),a.year.toString().slice(-2))}return i},_getWordBoundaryRegExp:function(e){return new RegExp("\\b(?=[a-zA-Z0-9äöüßÄÖÜ<])"+e+"(?![>a-zA-Z0-9äöüßÄÖÜ])")},selectDate:function(e){var t=this,i=t.opts,n=t.parsedDate,s=t.selectedDates.length,o="";if(e instanceof Date){if("days"==t.view&&e.getMonth()!=n.month&&i.moveToOtherMonthsOnSelect&&(o=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=n.year&&i.moveToOtherYearsOnSelect&&(o=new Date(e.getFullYear(),0,1)),o&&(t.silent=!0,t.date=o,t.silent=!1,t.nav._render()),i.multipleDates&&!i.range){if(s===i.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else i.range?2==s?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==s?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),i.onSelect&&t._triggerOnChange(),i.autoClose&&(i.multipleDates||i.range?i.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(i){var n=this.selectedDates,s=this;if(i instanceof Date)return n.some(function(e,t){if(p.isSame(e,i))return n.splice(t,1),s.selectedDates.length||(s.minRange="",s.maxRange=""),s.views[s.currentView]._render(),s._setInputValue(),s.opts.onSelect&&s._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,t){var i=arguments.length;return 2==i?this.opts[e]=t:1==i&&"object"==typeof e&&(this.opts=n.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(t,i){return this.selectedDates.some(function(e){return p.isSame(e,t,i)})},_setInputValue:function(){var e,t=this,i=t.opts,n=t.loc.dateFormat,s=i.altFieldDateFormat,o=t.selectedDates.map(function(e){return t.formatDate(n,e)});i.altField&&t.$altField.length&&(e=(e=this.selectedDates.map(function(e){return t.formatDate(s,e)})).join(this.opts.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.opts.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var i=e.getTime(),n=p.getParsedDate(e),s=p.getParsedDate(this.minDate),o=p.getParsedDate(this.maxDate),a=new Date(n.year,n.month,s.date).getTime(),r=new Date(n.year,n.month,o.date).getTime(),l={day:i>=this.minTime&&i<=this.maxTime,month:a>=this.minTime&&r<=this.maxTime,year:n.year>=s.year&&n.year<=o.year};return t?l[t]:l.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,i=e.data("year")||t.year,n=null==e.data("month")?t.month:e.data("month"),s=e.data("date")||1;return new Date(i,n,s)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],i="datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(i+=" active"),this.$datepicker.removeAttr("class").addClass(i)},setPosition:function(e){e=e||this.opts.position;var t,i,n=this._getDimensions(this.$el),s=this._getDimensions(this.$datepicker),o=e.split(" "),a=this.opts.offset,r=o[0],l=o[1];switch(r){case"top":t=n.top-s.height-a;break;case"right":i=n.left+n.width+a;break;case"bottom":t=n.top+n.height+a;break;case"left":i=n.left-s.width-a}switch(l){case"top":t=n.top;break;case"right":i=n.left+n.width-s.width;break;case"bottom":t=n.top+n.height-s.height;break;case"left":i=n.left;break;case"center":/left|right/.test(r)?t=n.top+n.height/2-s.height/2:i=n.left+n.width/2-s.width/2}this.$datepicker.css({left:i,top:t})},show:function(){this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0},hide:function(){this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur()},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_changeView:function(e,t){e=e||this.focused||this.date;var i="up"==t?this.viewIndex+1:this.viewIndex-1;2<i&&(i=2),i<0&&(i=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[i]},_handleHotKey:function(e){var t,i,n,s=p.getParsedDate(this._getFocusedDate()),o=this.opts,a=!1,r=!1,l=!1,u=s.year,c=s.month,d=s.date;switch(e){case"ctrlRight":case"ctrlUp":c+=1,a=!0;break;case"ctrlLeft":case"ctrlDown":c-=1,a=!0;break;case"shiftRight":case"shiftUp":r=!0,u+=1;break;case"shiftLeft":case"shiftDown":r=!0,u-=1;break;case"altRight":case"altUp":l=!0,u+=10;break;case"altLeft":case"altDown":l=!0,u-=10;break;case"ctrlShiftUp":this.up()}n=p.getDaysCount(new Date(u,c)),i=new Date(u,c,d),n<d&&(d=n),i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i,t=p.getParsedDate(i),a&&o.onChangeMonth&&o.onChangeMonth(t.month,t.year),r&&o.onChangeYear&&o.onChangeYear(t.year),l&&o.onChangeDecade&&o.onChangeDecade(this.curDecade)},_registerKey:function(t){this.keys.some(function(e){return e==t})||this.keys.push(t)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,i=this.keys.sort();for(var n in l)e=l[n],i.length==e.length&&e.every(function(e,t){return e==i[t]})&&(this._trigger("hotKey",n),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=p.getParsedDate(this._getFocusedDate()),n=i.year,s=i.month,o=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(o-=1),"month"==t&&(s-=1),"year"==t&&(n-=1);break;case 38:"day"==t&&(o-=7),"month"==t&&(s-=3),"year"==t&&(n-=4);break;case 39:"day"==t&&(o+=1),"month"==t&&(s+=1),"year"==t&&(n+=1);break;case 40:"day"==t&&(o+=7),"month"==t&&(s+=3),"year"==t&&(n+=4)}var a=new Date(n,s,o);a.getTime()<this.minTime?a=this.minDate:a.getTime()>this.maxTime&&(a=this.maxDate),this.focused=a}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,t){t=t||this.cellType;var i,n=p.getParsedDate(e),s='.datepicker--cell[data-year="'+n.year+'"]';switch(t){case"month":s='[data-month="'+n.month+'"]';break;case"day":s+='[data-month="'+n.month+'"][data-date="'+n.date+'"]'}return(i=this.views[this.currentView].$el.find(s)).length?i:""},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_onShowEvent:function(){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,this.$el.focus()},_onInput:function(){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),37<=t&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var i=this._isSelected(this.focused,this.cellType);i?i&&this.opts.toggleSelected&&this.removeDate(this.focused):this.selectDate(this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var t=n(e.target).closest(".datepicker--cell"),i=this._getDateFromCell(t);this.silent=!0,this.focused&&(this.focused=""),t.addClass("-focus-"),this.focused=i,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",p.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){n(e.target).closest(".datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",p.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return p.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new Datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=p.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=p.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return p.getDecade(this.date)}},p.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},p.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay()}},p.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},p.template=function(e,i){return e.replace(/#\{([\w]+)\}/g,function(e,t){if(i[t]||0===i[t])return i[t]})},p.isSame=function(e,t,i){if(!e||!t)return!1;var n=p.getParsedDate(e),s=p.getParsedDate(t),o=i||"day";return{day:n.date==s.date&&n.month==s.month&&n.year==s.year,month:n.month==s.month&&n.year==s.year,year:n.year==s.year}[o]},p.less=function(e,t,i){return!(!e||!t)&&t.getTime()<e.getTime()},p.bigger=function(e,t,i){return!(!e||!t)&&t.getTime()>e.getTime()},Datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",firstDay:1}},n.fn[o]=function(t){return this.each(function(){if(n.data(this,o)){var e=n.data(this,o);e.opts=n.extend(!0,e.opts,t),e.update()}else n.data(this,o,new Datepicker(this,t))})},n(function(){n(".datepicker-here").datepicker()})}(window,jQuery),function(){var e={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},d=Datepicker;d.Body=function(e,t,i){this.d=e,this.type=t,this.opts=i,this.init()},d.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",$.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=$(e[this.type]).appendTo(this.d.$content),this.$names=$(".datepicker--days-names",this.$el),this.$cells=$(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,i,n){return t=t!=undefined?t:e,i=i||"",7<(n=n!=undefined?n:0)?i:7==t?this._getDayNamesHtml(e,0,i,++n):(i+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,i,++n))},_getCellContents:function(e,t){var i="datepicker--cell datepicker--cell-"+t,n=new Date,s=this.d,o=s.opts,a=d.getParsedDate(e),r={},l=a.date;switch(o.onRenderCell&&(l=(r=o.onRenderCell(e,t)||{}).html?r.html:l,i+=r.classes?" "+r.classes:""),t){case"day":s.isWeekend(a.day)&&(i+=" -weekend-"),a.month!=this.d.parsedDate.month&&(i+=" -other-month-",o.selectOtherMonths||(i+=" -disabled-"),o.showOtherMonths||(l=""));break;case"month":l=s.loc[s.opts.monthsField][a.month];break;case"year":var u=s.curDecade;l=a.year,(a.year<u[0]||a.year>u[1])&&(i+=" -other-decade-",o.selectOtherYears||(i+=" -disabled-"),o.showOtherYears||(l=""))}return o.onRenderCell&&(l=(r=o.onRenderCell(e,t)||{}).html?r.html:l,i+=r.classes?" "+r.classes:""),o.range&&(d.isSame(s.minRange,e,t)&&(i+=" -range-from-"),d.isSame(s.maxRange,e,t)&&(i+=" -range-to-"),1==s.selectedDates.length&&s.focused?((d.bigger(s.minRange,e)&&d.less(s.focused,e)||d.less(s.maxRange,e)&&d.bigger(s.focused,e))&&(i+=" -in-range-"),d.less(s.maxRange,e)&&d.isSame(s.focused,e)&&(i+=" -range-from-"),d.bigger(s.minRange,e)&&d.isSame(s.focused,e)&&(i+=" -range-to-")):2==s.selectedDates.length&&d.bigger(s.minRange,e)&&d.less(s.maxRange,e)&&(i+=" -in-range-")),d.isSame(n,e,t)&&(i+=" -current-"),s.focused&&d.isSame(e,s.focused,t)&&(i+=" -focus-"),s._isSelected(e,t)&&(i+=" -selected-"),s._isInRange(e,t)&&!r.disabled||(i+=" -disabled-"),{html:l,classes:i}},_getDaysHtml:function(e){for(var t,i,n=d.getDaysCount(e),s=new Date(e.getFullYear(),e.getMonth(),1).getDay(),o=new Date(e.getFullYear(),e.getMonth(),n).getDay(),a=s-this.d.loc.firstDay,r=6-o+this.d.loc.firstDay,l="",u=1-(a=a<0?a+7:a),c=n+(r=6<r?r-7:r);u<=c;u++)i=e.getFullYear(),t=e.getMonth(),l+=this._getDayHtml(new Date(i,t,u));return l},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",i=d.getParsedDate(e),n=0;n<12;)t+=this._getMonthHtml(new Date(i.year,n)),n++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){d.getParsedDate(e);for(var t=d.getDecade(e),i="",n=t[0]-1;n<=t[1]+1;n++)i+=this._getYearHtml(new Date(n,0));return i},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this._renderTypes[this.type].bind(this)()},_update:function(){var i,n,s,e=$(".datepicker--cell",this.$cells),o=this;e.each(function(e,t){n=$(this),s=o.d._getDateFromCell($(this)),i=o._getCellContents(s,o.d.cellType),n.attr("class",i.classes)})},show:function(){this.$el.addClass("active"),this.acitve=!0},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,n=e.data("year")||this.d.parsedDate.year;if(this.d.view==this.opts.minView){var s=new Date(n,i,t),o=this.d._isSelected(s,this.d.cellType);o?o&&this.opts.toggleSelected&&this.d.removeDate(s):this.d.selectDate(s)}else this.d.down(new Date(n,i,t))},_onClickCell:function(e){var t=$(e.target).closest(".datepicker--cell");t.hasClass("-disabled-")||this._handleClick.bind(this)(t)}}}(),Datepicker.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},Datepicker.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",$.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",$.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",$.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),t=Datepicker.template('<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',$.extend({title:e},this.opts));this.d.$nav.html(t),"years"==this.d.view&&$(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var t={action:e,label:this.d.loc[e]},i=Datepicker.template('<span class="datepicker--button" data-action="#{action}">#{label}</span>',t);$("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(i)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="datepicker--buttons"></div>'),this.$buttonsContainer=$(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,i=e.year,n=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(i,t-1,n),"month")||this._disableNav("prev"),this.d._isInRange(new Date(i,t+1,n),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(i-1,t,n),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+1,t,n),"year")||this._disableNav("next");break;case"years":this.d._isInRange(new Date(i-10,t,n),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+10,t,n),"year")||this._disableNav("next")}}},_disableNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var t=$(e.target).closest("[data-action]").data("action");this.d[t]()},_onClickNavTitle:function(e){if(!$(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}},function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(s){"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var i={init:function(e){return this.options=s.extend({},s.noty.defaults,e),this.options.layout=this.options.custom?s.noty.layouts.inline:s.noty.layouts[this.options.layout],s.noty.themes[this.options.theme]?this.options.theme=s.noty.themes[this.options.theme]:this.options.themeClassName=this.options.theme,this.options=s.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this._build(),this},_build:function(){var e=s('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?s(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var t=s("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(t):this.$bar.append(t);var n=this;s.each(this.options.buttons,function(e,t){var i=s("<button/>").addClass(t.addClass?t.addClass:"gray").html(t.text).attr("id",t.id?t.id:"button-"+e).attr("title",t.title).appendTo(n.$bar.find(".noty_buttons")).on("click",function(e){s.isFunction(t.onClick)&&t.onClick.call(i,n,e)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),s.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):s(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===s.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(s(t.options.layout.container.selector),[t.options.within]),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),-1<s.inArray("click",t.options.closeWith)&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),-1<s.inArray("hover",t.options.closeWith)&&t.$bar.one("mouseenter",function(){t.close()}),-1<s.inArray("button",t.options.closeWith)&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),-1==s.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),"string"==typeof t.options.animation.open?(t.$bar.css("height",t.$bar.innerHeight()),t.$bar.on("click",function(e){t.wasClicked=!0}),t.$bar.show().addClass(t.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0,t.hasOwnProperty("wasClicked")&&(t.$bar.off("click",function(e){t.wasClicked=!0}),t.close())})):t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var i=this;if(this.showing)return void i.$bar.queue(function(){i.close.apply(i)});if(!this.shown&&!this.showing){var n=[];return s.each(s.noty.queue,function(e,t){t.options.id!=i.options.id&&n.push(t)}),void(s.noty.queue=n)}i.$bar.addClass("i-am-closing-now"),i.options.callback.onClose&&i.options.callback.onClose.apply(i),"string"==typeof i.options.animation.close?i.$bar.addClass(i.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.options.callback.afterClose&&i.options.callback.afterClose.apply(i),i.closeCleanUp()}):i.$bar.clearQueue().stop().animate(i.options.animation.close,i.options.animation.speed,i.options.animation.easing,function(){i.options.callback.afterClose&&i.options.callback.afterClose.apply(i)}).promise().done(function(){i.closeCleanUp()})}},closeCleanUp:function(){var e=this;e.options.modal&&(s.notyRenderer.setModalCount(-1),0==s.notyRenderer.getModalCount()&&s(".noty_modal").fadeOut(e.options.animation.fadeSpeed,function(){s(this).remove()})),s.notyRenderer.setLayoutCountFor(e,-1),0==s.notyRenderer.getLayoutCountFor(e)&&s(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&("string"==typeof e.options.animation.close?(e.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),e.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.$bar.remove(),e.$bar=null,e.closed=!0,e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e)})):(e.$bar.remove(),e.$bar=null,e.closed=!0)),delete s.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(s.noty.ontap=!0,s.notyRenderer.render()),0<e.options.maxVisible&&e.options.dismissQueue&&s.notyRenderer.render()},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){"undefined"!=typeof(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};s.notyRenderer={},s.notyRenderer.init=function(e){var t=Object.create(i).init(e);return t.options.killer&&s.noty.closeAll(),t.options.force?s.noty.queue.unshift(t):s.noty.queue.push(t),s.notyRenderer.render(),"object"==s.noty.returns?t:t.options.id},s.notyRenderer.render=function(){var e=s.noty.queue[0];"object"===s.type(e)?e.options.dismissQueue?0<e.options.maxVisible?s(e.options.layout.container.selector+" > li").length<e.options.maxVisible&&s.notyRenderer.show(s.noty.queue.shift()):s.notyRenderer.show(s.noty.queue.shift()):s.noty.ontap&&(s.notyRenderer.show(s.noty.queue.shift()),s.noty.ontap=!1):s.noty.ontap=!0},s.notyRenderer.show=function(e){e.options.modal&&(s.notyRenderer.createModalFor(e),s.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append(s(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==s(e.options.layout.container.selector).length?s("body").append(s(e.options.layout.container.object).addClass("i-am-new")):s(e.options.layout.container.selector).removeClass("i-am-new"),s.notyRenderer.setLayoutCountFor(e,1),e.show()},s.notyRenderer.createModalFor=function(e){if(0==s(".noty_modal").length){var t=s("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&t.css(e.options.theme.modal.css),t.prependTo(s("body")).fadeIn(e.options.animation.fadeSpeed),-1<s.inArray("backdrop",e.options.closeWith)&&t.on("click",function(e){s.noty.closeAll()})}},s.notyRenderer.getLayoutCountFor=function(e){return s(e.options.layout.container.selector).data("noty_layout_count")||0},s.notyRenderer.setLayoutCountFor=function(e,t){return s(e.options.layout.container.selector).data("noty_layout_count",s.notyRenderer.getLayoutCountFor(e)+t)},s.notyRenderer.getModalCount=function(){return s(".noty_modal").data("noty_modal_count")||0},s.notyRenderer.setModalCount=function(e){return s(".noty_modal").data("noty_modal_count",s.notyRenderer.getModalCount()+e)},s.fn.noty=function(e){return e.custom=s(this),s.notyRenderer.init(e)},s.noty={},s.noty.queue=[],s.noty.ontap=!0,s.noty.layouts={},s.noty.themes={},s.noty.returns="object",s.noty.store={},s.noty.get=function(e){return!!s.noty.store.hasOwnProperty(e)&&s.noty.store[e]},s.noty.close=function(e){return!!s.noty.get(e)&&s.noty.get(e).close()},s.noty.setText=function(e,t){return!!s.noty.get(e)&&s.noty.get(e).setText(t)},s.noty.setType=function(e,t){return!!s.noty.get(e)&&s.noty.get(e).setType(t)},s.noty.clearQueue=function(){s.noty.queue=[]},s.noty.closeAll=function(){s.noty.clearQueue(),s.each(s.noty.store,function(e,t){t.close()})};var e=window.alert;return s.noty.consumeAlert=function(t){window.alert=function(e){t?t.text=e:t={text:e},s.notyRenderer.init(t)}},s.noty.stopConsumeAlert=function(){window.alert=e},s.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500,fadeSpeed:"fast"},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},s(window).on("resize",function(){s.each(s.noty.layouts,function(e,t){t.container.style.apply(s(t.container.selector))})}),window.noty=function(e){return s.notyRenderer.init(e)},s.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){s(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},s.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){s(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),s(this).css({left:(s(window).width()-s(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){s(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&s(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){s(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&s(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){s(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=s(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");s("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),s(this).hasClass("i-am-new")?s(this).css({left:(s(window).width()-s(this).outerWidth(!1))/2+"px",top:(s(window).height()-t)/2+"px"}):s(this).animate({left:(s(window).width()-s(this).outerWidth(!1))/2+"px",top:(s(window).height()-t)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){s(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=s(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");s("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),s(this).hasClass("i-am-new")?s(this).css({top:(s(window).height()-t)/2+"px"}):s(this).animate({top:(s(window).height()-t)/2+"px"},500),window.innerWidth<600&&s(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){s(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=s(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");s("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),s(this).hasClass("i-am-new")?s(this).css({top:(s(window).height()-t)/2+"px"}):s(this).animate({top:(s(window).height()-t)/2+"px"},500),window.innerWidth<600&&s(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){s(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},s.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){s(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},s.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){s(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),s(this).css({left:(s(window).width()-s(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){s(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&s(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){s(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&s(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},s.noty.themes.bootstrapTheme={name:"bootstrapTheme",modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){var e=this.options.layout.container.selector;switch(s(e).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("list-group-item").css("padding","0px"),this.options.type){case"alert":case"notification":this.$bar.addClass("list-group-item-info");break;case"warning":this.$bar.addClass("list-group-item-warning");break;case"error":this.$bar.addClass("list-group-item-danger");break;case"information":this.$bar.addClass("list-group-item-info");break;case"success":this.$bar.addClass("list-group-item-success")}this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"})},callback:{onShow:function(){},onClose:function(){}}},s.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":s(e).css({borderRadius:"0px 0px 0px 0px"}),s(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":s(e).css({borderRadius:"0px 0px 0px 0px"}),s(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),s(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":s(e).css({borderRadius:"0px 0px 0px 0px"}),s(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAQAAAClM0ndAAAAhklEQVR4AdXO0QrCMBBE0bttkk38/w8WRERpdyjzVOc+HxhIHqJGMQcFFkpYRQotLLSw0IJ5aBdovruMYDA/kT8plF9ZKLFQcgF18hDj1SbQOMlCA4kao0iiXmah7qBWPdxpohsgVZyj7e5I9KcID+EhiDI5gxBYKLBQYKHAQoGFAoEks/YEGHYKB7hFxf0AAAAASUVORK5CYII=') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){s(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){s(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){s.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){s.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}},s.noty.themes.relax={name:"relax",helpers:{},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",margin:"4px 0",borderRadius:"2px"}),this.$message.css({fontSize:"14px",lineHeight:"16px",textAlign:"center",padding:"10px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){s(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){s(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderTop:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderBottom:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#dedede",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#FF8181",borderColor:"#e25353",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#78C5E7",borderColor:"#3badd6",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#BCF5BC",borderColor:"#7cdd77",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){},onClose:function(){}}},window.noty}),function(u){var l=u.ajax,a=[],r=[],c=/=\?(&|$)/,d=(new Date).getTime();function n(e,t,i){(e.context?u(e.context):u.event).trigger(t,i)}function o(e,t){return e[t]===u.mockjaxSettings[t]}function p(e,t){if(u.isFunction(e))return e(t);if(u.isFunction(e.url.test)){if(!e.url.test(t.url))return null}else{var i=e.url.indexOf("*");if(e.url!==t.url&&-1===i||!new RegExp(e.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(t.url))return null}return!e.data||t.data&&function s(t,i){var n=!0;return"string"==typeof i?u.isFunction(t.test)?t.test(i):t==i:(u.each(t,function(e){if(i[e]===undefined)return n=!1;n="object"==typeof i[e]&&null!==i[e]?(n&&u.isArray(i[e])&&(n=u.isArray(t[e])&&i[e].length===t[e].length),n&&s(t[e],i[e])):t[e]&&u.isFunction(t[e].test)?n&&t[e].test(i[e]):n&&t[e]==i[e]}),n)}(e.data,t.data)?e&&e.type&&e.type.toLowerCase()!=t.type.toLowerCase()?null:e:null}function h(t,i,n){var e,s=(e=this,function(){return function(){var e;this.status=t.status,this.statusText=t.statusText,this.readyState=4,u.isFunction(t.response)&&t.response(n),"json"==i.dataType&&"object"==typeof t.responseText?this.responseText=JSON.stringify(t.responseText):"xml"==i.dataType?"string"==typeof t.responseXML?(this.responseXML=function s(e){window.DOMParser==undefined&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t});try{var t=(new DOMParser).parseFromString(e,"text/xml");if(!u.isXMLDoc(t))throw"Unable to parse XML";if(1==u("parsererror",t).length)throw"Error: "+u(t).text();return t}catch(n){var i=n.name==undefined?n:n.name+": "+n.message;return u(document).trigger("xmlParseError",[i]),undefined}}(t.responseXML),this.responseText=t.responseXML):this.responseXML=t.responseXML:this.responseText=t.responseText,"number"!=typeof t.status&&"string"!=typeof t.status||(this.status=t.status),"string"==typeof t.statusText&&(this.statusText=t.statusText),e=this.onreadystatechange||this.onload,u.isFunction(e)?(t.isTimeout&&(this.status=-1),e.call(this,t.isTimeout?"timeout":undefined)):t.isTimeout&&(this.status=-1)}.apply(e)});t.proxy?l({global:!1,url:t.proxy,type:t.proxyType,data:t.data,dataType:"script"===i.dataType?"text/plain":i.dataType,complete:function(e){t.responseXML=e.responseXML,t.responseText=e.responseText,o(t,"status")&&(t.status=e.status),o(t,"statusText")&&(t.statusText=e.statusText),this.responseTimer=setTimeout(s,t.responseTime||0)}}):!1===i.async?s():this.responseTimer=setTimeout(s,t.responseTime||50)}function f(e,t,i){if(function a(e){"GET"===e.type.toUpperCase()?c.test(e.url)||(e.url+=(/\?/.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?"):e.data&&c.test(e.data)||(e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?")}(e),e.dataType="json",e.data&&c.test(e.data)||c.test(e.url)){!function r(i,n,e){var s=e&&e.context||i,o=i.jsonpCallback||"jsonp"+d++;i.data&&(i.data=(i.data+"").replace(c,"="+o+"$1"));i.url=i.url.replace(c,"="+o+"$1"),window[o]=window[o]||function(e){data=e,g(i,s,n),m(i,s),window[o]=undefined;try{delete window[o]}catch(t){}head&&head.removeChild(script)}}(e,t,i);var n=/^(\w+:)?\/\/([^\/?#]+)/.exec(e.url),s=n&&(n[1]&&n[1]!==location.protocol||n[2]!==location.host);if(e.dataType="script","GET"===e.type.toUpperCase()&&s){var o=function l(e,t,i){var n=i&&i.context||e,s=null;t.response&&u.isFunction(t.response)?t.response(i):"object"==typeof t.responseText?u.globalEval("("+JSON.stringify(t.responseText)+")"):u.globalEval("("+t.responseText+")");g(e,n,t),m(e,n),u.Deferred&&(s=new u.Deferred,"object"==typeof t.responseText?s.resolveWith(n,[t.responseText]):s.resolveWith(n,[u.parseJSON(t.responseText)]));return s}(e,t,i);return o||!0}}return null}function g(e,t,i){e.success&&e.success.call(t,i.responseText||"",status,{}),e.global&&n(e,"ajaxSuccess",[{},e])}function m(e,t){e.complete&&e.complete.call(t,{},status),e.global&&n("ajaxComplete",[{},e]),e.global&&!--u.active&&u.event.trigger("ajaxStop")}function v(e,t){if(e.url instanceof RegExp&&e.hasOwnProperty("urlParams")){var i=e.url.exec(t.url);if(1!==i.length){i.shift();for(var n=0,s=i.length,o=e.urlParams.length,a=Math.min(s,o),r={};n<a;n++){r[e.urlParams[n]]=i[n]}t.urlParams=r}}}u.extend({ajax:function y(e,t){var i,n,s;"object"==typeof e?(t=e,e=undefined):(t=t||{}).url=e,n=u.extend(!0,{},u.ajaxSettings,t);for(var o=0;o<a.length;o++)if(a[o]&&(s=p(a[o],n)))return r.push(n),u.mockjaxSettings.log(s,n),n.dataType&&"JSONP"===n.dataType.toUpperCase()&&(i=f(n,s,t))||(s.cache=n.cache,s.timeout=n.timeout,s.global=n.global,v(s,t),function(s,o,a,r){i=l.call(u,u.extend(!0,{},a,{xhr:function(){return n=s,e=o,t=a,i=r,"undefined"==typeof(n=u.extend(!0,{},u.mockjaxSettings,n)).headers&&(n.headers={}),n.contentType&&(n.headers["content-type"]=n.contentType),{status:n.status,statusText:n.statusText,readyState:1,open:function(){},send:function(){i.fired=!0,h.call(this,n,e,t)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(e,t){n.headers[e]=t},getResponseHeader:function(e){return n.headers&&n.headers[e]?n.headers[e]:"last-modified"==e.toLowerCase()?n.lastModified||(new Date).toString():"etag"==e.toLowerCase()?n.etag||"":"content-type"==e.toLowerCase()?n.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var i="";return u.each(n.headers,function(e,t){i+=e+": "+t+"\n"}),i}};var n,e,t,i}}))}(s,n,t,a[o])),i;if(!0===u.mockjaxSettings.throwUnmocked)throw"AJAX not mocked: "+t.url;return l.apply(u,[t])}}),u.mockjaxSettings={log:function(e,t){if(!1!==e.logging&&("undefined"!=typeof e.logging||!1!==u.mockjaxSettings.logging)&&window.console&&console.log){var i="MOCK "+t.type.toUpperCase()+": "+t.url,n=u.extend({},t);if("function"==typeof console.log)console.log(i,n);else try{console.log(i+" "+JSON.stringify(n))}catch(s){console.log(i)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,throwUnmocked:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},u.mockjax=function(e){var t=a.length;return a[t]=e,t},u.mockjaxClear=function(e){1==arguments.length?a[e]=null:a=[],r=[]},u.mockjax.handler=function(e){if(1==arguments.length)return a[e]},u.mockjax.mockedAjaxCalls=function(){return r}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"function"==typeof require?e(require("jquery")):e(jQuery)}(function(f){"use strict";var n={escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},i=27,s=9,o=13,a=38,r=39,l=40;function u(e,t){var i=function(){},n=this,s={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:u.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:i,onSearchComplete:i,onSearchError:i,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,i){return-1!==e.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(e){return"string"==typeof e?f.parseJSON(e):e},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};n.element=e,n.el=f(e),n.suggestions=[],n.badQueries=[],n.selectedIndex=-1,n.currentValue=n.element.value,n.intervalId=0,n.cachedResponse={},n.onChangeInterval=null,n.onChange=null,n.isLocal=!1,n.suggestionsContainer=null,n.noSuggestionsContainer=null,n.options=f.extend({},s,t),n.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},n.hint=null,n.hintValue="",n.selection=null,n.initialize(),n.setOptions(t)}u.utils=n,(f.Autocomplete=u).formatResult=function(e,t){if(!t)return e.value;var i="("+n.escapeRegExChars(t)+")";return e.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},u.prototype={killerFn:null,initialize:function(){var e,t=this,i="."+t.classes.suggestion,n=t.classes.selected,s=t.options;t.element.setAttribute("autocomplete","off"),t.killerFn=function(e){0===f(e.target).closest("."+t.options.containerClass).length&&(t.killSuggestions(),t.disableKillerFn())},t.noSuggestionsContainer=f('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),t.suggestionsContainer=u.utils.createNode(s.containerClass),(e=f(t.suggestionsContainer)).appendTo(s.appendTo),"auto"!==s.width&&e.width(s.width),e.on("mouseover.autocomplete",i,function(){t.activate(f(this).data("index"))}),e.on("mouseout.autocomplete",function(){t.selectedIndex=-1,e.children("."+n).removeClass(n)}),e.on("click.autocomplete",i,function(){t.select(f(this).data("index"))}),t.fixPositionCapture=function(){t.visible&&t.fixPosition()},f(window).on("resize.autocomplete",t.fixPositionCapture),t.el.on("keydown.autocomplete",function(e){t.onKeyPress(e)}),t.el.on("keyup.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("blur.autocomplete",function(){t.onBlur()}),t.el.on("focus.autocomplete",function(){t.onFocus()}),t.el.on("change.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("input.autocomplete",function(e){t.onKeyUp(e)})},onFocus:function(){this.fixPosition(),this.el.val().length>=this.options.minChars&&this.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(e){var t=this,i=t.options;f.extend(i,e),t.isLocal=f.isArray(i.lookup),t.isLocal&&(i.lookup=t.verifySuggestionsFormat(i.lookup)),i.orientation=t.validateOrientation(i.orientation,"bottom"),f(t.suggestionsContainer).css({"max-height":i.maxHeight+"px",width:i.width+"px","z-index":i.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearInterval(this.onChangeInterval),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var e=this,t=f(e.suggestionsContainer),i=t.parent().get(0);if(i===document.body||e.options.forceFixPosition){var n=e.options.orientation,s=t.outerHeight(),o=e.el.outerHeight(),a=e.el.offset(),r={top:a.top,left:a.left};if("auto"===n){var l=f(window).height(),u=f(window).scrollTop(),c=-u+a.top-s,d=u+l-(a.top+o+s);n=Math.max(c,d)===c?"top":"bottom"}if(r.top+="top"===n?-s:o,i!==document.body){var p,h=t.css("opacity");e.visible||t.css("opacity",0).show(),p=t.offsetParent().offset(),r.top-=p.top,r.left-=p.left,e.visible||t.css("opacity",h).hide()}"auto"===e.options.width&&(r.width=e.el.outerWidth()-2+"px"),t.css(r)}},enableKillerFn:function(){f(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){f(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this.el.val().length,i=this.element.selectionStart;return"number"==typeof i?i===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==l||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case i:t.el.val(t.currentValue),t.hide();break;case r:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case s:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case o:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case a:t.moveUp();break;case l:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case a:case l:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),0<t.options.deferRequestBy?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var e=this,t=e.options,i=e.el.val(),n=e.getQuery(i);e.selection&&e.currentValue!==n&&(e.selection=null,(t.onInvalidateSelection||f.noop).call(e.element)),clearInterval(e.onChangeInterval),e.currentValue=i,e.selectedIndex=-1,t.triggerSelectOnValidInput&&e.isExactMatch(n)?e.select(0):n.length<t.minChars?e.hide():e.getSuggestions(n)},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(e){var t,i=this.options.delimiter;return i?(t=e.split(i),f.trim(t[t.length-1])):e},getSuggestionsLocal:function(t){var e,i=this.options,n=t.toLowerCase(),s=i.lookupFilter,o=parseInt(i.lookupLimit,10);return e={suggestions:f.grep(i.lookup,function(e){return s(e,t,n)})},o&&e.suggestions.length>o&&(e.suggestions=e.suggestions.slice(0,o)),e},getSuggestions:function(n){var e,t,i,s,o=this,a=o.options,r=a.serviceUrl;a.params[a.paramName]=n,t=a.ignoreParams?null:a.params,!1!==a.onSearchStart.call(o.element,a.params)&&(f.isFunction(a.lookup)?a.lookup(n,function(e){o.suggestions=e.suggestions,o.suggest(),a.onSearchComplete.call(o.element,n,e.suggestions)}):(e=o.isLocal?o.getSuggestionsLocal(n):(f.isFunction(r)&&(r=r.call(o.element,n)),i=r+"?"+f.param(t||{}),o.cachedResponse[i]))&&f.isArray(e.suggestions)?(o.suggestions=e.suggestions,o.suggest(),a.onSearchComplete.call(o.element,n,e.suggestions)):o.isBadQuery(n)?a.onSearchComplete.call(o.element,n,[]):(o.abortAjax(),s={url:r,data:t,type:a.type,dataType:a.dataType},f.extend(s,a.ajaxSettings),o.currentRequest=f.ajax(s).done(function(e){var t;o.currentRequest=null,t=a.transformResult(e,n),o.processResponse(t,n,i),a.onSearchComplete.call(o.element,n,t.suggestions)}).fail(function(e,t,i){a.onSearchError.call(o.element,n,e,t,i)})))},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(0===e.indexOf(t[i]))return!0;return!1},hide:function(){var e=this,t=f(e.suggestionsContainer);f.isFunction(e.options.onHide)&&e.visible&&e.options.onHide.call(e.element,t),e.visible=!1,e.selectedIndex=-1,clearInterval(e.onChangeInterval),f(e.suggestionsContainer).hide(),e.signalHint(null)},suggest:function(){if(0!==this.suggestions.length){var n,e=this,t=e.options,s=t.groupBy,o=t.formatResult,a=e.getQuery(e.currentValue),r=e.classes.suggestion,i=e.classes.selected,l=f(e.suggestionsContainer),u=f(e.noSuggestionsContainer),c=t.beforeRender,d="";t.triggerSelectOnValidInput&&e.isExactMatch(a)?e.select(0):(f.each(e.suggestions,function(e,t){var i;s&&(d+=(i=t.data[s],n===i?"":'<div class="autocomplete-group"><strong>'+(n=i)+"</strong></div>")),d+='<div class="'+r+'" data-index="'+e+'">'+o(t,a)+"</div>"}),this.adjustContainerWidth(),u.detach(),l.html(d),f.isFunction(c)&&c.call(e.element,l),e.fixPosition(),l.show(),t.autoSelectFirst&&(e.selectedIndex=0,l.scrollTop(0),l.children("."+r).first().addClass(i)),e.visible=!0,e.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var e=f(this.suggestionsContainer),t=f(this.noSuggestionsContainer);this.adjustContainerWidth(),t.detach(),e.empty(),e.append(t),this.fixPosition(),e.show(),this.visible=!0},adjustContainerWidth:function(){var e,t=this.options,i=f(this.suggestionsContainer);"auto"===t.width&&(e=this.el.outerWidth()-2,i.width(0<e?e:300))},findBestHint:function(){var n=this.el.val().toLowerCase(),s=null;n&&(f.each(this.suggestions,function(e,t){var i=0===t.value.toLowerCase().indexOf(n);return i&&(s=t),!i}),this.signalHint(s))},signalHint:function(e){var t="",i=this;e&&(t=i.currentValue+e.value.substr(i.currentValue.length)),i.hintValue!==t&&(i.hintValue=t,i.hint=e,(this.options.onHint||f.noop)(t))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?f.map(e,function(e){return{value:e,data:null}}):e},validateOrientation:function(e,t){return e=f.trim(e||"").toLowerCase(),-1===f.inArray(e,["auto","bottom","top"])&&(e=t),e},processResponse:function(e,t,i){var n=this,s=n.options;e.suggestions=n.verifySuggestionsFormat(e.suggestions),s.noCache||(n.cachedResponse[i]=e,s.preventBadQueries&&0===e.suggestions.length&&n.badQueries.push(t)),t===n.getQuery(n.currentValue)&&(n.suggestions=e.suggestions,n.suggest())},activate:function(e){var t,i=this,n=i.classes.selected,s=f(i.suggestionsContainer),o=s.find("."+i.classes.suggestion);return s.find("."+n).removeClass(n),i.selectedIndex=e,-1!==i.selectedIndex&&o.length>i.selectedIndex?(t=o.get(i.selectedIndex),f(t).addClass(n),t):null},selectHint:function(){var e=f.inArray(this.hint,this.suggestions);this.select(e)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var e=this;if(-1!==e.selectedIndex)return 0===e.selectedIndex?(f(e.suggestionsContainer).children().first().removeClass(e.classes.selected),e.selectedIndex=-1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var t=this,i=t.activate(e);if(i){var n,s,o,a=f(i).outerHeight();n=i.offsetTop,o=(s=f(t.suggestionsContainer).scrollTop())+t.options.maxHeight-a,n<s?f(t.suggestionsContainer).scrollTop(n):o<n&&f(t.suggestionsContainer).scrollTop(n-t.options.maxHeight+a),t.options.preserveInput||t.el.val(t.getValue(t.suggestions[e].value)),t.signalHint(null)}},onSelect:function(e){var t=this,i=t.options.onSelect,n=t.suggestions[e];t.currentValue=t.getValue(n.value),t.currentValue===t.el.val()||t.options.preserveInput||t.el.val(t.currentValue),t.signalHint(null),t.suggestions=[],t.selection=n,f.isFunction(i)&&i.call(t.element,n)},getValue:function(e){var t,i,n=this.options.delimiter;return n?1===(i=(t=this.currentValue).split(n)).length?e:t.substr(0,t.length-i[i.length-1].length)+e:e},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),this.disableKillerFn(),f(window).off("resize.autocomplete",this.fixPositionCapture),f(this.suggestionsContainer).remove()}},f.fn.autocomplete=f.fn.devbridgeAutocomplete=function(i,n){var s="autocomplete";return 0===arguments.length?this.first().data(s):this.each(function(){var e=f(this),t=e.data(s);"string"==typeof i?t&&"function"==typeof t[i]&&t[i](n):(t&&t.dispose&&t.dispose(),t=new u(this,i),e.data(s,t))})}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(i){var e=function(){if(i&&i.fn&&i.fn.select2&&i.fn.select2.amd)var e=i.fn.select2.amd;var t,s,u,c;return e&&e.requirejs||(e?u=e:e={},function(p){function h(e,t){return i.call(e,t)}function a(e,t){var i,n,s,o,a,r,l,u,c,d,p,h=t&&t.split("/"),f=x.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(a=(e=e.split("/")).length-1,x.nodeIdCompat&&k.test(e[a])&&(e[a]=e[a].replace(k,"")),e=h.slice(0,h.length-1).concat(e),c=0;c<e.length;c+=1)if("."===(p=e[c]))e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;0<c&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&f){for(c=(i=e.split("/")).length;0<c;c-=1){if(n=i.slice(0,c).join("/"),h)for(d=h.length;0<d;d-=1)if((s=f[h.slice(0,d).join("/")])&&(s=s[n])){o=s,r=c;break}if(o)break;!l&&g&&g[n]&&(l=g[n],u=c)}!o&&l&&(o=l,r=u),o&&(i.splice(0,r,o),e=i.join("/"))}return e}function f(t,i){return function(){var e=n.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),l.apply(p,e.concat([t,i]))}}function g(t){return function(e){_[t]=e}}function m(e){if(h(b,e)){var t=b[e];delete b[e],w[e]=!0,o.apply(p,t)}if(!h(_,e)&&!h(w,e))throw new Error("No "+e);return _[e]}function r(e){var t,i=e?e.indexOf("!"):-1;return-1<i&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}var o,l,v,y,_={},b={},x={},w={},i=Object.prototype.hasOwnProperty,n=[].slice,k=/\.js$/;v=function(e,t){var i,n=r(e),s=n[0];return e=n[1],s&&(i=m(s=a(s,t))),s?e=i&&i.normalize?i.normalize(e,function o(t){return function(e){return a(e,t)}}(t)):a(e,t):(s=(n=r(e=a(e,t)))[0],e=n[1],s&&(i=m(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:i}},y={require:function(e){return f(e)},exports:function(e){var t=_[e];return void 0!==t?t:_[e]={}},module:function(e){return{id:e,uri:"",exports:_[e],config:function t(e){return function(){return x&&x.config&&x.config[e]||{}}}(e)}}},o=function(e,t,i,n){var s,o,a,r,l,u,c=[],d=typeof i;if(n=n||e,"undefined"===d||"function"===d){for(t=!t.length&&i.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(r=v(t[l],n)).f))c[l]=y.require(e);else if("exports"===o)c[l]=y.exports(e),u=!0;else if("module"===o)s=c[l]=y.module(e);else if(h(_,o)||h(b,o)||h(w,o))c[l]=m(o);else{if(!r.p)throw new Error(e+" missing "+o);r.p.load(r.n,f(n,!0),g(o),{}),c[l]=_[o]}a=i?i.apply(_[e],c):void 0,e&&(s&&s.exports!==p&&s.exports!==_[e]?_[e]=s.exports:a===p&&u||(_[e]=a))}else e&&(_[e]=i)},s=u=l=function(e,t,i,n,s){if("string"==typeof e)return y[e]?y[e](t):m(v(e,t).f);if(!e.splice){if((x=e).deps&&l(x.deps,x.callback),!t)return;t.splice?(e=t,t=i,i=null):e=p}return t=t||function(){},"function"==typeof i&&(i=n,n=s),n?o(p,e,t,i):setTimeout(function(){o(p,e,t,i)},4),l},l.config=function(e){return l(e)},s._defined=_,(c=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),h(_,e)||h(b,e)||(b[e]=[e,t,i])}).amd={jQuery:!0}}(),e.requirejs=s,e.require=u,e.define=c),e.define("almond",function(){}),e.define("jquery",[],function(){var e=i||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(o){function d(e){var t=e.prototype,i=[];for(var n in t){"function"==typeof t[n]&&"constructor"!==n&&i.push(n)}return i}var e={Extend:function(e,t){function i(){this.constructor=e}var n={}.hasOwnProperty;for(var s in t)n.call(t,s)&&(e[s]=t[s]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},Decorate:function(n,s){function o(){var e=Array.prototype.unshift,t=s.prototype.constructor.length,i=n.prototype.constructor;0<t&&(e.call(arguments,n.prototype.constructor),i=s.prototype.constructor),i.apply(this,arguments)}var e=d(s),t=d(n);s.displayName=n.displayName,o.prototype=new function c(){this.constructor=o};for(var i=0;i<t.length;i++){var a=t[i];o.prototype[a]=n.prototype[a]}for(var r=function(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var i=s.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),i.apply(this,arguments)}},l=0;l<e.length;l++){var u=e[l];o.prototype[u]=r(u)}return o}},t=function(){this.listeners={}};return t.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},t.prototype.trigger=function(e){var t=Array.prototype.slice,i=t.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),(i[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},t.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++)e[i].apply(this,t)},e.Observable=t,e.generateChars=function(e){for(var t="",i=0;i<e;i++){t+=Math.floor(36*Math.random()).toString(36)}return t},e.bind=function(e,t){return function(){e.apply(t,arguments)}},e._convertData=function(e){for(var t in e){var i=t.split("-"),n=e;if(1!==i.length){for(var s=0;s<i.length;s++){var o=i[s];(o=o.substring(0,1).toLowerCase()+o.substring(1))in n||(n[o]={}),s==i.length-1&&(n[o]=e[t]),n=n[o]}delete e[t]}}return e},e.hasScroll=function(e,t){var i=o(t),n=t.style.overflowX,s=t.style.overflowY;return(n!==s||"hidden"!==s&&"visible"!==s)&&("scroll"===n||"scroll"===s||(i.innerHeight()<t.scrollHeight||i.innerWidth()<t.scrollWidth))},e.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},e.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var i=o();o.map(t,function(e){i=i.add(e)}),t=i}e.append(t)},e}),e.define("select2/results",["jquery","./utils"],function(p,e){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=p('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=p('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),n=this.options.get("translations").get(e.message);i.append(t(n(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i],s=this.option(n);t.push(s)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(e){var n=p.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=p(this),t=p.data(this,"data"),i=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<p.inArray(i,n)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},i=this.option(t);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var n in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var s=i[n];t.setAttribute(n,s)}if(e.children){var o=p(t),a=document.createElement("strong");a.className="select2-results__group",p(a),this.template(e,a);for(var r=[],l=0;l<e.children.length;l++){var u=e.children[l],c=this.option(u);r.push(c)}var d=p("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});d.append(r),o.append(a),o.append(d)}else this.template(e,t);return p.data(t,"data",e),t},n.prototype.bind=function(t,e){var l=this,i=t.id+"-results";this.$results.attr("id",i),t.on("results:all",function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("results:append",function(e){l.append(e.data),t.isOpen()&&l.setClasses()}),t.on("query",function(e){l.hideMessages(),l.showLoading(e)}),t.on("select",function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),t.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=l.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),i=t.index(e);if(0!==i){var n=i-1;0===e.length&&(n=0);var s=t.eq(n);s.trigger("mouseenter");var o=l.$results.offset().top,a=s.offset().top,r=l.$results.scrollTop()+(a-o);0===n?l.$results.scrollTop(0):a-o<0&&l.$results.scrollTop(r)}}),t.on("results:next",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),i=t.index(e)+1;if(!(i>=t.length)){var n=t.eq(i);n.trigger("mouseenter");var s=l.$results.offset().top+l.$results.outerHeight(!1),o=n.offset().top+n.outerHeight(!1),a=l.$results.scrollTop()+o-s;0===i?l.$results.scrollTop(0):s<o&&l.$results.scrollTop(a)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){l.displayMessage(e)}),p.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop(),i=l.$results.get(0).scrollHeight-t+e.deltaY,n=0<e.deltaY&&t-e.deltaY<=0,s=e.deltaY<0&&i<=l.$results.height();n?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):s&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=p(this),i=t.data("data");return"true"===t.attr("aria-selected")?void(l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:i}):l.trigger("close",{})):void l.trigger("select",{originalEvent:e,data:i})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=p(this).data("data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:p(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),i=this.$results.offset().top,n=e.offset().top,s=this.$results.scrollTop()+(n-i),o=n-i;s-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(s)}},n.prototype.template=function(e,t){var i=this.options.get("templateResult"),n=this.options.get("escapeMarkup"),s=i(e,t);null==s?t.style.display="none":"string"==typeof s?t.innerHTML=n(s):p(t).append(s)},n}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(i,e,s){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=i('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},n.prototype.bind=function(e,t){var i=this,n=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===s.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",n),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},n.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||i.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},n.prototype._attachCloseHandler=function(e){i(document.body).on("mousedown.select2."+e.id,function(e){var t=i(e.target).closest(".select2");i(".select2.select2-container--open").each(function(){var e=i(this);this!=t[0]&&e.data("element").select2("close")})})},n.prototype._detachCloseHandler=function(e){i(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(e,t){t.find(".selection").append(e)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},n}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,n){function s(){s.__super__.constructor.apply(this,arguments)}return i.Extend(s,t),s.prototype.render=function(){var e=s.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},s.prototype.bind=function(t,e){var i=this;s.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(e){1===e.which&&i.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||i.$selection.focus()}),t.on("selection:update",function(e){i.update(e.data)})},s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},s.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},s.prototype.selectionContainer=function(){return e("<span></span>")},s.prototype.update=function(e){if(0!==e.length){var t=e[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(t,i);i.empty().append(n),i.prop("title",t.title||t.text)}else this.clear()},s}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,e,r){function s(e,t){s.__super__.constructor.apply(this,arguments)}return r.Extend(s,e),s.prototype.render=function(){var e=s.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},s.prototype.bind=function(e,t){var i=this;s.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){i.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!i.options.get("disabled")){var t=n(this).parent().data("data");i.trigger("unselect",{originalEvent:e,data:t})}})},s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},s.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},s.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},s.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var n=e[i],s=this.selectionContainer(),o=this.display(n,s);s.append(o),s.prop("title",n.title||n.text),s.data("data",n),t.push(s)}var a=this.$selection.find(".select2-selection__rendered");r.appendMany(a,t)}},s}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(e,t){var i=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||i)return e.call(this,t);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(n,s){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)}),t.on("keypress",function(e){n._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();for(var n=i.data("data"),s=0;s<n.length;s++){var o={data:n[s]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},e.prototype._handleKeyboardClear=function(e,t,i){i.isOpen()||(t.which==s.DELETE||t.which==s.BACKSPACE)&&this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var i=n('<span class="select2-selection__clear">&times;</span>');i.data("data",t),this.$selection.find(".select2-selection__rendered").prepend(i)}},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(n,e,a){function t(e,t,i){e.call(this,t,i)}return t.prototype.render=function(e){var t=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var i=e.call(this);return this._transferTabIndex(),i},t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("open",function(){n.$search.trigger("focus")}),t.on("close",function(){n.$search.val(""),n.$search.removeAttr("aria-activedescendant"),n.$search.trigger("focus")}),t.on("enable",function(){n.$search.prop("disabled",!1),n._transferTabIndex()}),t.on("disable",function(){n.$search.prop("disabled",!0)}),t.on("focus",function(e){n.$search.trigger("focus")}),t.on("results:focus",function(e){n.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){n.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){n._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),n.trigger("keypress",e),n._keyUpPrevented=e.isDefaultPrevented(),e.which===a.BACKSPACE&&""===n.$search.val()){var t=n.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var i=t.data("data");n.searchRemoveChoice(i),e.preventDefault()}}});var s=document.documentMode,o=s&&s<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return o?void n.$selection.off("input.search input.searchcheck"):void n.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&"input"===e.type)n.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=a.SHIFT&&t!=a.CTRL&&t!=a.ALT&&t!=a.TAB&&n.handleSearch(e)}})},t.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},t.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},t.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},t.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},t.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},t.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").innerWidth():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},t}),e.define("select2/selection/eventRelay",["jquery"],function(a){function e(){}return e.prototype.bind=function(e,t,i){var n=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,t,i),t.on("*",function(e,t){if(-1!==a.inArray(e,s)){t=t||{};var i=a.Event("select2:"+e,{params:t});n.$element.trigger(i),-1!==a.inArray(e,o)&&(t.prevented=i.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,i){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var t=i(e);n._cache[e]=t}return new n(n._cache[e])},n}),e.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),e.define("select2/data/base",["../utils"],function(n){function i(e,t){i.__super__.constructor.call(this)}return n.Extend(i,n.Observable),i.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},i.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},i.prototype.bind=function(e,t){},i.prototype.destroy=function(){},i.prototype.generateResultId=function(e,t){var i=e.id+"-result-";return(i+=n.generateChars(4))+(null!=t.id?"-"+t.id.toString():"-"+n.generateChars(4))},i}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,t,r){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var i=[],n=this;this.$element.find(":selected").each(function(){var e=r(this),t=n.item(e);i.push(t)}),e(i)},i.prototype.select=function(s){var o=this;if(s.selected=!0,r(s.element).is("option"))return s.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(e){var t=[];(s=[s]).push.apply(s,e);for(var i=0;i<s.length;i++){var n=s[i].id;-1===r.inArray(n,t)&&t.push(n)}o.$element.val(t),o.$element.trigger("change")});else{var e=s.id;this.$element.val(e),this.$element.trigger("change")}},i.prototype.unselect=function(s){var o=this;if(this.$element.prop("multiple"))return s.selected=!1,r(s.element).is("option")?(s.element.selected=!1,void this.$element.trigger("change")):void this.current(function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i].id;n!==s.id&&-1===r.inArray(n,t)&&t.push(n)}o.$element.val(t),o.$element.trigger("change")})},i.prototype.bind=function(e,t){var i=this;(this.container=e).on("select",function(e){i.select(e.data)}),e.on("unselect",function(e){i.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){r.removeData(this,"data")})},i.prototype.query=function(n,e){var s=[],o=this;this.$element.children().each(function(){var e=r(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),i=o.matches(n,t);null!==i&&s.push(i)}}),e({results:s})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=r(t),n=this._normalizeItem(e);return n.element=t,r.data(t,"data",n),i},i.prototype.item=function(e){var t={};if(null!=(t=r.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),n=[],s=0;s<i.length;s++){var o=r(i[s]),a=this.item(o);n.push(a)}t.children=n}return(t=this._normalizeItem(t)).element=e[0],r.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){r.isPlainObject(e)||(e={id:e,text:e});return null!=(e=r.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),r.extend({},{selected:!1,disabled:!1},e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,f,g){function n(e,t){var i=t.get("data")||[];n.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(i))}return f.Extend(n,e),n.prototype.select=function(i){var e=this.$element.find("option").filter(function(e,t){return t.value==i.id.toString()});0===e.length&&(e=this.option(i),this.addOptions(e)),n.__super__.select.call(this,i)},n.prototype.convertToOptions=function(e){function t(e){return function(){return g(this).val()==e.id}}for(var i=this,n=this.$element.find("option"),s=n.map(function(){return i.item(g(this)).id}).get(),o=[],a=0;a<e.length;a++){var r=this._normalizeItem(e[a]);if(0<=g.inArray(r.id,s)){var l=n.filter(t(r)),u=this.item(l),c=g.extend(!0,{},r,u),d=this.option(c);l.replaceWith(d)}else{var p=this.option(r);if(r.children){var h=this.convertToOptions(r.children);f.appendMany(p,h)}o.push(p)}}return o},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,i){var n=o.ajax(e);return n.then(t),n.fail(i),n}};return o.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(i,n){function e(){var e=t.transport(t,function(e){var t=s.processResults(e,i);s.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(t)},function(){e.status&&"0"===e.status||s.trigger("results:message",{message:"errorLoading"})});s._request=e}var s=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);"function"==typeof t.url&&(t.url=t.url.call(this.$element,i)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,i)),this.ajaxOptions.delay&&null!=i.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},i}),e.define("select2/data/tags",["jquery"],function(c){function e(e,t,i){var n=i.get("tags"),s=i.get("createTag");void 0!==s&&(this.createTag=s);var o=i.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,i),c.isArray(n))for(var a=0;a<n.length;a++){var r=n[a],l=this._normalizeItem(r),u=this.option(l);this.$element.append(u)}}return e.prototype.query=function(e,l,u){var c=this;return this._removeOldTags(),null==l.term||null!=l.page?void e.call(this,l,u):void e.call(this,l,function d(e,t){for(var i=e.results,n=0;n<i.length;n++){var s=i[n],o=null!=s.children&&!d({results:s.children},!0);if(s.text===l.term||o)return!t&&(e.data=i,void u(e))}if(t)return!0;var a=c.createTag(l);if(null!=a){var r=c.option(a);r.attr("data-select2-tag",!0),c.addOptions([r]),c.insertTag(i,a)}e.results=i,u(e)})},e.prototype.createTag=function(e,t){var i=c.trim(t.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(e,t,i){t.unshift(i)},e.prototype._removeOldTags=function(e){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||c(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(d){function e(e,t,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){e.call(this,t,i),this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,t,i){var s=this;t.term=t.term||"";var n=this.tokenizer(t,this.options,function o(e){var t=s._normalizeItem(e);if(!s.$element.find("option").filter(function(){return d(this).val()===t.id}).length){var i=s.option(t);i.attr("data-select2-tag",!0),s._removeOldTags(),s.addOptions([i])}!function n(e){s.trigger("select",{data:e})}(t)});n.term!==t.term&&(this.$search.length&&(this.$search.val(n.term),this.$search.focus()),t.term=n.term),e.call(this,t,i)},e.prototype.tokenizer=function(e,t,i,n){for(var s=i.get("tokenSeparators")||[],o=t.term,a=0,r=this.createTag||function(e){return{id:e.term,text:e.term}};a<o.length;){var l=o[a];if(-1!==d.inArray(l,s)){var u=o.substr(0,a),c=r(d.extend({},t,{term:u}));null!=c?(n(c),o=o.substr(a+1)||"",a=0):a++}else a++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),e.call(this,t,i)}return e.prototype.query=function(i,n,s){var o=this;this.current(function(e){var t=null!=e?e.length:0;return 0<o.maximumSelectionLength&&t>=o.maximumSelectionLength?void o.trigger("results:message",{message:"maximumSelected",args:{maximum:o.maximumSelectionLength}}):void i.call(o,n,s)})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},i.prototype.bind=function(){},i.prototype.position=function(e,t){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(s,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),i=s('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),t.prepend(i),t},t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),this.$search.on("keydown",function(e){n.trigger("keypress",e),n._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){s(this).off("keyup")}),this.$search.on("keyup input",function(e){n.handleSearch(e)}),t.on("open",function(){n.$search.attr("tabindex",0),n.$search.focus(),window.setTimeout(function(){n.$search.focus()},0)}),t.on("close",function(){n.$search.attr("tabindex",-1),n.$search.val("")}),t.on("focus",function(){t.isOpen()&&n.$search.focus()}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(n.showSearch(e)?n.$searchContainer.removeClass("select2-search--hide"):n.$searchContainer.addClass("select2-search--hide"))})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i,n)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var i=t.slice(0),n=t.length-1;0<=n;n--){var s=t[n];this.placeholder.id===s.id&&i.splice(n,1)}return i},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(s){function e(e,t,i,n){this.lastParams={},e.call(this,t,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("query",function(e){n.lastParams=e,n.loading=!0}),t.on("query:append",function(e){n.lastParams=e,n.loading=!0}),this.$results.on("scroll",function(){var e=s.contains(document.documentElement,n.$loadingMore[0]);if(!n.loading&&e){var t=n.$results.offset().top+n.$results.outerHeight(!1);n.$loadingMore.offset().top+n.$loadingMore.outerHeight(!1)<=t+50&&n.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=s.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=s('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(f,r){function e(e,t,i){this.$dropdownParent=i.get("dropdownParent")||f(document.body),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){var n=this,s=!1;e.call(this,t,i),t.on("open",function(){n._showDropdown(),n._attachPositioningHandler(t),s||(s=!0,t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),t.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,i){t.attr("class",i.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=i},e.prototype.render=function(e){var t=f("<span></span>"),i=e.call(this);return t.append(i),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var i=this,n="scroll.select2."+t.id,s="resize.select2."+t.id,o="orientationchange.select2."+t.id,a=this.$container.parents().filter(r.hasScroll);a.each(function(){f(this).data("select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})}),a.on(n,function(e){var t=f(this).data("select2-scroll-position");f(this).scrollTop(t.y)}),f(window).on(n+" "+s+" "+o,function(e){i._positionDropdown(),i._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var i="scroll.select2."+t.id,n="resize.select2."+t.id,s="orientationchange.select2."+t.id;this.$container.parents().filter(r.hasScroll).off(i),f(window).off(i+" "+n+" "+s)},e.prototype._positionDropdown=function(){var e=f(window),t=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),n=null,s=this.$container.offset();s.bottom=s.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=s.top,o.bottom=s.top+o.height;var a=this.$dropdown.outerHeight(!1),r=e.scrollTop(),l=e.scrollTop()+e.height(),u=r<s.top-a,c=l>s.bottom+a,d={left:s.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left,t||i||(n="below"),c||!u||t?!u&&c&&t&&(n="below"):n="above",("above"==n||t&&"below"!==n)&&(d.top=o.top-h.top-a),null!=n&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+n),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+n)),this.$dropdownContainer.css(d)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,i,n)}return e.prototype.showSearch=function(e,t){return!(function s(e){for(var t=0,i=0;i<e.length;i++){var n=e[i];n.children?t+=s(n.children):t++}return t}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("close",function(e){n._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var i=t.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var n=this.getHighlightedResults();if(!(n.length<1)){var s=n.data("data");null!=s.element&&s.element.selected||null==s.element&&s.selected||this.trigger("select",{data:s})}},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("select",function(e){n._selectTriggered(e)}),t.on("unselect",function(e){n._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(m,v,y,_,b,x,w,k,C,D,$,i,A,E,T,S,M,O,F,I,j,R,N,P,L,B,q,z,e){function t(){this.reset()}return t.prototype.apply=function(e){if(null==(e=m.extend(!0,{},this.defaults,e)).dataAdapter){if(null!=e.ajax?e.dataAdapter=T:null!=e.data?e.dataAdapter=E:e.dataAdapter=A,0<e.minimumInputLength&&(e.dataAdapter=D.Decorate(e.dataAdapter,O)),0<e.maximumInputLength&&(e.dataAdapter=D.Decorate(e.dataAdapter,F)),0<e.maximumSelectionLength&&(e.dataAdapter=D.Decorate(e.dataAdapter,I)),e.tags&&(e.dataAdapter=D.Decorate(e.dataAdapter,S)),(null!=e.tokenSeparators||null!=e.tokenizer)&&(e.dataAdapter=D.Decorate(e.dataAdapter,M)),null!=e.query){var t=v(e.amdBase+"compat/query");e.dataAdapter=D.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var i=v(e.amdBase+"compat/initSelection");e.dataAdapter=D.Decorate(e.dataAdapter,i)}}if(null==e.resultsAdapter&&(e.resultsAdapter=y,null!=e.ajax&&(e.resultsAdapter=D.Decorate(e.resultsAdapter,P)),null!=e.placeholder&&(e.resultsAdapter=D.Decorate(e.resultsAdapter,N)),e.selectOnClose&&(e.resultsAdapter=D.Decorate(e.resultsAdapter,q))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=j;else{var n=D.Decorate(j,R);e.dropdownAdapter=n}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=D.Decorate(e.dropdownAdapter,B)),e.closeOnSelect&&(e.dropdownAdapter=D.Decorate(e.dropdownAdapter,z)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var s=v(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=D.Decorate(e.dropdownAdapter,s)}e.dropdownAdapter=D.Decorate(e.dropdownAdapter,L)}if(null==e.selectionAdapter){if(e.multiple?e.selectionAdapter=b:e.selectionAdapter=_,null!=e.placeholder&&(e.selectionAdapter=D.Decorate(e.selectionAdapter,x)),e.allowClear&&(e.selectionAdapter=D.Decorate(e.selectionAdapter,w)),e.multiple&&(e.selectionAdapter=D.Decorate(e.selectionAdapter,k)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var o=v(e.amdBase+"compat/containerCss");e.selectionAdapter=D.Decorate(e.selectionAdapter,o)}e.selectionAdapter=D.Decorate(e.selectionAdapter,C)}if("string"==typeof e.language)if(0<e.language.indexOf("-")){var a=e.language.split("-")[0];e.language=[e.language,a]}else e.language=[e.language];if(m.isArray(e.language)){var r=new $;e.language.push("en");for(var l=e.language,u=0;u<l.length;u++){var c=l[u],d={};try{d=$.loadPath(c)}catch(f){try{c=this.defaults.amdLanguageBase+c,d=$.loadPath(c)}catch(g){e.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+c+'" could not be automatically loaded. A fallback will be used instead.');continue}}r.extend(d)}e.translations=r}else{var p=$.loadPath(this.defaults.amdLanguageBase+"en"),h=new $(e.language);h.extend(p),e.translations=h}return e},t.prototype.reset=function(){function a(e){return e.replace(/[^\u0000-\u007E]/g,function t(e){return i[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:D.escapeMarkup,language:e,matcher:function r(e,t){if(""===m.trim(e.term))return t;if(t.children&&0<t.children.length){for(var i=m.extend(!0,{},t),n=t.children.length-1;0<=n;n--)null==r(e,t.children[n])&&i.children.splice(n,1);return 0<i.children.length?i:r(e,i)}var s=a(t.text).toUpperCase(),o=a(e.term).toUpperCase();return-1<s.indexOf(o)?t:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},t.prototype.set=function(e,t){var i={};i[m.camelCase(e)]=t;var n=D._convertData(i);m.extend(this.defaults,n)},new t}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(n,o,s,a){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),this.options=s.apply(this.options),t&&t.is("input")){var i=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=a.Decorate(this.options.dataAdapter,i)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var i;i=o.fn.jquery&&"1."==o.fn.jquery.substr(0,2)&&e[0].dataset?o.extend(!0,{},e[0].dataset,e.data()):e.data();var n=o.extend(!0,{},i);for(var s in n=a._convertData(n))-1<o.inArray(s,t)||(o.isPlainObject(this.options[s])?o.extend(this.options[s],n[s]):this.options[s]=n[s]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(s,u,i,n){var c=function(e,t){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new u(t,e),c.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(e,this.options);var s=this.render();this._placeContainer(s);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var a=this.options.get("dropdownAdapter");this.dropdown=new a(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var r=this.options.get("resultsAdapter");this.results=new r(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return i.Extend(c,i.Observable),c.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},c.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},c.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var n=this._resolveWidth(e,"style");return null!=n?n:this._resolveWidth(e,"element")}if("element"==t){var s=e.outerWidth(!1);return s<=0?"auto":s+"px"}if("style"!=t)return t;var o=e.attr("style");if("string"!=typeof o)return null;for(var a=o.split(";"),r=0,l=a.length;r<l;r+=1){var u=a[r].replace(/\s/g,"").match(i);if(null!==u&&1<=u.length)return u[1]}return null},c.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},c.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){s.each(e,t._syncA),s.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},c.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(e,t){i.trigger(e,t)})},c.prototype._registerSelectionEvents=function(){var i=this,n=["toggle","focus"];this.selection.on("toggle",function(){i.toggleDropdown()}),this.selection.on("focus",function(e){i.focus(e)}),this.selection.on("*",function(e,t){-1===s.inArray(e,n)&&i.trigger(e,t)})},c.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(e,t){i.trigger(e,t)})},c.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(e,t){i.trigger(e,t)})},c.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container.addClass("select2-container--open")}),this.on("close",function(){i.$container.removeClass("select2-container--open")}),this.on("enable",function(){i.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){i.$container.addClass("select2-container--disabled")}),this.on("blur",function(){i.$container.removeClass("select2-container--focus")}),this.on("query",function(t){i.isOpen()||i.trigger("open",{}),this.dataAdapter.query(t,function(e){i.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){i.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;i.isOpen()?t===n.ESC||t===n.TAB||t===n.UP&&e.altKey?(i.close(),e.preventDefault()):t===n.ENTER?(i.trigger("results:select",{}),e.preventDefault()):t===n.SPACE&&e.ctrlKey?(i.trigger("results:toggle",{}),e.preventDefault()):t===n.UP?(i.trigger("results:previous",{}),e.preventDefault()):t===n.DOWN&&(i.trigger("results:next",{}),e.preventDefault()):(t===n.ENTER||t===n.SPACE||t===n.DOWN&&e.altKey)&&(i.open(),e.preventDefault())})},c.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},c.prototype._syncSubtree=function(e,t){var i=!1,n=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++){t.addedNodes[s].selected&&(i=!0)}else t.removedNodes&&0<t.removedNodes.length&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(e){n.trigger("selection:update",{data:e})})}},c.prototype.trigger=function(e,t){var i=c.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in n){var s=n[e],o={prevented:!1,name:e,args:t};if(i.call(this,s,o),o.prevented)return void(t.prevented=!0)}i.call(this,e,t)},c.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},c.prototype.open=function(){this.isOpen()||this.trigger("query",{})},c.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},c.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},c.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},c.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},c.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},c.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},c.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];s.isArray(t)&&(t=s.map(t,function(e){return e.toString()})),this.$element.val(t).trigger("change")},c.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},c.prototype.render=function(){var e=s('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},c}),e.define("select2/compat/utils",["jquery"],function(a){return{syncCssClasses:function r(e,t,i){var n,s,o=[];(n=a.trim(e.attr("class")))&&a((n=""+n).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&o.push(this)}),(n=a.trim(t.attr("class")))&&a((n=""+n).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(s=i(this))&&o.push(s)}),e.attr("class",o.join(" "))}}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(a,r){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),i=this.options.get("containerCssClass")||"";a.isFunction(i)&&(i=i(this.$element));var n=this.options.get("adaptContainerCssClass");if(n=n||l,-1!==i.indexOf(":all:")){i=i.replace(":all:","");var s=n;n=function(e){var t=s(e);return null!=t?t+" "+e:e}}var o=this.options.get("containerCss")||{};return a.isFunction(o)&&(o=o(this.$element)),r.syncCssClasses(t,this.$element,n),t.css(o),t.addClass(i),t},e}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(a,r){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),i=this.options.get("dropdownCssClass")||"";a.isFunction(i)&&(i=i(this.$element));var n=this.options.get("adaptDropdownCssClass");if(n=n||l,-1!==i.indexOf(":all:")){i=i.replace(":all:","");var s=n;n=function(e){var t=s(e);return null!=t?t+" "+e:e}}var o=this.options.get("dropdownCss")||{};return a.isFunction(o)&&(o=o(this.$element)),r.syncCssClasses(t,this.$element,n),t.css(o),t.addClass(i),t},e}),e.define("select2/compat/initSelection",["jquery"],function(n){function e(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,e.call(this,t,i)}return e.prototype.current=function(e,t){var i=this;return this._isInitialized?void e.call(this,t):void this.initSelection.call(null,this.$element,function(e){i._isInitialized=!0,n.isArray(e)||(e=[e]),t(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(a){function e(e,t,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===t.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,i)}return e.prototype.current=function(e,t){function n(e,t){var i=[];return e.selected||-1!==a.inArray(e.id,t)?(e.selected=!0,i.push(e)):e.selected=!1,e.children&&i.push.apply(i,n(e.children,t)),i}for(var i=[],s=0;s<this._currentData.length;s++){var o=this._currentData[s];i.push.apply(i,n(o,this.$element.val().split(this._valueSeparator)))}t(i)},e.prototype.select=function(e,t){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+t.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(e){a.map(e,function(e){e.selected=!1})}),this.$element.val(t.id),this.$element.trigger("change")},e.prototype.unselect=function(e,s){var o=this;s.selected=!1,this.current(function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];s.id!=n.id&&t.push(n.id)}o.$element.val(t.join(o._valueSeparator)),o.$element.trigger("change")})},e.prototype.query=function(e,t,i){for(var n=[],s=0;s<this._currentData.length;s++){var o=this._currentData[s],a=this.matches(t,o);null!==a&&n.push(a)}i({results:n})},e.prototype.addOptions=function(e,t){var i=a.map(t,function(e){return a.data(e[0],"data")});this._currentData.push.apply(this._currentData,i)},e}),e.define("select2/compat/matcher",["jquery"],function(r){return function e(o){return function a(e,t){var i=r.extend(!0,{},t);if(null==e.term||""===r.trim(e.term))return i;if(t.children){for(var n=t.children.length-1;0<=n;n--){var s=t.children[n];o(e.term,s.text,s)||i.children.splice(n,1)}if(0<i.children.length)return i}return o(e.term,t.text,t)?i:null}}}),e.define("select2/compat/query",[],function(){function e(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.callback=i,this.options.get("query").call(null,t)},e}),e.define("select2/dropdown/attachContainer",[],function(){function e(e,t,i){e.call(this,t,i)}return e.prototype.position=function(e,t,i){i.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},e}),e.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),e.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),t=function(p){function t(e){var t=e||window.event,i=v.call(arguments,1),n=0,s=0,o=0,a=0,r=0,l=0;if((e=p.event.fix(t)).type="mousewheel","detail"in t&&(o=-1*t.detail),"wheelDelta"in t&&(o=t.wheelDelta),"wheelDeltaY"in t&&(o=t.wheelDeltaY),"wheelDeltaX"in t&&(s=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(s=-1*o,o=0),n=0===o?s:o,"deltaY"in t&&(n=o=-1*t.deltaY),"deltaX"in t&&(s=t.deltaX,0===o&&(n=-1*s)),0!==o||0!==s){if(1===t.deltaMode){var u=p.data(this,"mousewheel-line-height");n*=u,o*=u,s*=u}else if(2===t.deltaMode){var c=p.data(this,"mousewheel-page-height");n*=c,o*=c,s*=c}if(a=Math.max(Math.abs(o),Math.abs(s)),(!m||a<m)&&(f(t,m=a)&&(m/=40)),f(t,a)&&(n/=40,s/=40,o/=40),n=Math[1<=n?"floor":"ceil"](n/m),s=Math[1<=s?"floor":"ceil"](s/m),o=Math[1<=o?"floor":"ceil"](o/m),y.settings.normalizeOffset&&this.getBoundingClientRect){var d=this.getBoundingClientRect();r=e.clientX-d.left,l=e.clientY-d.top}return e.deltaX=s,e.deltaY=o,e.deltaFactor=m,e.offsetX=r,e.offsetY=l,e.deltaMode=0,i.unshift(e,n,s,o),g&&clearTimeout(g),g=setTimeout(h,200),(p.event.dispatch||p.event.handle).apply(this,i)}}function h(){m=null}function f(e,t){return y.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var g,m,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(p.event.fixHooks)for(var n=e.length;n;)p.event.fixHooks[e[--n]]=p.event.mouseHooks;var y=p.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t;p.data(this,"mousewheel-line-height",y.getLineHeight(this)),p.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null;p.removeData(this,"mousewheel-line-height"),p.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=p(e),i=t["offsetParent"in p.fn?"offsetParent":"parent"]();return i.length||(i=p("body")),parseInt(i.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return p(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};p.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],t):"object"==typeof exports?module.exports=t:t(i),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(s,e,o,t){if(null==s.fn.select2){var a=["open","close","destroy"];s.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=s.extend(!0,{},t);new o(s(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var i,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=s(this).data("select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=e[t].apply(e,n)}),-1<s.inArray(t,a)?this:i}}return null==s.fn.select2.defaults&&(s.fn.select2.defaults=t),o}),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return i.fn.select2.amd=e,t}),$(function(){$("input[name=d_from], input[name=d_to]").datepicker({dateFormat:"yyyy-mm-dd"}),$("form[name=categories-edit-stores] input[type=checkbox]").click(function(){var e=$(this),t=$("form[name=categories-edit-stores]");if(e.is(":checked")&&"0"!=e.attr("data-parent-id"))t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1).prop("checked",!0);else if(!e.is(":checked")&&"0"!=e.attr("data-parent-id")){var i=!0;t.find("input[data-parent-id="+e.attr("data-parent-id")+"]").each(function(){$(this).is(":checked")&&(i=!1)}),i&&t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1)}}),$(".select2-users").select2({ajax:{url:"/admin/users/list",type:"post",dataType:"json",delay:250,data:function(e){return{email:e.term}},processResults:function(e){return{results:e}},cache:!0},placeholder:"Выберите пользователя",minimumInputLength:1}),$(".input-datepicker").datepicker({dateFormat:"yyyy-mm-dd"}),$("#charity-checkbox-0").click(function(){var t=this.checked;Array.from(document.getElementsByClassName("charity-checkbox")).forEach(function(e){e.checked=t})}),$(".ajax-confirm").on("click",function(e){e.preventDefault(),$this=$(this),data={question:$this.data("question")||"Вы увуренны?",title:$this.data("title")||"Подтверждение действия",callbackYes:function(){$this=$(this),$.post("/admin/stores/import-cat/id:"+$this.data("store"),function(e){e.error?notification.notifi({message:e.error,type:"err"}):location.reload()},"json").fail(function(){notification.notifi({message:"Ошибка передачи данных",type:"err"})})},obj:$this},notification.confirm(data)}),$(".form-group input.toggle_items_check").on("click",function(e){$(this).closest(".form-group").find("input[type=checkbox]").prop("checked",$(this).prop("checked"))})}),$(function(){$(".get_admitad").on("click",function(e){e.preventDefault(),href=this.href||"",$(".user_data").html(""),ad=$(".admitad_data"),ad.addClass("loading"),ad.removeClass("normal_load"),ad.text(""),tr=ad.closest("tr"),ids=[];for(var t=0;t<tr.length;t++)id=tr.eq(t).data("key"),id&&ids.push(id);return 0==ids.length?(ad.removeClass("loading"),void alert("Нет заказов для проверки")):($.post("/admin/payments/admitad-test",{ids:ids,update:0<href.indexOf("update")?1:0},function(e){ad=$(".admitad_data"),ad.text("данные не найдены"),ad.removeClass("loading"),tr=ad.closest("tr");for(var t=0;t<tr.length;t++){var i=tr.eq(t);if(id=i.data("key"),e[id]){tds=i.find(".admitad_data");for(var n=0;n<tds.length;n++){var s=tds.eq(n);key=s.data("col"),e[id][key]&&(s.html(e[id][key]),s.addClass("normal_load"))}}}e.user_data&&(user=e.user_data,user_data="<H2>Баланс пользователя "+user.email+" ("+user.uid+") обновлен</H2>",user_data+="<table class='table table-sum'>",user_data+="<tr>",user_data+="<th></th>",user_data+="<th>Старые данные</th>",user_data+="<th>Новые данные</th>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_pending+"</td>",user_data+="<td class='value'>"+user["new"].cnt_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_pending+"</td>",user_data+="<td class='value'>"+user["new"].sum_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_declined+"</td>",user_data+="<td class='value'>"+user["new"].cnt_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_declined+"</td>",user_data+="<td class='value'>"+user["new"].sum_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].cnt_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].sum_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Баланс (общий)</td>",user_data+="<td class='value'>"+user.old.balans+"</td>",user_data+="<td class='value'>"+user["new"].balans+"</td>",user_data+="</tr>",user_data+="</table>",$(".user_data").html(user_data))},"json").fail(function(){ad.removeClass("loading"),alert("Ошибка обработки запроса")}),!1)})}),void 0===mihaildev||!mihaildev){var mihaildev={};mihaildev.elFinder={openManager:function(e){var t="menubar=no,toolbar=no,location=no,directories=no,status=no,fullscreen=no";"auto"==e.width&&(e.width=$(window).width()/1.5),"auto"==e.height&&(e.height=$(window).height()/1.5),t=(t=t+",width="+e.width)+",height="+e.height,window.open(e.url,"ElFinderManager"+e.id,t).focus()},functions:{},register:function(e,t){this.functions[e]=t},callFunction:function(e,t){return this.functions[e](t,e)},functionReturnToInput:function(e,t){return jQuery("#"+t).val(e.url),!0}}}var megaslider=function(){var n,a,r,p,s,h,f,g=!1,u="section#mega_slider",o=!1,c=0,l=1,m=-1,d=300,v=700,y=0,_=6e3,b=["slider__text-lt","slider__text-ct","slider__text-rt","slider__text-lc","slider__text-cc","slider__text-rc","slider__text-lb","slider__text-cb","slider__text-rb"],x=["Лево верх","центр верх","право верх","Лево центр","центр","право центр","Лево низ","центр низ","право низ"],w=["show_no_delay","show_delay_05","show_delay_10","show_delay_15","show_delay_20","show_delay_25","show_delay_30"],k=["hide_no_delay","hide_delay_05","hide_delay_10","hide_delay_15","hide_delay_20"],C=["no","yes"],D=["","fixed__full-height"],A=["none","bordo","black","blue","dark-blue","red","orange","green","light-green","dark-green","pink","yellow"],E=["not_animate","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","fadeIn","fadeInDown","fadeInLeft","fadeInRight","fadeInUp","flipInX","flipInY","lightSpeedIn","rotateIn","rotateInDownLeft","rotateInUpLeft","rotateInUpRight","jackInTheBox","rollIn","zoomIn"],T=["not_animate","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeOut","fadeOutDown","fadeOutLeft","fadeOutRight","fadeOutUp","flipOutX","lipOutY","lightSpeedOut","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","hinge","rollOut"];function S(e){if(0!=e.length){e.wrap('<div class="select_img">'),(e=e.parent()).append('<button type="button" class="file_button"><i class="mce-ico mce-i-browse"></i></button>');for(var t=0;t<e.length;t++){var i=e.eq(t).find("input");i.attr("id")||i.attr("id","file_"+t+"_"+Date.now());var n=i.attr("id");mihaildev.elFinder.register(n,function(e,t){return $("#"+t).val(e.url).change(),!0})}$(document).on("click",".file_button",function(){var e=$(this).prev().attr("id");mihaildev.elFinder.openManager({url:"/manager/elfinder?filter=image&callback="+e+"&lang=ru",width:"auto",height:"auto",id:e})})}}function M(e){var t,i='<input class="'+(e.inputClass||"")+'" value="'+(e.value||"")+'">';(e.label&&(i="<label><span>"+e.label+"</span>"+i+"</label>"),e.parent&&(i="<"+e.parent+">"+i+"</"+e.parent+">"),i=$(i),e.onChange)&&(t=e.bind?(e.bind.input=i.find("input"),e.onChange.bind(e.bind)):e.onChange.bind(i.find("input")),i.find("input").on("change",t));return i}function O(s){var e=$("<select/>"),t=g[0][s.gr];!1!==s.index&&(t=t[s.index]),t[s.param]?s.value=t[s.param]:s.value=0,s.start_option&&e.append(s.start_option);for(var i=0;i<s.list.length;i++){var n,o=s.list[i];0==s.val_type?n=s.list[i]:1==s.val_type?n=i:2==s.val_type&&(n=i,o=s.val_list[i]);var a=n==s.value?"selected":"";"selected"==a&&e.attr("t_val",s.list[i]);var r='<option value="'+n+'" '+a+">"+o+"</option>";2==s.val_type&&(r=$(r).attr("code",s.list[i])),e.append(r)}if(e.on("change",function(){var e=(s=this).el.val(),t=s.el.find("option[value="+e+"]"),i=t.text(),n=t.attr("code");n||(n=i),!1!==s.index?g[0][s.gr][s.index][s.param]=e:g[0][s.gr][s.param]=e,s.obj.removeClass(s.prefix+s.el.attr("t_val")),s.obj.addClass(s.prefix+n),s.el.attr("t_val",n),$("textarea#slide_data").text(JSON.stringify(g[0]))}.bind({el:e,obj:s.obj,gr:s.gr,index:s.index,param:s.param,prefix:s.prefix||""})),s.parent){var l=$("<"+s.parent+"/>");return l.append(e),l}return e}function F(e){var t,i=[];return 0==e.type&&i.push("<span>Show animation</span>"),i.push(O({list:E,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"show_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Show delay</span>"),i.push(O({list:w,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"show_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(i.push("<br/>"),i.push("<span>Hide animation</span>")),i.push(O({list:T,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"hide_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Hide delay</span>"),i.push(O({list:k,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"hide_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(t=$('<div class="anim_sel"/>')).append(i),1==e.type&&(t=i),t}function I(e){var i=h.find("tr").length-1;e||(e={img:"",full_height:0,pos:0,show_delay:1,show_animation:"lightSpeedIn",hide_delay:1,hide_animation:"bounceOut"},g[0].fixed.push(e),P(e,$("#mega_slider .fixed_group"),!0));var t=$("<tr/>");t.append('<td class="td_counter"/>'),t.append(M({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{gr:"fixed",index:i,param:"img",obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer")},onChange:function(e){e.preventDefault();this.obj.css("background-image","url("+this.input.val()+")"),g[0].fixed[this.index].img=this.input.val(),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),t.append(O({list:b,val_list:x,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"pos",parent:"td"})),t.append(O({list:D,val_list:C,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"full_height",parent:"td"})),t.append(F({type:1,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer"),gr:"fixed",index:i,parent:"td"}));var n=$("<button/>",{text:"Удалить"});n.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].fixed.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:n,slider_data:g}));var s=$("<td/>").append(n);return t.append(s),h.append(t),{editor:t,data:e}}function j(e){var i=f.find("tr").length-1;e||(e={img:"",z:1},g[0].paralax.push(e),N(e,$("#mega_slider .parallax__group")));var t=$("<tr/>");t.append('<td class="td_counter"/>'),t.append(M({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span")},onChange:function(e){e.preventDefault();this.obj.css("background-image","url("+this.input.val()+")"),g[0].paralax[this.index].img=this.input.val(),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),t.append(O({list:b,val_list:x,val_type:2,obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span"),gr:"paralax",index:i,param:"pos",parent:"td",start_option:'<option value="" code="">на весь экран</option>'})),t.append(M({value:e.z,label:!1,parent:"td",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i)},onChange:function(e){e.preventDefault();this.obj.attr("z",this.input.val()),g[0].paralax[this.index].z=this.input.val(),$("textarea#slide_data").text(JSON.stringify(g[0]))}}));var n=$("<button/>",{text:"Удалить"});n.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].paralax.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:n,slider_data:g}));var s=$("<td/>").append(n);return t.append(s),f.append(t),{editor:t,data:e}}function R(e,t){var i=$("<div/>",{"class":"animation_layer"});return"undefined"!=typeof t.show_delay&&(i.addClass(w[t.show_delay]),t.show_animation&&i.addClass("slide_"+t.show_animation)),"undefined"!=typeof t.hide_delay&&(i.addClass(k[t.hide_delay]),t.hide_animation&&i.addClass("slide_"+t.hide_animation)),e.append(i),e}function N(e,t){var n=$('<div class="parallax__layer">');n.attr("z",e.z||10*i);var s=$("<span class='slider__text'/>");e.pos&&s.addClass(b[e.pos]),s.css("background-image","url("+e.img+")"),n.append(s),t.append(n)}function P(e,t,i){var n=$("<div class='fixed__layer'/>");n.addClass(b[e.pos]),e.full_height&&n.addClass("fixed__full-height"),(n=R(n,e)).find(".animation_layer").css("background-image","url("+e.img+")"),i?t.find(".slider__href").closest(".fixed__layer").before(n):t.append(n)}function L(){if(!$("#mega_slider").hasClass("stop_slide")){var e=$(".slide_select_box .slide_select"),t=e.length,i=$(".slide_select_box .slider-active").index()+1;t<=i&&(i=0),e.eq(i).click(),s=setTimeout(L,_)}}function B(e){var t=$("<img/>");t.on("load",function(){0==--n&&(a.append(function l(e){var t=$('<div class="slide"/>'),i=$('<a class="mob_bg" href="'+e.button.href+'"/>');if(i.css("background-image","url("+e.mobile+")"),t.append(i),m)return t;if(e.fon&&t.css("background-image","url("+e.fon+")"),e.paralax&&0<e.paralax.length){for(var n=$('<div class="parallax__group"/>'),s=0;s<e.paralax.length;s++)N(e.paralax[s],n);t.append(n)}var o=$('<div class="fixed_group"/>');for(s=0;s<e.fixed.length;s++)P(e.fixed[s],o);var a=$("<div class='fixed__layer'/>");a.addClass(b[e.button.pos]);var r=$("<a class='slider__href'/>");return r.attr("href",e.button.href),r.text(e.button.text),r.addClass(e.button.color),(a=R(a,e.button)).find("div").append(r),o.append(a),t.append(o),t}(g[y])),r.find("li").eq(y).removeClass("disabled"),0==y&&(a.find(".slide").addClass("first_show").addClass("slider-active"),r.find("li").eq(0).addClass("slider-active"),p||(s&&clearTimeout(s),s=setTimeout(function(){$(this).find(".first_show").removeClass("first_show")}.bind(a),_)),!1===m&&(o=$(u+" .slider-active .parallax__group>*"),c=0,setInterval(z,100)),p?function d(){$("#w1").remove(),$("#w1_button").remove(),g[0].mobile=g[0].mobile.split("?")[0];var e=$("#mega_slider_controle"),t=$('<div class="btn_box"/>');e.append("<h2>Управление</h2>"),e.append($("<textarea/>",{text:JSON.stringify(g[0]),id:"slide_data",name:p}));var i=$('<button class=""/>').text("Активировать слайд");t.append(i),i.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).addClass("slider-active"),$("#mega_slider .slide").eq(0).removeClass("hide_slide")}),i=$('<button class=""/>').text("Деактивировать слайд"),t.append(i),i.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).removeClass("slider-active"),$("#mega_slider .slide").eq(0).addClass("hide_slide")}),e.append(t),e.append("<h2>Общие параметры</h2>"),e.append(M({value:g[0].mobile,label:"Слайд для телефона",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),g[0].mobile=$(this).val(),$(".mob_bg").eq(0).css("background-image","url("+g[0].mobile+")"),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),e.append(M({value:g[0].fon,label:"Осноной фон",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),g[0].fon=$(this).val(),$("#mega_slider .slide").eq(0).css("background-image","url("+g[0].fon+")"),$("textarea#slide_data").text(JSON.stringify(g[0]))}}));var n=$('<div class="btns"/>');n.append("<h3>Кнопка перехода(для ПК версии)</h3>"),n.append(M({value:g[0].button.text,label:"Текст",onChange:function(e){e.preventDefault(),g[0].button.text=$(this).val(),$("#mega_slider .slider__href").eq(0).text(g[0].button.text),$("textarea#slide_data").text(JSON.stringify(g[0]))}}));var s=$("#mega_slider .slider__href").eq(0);n.append(M({value:g[0].button.href,label:"Ссылка",onChange:function(e){e.preventDefault(),g[0].button.href=$(this).val(),$("#mega_slider .slider__href").eq(0).attr("href",g[0].button.href),$("textarea#slide_data").text(JSON.stringify(g[0]))}})),n.append("<br/>");var o=$("<label/>");n.append(o),o.append("<span>Оформление кнопки</span>"),o.append(O({list:A,val_type:0,obj:s,gr:"button",index:!1,param:"color"})),n.append("<br/>"),o=$("<label/>"),n.append(o),o.append("<span>Положение кнопки</span>"),o.append(O({list:b,val_list:x,val_type:2,obj:s.parent().parent(),gr:"button",index:!1,param:"pos"})),n.append(F({type:0,obj:s.parent(),gr:"button",index:!1})),e.append(n),(a=$('<div class="fixed_layer"/>')).append("<h2>Статические слои</h2>");var a,r,l,u="<th>№</th><th>Картинка</th><th>Положение</th><th>Слой на всю высоту</th><th>Анимация появления</th><th>Задержка появления</th><th>Анимация исчезновения</th><th>Задержка исчезновения</th><th>Действие</th>";if(h=$('<table border="1"><tr>'+u+"</tr></table>"),(r=g[0].fixed)&&0<r.length)for(var c=0;c<r.length;c++)I(r[c]);if(a.append(h),(l=$("<button/>",{text:"Добавить слой"})).on("click",function(e){e.preventDefault(),S((r=I(!1)).editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:g})),a.append(l),e.append(a),(a=$('<div class="paralax_layer"/>')).append("<h2>Паралакс слои</h2>"),u="<th>№</th><th>Картинка</th><th>Положение</th><th>Удаленность (целое положительное число)</th><th>Действие</th>",f=$('<table border="1"><tr>'+u+"</tr></table>"),(r=g[0].paralax)&&0<r.length)for(c=0;c<r.length;c++)j(r[c]);a.append(f),(l=$("<button/>",{text:"Добавить слой"})).on("click",function(e){e.preventDefault(),S((r=j(!1)).editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:g})),a.append(l),e.append(a),S(e.find(".fileSelect"))}():(s&&clearTimeout(s),s=setTimeout(L,_),$(".slide_select_box").on("click",".slide_select",function(){var e=$(this);if(!e.hasClass("slider-active")){var t=e.index();$(".slide_select_box .slider-active").removeClass("slider-active"),e.addClass("slider-active"),$(u+" .slide.slider-active").removeClass("slider-active"),$(u+" .slide").eq(t).addClass("slider-active"),o=$(u+" .slider-active .parallax__group>*")}}),$("#mega_slider").hover(function(){s&&clearTimeout(s),$("#mega_slider").addClass("stop_slide")},function(){s=setTimeout(L,_),$("#mega_slider").removeClass("stop_slide")}))),++y<g.length&&q())}).on("error",function(){n--}),t.prop("src",e)}function q(){var e=g[y];if(!(n=1)===m){if(n++,B(e.fon),e.paralax&&0<e.paralax.length){n+=e.paralax.length;for(var t=0;t<e.paralax.length;t++)B(e.paralax[t].img)}if(e.fixed&&0<e.fixed.length){n+=e.fixed.length;for(t=0;t<e.fixed.length;t++)B(e.fixed[t].img)}}B(e.mobile)}function z(){if(!o)return!1;for(var e=(c-10)/2,t=0;t<o.length;t++){var i=o.eq(t),n=i.attr("z"),s="rotate3d(0.1,0.8,0,"+e+"deg) scale("+(1+.5*n)+") translateZ(-"+(10+20*n)+"px)";i.css("transform",s)}20<=(c+=.1*l)&&(l=-l),c<=0&&(l=-l)}return S($(".fileSelect")),{init:function H(e,t){g=e,p=t;var i=$(u);i.html(""),a=$("<div/>",{"class":"slides"});var n=$("<div/>",{"class":"slide_control"});r=$("<ul/>",{"class":"slide_select_box"}),i.html('<div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>'),function o(e){var t=performance.now(),i=$("<img/>");function n(){var e=performance.now();if(i=$(this),e-=parseInt(i.attr("time")),d<e)m=!0;else{var t=screen.height>screen.width?screen.height:screen.width;m=t<v}1==m&&$(u).addClass("mobile_mode"),y=0,q(),$(".sk-folding-cube").remove()}i.attr("time",t),i.on("load",n()),0<g.length?(g[0].mobile=g[0].mobile+"?r="+Math.random(),i.prop("src",g[0].mobile)):n().bind(i)}(e[0]);for(var s=0;s<e.length;s++)r.append('<li class="slide_select disabled"/>');i.append(a),n.append(r),i.append(n)}}}();!function(s){function e(e){this.init(e)}function o(){this["this"].parent().removeClass("ajaxSavingFailed"),this["this"].parent().removeClass("ajaxSavingOk")}e.prototype.init=function(e){tagName=e.tagName.toLowerCase(),e=s(e),"input"==tagName||"select"==tagName?obj=e:obj=e.find("input,select"),post_url=e.attr("save_url"),uid=e.attr("uid");for(var t=0;t<obj.length;t++){var i={url:post_url,id:uid,"this":obj.eq(t)};i["this"].off("change").on("change",function(){var e=this,t=e["this"].val(),i=e["this"].attr("type");i&&"checkbox"==i.toLowerCase()&&(e["this"].prop("checked")||(t=0));var n={id:e.id,value:t,name:e["this"].attr("name")};e["this"].parent().addClass("ajaxInSaving"),s.post(e.url,n,function(){this["this"].parent().removeClass("ajaxInSaving"),this["this"].parent().addClass("ajaxSavingOk"),setTimeout(o.bind(this),3e3)}.bind(e)).fail(function(){this["this"].parent().removeClass("ajaxInSaving"),this["this"].parent().addClass("ajaxSavingFailed"),setTimeout(o.bind(this),4e3)}.bind(e))}.bind(i))}},s.fn.ajax_save=function(){return s(this).each(function(){new e(this)}),this}}(jQuery),$(".ajax_save").ajax_save(),$(function(){function e(){$this=$(this),post={id:$this.attr("uid"),type:$this.attr("mode")},$.post($this.attr("url"),post,function(e){if(e&&"err"==e)return msg=$this.data("remove-error"),msg||(msg="Невозможно удалить элемент"),void notification.notifi({message:msg,type:"err"});mode=$this.attr("mode"),mode||(mode="rm"),"rm"==mode&&(rm=$this.closest(".to_remove"),rm_class=rm.attr("rm_class"),rm_class&&$(rm_class).remove(),rm.remove(),notification.notifi({message:"Успешное удаление.",type:"info"})),"reload"==mode&&(location.reload(),location.href=location.href)}).fail(function(){notification.notifi({message:"Ошибка удалния",type:"err"})})}$("body").on("click",".ajax_remove",function(){notification.confirm({callbackYes:e,obj:$(this),notyfy_class:"notify_box-alert"})})});var notification=function(){var conteiner,mouseOver=0,timerClearAll=null,animationEnd="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",time=1e4,notification_box=!1,is_init=!1,confirm_opt={callbackYes:!1,callbackNo:!1,obj:!1,buttonTag:"div",buttonYesDop:"",buttonNoDop:""},alert_opt={title:"",question:"message",callbackYes:!1,buttonTag:"div",obj:!1};function testIphone(){/(iPhone|iPad|iPod).*(OS 11)/.test(navigator.userAgent)&&(notification_box.css("position","absolute"),notification_box.css("top",$(document).scrollTop()))}function init(){is_init=!0,0<(notification_box=$(".notification_box")).length||($("body").append("<div class='notification_box'></div>"),(notification_box=$(".notification_box")).on("click",".notify_control",closeModal),notification_box.on("click",".notify_close",closeModal),notification_box.on("click",closeModalFon))}function closeModal(){$("html").removeClass("show_notifi"),$(".notification_box .notify_content").html("")}function closeModalFon(e){"notification_box"==(e.target||e.srcElement).className&&closeModal()}var _setUpListeners=function(){$("body").on("click",".notification_close",_closePopup),$("body").on("mouseenter",".notification_container",_onEnter),$("body").on("mouseleave",".notification_container",_onLeave)},_onEnter=function(e){e&&e.preventDefault(),null!=timerClearAll&&(clearTimeout(timerClearAll),timerClearAll=null),conteiner.find(".notification_item").each(function(e){var t=$(this).data("option");t.timer&&clearTimeout(t.timer)}),mouseOver=1},_onLeave=function(){conteiner.find(".notification_item").each(function(e){$this=$(this);var t=$this.data("option");0<t.time&&(t.timer=setTimeout(_closePopup.bind(t.close),t.time-1500+100*e),$this.data("option",t))}),mouseOver=0},_closePopup=function(e){e&&e.preventDefault();var t=$(this).parent();t.on(animationEnd,function(){$(this).remove()}),t.addClass("notification_hide")};function alert(e){e||(e={}),alert_opt=objects(alert_opt,{buttonYes:lg("yes")}),e=objects(alert_opt,e),is_init||init(),testIphone(),notyfy_class="notify_box ",e.notyfy_class&&(notyfy_class+=e.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+="<div>"+e.title+"</div>",box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=e.question,box_html+="</div>",(e.buttonYes||e.buttonNo)&&(box_html+='<div class="notify_control">',e.buttonYes&&(box_html+="<"+e.buttonTag+' class="notify_btn_yes" '+e.buttonYesDop+">"+e.buttonYes+"</"+e.buttonTag+">"),e.buttonNo&&(box_html+="<"+e.buttonTag+' class="notify_btn_no" '+e.buttonNoDop+">"+e.buttonNo+"</"+e.buttonTag+">"),box_html+="</div>"),box_html+="</div>",notification_box.html(box_html),setTimeout(function(){$("html").addClass("show_notifi")},100)}function confirm(data){if(data||(data={}),confirm_opt=objects(confirm_opt,{title:lg("deleting"),question:lg("are_you_sure_to_delete"),buttonYes:lg("yes"),buttonNo:lg("no")}),data=objects(confirm_opt,data),"string"==typeof data.callbackYes){var code="data.callbackYes = function(){"+data.callbackYes+"}";eval(code)}is_init||init(),testIphone(),notyfy_class="notify_box ",data.notyfy_class&&(notyfy_class+=data.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+=data.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=data.question,box_html+="</div>",(data.buttonYes||data.buttonNo)&&(box_html+='<div class="notify_control">',data.buttonYes&&(box_html+='<div class="notify_btn_yes">'+data.buttonYes+"</div>"),data.buttonNo&&(box_html+='<div class="notify_btn_no">'+data.buttonNo+"</div>"),box_html+="</div>"),box_html+="</div>",notification_box.html(box_html),0!=data.callbackYes&&notification_box.find(".notify_btn_yes").on("click",data.callbackYes.bind(data.obj)),0!=data.callbackNo&&notification_box.find(".notify_btn_no").on("click",data.callbackNo.bind(data.obj)),setTimeout(function(){$("html").addClass("show_notifi")},100)}function notifi(e){e||(e={});var t={time:e.time||0===e.time?e.time:time};conteiner||(conteiner=$("<ul/>",{"class":"notification_container"}),$("body").append(conteiner),_setUpListeners());var i=$("<li/>",{"class":"notification_item"});e.type&&i.addClass("notification_item-"+e.type);var n=$("<span/>",{"class":"notification_close"});t.close=n,i.append(n);var s=$("<div/>",{"class":"notification_content"});if(e.title&&0<e.title.length){var o=$("<h5/>",{"class":"notification_title"});o.html(e.title),s.append(o)}var a=$("<div/>",{"class":"notification_text"});if(a.html(e.message),e.img&&0<e.img.length){var r=$("<div/>",{"class":"notification_img"});r.css("background-image","url("+e.img+")");var l=$("<div/>",{"class":"wrap"});l.append(r),l.append(a),s.append(l)}else s.append(a);i.append(s),conteiner.append(i),0<t.time&&(t.timer=setTimeout(_closePopup.bind(n),t.time)),i.data("option",t)}return{alert:alert,confirm:confirm,notifi:notifi}}();function ajaxForm(e){window.File&&window.FileReader&&window.FileList&&window.Blob;var t,i={error_class:".has-error"},p=!1;function n(e){e.preventDefault();var t=+new Date;if(t-p<2e3)return!1;p=t;var i=this,n=i.form,s=i.wrap;i.wrap_html=s.html();for(var o=!0,a=n.find('input.required, textarea.required, input[id="support-recaptcha"]'),r=0;r<a.length;r++){var l=a.eq(r).closest(".form-group").find(".help-block"),u=l&&l.data("message")?l.data("message"):lg("required");a.eq(r).val().length<1?($(l).closest(".form-group").addClass("has-error"),l.html(u),l.addClass("help-block-error"),o=!1):(l.html(""),$(l).closest(".form-group").removeClass("has-error"),l.removeClass("help-block-error"))}if(!o)return!1;if(n.yiiActiveForm){n.off("afterValidate"),n.on("afterValidate",function d(e){0==data.form.find(data.param.error_class).length&&h(this);return!0}.bind(i)),n.yiiActiveForm("validate",!0);var c=n.data("yiiActiveForm");return c&&(c.validated=!0,n.data("yiiActiveForm",c),n.yiiActiveForm("validate"),o=c.validated),e.stopImmediatePropagation(),e.stopPropagation(),!1}if(!(o=o&&0==n.find(i.param.error_class).length))return!1;e.stopImmediatePropagation(),e.stopPropagation(),h(i)}function h(e){var t=e.form;t.serializeObject||addSRO();var i=t.serializeObject();t.addClass("loading"),t.html(""),e.wrap.html('<div style="text-align:center;"><p>'+lg("sending_data")+"</p></div>"),e.url+=(0<e.url.indexOf("?")?"&":"?")+"rc="+Math.random(),"undefined"!=typeof lang&&-1==e.url.indexOf(lang.href_prefix)&&(e.url="/"+lang.href_prefix+e.url,e.url=e.url.replace("//","/").replace("//","/")),$.post(e.url,i,function a(e){p=+new Date;var t=this.form,i=this.wrap,n=this.wrap_html;if(e.render?(e.notyfy_class="notify_white",notification.alert(e)):(i.removeClass("loading"),t.removeClass("loading"),e.html?(i.html(e.html),ajaxForm(i)):e.error||(t.removeClass("loading"),i.html(n),t.find("input[type=text],textarea").val(""),ajaxForm(i))),"object"==typeof e.error)for(var s in e.error)notification.notifi({type:"err",title:e.title?e.title:lg("error"),message:e.error[s]});else if(Array.isArray(e.error))for(var o=0;o<e.error.length;o++)notification.notifi({type:"err",title:e.title?e.title:lg("error"),message:e.error[o]});else(e.error||e.message)&&notification.notifi({type:!1===e.error?"success":"err",title:e.title?e.title:!1===e.error?lg("success"):lg("error"),message:e.message?e.message:e.error})}.bind(e),"json").fail(function n(){p=+new Date,this.form;var e=this.wrap;e.removeClass("loading"),e.html("<h3>"+lg("sorry_not_expected_error")+"<h3>"+lg("it_happens_sometimes")),ajaxForm(e)}.bind(e))}e.find("[required]").addClass("required").removeAttr("required");for(var s=0;s<e.length;s++)t=e.eq(s),form=t.find("form"),data={form:form,param:i,wrap:t},data.url=form.attr("action")||location.href,data.method=form.attr("method")||"post",form.unbind("submit"),form.on("submit",n.bind(data));"function"==typeof placeholder&&placeholder()}function addSRO(){$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}}$("[ref=popup]").on("click",function(e){e.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.alert(data)}),$("[ref=confirm]").on("click",function(e){e.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.confirm(data)}),$(".disabled").on("click",function(e){e.preventDefault(),$this=$(this),data=$this.data(),data.button_yes&&(data.buttonYes=data.button_yes),!1===data.button_yes&&(data.buttonYes=!1),notification.alert(data)}),$(function(){$("body").on("click",".add_shop_element",function(){$this=$(this),post={code:$this.attr("code"),parent:$this.attr("parent"),type:$this.attr("mode")},updateElement=function t(e){$this=$(this),mode=$this.attr("mode"),"rate"==mode&&($parent=$this.closest(".acordion_content"),$parent=$parent.find("table"),(e=$(e)).ajax_save(),$parent.append(e)),"tariff"==mode&&($parent=$this.closest(".acordion_content"),(e=$(e)).find(".ajax_save").ajax_save(),$parent.append(e)),"action"==mode&&($parent=$this.closest(".cpa_box"),(e=$(e)).find(".ajax_save").ajax_save(),$parent.append(e)),"cpa"==mode&&(e=JSON.parse(e),$parent=$this.closest(".tarif_select_blk"),$parent.prepend(e.tab_head_suf),$parent.find(".tab_control").append(e.tab_head_but).ajax_save(),(e=$(e.tab_body)).find(".ajax_save").ajax_save(),$parent.find(".content_tab").append(e))}.bind($this),$.post("/admin/stores/ajax_insert/"+$this.attr("mode"),post,updateElement).fail(function(){alert("Ошибка добавления")})}),$("body").on("click",".cpa_box_change_store",function(){$(".edit_blk_store").toggleClass("hidden")})}),addSRO();var accordionControl=$(".accordion .accordion-control");accordionControl.on("click",function(e){return e.preventDefault(),$this=$(this),$accordion=$this.closest(".accordion"),$accordion.hasClass("open")?($accordion.find(".accordion-content").hide(300),$accordion.removeClass("open")):($accordion.find(".accordion-content").show(300),$accordion.addClass("open")),!1}),accordionControl.show(),objects=function(e,t){var i,n=t;for(i in e)e.hasOwnProperty(i)&&(n[i]=i in t?t[i]:e[i]);return n},$(document).ready(function(){function e(){data=this,0==data.type?data.img.attr("src",data.src):(data.img.css("background-image","url("+data.src+")"),data.img.removeClass("no_ava"))}imgs=$("section:not(.navigation)").find(".logo img");for(var t=0;t<imgs.length;t++)img=imgs.eq(t),i=img.attr("src"),img.attr("src","/images/template-logo.jpg"),data={src:i,img:img,type:0},image=$("<img/>",{src:i}).on("load",e.bind(data));imgs=$(".comment-photo");for(t=0;t<imgs.length;t++)if(img=imgs.eq(t),!img.hasClass("no_ava")){var i=img.css("background-image");i=(i=i.replace('url("',"")).replace('")',""),img.addClass("no_ava"),img.css("background-image","url(/images/no_ava.png)"),data={src:i,img:img,type:1},image=$("<img/>",{src:i}).on("load",e.bind(data))}}),function(){for(els=$(".ajax_load").not("a"),i=0;i<els.length;i++)el=els.eq(i),url=el.attr("res"),$.get(url,function(e){$this=$(this),$this.html(e),ajaxForm($this)}.bind(el))}(),$("input[type=file]").on("change",function(e){var t=e.target.files[0];if(!t.type.match("image.*"))return!1;var i,n=new FileReader;data={el:this,f:t},n.onload=(i=data,function(e){img=$('[for="'+i.el.name+'"]'),0<img.length&&img.attr("src",e.target.result)}),n.readAsDataURL(t)}),$("body").on("click","a.ajaxFormOpen",function(e){e.preventDefault(),href=this.href.split("#"),href=href[href.length-1],data={buttonYes:!1,notyfy_class:"notify_white loading",question:""},modal_class=$(this).data("modal-class"),notification.alert(data),$.get("/"+href,function(e){$(".notify_box").removeClass("loading"),$(".notify_box .notify_content").html(e.html),ajaxForm($(".notify_box .notify_content")),modal_class&&$(".notify_box .notify_content .row").addClass(modal_class)},"json")}),$(".ajax-action").click(function(e){e.preventDefault();var t=$(this).data("value"),i=$(this).data("param"),n=$(this).attr("href"),s=$("#grid-ajax-action").yiiGridView("getSelectedRows");if(0<s.length){if(!confirm("Подтвердите изменение записей"))return null;var o=$(this).closest(".ajax-action-content"),a=$(this).data();o?($(o).find("input,select").each(function(e,t){a[$(t).attr("name")]=$(t).val()}),a.id=s):a={status:t,param:i,id:s},$.ajax({url:n,type:"post",dataType:"json",data:a}).done(function(e){$("#grid-ajax-action").yiiGridView("applyFilter"),0!=e.error?notification.notifi({message:"Произошла ошибка!",type:"err"}):notification.notifi({message:"Операция выполнена!",type:"success"})}).fail(function(e){302!=e.status&&notification.notifi({message:"Произошла ошибка!",type:"err"})})}else notification.notifi({message:"Необходимо выбрать элементы!",type:"err"})}),$(document).ready(function(){$(".editible[disabled]").on("click",function(){$(this).prop("disabled",!1)}),$(".editible[disabled]").on("mousedown",function(){$(this).prop("disabled",!1)}),btn='<button class=unlock><i class="fa fa-unlock fa-4" aria-hidden="true"></i></button>',btn=$(btn),btn.on("click",function(e){return e.preventDefault(),$this=$(this),inp=$this.prev(),inp.prop("disabled",!1),!1}),$(".editible[disabled]").after(btn)}),$(function(){({control:{headerStoresMenu:$("#top").find(".submenu-handl"),storesSubmenus:$("#top").find(".submenu-handl").find(".submenu"),events:function(){var t=this;t.headerStoresMenu.hover(function(){var e=$(this).find(".submenu");991<$(window).width()&&(clearTimeout(t.storeHide),t.storesSubmenus.css("display","none"),t.storeShow=setTimeout(function(){e.clearQueue(),e.css("display","block").animate({opacity:1},350)},200))},function(){var e=$(this).find(".submenu");991<$(window).width()&&(clearTimeout(t.storeShow),t.storeHide=setTimeout(function(){e.clearQueue(),e.animate({opacity:0},200,function(){$(this).css("display","none")})},300))})}}}).control.events()}),$(document).ready(function(){var n=screen.width-40;function e(e){var t=e.parent();if(0!=t.length&&"A"!=t[0].tagName){m_w=t.width()-30;var i=e.width();e.width("auto"),"IMG"==e[0].tagName&&i>e.width()&&(i=e.width()),50<n&&m_w>n&&(m_w=n),i>m_w>m_w?("IFRAME"==e[0].tagName&&(k=i/m_w,e.height(e.height()/k)),e.width(m_w)):e.width(i)}}function t(){e($(this))}var s=$(".container img,.container iframe");for($(".container img").height("auto"),i=0;i<s.length;i++)if(el=s.eq(i),"IFRAME"==el[0].tagName)e(el);else{var o=el.attr("src");image=$("<img/>",{src:o}),image.on("load",t.bind(el))}}),window.opener&&(document.referrer.indexOf("secretdiscounter")<0||(href=window.opener.location.href,0<href.indexOf("socials")||0<href.indexOf("login")||0<href.indexOf("admin")||0<href.indexOf("account")||(0<href.indexOf("store")||0<href.indexOf("coupon")||0<href.indexOf("settings")?window.opener.location.reload():window.opener.location.href=location.href,window.close()))),function(){function e(){var e=this,t=e.img;t.wrap('<div class="download"></div>');var i=t.parent();$("body").append(e.el),size=e.el.width()+"x"+e.el.height(),e.el.remove(),i.append("<span>"+size+'</span> <a href="'+e.src+'" download>Скачать</a>')}for(var t=$(".downloads_img img"),i=0;i<t.length;i++){var n=t.eq(i),s=n.attr("src");image=$("<img/>",{src:s}),data={src:s,img:n,el:image},image.on("load",e.bind(data))}}(),$("body").on("beforeValidate","form",function(){for(var e=!0,t=$(this).find('input[required="true"], input[aria-required="true"], textarea[required="true"], textarea[aria-required="true"]'),i=!0,n=0;n<t.length;n++)if(t.eq(n).val().length<1&&(e=!1,notification.notifi({type:"err",message:"Необходимо заполнить "+t.eq(n).attr("name")}),i)){i=!1,$("html, body").animate({scrollTop:$(t.eq(n)).offset().top},500);var s=$(t.eq(n)).closest(".cpa_box");if(s)for(var o=s[0].classList,a=0;a<o.length;a++)if(-1<o[a].indexOf("tab_")){var r=o[a].substring(4);$(this).find('input[type="radio"][value="'+r+'"]').prop("checked",!0)}}if(!e)return!1}),function(y){"use strict";var _=function(e){var t=arguments,i=!0,n=1;return e=e.replace(/%s/g,function(){var e=t[n++];return void 0===e?(i=!1,""):e}),i?e:""},n=function(e){for(var t=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],i=0;i<t.length;i++)e=e.replace(t[i].letters,t[i].base);return e};function r(t,e){var i=this,n=t.attr("name")||e.name||"";this.options=e,this.$el=t.hide(),this.$label=this.$el.closest("label"),0===this.$label.length&&this.$el.attr("id")&&(this.$label=y(_('label[for="%s"]',this.$el.attr("id").replace(/:/g,"\\:")))),this.$parent=y(_('<div class="ms-parent %s" %s/>',t.attr("class")||"",_('title="%s"',t.attr("title")))),this.$choice=y(_(['<button type="button" class="ms-choice">','<span class="placeholder">%s</span>',"<div></div>","</button>"].join(""),this.options.placeholder)),this.$drop=y(_('<div class="ms-drop %s"%s></div>',this.options.position,_(' style="width: %s"',this.options.dropWidth))),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",this.options.width||this.$el.css("width")||this.$el.outerWidth()+20),this.selectAllName='data-name="selectAll'+n+'"',this.selectGroupName='data-name="selectGroup'+n+'"',this.selectItemName='data-name="selectItem'+n+'"',this.options.keepOpen||y(document).click(function(e){y(e.target)[0]!==i.$choice[0]&&y(e.target).parents(".ms-choice")[0]!==i.$choice[0]&&(y(e.target)[0]===i.$drop[0]||y(e.target).parents(".ms-drop")[0]!==i.$drop[0]&&e.target!==t[0])&&i.options.isOpen&&i.close()})}r.prototype={constructor:r,init:function(){var i=this,n=y("<ul></ul>");this.$drop.html(""),this.options.filter&&this.$drop.append(['<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"].join("")),this.options.selectAll&&!this.options.single&&n.append(['<li class="ms-select-all">',"<label>",_('<input type="checkbox" %s /> ',this.selectAllName),this.options.selectAllDelimiter[0],this.options.selectAllText,this.options.selectAllDelimiter[1],"</label>","</li>"].join("")),y.each(this.$el.children(),function(e,t){n.append(i.optionToHtml(e,t))}),n.append(_('<li class="ms-no-results">%s</li>',this.options.noMatchesFound)),this.$drop.append(n),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open()},optionToHtml:function(e,t,i,n){var s,o=this,a=y(t),r=a.attr("class")||"",l=_('title="%s"',a.attr("title")),u=this.options.multiple?"multiple":"",c=this.options.single?"radio":"checkbox";if(a.is("option")){var d,p=a.val(),h=o.options.textTemplate(a),f=a.prop("selected"),g=_('style="%s"',this.options.styler(p));return s=n||a.prop("disabled"),(d=y([_('<li class="%s %s" %s %s>',u,r,l,g),_('<label class="%s">',s?"disabled":""),_('<input type="%s" %s%s%s%s>',c,this.selectItemName,f?' checked="checked"':"",s?' disabled="disabled"':"",_(' data-group="%s"',i)),_("<span>%s</span>",h),"</label>","</li>"].join(""))).find("input").val(p),d}if(a.is("optgroup")){var m=o.options.labelTemplate(a),v=y("<div/>");return i="group_"+e,s=a.prop("disabled"),v.append(['<li class="group">',_('<label class="optgroup %s" data-group="%s">',s?"disabled":"",i),this.options.hideOptgroupCheckboxes||this.options.single?"":_('<input type="checkbox" %s %s>',this.selectGroupName,s?'disabled="disabled"':""),m,"</label>","</li>"].join("")),y.each(a.children(),function(e,t){v.append(o.optionToHtml(e,t,i,s))}),v.html()}},events:function(){var n=this,t=function(e){e.preventDefault(),n[n.options.isOpen?"close":"open"]()};this.$label&&this.$label.off("click").on("click",function(e){"label"===e.target.nodeName.toLowerCase()&&e.target===this&&(t(e),n.options.filter&&n.options.isOpen||n.focus(),e.stopPropagation())}),this.$choice.off("click").on("click",t).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$parent.off("keydown").on("keydown",function(e){switch(e.which){case 27:n.close(),n.$choice.focus()}}),this.$searchInput.off("keydown").on("keydown",function(e){9===e.keyCode&&e.shiftKey&&n.close()}).off("keyup").on("keyup",function(e){if(n.options.filterAcceptOnEnter&&(13===e.which||32==e.which)&&n.$searchInput.val())return n.$selectAll.click(),n.close(),void n.focus();n.filter()}),this.$selectAll.off("click").on("click",function(){var e=y(this).prop("checked"),t=n.$selectItems.filter(":visible");t.length===n.$selectItems.length?n[e?"checkAll":"uncheckAll"]():(n.$selectGroups.prop("checked",e),t.prop("checked",e),n.options[e?"onCheckAll":"onUncheckAll"](),n.update())}),this.$selectGroups.off("click").on("click",function(){var e=y(this).parent().attr("data-group"),t=n.$selectItems.filter(":visible").filter(_('[data-group="%s"]',e)),i=t.length!==t.filter(":checked").length;t.prop("checked",i),n.updateSelectAll(),n.update(),n.options.onOptgroupClick({label:y(this).parent().text(),checked:i,children:t.get(),instance:n})}),this.$selectItems.off("click").on("click",function(){if(n.updateSelectAll(),n.update(),n.updateOptGroupSelect(),n.options.onClick({label:y(this).parent().text(),value:y(this).val(),checked:y(this).prop("checked"),instance:n}),n.options.single&&n.options.isOpen&&!n.options.keepOpen&&n.close(),n.options.single){var e=y(this).val();n.$selectItems.filter(function(){return y(this).val()!==e}).each(function(){y(this).prop("checked",!1)}),n.update()}})},open:function(){if(!this.$choice.hasClass("disabled")){if(this.options.isOpen=!0,this.$choice.find(">div").addClass("open"),this.$drop[this.animateMethod("show")](),this.$selectAll.parent().show(),this.$noResults.hide(),this.$el.children().length||(this.$selectAll.parent().hide(),this.$noResults.show()),this.options.container){var e=this.$drop.offset();this.$drop.appendTo(y(this.options.container)),this.$drop.offset({top:e.top,left:e.left})}this.options.filter&&(this.$searchInput.val(""),this.$searchInput.focus(),this.filter()),this.options.onOpen()}},close:function(){this.options.isOpen=!1,this.$choice.find(">div").removeClass("open"),this.$drop[this.animateMethod("hide")](),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose()},animateMethod:function(e){return{show:{fade:"fadeIn",slide:"slideDown"},hide:{fade:"fadeOut",slide:"slideUp"}}[e][this.options.animate]||e},update:function(e){var t=this.options.displayValues?this.getSelects():this.getSelects("text"),i=this.$choice.find(">span"),n=t.length;0===n?i.addClass("placeholder").html(this.options.placeholder):this.options.allSelected&&n===this.$selectItems.length+this.$disableItems.length?i.removeClass("placeholder").html(this.options.allSelected):this.options.ellipsis&&n>this.options.minimumCountSelected?i.removeClass("placeholder").text(t.slice(0,this.options.minimumCountSelected).join(this.options.delimiter)+"..."):this.options.countSelected&&n>this.options.minimumCountSelected?i.removeClass("placeholder").html(this.options.countSelected.replace("#",t.length).replace("%",this.$selectItems.length+this.$disableItems.length)):i.removeClass("placeholder").text(t.join(this.options.delimiter)),this.options.addTitle&&i.prop("title",this.getSelects("text")),this.$el.val(this.getSelects()).trigger("change"),this.$drop.find("li").removeClass("selected"),this.$drop.find("input:checked").each(function(){y(this).parents("li").first().addClass("selected")}),e||this.$el.trigger("change")},updateSelectAll:function(e){var t=this.$selectItems;e||(t=t.filter(":visible")),this.$selectAll.prop("checked",t.length&&t.length===t.filter(":checked").length),!e&&this.$selectAll.prop("checked")&&this.options.onCheckAll()},updateOptGroupSelect:function(){var s=this.$selectItems.filter(":visible");y.each(this.$selectGroups,function(e,t){var i=y(t).parent().attr("data-group"),n=s.filter(_('[data-group="%s"]',i));y(t).prop("checked",n.length&&n.length===n.filter(":checked").length)})},getSelects:function(e){var a=this,r=[],t=[];return this.$drop.find(_("input[%s]:checked",this.selectItemName)).each(function(){r.push(y(this).parents("li").first().text()),t.push(y(this).val())}),"text"===e&&this.$selectGroups.length&&(r=[],this.$selectGroups.each(function(){var e=[],t=y.trim(y(this).parent().text()),i=y(this).parent().data("group"),n=a.$drop.find(_('[%s][data-group="%s"]',a.selectItemName,i)),s=n.filter(":checked");if(s.length){if(e.push("["),e.push(t),n.length>s.length){var o=[];s.each(function(){o.push(y(this).parent().text())}),e.push(": "+o.join(", "))}e.push("]"),r.push(e.join(""))}})),"text"===e?r:t},setSelects:function(e){var s=this;this.$selectItems.prop("checked",!1),this.$disableItems.prop("checked",!1),y.each(e,function(e,t){s.$selectItems.filter(_('[value="%s"]',t)).prop("checked",!0),s.$disableItems.filter(_('[value="%s"]',t)).prop("checked",!0)}),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length+this.$disableItems.filter(":checked").length),y.each(s.$selectGroups,function(e,t){var i=y(t).parent().attr("data-group"),n=s.$selectItems.filter('[data-group="'+i+'"]');y(t).prop("checked",n.length&&n.length===n.filter(":checked").length)}),this.update()},enable:function(){this.$choice.removeClass("disabled")},disable:function(){this.$choice.addClass("disabled")},checkAll:function(){this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems.prop("checked",!1),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},focus:function(){this.$choice.focus(),this.options.onFocus()},blur:function(){this.$choice.blur(),this.options.onBlur()},refresh:function(){this.init()},destroy:function(){this.$el.show(),this.$parent.remove(),this.$el.data("multipleSelect",null)},filter:function(){var i=this,t=y.trim(this.$searchInput.val()).toLowerCase();0===t.length?(this.$selectAll.parent().show(),this.$selectItems.parent().show(),this.$disableItems.parent().show(),this.$selectGroups.parent().show(),this.$noResults.hide()):(this.$selectItems.each(function(){var e=y(this).parent();e[n(e.text().toLowerCase()).indexOf(n(t))<0?"hide":"show"]()}),this.$disableItems.parent().hide(),this.$selectGroups.each(function(){var e=y(this).parent(),t=e.attr("data-group");e[i.$selectItems.filter(":visible").filter(_('[data-group="%s"]',t)).length?"show":"hide"]()}),this.$selectItems.parent().filter(":visible").length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll(),this.options.onFilter(t)}},y.fn.multipleSelect=function(){var n,s=arguments[0],o=arguments,a=["getSelects","setSelects","enable","disable","open","close","checkAll","uncheckAll","focus","blur","refresh","destroy"];return this.each(function(){var e=y(this),t=e.data("multipleSelect"),i=y.extend({},y.fn.multipleSelect.defaults,e.data(),"object"==typeof s&&s);if(t||(t=new r(e,i),e.data("multipleSelect",t)),"string"==typeof s){if(y.inArray(s,a)<0)throw"Unknown method: "+s;n=t[s](o[1])}else t.init(),o[1]&&(n=t[o[1]].apply(t,[].slice.call(o,2)))}),void 0!==n?n:this},y.fn.multipleSelect.defaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllDelimiter:["[","]"],minimumCountSelected:3,ellipsis:!1,multiple:!1,multipleWidth:80,single:!1,filter:!1,width:undefined,dropWidth:undefined,maxHeight:250,container:null,position:"bottom",keepOpen:!1,animate:"none",displayValues:!1,delimiter:", ",addTitle:!1,filterAcceptOnEnter:!1,hideOptgroupCheckboxes:!1,selectAllText:"Select all",allSelected:"All selected",countSelected:"# of % selected",noMatchesFound:"No matches found",styler:function(){return!1},textTemplate:function(e){return e.html()},labelTemplate:function(e){return e.attr("label")},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onFilter:function(){return!1}},y("select[multiple]").multipleSelect()}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function($){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.regional.en=$.extend(!0,{},this.regional[""]),this.regional["en-US"]=$.extend(!0,{},this.regional.en),this.dpDiv=n($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){$(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,o)}function o(){$.datepicker._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))}function d(e,t){for(var i in $.extend(e,t),t)null==t[i]&&(e[i]=t[i]);return e}$.ui=$.ui||{},$.ui.version="1.12.1";var e,t,s,a,r=0,l=Array.prototype.slice;$.cleanData=(s=$.cleanData,function(e){var t,i,n;for(n=0;null!=(i=e[n]);n++)try{(t=$._data(i,"events"))&&t.remove&&$(i).triggerHandler("remove")}catch(r){}s(e)}),$.widget=function(e,i,t){var n,s,o,a={},r=e.split(".")[0],l=r+"-"+(e=e.split(".")[1]);return t||(t=i,i=$.Widget),$.isArray(t)&&(t=$.extend.apply(null,[{}].concat(t))),$.expr[":"][l.toLowerCase()]=function(e){return!!$.data(e,l)},$[r]=$[r]||{},n=$[r][e],s=$[r][e]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},$.extend(s,n,{version:t.version,_proto:$.extend({},t),_childConstructors:[]}),(o=new i).options=$.widget.extend({},o.options),$.each(t,function(t,o){return $.isFunction(o)?void(a[t]=function(){function n(){return i.prototype[t].apply(this,arguments)}function s(e){return i.prototype[t].apply(this,e)}return function(){var e,t=this._super,i=this._superApply;return this._super=n,this._superApply=s,e=o.apply(this,arguments),this._super=t,this._superApply=i,e}}()):void(a[t]=o)}),s.prototype=$.widget.extend(o,{widgetEventPrefix:n&&o.widgetEventPrefix||e},a,{constructor:s,namespace:r,widgetName:e,widgetFullName:l}),n?($.each(n._childConstructors,function(e,t){var i=t.prototype;$.widget(i.namespace+"."+i.widgetName,s,t._proto)}),delete n._childConstructors):i._childConstructors.push(s),$.widget.bridge(e,s),s},$.widget.extend=function(e){for(var t,i,n=l.call(arguments,1),s=0,o=n.length;s<o;s++)for(t in n[s])i=n[s][t],n[s].hasOwnProperty(t)&&void 0!==i&&(e[t]=$.isPlainObject(i)?$.isPlainObject(e[t])?$.widget.extend({},e[t],i):$.widget.extend({},i):i);return e},$.widget.bridge=function(o,t){var a=t.prototype.widgetFullName||o;$.fn[o]=function(i){var e="string"==typeof i,n=l.call(arguments,1),s=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=$.data(this,a);return"instance"===i?(s=t,!1):t?$.isFunction(t[i])&&"_"!==i.charAt(0)?(e=t[i].apply(t,n))!==t&&void 0!==e?(s=e&&e.jquery?s.pushStack(e.get()):e,!1):void 0:$.error("no such method '"+i+"' for "+o+" widget instance"):$.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):s=void 0:(n.length&&(i=$.widget.extend.apply(null,[i].concat(n))),this.each(function(){var e=$.data(this,a);e?(e.option(i||{}),e._init&&e._init()):$.data(this,a,new t(i,this))})),s}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=$(t||this.defaultElement||this)[0],this.element=$(t),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),this.classesElementLookup={},t!==this&&($.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=$(t.style?t.ownerDocument:t.document||t),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){var i=this;this._destroy(),$.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:$.noop,widget:function(){return this.element},option:function(e,t){var i,n,s,o=e;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(i=e.split(".")).shift(),i.length){for(n=o[e]=$.widget.extend({},this.options[e]),s=0;i.length-1>s;s++)n[i[s]]=n[i[s]]||{},n=n[i[s]];if(e=i.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,n;for(t in e)n=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&n&&n.length&&(i=$(n.get()),this._removeClass(n,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(s){function e(e,t){var i,n;for(n=0;e.length>n;n++)i=a.classesElementLookup[e[n]]||$(),i=s.add?$($.unique(i.get().concat(s.element.get()))):$(i.not(s.element).get()),a.classesElementLookup[e[n]]=i,o.push(e[n]),t&&s.classes[e[n]]&&o.push(s.classes[e[n]])}var o=[],a=this;return s=$.extend({element:this.element,classes:this.options.classes||{}},s),this._on(s.element,{remove:"_untrackClassesElement"}),s.keys&&e(s.keys.match(/\S+/g)||[],!0),s.extra&&e(s.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(i){var n=this;$.each(n.classesElementLookup,function(e,t){-1!==$.inArray(i.target,t)&&(n.classesElementLookup[e]=$(t.not(i.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof e||null===e,o={extra:s?t:i,keys:s?e:t,element:s?this.element:e,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(a,r,e){var l,u=this;"boolean"!=typeof a&&(e=r,r=a,a=!1),e?(r=l=$(r),this.bindings=this.bindings.add(r)):(e=r,r=this.element,l=this.widget()),$.each(e,function(e,t){function i(){return a||!0!==u.options.disabled&&!$(this).hasClass("ui-state-disabled")?("string"==typeof t?u[t]:t).apply(u,arguments):void 0}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||$.guid++);var n=e.match(/^([\w:-]*)\s*(.*)$/),s=n[1]+u.eventNamespace,o=n[2];o?l.on(s,o,i):r.on(s,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=$(this.bindings.not(e).get()),this.focusable=$(this.focusable.not(e).get()),this.hoverable=$(this.hoverable.not(e).get())},_delay:function(e,t){var i=this;return setTimeout(function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass($(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass($(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass($(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass($(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var n,s,o=this.options[e];if(i=i||{},(t=$.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],s=t.originalEvent)for(n in s)n in t||(t[n]=s[n]);return this.element.trigger(t,i),!($.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(o,a){$.Widget.prototype["_"+o]=function(t,e,i){"string"==typeof e&&(e={effect:e});var n,s=e?!0===e||"number"==typeof e?a:e.effect||a:o;"number"==typeof(e=e||{})&&(e={duration:e}),n=!$.isEmptyObject(e),e.complete=i,e.delay&&t.delay(e.delay),n&&$.effects&&$.effects.effect[s]?t[o](e):s!==o&&t[s]?t[s](e.duration,e.easing,i):t.queue(function(e){$(this)[o](),i&&i.call(t[0]),e()})}}),$.widget,function(){function w(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function k(e,t){return parseInt($.css(e,t),10)||0}var s,C=Math.max,D=Math.abs,n=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,r=/^\w+/,l=/%$/,t=$.fn.position;$.position={scrollbarWidth:function(){if(void 0!==s)return s;var e,t,i=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];return $("body").append(i),e=n.offsetWidth,i.css("overflow","scroll"),e===(t=n.offsetWidth)&&(t=i[0].clientWidth),i.remove(),s=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?$.position.scrollbarWidth():0,height:n?$.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=$(e||window),i=$.isWindow(t[0]),n=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:i,isDocument:n,offset:!i&&!n?$(e).offset():{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},$.fn.position=function(d){if(!d||!d.of)return t.apply(this,arguments);d=$.extend({},d);var p,h,f,g,m,e,v=$(d.of),y=$.position.getWithinInfo(d.within),_=$.position.getScrollInfo(y),b=(d.collision||"flip").split(" "),x={};return e=function i(e){var t=e[0];return 9===t.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:$.isWindow(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(v),v[0].preventDefault&&(d.at="left top"),h=e.width,f=e.height,g=e.offset,m=$.extend({},g),$.each(["my","at"],function(){var e,t,i=(d[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",e=a.exec(i[0]),t=a.exec(i[1]),x[this]=[e?e[0]:0,t?t[0]:0],d[this]=[r.exec(i[0])[0],r.exec(i[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===d.at[0]?m.left+=h:"center"===d.at[0]&&(m.left+=h/2),"bottom"===d.at[1]?m.top+=f:"center"===d.at[1]&&(m.top+=f/2),p=w(x.at,h,f),m.left+=p[0],m.top+=p[1],this.each(function(){var i,e,a=$(this),r=a.outerWidth(),l=a.outerHeight(),t=k(this,"marginLeft"),n=k(this,"marginTop"),s=r+t+k(this,"marginRight")+_.width,o=l+n+k(this,"marginBottom")+_.height,u=$.extend({},m),c=w(x.my,a.outerWidth(),a.outerHeight());"right"===d.my[0]?u.left-=r:"center"===d.my[0]&&(u.left-=r/2),"bottom"===d.my[1]?u.top-=l:"center"===d.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],i={marginLeft:t,marginTop:n},$.each(["left","top"],function(e,t){$.ui.position[b[e]]&&$.ui.position[b[e]][t](u,{targetWidth:h,targetHeight:f,elemWidth:r,elemHeight:l,collisionPosition:i,collisionWidth:s,collisionHeight:o,offset:[p[0]+c[0],p[1]+c[1]],my:d.my,at:d.at,within:y,elem:a})}),d.using&&(e=function(e){var t=g.left-u.left,i=t+h-r,n=g.top-u.top,s=n+f-l,o={target:{element:v,left:g.left,top:g.top,width:h,height:f},element:{element:a,left:u.left,top:u.top,width:r,height:l},horizontal:i<0?"left":0<t?"right":"center",vertical:s<0?"top":0<n?"bottom":"middle"};h<r&&h>D(t+i)&&(o.horizontal="center"),f<l&&f>D(n+s)&&(o.vertical="middle"),o.important=C(D(t),D(i))>C(D(n),D(s))?"horizontal":"vertical",d.using.call(this,e,o)}),a.offset($.extend(u,{using:e}))})},$.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,r=s-a,l=a+t.collisionWidth-o-s;t.collisionWidth>o?0<r&&l<=0?(i=e.left+r+t.collisionWidth-o-s,e.left+=r-i):e.left=0<l&&r<=0?s:l<r?s+o-t.collisionWidth:s:0<r?e.left+=r:0<l?e.left-=l:e.left=C(e.left-a,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,r=s-a,l=a+t.collisionHeight-o-s;t.collisionHeight>o?0<r&&l<=0?(i=e.top+r+t.collisionHeight-o-s,e.top+=r-i):e.top=0<l&&r<=0?s:l<r?s+o-t.collisionHeight:s:0<r?e.top+=r:0<l?e.top-=l:e.top=C(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,a=s.width,r=s.isWindow?s.scrollLeft:s.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-r,c=l+t.collisionWidth-a-r,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];u<0?((i=e.left+d+p+h+t.collisionWidth-a-o)<0||D(u)>i)&&(e.left+=d+p+h):0<c&&((0<(n=e.left-t.collisionPosition.marginLeft+d+p+h-r)||c>D(n))&&(e.left+=d+p+h))},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,a=s.height,r=s.isWindow?s.scrollTop:s.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-r,c=l+t.collisionHeight-a-r,d="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,h=-2*t.offset[1];u<0?((n=e.top+d+p+h+t.collisionHeight-a-o)<0||D(u)>n)&&(e.top+=d+p+h):0<c&&((0<(i=e.top-t.collisionPosition.marginTop+d+p+h-r)||c>D(i))&&(e.top+=d+p+h))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}}}(),$.ui.position,$.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):$(this[0].form)},$.ui.formResetMixin={_formResetHandler:function(){var t=$(this);setTimeout(function(){var e=t.data("ui-form-reset-instances");$.each(e,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice($.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},$.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},$.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")}),$.fn.labels=function(){var e,t,i,n,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),(i=this.attr("id"))&&(s=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),t="label[for='"+$.ui.escapeSelector(i)+"']",n=n.add(s.find(t).addBack(t))),this.pushStack(n))},$.fn.extend({uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&$(this).removeAttr("id")})}}),$.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},$.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(e){var t=$(e.target),i=$($.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&t.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),t.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var t=$(e.target).closest(".ui-menu-item"),i=$(e.currentTarget);t[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(e){this._delay(function(){!$.contains(this.element[0],$.ui.safeActiveElement(this.document[0]))&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each(function(){var e=$(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var t,i,n,s,o=!0;switch(e.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(e);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case $.ui.keyCode.HOME:this._move("first","first",e);break;case $.ui.keyCode.END:this._move("last","last",e);break;case $.ui.keyCode.UP:this.previous(e);break;case $.ui.keyCode.DOWN:this.next(e);break;case $.ui.keyCode.LEFT:this.collapse(e);break;case $.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(e);break;case $.ui.keyCode.ESCAPE:this.collapse(e);break;default:o=!1,i=this.previousFilter||"",s=!1,n=96<=e.keyCode&&e.keyCode<=105?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),n===i?s=!0:n=i+n,t=this._filterMenuItems(n),(t=s&&-1!==t.index(this.active.next())?this.active.nextAll(".ui-menu-item"):t).length||(n=String.fromCharCode(e.keyCode),t=this._filterMenuItems(n)),t.length?(this.focus(e,t),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&e.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var e,t,i,n,s=this,o=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),t=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=$(this),t=e.prev(),i=$("<span>").data("ui-menu-submenu-caret",!0);s._addClass(i,"ui-menu-icon","ui-icon "+o),t.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",t.attr("id"))}),this._addClass(t,"ui-menu","ui-widget ui-widget-content ui-front"),(e=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=$(this);s._isDivider(e)&&s._addClass(e,"ui-menu-divider","ui-widget-content")}),n=(i=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e+""),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),s=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(e){var t,i,n,s,o,a;this._hasScroll()&&(t=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-t-i,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=e.outerHeight(),n<0?this.activeMenu.scrollTop(s+n):o<n+a&&this.activeMenu.scrollTop(s+n-o+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(e){var t=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var e=i?this.element:$(t&&t.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(t),this._removeClass(e.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=e},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!$(e.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(i,n)},nextPage:function(e){var t,i,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(t=$(this)).offset().top-i-n<0}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var t,i,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(t=$(this)).offset().top-i+n}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||$(e.target).closest(".ui-menu-item");var t={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,t)},_filterMenuItems:function(e){var t=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=RegExp("^"+t,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test($.trim($(this).children(".ui-menu-item-wrapper").text()))})}}),$.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,n,s,e=this.element[0].nodeName.toLowerCase(),t="textarea"===e,o="input"===e;this.isMultiLine=t||!o&&this._isContentEditable(this.element),this.valueMethod=this.element[t||o?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))n=s=i=!0;else{n=s=i=!1;var t=$.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:i=!0,this._move("previousPage",e);break;case t.PAGE_DOWN:i=!0,this._move("nextPage",e);break;case t.UP:i=!0,this._keyEvent("previous",e);break;case t.DOWN:i=!0,this._keyEvent("next",e);break;case t.ENTER:this.menu.active&&(i=!0,e.preventDefault(),this.menu.select(e));break;case t.TAB:this.menu.active&&this.menu.select(e);break;case t.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:n=!0,this._searchTimeout(e)}}},keypress:function(e){if(i)return i=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&e.preventDefault());if(!n){var t=$.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e)}}},input:function(e){return s?(s=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=$("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==$.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,t){var i,n;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){$(e.target).trigger(e.originalEvent)})):(n=t.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),void((i=t.item.attr("aria-label")||n.value)&&$.trim(i).length&&(this.liveRegion.children().hide(),$("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==$.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=$("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var t=this.menu.element[0];return e.target===this.element[0]||e.target===t||$.contains(t,e.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?$(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var i,n,s=this;$.isArray(this.options.source)?(i=this.options.source,this.source=function(e,t){t($.ui.autocomplete.filter(i,e.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,t){s.xhr&&s.xhr.abort(),s.xhr=$.ajax({url:n,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),t=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;(!e||e&&!t&&!i)&&(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return $.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:$.map(e,function(e){return"string"==typeof e?{label:e,value:e}:$.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),t.show(),this._resizeMenu(),t.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,e){var n=this;$.each(e,function(e,t){n._renderItemData(i,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return $("<li>").append($("<div>").text(t.label)).appendTo(e)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),$.extend($.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=RegExp($.ui.autocomplete.escapeRegex(t),"i");return $.grep(e,function(e){return i.test(e.label||e.value||e)})}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),$("<div>").text(t).appendTo(this.liveRegion))}}),$.ui.autocomplete,$.extend($.ui,{datepicker:{version:"1.12.1"}}),$.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return d(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var i,n,s;n="div"===(i=e.nodeName.toLowerCase())||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst($(e),n)).settings=$.extend({},t||{}),"input"===i?this._connectDatepicker(e,s):n&&this._inlineDatepicker(e,s)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?n($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),$.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i,n,s,o=this._get(t,"appendText"),a=this._get(t,"isRTL");t.append&&t.append.remove(),o&&(t.append=$("<span class='"+this._appendClass+"'>"+o+"</span>"),e[a?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),("focus"===(i=this._get(t,"showOn"))||"both"===i)&&e.on("focus",this._showDatepicker),("button"===i||"both"===i)&&(n=this._get(t,"buttonText"),s=this._get(t,"buttonImage"),t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:s,alt:n,title:n}):$("<button type='button'></button>").addClass(this._triggerClass).html(s?$("<img/>").attr({src:s,alt:n,title:n}):n)),e[a?"before":"after"](t.trigger),t.trigger.on("click",function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput===e[0]?$.datepicker._hideDatepicker():($.datepicker._datepickerShowing&&$.datepicker._lastInput!==e[0]&&$.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,s,o=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(s=n=i=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,n=s);return n},o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv),$.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,s){var o,a,r,l,u,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=$("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),$("body").append(this._dialogInput),(c=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],"datepicker",c)),d(c.settings,n||{}),t=t&&t.constructor===Date?this._formatDate(c,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(a=document.documentElement.clientWidth,r=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+l,r/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(e){var t,i=$(e),n=$.data(e,"datepicker");i.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),$.removeData(e,"datepicker"),"input"===t?(n.append.remove(),n.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===t||"span"===t)&&i.removeClass(this.markerClassName).empty(),a===n&&(a=null))},_enableDatepicker:function(t){var e,i,n=$(t),s=$.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===e||"span"===e)&&((i=n.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=$.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,i,n=$(t),s=$.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===e||"span"===e)&&((i=n.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=$.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return $.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n,s,o,a,r=this._getInst(e);return 2===arguments.length&&"string"==typeof t?"defaults"===t?$.extend({},$.datepicker._defaults):r?"all"===t?$.extend({},r.settings):this._get(r,t):null:(n=t||{},"string"==typeof t&&((n={})[t]=i),void(r&&(this._curInst===r&&this._hideDatepicker(),s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),a=this._getMinMaxDate(r,"max"),d(r.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(r.settings.minDate=this._formatDate(r,o)),null!==a&&void 0!==n.dateFormat&&void 0===n.maxDate&&(r.settings.maxDate=this._formatDate(r,a)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t,i,n,s=$.datepicker._getInst(e.target),o=!0,a=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),o=!1;break;case 13:return(n=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",s.dpDiv))[0]&&$.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,n[0]),(t=$.datepicker._get(s,"onSelect"))?(i=$.datepicker._formatDate(s),t.apply(s.input?s.input[0]:null,[i,s])):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(s,"stepBigMonths"):-$.datepicker._get(s,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(s,"stepBigMonths"):+$.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,a?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(s,"stepBigMonths"):-$.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,a?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(s,"stepBigMonths"):+$.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,i,n=$.datepicker._getInst(e.target);return $.datepicker._get(n,"constrainInput")?(t=$.datepicker._possibleChars($.datepicker._get(n,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!t||-1<t.indexOf(i)):void 0},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!==t.lastVal)try{$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t))&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(o){}return!0},_showDatepicker:function(e){var t,i,n,s,o,a,r;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),$.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput===e)||(t=$.datepicker._getInst(e),$.datepicker._curInst&&$.datepicker._curInst!==t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0])),!1!==(n=(i=$.datepicker._get(t,"beforeShow"))?i.apply(e,[e,t]):{})&&(d(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight),s=!1,$(e).parents().each(function(){return!(s|="fixed"===$(this).css("position"))}),o={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),o=$.datepicker._checkOffset(t,o,s),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),t.inline||(a=$.datepicker._get(t,"showAnim"),r=$.datepicker._get(t,"duration"),t.dpDiv.css("z-index",function l(e){for(var t,i;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}($(e))+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects.effect[a]?t.dpDiv.show(a,$.datepicker._get(t,"showOptions"),r):t.dpDiv[a||"show"](a?r:null),$.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),$.datepicker._curInst=t)))},_updateDatepicker:function(e){this.maxRows=4,(a=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,i=this._getNumberOfMonths(e),n=i[1],s=e.dpDiv.find("."+this._dayOverClass+" a");0<s.length&&o.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-o:0,t.left-=i&&t.left===e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top===e.input.offset().top+a?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>r&&n<r?Math.abs(t.left+n-r):0),t.top-=Math.min(t.top,t.top+s>l&&s<l?Math.abs(s+a):0),t},_findPos:function(e){for(var t,i=this._getInst(e),n=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||$.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return[(t=$(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,i,n,s,o=this._curInst;!o||e&&o!==$.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(o,"showAnim"),i=this._get(o,"duration"),n=function(){$.datepicker._tidyDialog(o)},$.effects&&($.effects.effect[t]||$.effects[t])?o.dpDiv.hide(t,$.datepicker._get(o,"showOptions"),i,n):o.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?i:null,n),t||n(),this._datepickerShowing=!1,(s=this._get(o,"onClose"))&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!==$.datepicker._mainDivId&&0===t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),s=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(s,t+("M"===i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(e){var t,i=$(e),n=this._getInst(i[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(t=new Date,n.selectedDay=t.getDate(),n.drawMonth=n.selectedMonth=t.getMonth(),n.drawYear=n.selectedYear=t.getFullYear()),this._notifyChange(n),this._adjustDate(i)},_selectMonthYear:function(e,t,i){var n=$(e),s=this._getInst(n[0]);s["selected"+("M"===i?"Month":"Year")]=s["draw"+("M"===i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(n)},_selectDay:function(e,t,i,n){var s,o=$(e);$(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((s=this._getInst(o[0])).selectedDay=s.currentDay=$("a",n).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=i,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){var t=$(e);this._selectDate(t,"")},_selectDate:function(e,t){var i,n=$(e),s=this._getInst(n[0]);t=null!=t?t:this._formatDate(s),s.input&&s.input.val(t),this._updateAlternate(s),(i=this._get(s,"onSelect"))?i.apply(s.input?s.input[0]:null,[t,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,i,n,s=this._get(e,"altField");s&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),n=this.formatDate(t,i,this._getFormatConfig(e)),$(s).val(n))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,o,e){if(null==i||null==o)throw"Invalid arguments";if(""===(o="object"==typeof o?""+o:o+""))return null;var n,t,s,a,r=0,l=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),c=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,d=(e?e.dayNames:null)||this._defaults.dayNames,p=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,h=(e?e.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,m=-1,v=-1,y=!1,_=function(e){var t=i.length>n+1&&i.charAt(n+1)===e;return t&&n++,t},b=function(e){var t=_(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n=RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),s=o.substring(r).match(n);if(!s)throw"Missing number at position "+r;return r+=s[0].length,parseInt(s[0],10)},x=function(e,t,i){var n=-1,s=$.map(_(e)?i:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if($.each(s,function(e,t){var i=t[1];return o.substr(r,i.length).toLowerCase()===i.toLowerCase()?(n=t[0],r+=i.length,!1):void 0}),-1!==n)return n+1;throw"Unknown name at position "+r},w=function(){if(o.charAt(r)!==i.charAt(n))throw"Unexpected literal at position "+r;r++};for(n=0;i.length>n;n++)if(y)"'"!==i.charAt(n)||_("'")?w():y=!1;else switch(i.charAt(n)){case"d":m=b("d");break;case"D":x("D",c,d);break;case"o":v=b("o");break;case"m":g=b("m");break;case"M":g=x("M",p,h);break;case"y":f=b("y");break;case"@":f=(a=new Date(b("@"))).getFullYear(),g=a.getMonth()+1,m=a.getDate();break;case"!":f=(a=new Date((b("!")-this._ticksTo1970)/1e4)).getFullYear(),g=a.getMonth()+1,m=a.getDate();break;case"'":_("'")?w():y=!0;break;default:w()}if(o.length>r&&(s=o.substr(r),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=u?0:-100)),-1<v)for(g=1,m=v;!(m<=(t=this._getDaysInMonth(f,g-1)));)g++,m-=t;if((a=this._daylightSavingAdjust(new Date(f,g-1,m))).getFullYear()!==f||a.getMonth()+1!==g||a.getDate()!==m)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(i,e,t){if(!e)return"";var n,s=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,o=(t?t.dayNames:null)||this._defaults.dayNames,a=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,r=(t?t.monthNames:null)||this._defaults.monthNames,l=function(e){var t=i.length>n+1&&i.charAt(n+1)===e;return t&&n++,t},u=function(e,t,i){var n=""+t;if(l(e))for(;i>n.length;)n="0"+n;return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",p=!1;if(e)for(n=0;i.length>n;n++)if(p)"'"!==i.charAt(n)||l("'")?d+=i.charAt(n):p=!1;else switch(i.charAt(n)){case"d":d+=u("d",e.getDate(),2);break;case"D":d+=c("D",e.getDay(),s,o);break;case"o":d+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",e.getMonth()+1,2);break;case"M":d+=c("M",e.getMonth(),a,r);break;case"y":d+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":p=!0;break;default:d+=i.charAt(n)}return d},_possibleChars:function(i){var n,e="",t=!1,s=function(e){var t=i.length>n+1&&i.charAt(n+1)===e;return t&&n++,t};for(n=0;i.length>n;n++)if(t)"'"!==i.charAt(n)||s("'")?e+=i.charAt(n):t=!1;else switch(i.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":s("'")?e+="'":t=!0;break;default:e+=i.charAt(n)}return e},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),o=s,a=this._getFormatConfig(e);try{o=this.parseDate(i,n,a)||s}catch(l){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(r,e,l){var t,i,n=null==e||""===e?l:"string"==typeof e?function(e){try{return $.datepicker.parseDate($.datepicker._get(r,"dateFormat"),e,$.datepicker._getFormatConfig(r))}catch(l){}for(var t=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(r):null)||new Date,i=t.getFullYear(),n=t.getMonth(),s=t.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(e);a;){switch(a[2]||"d"){case"d":case"D":s+=parseInt(a[1],10);break;case"w":case"W":s+=7*parseInt(a[1],10);break;case"m":case"M":n+=parseInt(a[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(i,n));break;case"y":case"Y":i+=parseInt(a[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(i,n))}a=o.exec(e)}return new Date(i,n,s)}(e):"number"==typeof e?isNaN(e)?l:(t=e,(i=new Date).setDate(i.getDate()+t),i):new Date(e.getTime());return(n=n&&"Invalid Date"==""+n?l:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),s===e.selectedMonth&&o===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){$.datepicker._adjustDate(i,-t,"M")},next:function(){$.datepicker._adjustDate(i,+t,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(i)},selectDay:function(){return $.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return $.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return $.datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,s,o,a,r,l,u,c,d,p,h,f,g,m,v,y,_,b,x,w,k,C,D,$,A,E,T,S,M,O,F,I,j,R,N,P,L,B=new Date,q=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),z=this._get(e,"isRTL"),H=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),Y=this._get(e,"navigationAsDateFormat"),W=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),G=1!==W[0]||1!==W[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),X=e.drawMonth-V,ee=e.drawYear;if(X<0&&(X+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-W[0]*W[1]+1,J.getDate())),t=Z&&t<Z?Z:t;this._daylightSavingAdjust(new Date(ee,X,1))>t;)--X<0&&(X=11,ee--);for(e.drawMonth=X,e.drawYear=ee,i=this._get(e,"prevText"),i=Y?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,X-K,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,X)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=Y?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,X+K,1)),this._getFormatConfig(e)):s,o=this._canAdjustMonth(e,1,ee,X)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+s+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+s+"</span></a>",a=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?Q:q,a=Y?this.formatDate(a,r,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(z?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(e,"showWeek"),p=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),_=this._getDefaultDate(e),b="",w=0;W[0]>w;w++){for(k="",this.maxRows=4,C=0;W[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(ee,X,e.selectedDay)),$=" ui-corner-all",A="",G){if(A+="<div class='ui-datepicker-group",1<W[1])switch(C){case 0:A+=" ui-datepicker-group-first",$=" ui-corner-"+(z?"right":"left");break;case W[1]-1:A+=" ui-datepicker-group-last",$=" ui-corner-"+(z?"left":"right");break;default:A+=" ui-datepicker-group-middle",$=""}A+="'>"}for(A+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+$+"'>"+(/all|left/.test($)&&0===w?z?o:n:"")+(/all|right/.test($)&&0===w?z?n:o:"")+this._generateMonthYearHeader(e,X,ee,Z,J,0<w||0<C,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;x<7;x++)E+="<th scope='col'"+(5<=(x+c+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+p[T=(x+c)%7]+"'>"+h[T]+"</span></th>";for(A+=E+"</tr></thead><tbody>",S=this._getDaysInMonth(ee,X),ee===e.selectedYear&&X===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,S)),M=(this._getFirstDayOfMonth(ee,X)-c+7)%7,O=Math.ceil((M+S)/7),F=G&&this.maxRows>O?this.maxRows:O,this.maxRows=F,I=this._daylightSavingAdjust(new Date(ee,X,1-M)),j=0;j<F;j++){for(A+="<tr>",R=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(I)+"</td>":"",x=0;x<7;x++)N=m?m.apply(e.input?e.input[0]:null,[I]):[!0,""],L=(P=I.getMonth()!==X)&&!y||!N[0]||Z&&I<Z||J&&J<I,R+="<td class='"+(5<=(x+c+6)%7?" ui-datepicker-week-end":"")+(P?" ui-datepicker-other-month":"")+(I.getTime()===D.getTime()&&X===e.selectedMonth&&e._keyEvent||_.getTime()===I.getTime()&&_.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(P&&!v?"":" "+N[1]+(I.getTime()===Q.getTime()?" "+this._currentClass:"")+(I.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(P&&!v||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(P&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===q.getTime()?" ui-state-highlight":"")+(I.getTime()===Q.getTime()?" ui-state-active":"")+(P?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);A+=R+"</tr>"}11<++X&&(X=0,ee++),k+=A+="</tbody></table>"+(G?"</div>"+(0<W[0]&&C===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}b+=k}return b+=u,e._keyEvent=!1,b},_generateMonthYearHeader:function(e,t,i,n,s,o,a,r){var l,u,c,d,p,h,f,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(o||!m)b+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=n&&n.getFullYear()===i,u=s&&s.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=n.getMonth())&&(!u||s.getMonth()>=c)&&(b+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+r[c]+"</option>");b+="</select>"}if(y||(_+=b+(!o&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),p=(new Date).getFullYear(),f=(h=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?p+parseInt(e,10):parseInt(e,10);return isNaN(t)?p:t})(d[0]),g=Math.max(f,h(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,g=s?Math.min(g,s.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",_+=e.yearshtml,e.yearshtml=null}return _+=this._get(e,"yearSuffix"),y&&(_+=(!o&&m&&v?"":"&#xa0;")+b),_+"</div>"},_adjustInstDate:function(e,t,i){var n=e.selectedYear+("Y"===i?t:0),s=e.selectedMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"===i?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&t<i?i:t;return n&&n<s?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(t<0?t:s[0]*s[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,s=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||t.getTime()>=s.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).on("mousedown",$.datepicker._checkExternalClick),$.datepicker.initialized=!0),0===$("#"+$.datepicker._mainDivId).length&&$("body").append($.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new i,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.12.1",$.datepicker,$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var u=!1;$(document).on("mouseup",function(){u=!1}),$.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){return!0===$.data(e.target,t.widgetName+".preventClickEvent")?($.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,i=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&$(e.target).closest(this.options.cancel).length;return i&&!n&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?e.preventDefault():(!0===$.data(e.target,this.widgetName+".preventClickEvent")&&$.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),u=!0)),!0}},_mouseMove:function(e){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&$.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,u=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),$.widget("ui.selectmenu",[$.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=$()},_drawButton:function(){var e,t=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=$("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=$("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t._rendered||t._refreshMenu()})},_drawMenu:function(){var n=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=$("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,t){e.preventDefault(),n._setSelection(),n._select(t.item.data("ui-selectmenu-item"),e)},focus:function(e,t){var i=t.item.data("ui-selectmenu-item");null!=n.focusIndex&&i.index!==n.focusIndex&&(n._trigger("focus",e,{item:i}),n.isOpen||n._select(i,e)),n.focusIndex=i.index,n.button.attr("aria-activedescendant",n.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var t=$("<span>");return this._setText(t,e.label),this._addClass(t,"ui-selectmenu-text"),t},_renderMenu:function(n,e){var s=this,o="";$.each(e,function(e,t){var i;t.optgroup!==o&&(i=$("<li>",{text:t.optgroup}),s._addClass(i,"ui-selectmenu-optgroup","ui-menu-divider"+(t.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),i.appendTo(n),o=t.optgroup),s._renderItemData(n,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(e,t){var i=$("<li>"),n=$("<div>",{title:t.element.attr("title")});return t.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(n,t.label),i.append(n).appendTo(e)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,n,s=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),s+=":not(.ui-state-disabled)"),(n="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](s).eq(-1):i[e+"All"](s).eq(0)).length&&this.menuInstance.focus(t,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&($(e.target).closest(".ui-selectmenu-menu, #"+$.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(e){var t=!0;switch(e.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(e),t=!1;break;case $.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case $.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case $.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case $.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case $.ui.keyCode.LEFT:this._move("prev",e);break;case $.ui.keyCode.RIGHT:this._move("next",e);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",e);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),t=!1}t&&e.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?$(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;return!1===e?void this.button.css("width",""):(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(e))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(e){var i=this,n=[];e.each(function(e,t){n.push(i._parseOption($(t),e))}),this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),$.widget("ui.slider",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t,i=this.options,n=this.element.find(".ui-slider-handle"),s=[];for(t=i.values&&i.values.length||1,n.length>t&&(n.slice(t).remove(),n=n.slice(0,t)),e=n.length;e<t;e++)s.push("<span tabindex='0'></span>");this.handles=n.add($(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){$(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:$.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=$("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var t,i,n,s,o,a,r,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(i-l.values(e));(t<n||n===t&&(e===l._lastChangedValue||l.values(e)===u.min))&&(n=t,s=$(this),o=e)}),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(s,null,"ui-state-active"),s.trigger("focus"),a=s.offset(),r=!$(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=r?{left:0,top:0}:{left:e.pageX-a.left-s.width()/2,top:e.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s;return 1<(i=("horizontal"===this.orientation?(t=this.elementSize.width,e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/t)&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),n=this._valueMax()-this._valueMin(),s=this._valueMin()+i*n,this._trimAlignValue(s)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,s=this.value(),o=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),s=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(n,i):Math.max(n,i)),o[t]=i),i!==s&&(!1!==this._trigger("slide",e,this._uiHash(t,i,o))&&(this._hasMultipleValues()?this.values(t,i):this.value(i)))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var i,n,s;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!$.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,n=e,s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(n[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,t){var i,n=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),$.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=0<this.options.step?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=0<i?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,e,n,s,o=this.options.range,a=this.options,r=this,l=!this._animateOff&&a.animate,u={};this._hasMultipleValues()?this.handles.each(function(e){i=(r.values(e)-r._valueMin())/(r._valueMax()-r._valueMin())*100,u["horizontal"===r.orientation?"left":"bottom"]=i+"%",$(this).stop(1,1)[l?"animate":"css"](u,a.animate),!0===r.options.range&&("horizontal"===r.orientation?(0===e&&r.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate),1===e&&r.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===e&&r.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate),1===e&&r.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(e=this.value(),n=this._valueMin(),s=this._valueMax(),i=s!==n?(e-n)/(s-n)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},a.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var t,i,n,s=$(e.target).data("ui-slider-handle-index");switch(e.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass($(e.target),null,"ui-state-active"),!1===this._start(e,s)))return}switch(n=this.options.step,t=i=this._hasMultipleValues()?this.values(s):this.value(),e.keyCode){case $.ui.keyCode.HOME:i=this._valueMin();break;case $.ui.keyCode.END:i=this._valueMax();break;case $.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(t===this._valueMax())return;i=this._trimAlignValue(t+n);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(t===this._valueMin())return;i=this._trimAlignValue(t-n)}this._slide(e,s,i)},keyup:function(e){var t=$(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),this._removeClass($(e.target),null,"ui-state-active"))}}})}),CKEDITOR.disableAutoInline=!0;var app={};$(function(){$("body").on("keypress",".num",no_letters_in_input),$("body").on("keypress",".onlyFloat",float_in_input),$("body").on("keyup",".onlyFloat",function(){this.value=this.value.replace(",",".")}),$("body").on("click",".print,.modal_open",function(){var e=$(this),t=e.data("link");if(t){var i=e.data("type"),n=e.hasClass("modal_open")?modal_open:print_href;if(i){if("editor"==i)return $.post(t,{data:JSON.stringify(editor.getData())},function(){this.f(this.href)}.bind({href:t,f:n})),!0;if("send"==i)return void $.post(t,{data:JSON.stringify(editor.getData())});"test"==i&&(t+="&"+$(".modal-body form").serialize(),$(".modal-header .close").click())}n(t)}}),$("body").on("click","[data-toggle=tab]",tab_select),$(document).on("click",'[data-toggle="popover"]',function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this);void 0!==t.data("bs.popover")&&t.data("bs.popover").$tip.is(":visible")?$(this).popover("hide"):($('[data-toggle="popover"]').not(this).popover("hide"),t.popover({html:!0,trigger:"manual"}).popover("show"))}),$(document).on("click",function(e){$('[data-toggle="popover"]').popover("hide")}),"undefined"!=typeof moment&&(moment.langData()._meridiemParse=/[ap]\.?m?\.?/i,moment.langData().meridiem=function(e,t,i){return 11<e?i?"pm":"PM":i?"am":"AM"})});var modal_open=function(e){$.get(e,function(e){var t=$("#ajaxCrudModal").modal("show"),i=t.find(".modal-header");0==i.find(".modal-title").length&&i.append('<h4 class="modal-title"/>'),t.find(".modal-body").html(e.content),t.find(".modal-footer").html(e.footer),t.find(".modal-title").html(e.title)},"json")},tab_select=function(e){e.preventDefault();var t=this.href.split("#");if(2==t.length){t=t[1];var i=$("#"+t);if(0!=i.length)if(!i.hasClass("active"))return i.closest(".tab-content").find(".tab-pane.active").removeClass("active").removeClass("in"),i.addClass("in").addClass("active"),$(this).closest(".nav-tabs").find("li.active").removeClass("active"),$(this).closest("li").addClass("active"),!1}};function testImgPrew(){$("input[type=file]").on("change",function(e){var t=e.target.files[0];if(!t.type.match("image.*"))return!1;var i,n=new FileReader;data={el:this,f:t},n.onload=(i=data,function(e){img=$('[for="'+i.el.name+'"]'),0<img.length&&img.attr("src",e.target.result)}),n.readAsDataURL(t)}),$(".file_select input").on("change",function(e){var t=$('[for="'+this.name+'"]');0<t.length&&t.attr("src",this.value)})}function float_in_input(e){code=e.keyCode||e.charCode,char=String.fromCharCode(code),48<=code&&code<=57||13==code||(","!=char&&"."!=char||(val=this.value,-1!=val.indexOf(",")||-1!=val.indexOf(".")))&&(show_gritter(this),e.preventDefault())}function no_letters_in_input(e){code=e.keyCode||e.charCode,48<=code&&code<=57||13==code||(show_gritter(this),e.preventDefault())}function only_letters_in_input(e){code=e.keyCode||e.charCode,97<=code&&code<=122||13==code||65<=code&&code<=90||32==code||(show_gritter(this),e.preventDefault())}function only_no_foreign_letters_in_input(e){code=e.keyCode||e.charCode,48<=code&&code<=57||97<=code&&code<=122||65<=code&&code<=90||44==code||46==code||13==code||32==code||33==code||64==code||35==code||36==code||37==code||94==code||38==code||42==code||40==code||41==code||95==code||43==code||45==code||61==code||8==code||9==code||39==code||(show_gritter(this),e.preventDefault())}function show_gritter(e){}function stopEvent(e){return e.preventDefault(),!1}function showControl(e){return $(".temp_show.active").removeClass("active"),id=$(this).attr("for"),control_d=eval(id),control=$("#"+id+"-wrap"),control.addClass("active").html(control_d),e.preventDefault(),!1}$(function(){$("body").on("click","button.file_select",function(e){var t=$("meta[name=csrf-param]").attr("content"),i=$("meta[name=csrf-token]").attr("content"),n={};n[t]=i,param={startPathHash:"",customData:n,useBrowserHistory:!1,resizable:!1,width:"100%",height:"100%",zIndex:99999,url:"/elfinder/connect?filter=image",lang:app.language.split("-")[0].toLowerCase(),dialogContained:!0,getFileCallback:function(e){var t=$(this).attr("for"),i=$('[name="'+t+'"]'),n=$('img[for="'+t+'"]');i.val(e.url),0<n.length&&n.attr("src",e.url),jQuery("button.ui-dialog-titlebar-close").click()}.bind(this)},jQuery("<div >").dialog({modal:!0,width:"80%",title:app.i18n.insert_img,zIndex:99999,create:function(e,t){jQuery(this).elfinder(param).elfinder("instance")}}),$(".ui-dialog").css({"z-index":999999})})});var template=!1;function init_template(){var t,i;template||(t=!1,i={},$.get("/tpls",function(e){for(index in e)i[index]=Twig.twig({data:e[index]});t=!0},"json"),template={render:function n(e,t){return i[e]?i[e].render(t):""},ready:function e(){return t}})}$(function(){function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}$("#ajaxCrudModal").on("show.bs.modal",function(e){$("#ajaxCrudModal").find(".modal-header button.close").show()}),app.ckeditor_init=function(t){CKEDITOR.inline(t,{height:100,language:app.language,toolbarGroups:[{name:"undo"},{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","align"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},"/",{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"mode"}],removeButtons:"Flash,Table,Smiley,SpecialChar,PageBreak,Iframe",removePlugins:"elementspath",extraPlugins:"sourcedialog,token,imageresizerowandcolumn",resize_enabled:!1,filebrowserBrowseUrl:"/elfinder/manager",filebrowserImageBrowseUrl:"/elfinder/manager?filter=image",filebrowserFlashBrowseUrl:"/elfinder/manager?filter=flash",on:{instanceReady:function(e){mihaildev.ckEditor.registerOnChange(t)}}})},app.ckeditor_toggleReadOnly=function(e){app.ckeditor_isReadOnly(e)?app.ckeditor_setReadOnly(e,!1):app.ckeditor_setReadOnly(e,!0)},app.ckeditor_setReadOnly=function(e,t){CKEDITOR.instances[e].setReadOnly(t)},app.ckeditor_isReadOnly=function(e){return CKEDITOR.instances[e].readOnly},app.ckeditor_destroy=function(e){CKEDITOR.instances[e].destroy()},$('[role="ckeditor-inline"]').each(function(e,t){var i=$(t).attr("id");void 0!==i&&app.ckeditor_init(i)}),CKEDITOR.plugins.add("token",{requires:"widget",init:function(e){var t="{".length,i=0-"}".length;e.widgets.add("token",{requiredContent:"span(cke_token)",init:function(){this.setData("name",this.element.getText().slice(t,i))},data:function(){this.element.setText("{"+this.data.name+"}")},downcast:function(){return new CKEDITOR.htmlParser.text("{"+this.data.name+"}")}}),e.addFeature(e.widgets.registered.token),e.on("paste",function(e){var t=e.data.dataTransfer.getData("token");t&&(e.data.dataValue='<span class="cke_token">'+t+"</span>")})},afterInit:function(n){var e=i("{"),t=i("}"),s=new RegExp(e+"([^"+e+t+"])+"+t,"g");n.dataProcessor.dataFilter.addRules({text:function(e,t){var i=t.parent&&CKEDITOR.dtd[t.parent.name];if(!i||i.span)return e.replace(s,function(e){var t=new CKEDITOR.htmlParser.element("span",{"class":"cke_token"});return t.add(new CKEDITOR.htmlParser.text(e)),n.widgets.wrapElement(t,"token").getOuterHtml()})}})}}),CKEDITOR.on("instanceReady",function(){CKEDITOR.document.getById("tokensList").on("dragstart",function(e){var t=e.data.getTarget().getAscendant("span",!0);CKEDITOR.plugins.clipboard.initDragDataTransfer(e);var i=e.data.dataTransfer;i.setData("token",t.getText()),i.setData("text/html",t.getText()),i.$.setDragImage&&i.$.setDragImage(t.$,0,0)})});var c,d,p,e=$("meta[name=csrf-param]").attr("content"),t=$("meta[name=csrf-token]").attr("content"),h={image:"",flash:"",files:"",link:"",fb:"l1_Lw"},f={},l=function(e,i){$("<img/>").attr("src",e).on("load",function(){var e=this.naturalWidth,t=this.naturalHeight;(400<e||400<t)&&(t<e?(t=Math.floor(t*(400/e)),e=400):(e=Math.floor(e*(400/t)),t=400)),i({width:e,height:t})})},g=function(e,t){var i,n=t.convAbsUrl(e.url),s=CKEDITOR.dialog.getCurrent(),o=s._.name,a=s._.currentTabId;if("image"==o)i="txtUrl";else if("flash"==o)i="src";else if("files"==o||"link"==o)i="url";else{if("image2"!=o)return;i="src"}if("Upload"==a&&(a="info",s.selectPage(a)),s.setValueOf(a,i,n),"image"==o&&"info"==a)l(n,function(e){s.setValueOf("info","txtWidth",e.width),s.setValueOf("info","txtHeight",e.height),s.preview.$.style.width=e.width+"px",s.preview.$.style.height=e.height+"px",s.setValueOf("Link","txtUrl",n),s.setValueOf("Link","cmbTarget","_blank")});else if("image2"==o&&"info"==a)s.setValueOf(a,"alt",e.name+" ("+d.formatSize(e.size)+")"),l(n,function(e){setTimeout(function(){s.setValueOf("info","width",e.width),s.setValueOf("info","height",e.height)},100)});else if("files"==o||"link"==o)try{s.setValueOf("info","linkDisplayText",e.name)}catch(r){}};f[e]=t,CKEDITOR.on("dialogDefinition",function(e){for(var t,i,n,o,a=e.editor,s=e.data.definition,r=s.contents.length,l=0;l<r;l++){try{t=s.contents[l].get("browse"),i=s.contents[l].get("upload"),n=s.contents[l].get("uploadButton")}catch(u){t=i=null}null!==t&&(t.hidden=!1,t.onClick=function(e,t){"image2"===(p=CKEDITOR.dialog.getCurrent()._.name)&&(p="image"),c&&(h[p]&&h[p]!=d.cwd().hash&&d.request({data:{cmd:"open",target:h[p]},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!0}),c.dialog("open"))}),null!==i&&null!==n&&(i.hidden=!1,n.hidden=!1,i.onChange=function(){o=this.domId},n.onClick=function(e){"image2"===(p=CKEDITOR.dialog.getCurrent()._.name)&&(p="image");var t=h[p]?h[p]:h.fb,i=$("#"+o).find("iframe").contents().find("form").find("input:file"),n=function(e){alert(d.i18n(e).replace("<br>","\n"))};if(i.val()){var s=new FormData;s.append("cmd","upload"),s.append("target",t),s.append("overwrite",0),$.each(f,function(e,t){s.append(e,t)}),s.append("upload[]",i[0].files[0]),$.ajax({url:a.config.filebrowserUploadUrl,type:"POST",data:s,processData:!1,contentType:!1,dataType:"json"}).done(function(e){e.added&&e.added[0]?(d.exec("reload"),g(e.added[0])):n(e.error||e.warning||"errUploadFile")}).fail(function(){n("errUploadFile")}).always(function(){i.val("")})}return!1})}}),CKEDITOR.on("instanceReady",function(e){(c=$('<div style="padding:0;">')).dialog({autoOpen:!1,modal:!0,width:"80%",title:"Server File Manager",create:function(e,t){var i=h[p]&&h[p]?h[p]:"";d=$(this).elfinder({startPathHash:i,useBrowserHistory:!1,resizable:!1,width:"100%",url:"/elfinder/connect",lang:app.language,dialogContained:!0,getFileCallback:function(e,t){g(e,t),c.dialog("close")}}).elfinder("instance")},open:function(){c.find("div.elfinder-toolbar input").blur(),setTimeout(function(){d.enable()},100)},resizeStop:function(){c.trigger("resize")}}).parent().css({zIndex:"11000"});var t=e.editor;t.on("fileUploadRequest",function(e){var t=h.image?h.image:h.fb,i=e.data.fileLoader,n=i.xhr,s=new FormData;e.stop(),n.open("POST",i.uploadUrl,!0),s.append("cmd","upload"),s.append("target",t),s.append("upload[]",i.file,i.fileName),n.send(s)},null,null,4),t.on("fileUploadResponse",function(e){var t;e.stop();var i=e.data,n=JSON.parse(i.fileLoader.xhr.responseText);if(!n.added||n.added.length<1)i.message="Can not upload.",e.cancel();else{if(d.exec("reload"),(t=n.added[0]).url&&"1"!=t.url){i.url=t.url;try{i.url=decodeURIComponent(i.url)}catch(e){}}else i.url=d.options.url+(-1===d.options.url.indexOf("?")?"?":"&")+"cmd=file&target="+t.hash;i.url=d.convAbsUrl(i.url)}})}),$(document).on("click",".shop-open-link",function(e){e.preventDefault();var t=$(this),i=$("#__visit-form__");modal.doRemote(t.attr("href"),"POST",i.serialize(),{contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0})})}),$(function(){$(document).on("click",".show_out_of_stock",function(e){this.checked?$(".shop_item.is-not-active").show():$(".shop_item.is-not-active").hide()})}),editor=function(){var p=!1;!function r(){if(p)return;t=!1,i={},$.get("/admin/template/tpls",function(e){for(index in e)i[index]=Twig.twig({data:e[index]});t=!0},"json"),p={render:function n(e,t){return i[e]?i[e].render(t):""},ready:function e(){return t}};var t,i}();var A=0,h={revert:!0,placeholder:"sortable-placeholder",connectWith:".editor-content-row,.editor-content",handle:".handle",stop:function(e,t){if(t.item.hasClass("ui-draggable")){t.item[0].removeAttribute("class"),t.item[0].removeAttribute("style");var i=t.item.data("tag"),n=t.item.data("sub-tag");if("row"==i){n=[];var s=t.item.find(".blockbuilder-column");for(col_k in s){var o=s[col_k];for(class_k in o.classList){var a=o.classList[class_k];if(0==a.indexOf("col-")){n.push(a.substr(4));break}}}}l(t.item,i,{},n)}var r=t.item.closest(".editor-content-row");0<r.length&&0<r.find(".tag_wrap").length&&r.removeClass("col-empty")},start:function(e,t){var i=t.item.closest(".editor-content-row");0<i.length&&1==i.find(".tag_wrap").length&&i.addClass("col-empty")}};function e(){var e=$(this),t=e.closest(".form-group").find("input"),i=e.val();t.val(i),$(".editor-full").css("background-color",i)}function c(e){var t;t="object"==typeof e?$(".on_edit"):this.el;var i=this.name,n=this.value,s=t.data("params"),o=t.data("data"),a="";if(s[i].isLanguage){var r=$("[name=language]:checked").val();a=o[i][r],o[i][r]=n}else a=o[i],o[i]=n;t.data("data",o),(s=s[i]).sufix&&(n+=s.sufix,a+=s.sufix),s.prefix&&(n=s.prefix+n,a=s.prefix+a);e="this"==s.el?t:t.find(s.el);for(param_k in s.params){var l=s.params[param_k];0==l.indexOf("style.")?(l=l.split("style.")[1],e[0].style[l]=n):"class"==l?(e.removeClass(a),e.addClass(n)):e[0][l]=n}}function l(e,t,i,n){var s=function c(e,t,i){if(!options_list[e])return!1;t=t?Object.assign(t):{};if(t.editor=!0,"table"==e){if(!table_list[i])return!1;t.table=Object.assign(table_list[i]),"undefined"!=typeof t.items&&(t.table_list=t.items),"undefined"!=typeof t.hidden?t.table.hidden=t.hidden:t.table.hidden=[],"undefined"!=typeof t.direction?t.table.type=t.direction:t.direction=t.table.type,"undefined"==typeof t.items&&(t.items=Object.keys(t.table.list))}else"row"==e&&"undefined"==typeof t.rows&&(t.rows=i);i&&(t.sub_type=i);var n=p.render("editor_"+e,t);return!!n&&(n="<div class=li_wrap type='"+("row"==e?"row":"content")+"'>"+n+'<i class="glyphicon glyphicon-move handle"></i><i class="glyphicon glyphicon-trash trash"></i></div>')}(t,i,n);if(s){e.addClass("tag_wrap"),e.html(s),e.find(".col-empty").attr("empty_msg","No content here. Drag content from components.");var o=e.find(".li_wrap");if(i&&o.data("data",i),e.data("tag",t),f(t,o,!0,n),"table"==t){e.data("sub-tag",n);var a=e.eq(0).find(".sort_list");a.sortable({revert:!0,placeholder:"sortable-placeholder",stop:function(e,t){for(var i=t.item.closest(".li_wrap"),n=t.item.parent().find("li"),s=i.data("data"),o=[],a=0;a<n.length;a++){var r=n.eq(a).data("name");r&&o.push(r)}s.items=o,i.data("data",s)}}).disableSelection();var r=Object.assign(o.data("data"));"undefined"!=typeof i.items?r.items=i.items:r.items=function d(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}(table_list[n].list),"undefined"!=typeof i.hidden?r.hidden=i.hidden:r.hidden=[],o.data("data",r),a.find(".hide_show").on("click",function(){var e=$(this).closest("li"),t=e.data("name"),i=e.closest(".li_wrap"),n=i.data("data");"undefined"==typeof n.hidden&&(n.hidden=[]);var s=n.hidden.indexOf(t);e.hasClass("el_hidden")?(e.removeClass("el_hidden"),0<=s&&n.hidden.splice(s,1)):(e.addClass("el_hidden"),-1==s&&n.hidden.push(t)),i.data("data",n)})}if("row"==t){var l=e.find(".blockbuilder-row-tool-editor ul").sortable(h);if("undefined"!=typeof i.items)for(var u=0;u<i.items.length;u++)g(l.eq(u),i.items[u])}}else e.remove()}function f(e,t,i,n){var s="",o={};if(t.data("data"))o=t.data("data");else if(o={},"table"==e){var a=table_list[n].type;o.direction=a}var r={};n&&table_list[n]&&table_list[n].hide&&(r=table_list[n].hide);var l={},u=[];tag_params=options_list[e];for(var c=$("[name=language]:checked").val(),d=$("[name=language]"),p=0;p<tag_params.length;p++){s+="<h4>"+(w=tag_params[p].title||tag_params[p].name)+"</h4>";for(var h=0;h<tag_params[p].items.length;h++){var f,g="this"==tag_params[p].items[h].element?t:t.find(tag_params[p].items[h].element),m=tag_params[p].items[h].name,v=!1;l[m]={},"undefined"!=typeof tag_params[p].items[h].param&&(v=tag_params[p].items[h].param.split("|"),l[m].params=v,tag_params[p].items[h].sufix&&(l[m].sufix=tag_params[p].items[h].sufix),tag_params[p].items[h].prefix&&(l[m].prefix=tag_params[p].items[h].prefix));a=tag_params[p].items[h].type;if(l[m].type=a,l[m].el=tag_params[p].items[h].element,l[m].isLanguage=!!tag_params[p].items[h].isLanguage,i){if(f=r[m]?r[m]:o[m]?tag_params[p].items[h].isLanguage?o[m][c]:o[m]:"undefined"==typeof tag_params[p].items[h]["default"]?o[m]:tag_params[p].items[h]["default"],tag_params[p].items[h].isLanguage)if(t.addClass("hasLanguage"),u.push(m),"undefined"==typeof o[m]){o[m]={};for(var y=0;y<d.length;y++){var _=d.eq(y).val();o[m][_]=_+" "+f}f=o[m][c]}else o[m][c]=f;else o[m]=f;if(tag_params[p].items[h].sufix&&(f+=tag_params[p].items[h].sufix),tag_params[p].items[h].prefix&&(f=tag_params[p].items[h].prefix+f),v)for(param_k in v){var b=v[param_k],x=!1;0==b.indexOf("style.")&&(x=!0,b=b.split("style.")[1]),0<g.length&&(x?g[0].style[b]=f:"style"==g[0][b]?g.addClass(f):g[0][b]=f)}}else f=tag_params[p].items[h].isLanguage?o[m][c]:o[m];if("none"!=a&&!r[m])if("ckeditor"!=a){var w=tag_params[p].items[h].title||tag_params[p].items[h].name,k="undefined"!=typeof tag_params[p].items[h].list?tag_params[p].items[h].list:[];if(tag_params[p].items[h].isLanguage?s+="<label class='isLanguage'><span>"+w+"</span><br>":s+="<label>"+w+"<br>","text"==a&&(s+='<input name="'+m+'" value="'+f+'">'),"number"==a&&(s+='<input name="'+m+'" class=num value="'+f+'">'),"color"==a&&(s+='<input name="'+m+'" type=color value="'+f+'">'),"font"==a&&(k=["Arial","Verdana","Times New Roman","Georgia","Verdana","Courier New","Lucida Console"],a="select"),"align"==a&&(k=align_list,a="select"),"select"==a){for(var C in s+='<select name="'+m+'">',k){var D=Array.isArray(k)?k[C]:C;s+="<option value='"+D+"'"+(D==f?"  selected":"")+">"+k[C]+"</option>"}s+="</select>"}s+="</label>"}else if(l[m].editor_id=g.attr("id"),!l[m].editor_id){for(;0<$("#cedit_"+A).length;)A++;l[m].editor_id="cedit_"+A,g.attr("id","cedit_"+A),g.attr("name",m),g.html(f),g.on("change",function(){var e=this.el,t=this.parent,i=e.attr("name"),n=t.data("params"),s=t.data("data"),o=e.val();if(n[i].isLanguage){var a=$("[name=language]:checked").val();s[i][a],s[i][a]=o}else s[i],s[i]=o;t.data("data",s)}.bind({el:g,parent:t})),app.ckeditor_init("cedit_"+A),g.data("data",o)}}}return i&&(t.data("data",o),t.data("lg_var",u)),t.data("params",l),s}function t(){data={data:function c(e){for(var t=[],i=e.find(">li"),n=0;n<i.length;n++){var s=i.eq(n),o=Object.assign(s.find(">.li_wrap").data("data")),a=s.data("tag"),r=s.data("sub-tag"),l={type:a,data:o};if("table"==a&&(l.sub_type=r,l.data&&l.data.table&&delete l.data.table),l.data&&l.data.editor&&delete l.data.editor,"row"==a){$sub_ul=s.find(".editor-content-row"),l.data.items=[];for(var u=0;u<$sub_ul.length;u++)l.data.items.push(c($sub_ul.eq(u)))}t.push(l)}return t}($(".editor-content"))},els=$("#content-subject,#content-text").find(".hasLanguage");for(var e=0;e<els.length;e++){var t=els.eq(e),i=t.data("data");data[t.attr("name")]=i}return data}function g(e,t){e.html("");for(var i=0;i<t.length;i++){var n=$("<li/>");e.append(n),l(n,t[i].type,t[i].data,t[i].sub_type)}0<e.find(">li").length&&e.removeClass("col-empty")}function i(e){if(p.ready()){"string"==typeof e&&(e=JSON.parse(e));var t=$(".editor-content");"undefined"!=typeof e.data&&g(t,e.data),"undefined"!=typeof e.subject&&$("#content-subject .editor-content-input").data("data",e.subject),"undefined"!=typeof e.text&&$("#content-text .editor-content-textarea").data("data",e.text),$("[name=language]").change()}else setTimeout(function(){editor.setData(this)}.bind(e),100)}function n(){var e,t=$("[name=language]:checked").val();e="DIV"===this.nodeName?function n(e){return e=e.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,t){return-1<"<div><p><br>".indexOf("<"+t.toLowerCase()+">")?"\n":""})}($(this).html()):$(this).val();var i=$(this).data("data");i[t]=e,$(this).data("data",i)}function s(e){el=this;var t=d(el.innerHTML,el.classList.contains("is_string"));if(el.innerHTML!=t){el.innerHTML=t;var i=document.createRange();i.selectNodeContents(el),i.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(i)}}function d(e,i){return e=(e=e.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,t){return-1<"<span>".indexOf("<"+t.toLowerCase()+">")?e:!i&&-1<"<div><p><br>".indexOf("<"+t.toLowerCase()+">")?e:""})).replace(/\{\/?([a-z0-9\.\ _]*)\}/gi,function(e,t){return"<span contentEditable = false>{ <span>"+t.trim()+"</span> }</span>"})}$("#editor-components li").draggable({connectToSortable:".editor-content,.editor-content-row",helper:"clone",revert:"invalid",opacity:.5}).disableSelection(),$("#editor-row li").draggable({connectToSortable:".editor-content",helper:"clone",revert:"invalid",opacity:.5}).disableSelection(),$(".editor-content").on("click","a",function(e){return e.preventDefault(),e.preventDefault(),e.stopPropagation(),!1}),$(".editor-panel .width").on("change",function(){$(".editor-content").css("width",this.value)}),$(".editor-panel .color").closest(".form-group").find("input").on("change",e).on("input",e).on("keyup",e),$("[name=language]").on("change",function(){var e=$(".editor-content .on_edit");0<e.length&&(e.removeClass("on_edit"),e.click());for(var t=$("[name=language]:checked").val(),i=$(".editor-content .hasLanguage"),n=0;n<i.length;n++){var s=(u=i.eq(n)).data("lg_var"),o=u.data("data"),a=u.data("params");for(name_i in s){var r=s[name_i];if("ckeditor"!=a[r].type){var l="undefined"!=typeof o[r]&&"undefined"!=typeof o[r][t]?o[r][t]:"";c.bind({name:r,value:l,el:u})()}else CKEDITOR.instances[a[r].editor_id].setData(o[r][t])}}i=$("#content-subject,#content-text").find(".hasLanguage");for(n=0;n<i.length;n++){var u;l="undefined"!=typeof(o=(u=i.eq(n)).data("data"))[t]?o[t]:"";u.val(l),u.html(d(l).split("\n").join("<br>\n"))}}),$(".editor-content").sortable(h).on("click",".li_wrap",function(e){if($this=$(this),!$this.hasClass("on_edit")){$this.closest(".editor-content").find(".on_edit").removeClass("on_edit"),$this.addClass("on_edit");var t=$('.editor-panel [href="#editor-option"]');t.parent().removeClass("hidden"),tab_select.bind(t[0])(e);var i=$("#editor-option");return i.html(f($this.parent().data("tag"),$this,!1,$this.parent().data("subTag"))),i.find("input,select").on("change",c).on("input",c).on("keyup",c),!1}}).on("click",".trash",function(e){e.preventDefault(),e.stopPropagation();var t=$(this),i=t.closest(".tag_wrap");if(t.closest(".li_wrap").hasClass("on_edit")){var n=$('.editor-panel [href="#editor-option"]');n.parent().hasClass("active")&&tab_select.bind(n.closest("ul").find("li:first").find("a")[0])(e),n.parent().addClass("hidden")}var s=t.closest(".editor-content-row");0<s.length&&1==s.find(".tag_wrap").length&&s.addClass("col-empty"),i.remove()});var o=$("<div/>",{"class":"hasLanguage editor-content-input form-control is_string",contenteditable:"true",name:"subject"}).data("data",{}).on("input",s).on("keyup",n);$("#content-subject").append("Тема письма").append(o);o=$("<div/>",{"class":"hasLanguage editor-content-textarea",contenteditable:"true",name:"text"}).data("data",{}).on("input",s).on("keyup",n);$("#content-text").find("div").append(o);var a=$(".w_editor");return 1==a.length&&(a.hide(),i(JSON.parse(a.val())),$(".editor-panel .btn-save").on("click",function(){$(".w_editor").val(JSON.stringify(t())),$(".w_editor").closest("form").submit()})),$(".editor-panel .btn-send").on("click",function(){var e={action:$(".w_editor").closest("form").attr("action"),language:$("[name=language]:checked").val(),data:JSON.stringify(t()),"_csrf-frontend":$(".w_editor").closest("form").find("[name=_csrf-frontend]").val()};$.post("/admin/template/preview?db=1",e,function(e){var t={buttonYes:!1,notyfy_class:"send-email",question:e.html};e.title&&(t.title=e.title),notification.alert(t),ajaxForm($(".notify_box .notify_content"))},"json")}),{getData:t,setData:i,sort_params:h}}(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Twig=t():e.Twig=t()}(this,function(){return function(i){function n(e){if(s[e])return s[e].exports;var t=s[e]={exports:{},id:e,loaded:!1};return i[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var s={};return n.m=i,n.c=s,n.p="",n(0)}([function(e,t,i){var n={VERSION:"0.10.2"};i(1)(n),i(2)(n),i(3)(n),i(5)(n),i(6)(n),i(7)(n),i(17)(n),i(18)(n),i(22)(n),i(23)(n),i(24)(n),i(25)(n),i(26)(n),i(27)(n),i(28)(n),e.exports=n.exports},function(e,t){e.exports=function(y){"use strict";return y.trace=!1,y.debug=!1,y.cache=!0,y.noop=function(){},y.placeholders={parent:"{{|PARENT|}}"},y.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(null==e)throw new TypeError;var i=Object(e),n=i.length>>>0;if(0===n)return-1;var s=0;if(0<arguments.length&&((s=Number(t))!=s?s=0:0!==s&&s!==1/0&&s!==-1/0&&(s=(0<s||-1)*Math.floor(Math.abs(s)))),n<=s)return-1;for(var o=0<=s?s:Math.max(n-Math.abs(s),0);o<n;o++)if(o in i&&i[o]===t)return o;return e==t?0:-1},y.forEach=function(e,t,i){if(Array.prototype.forEach)return e.forEach(t,i);var n,s;if(null==e)throw new TypeError(" this is null or not defined");var o=Object(e),a=o.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(i&&(n=i),s=0;s<a;){var r;s in o&&(r=o[s],t.call(n,r,s,o)),s++}},y.merge=function(t,i,n){return y.forEach(Object.keys(i),function(e){(!n||e in t)&&(t[e]=i[e])}),t},y.Error=function(e,t){this.message=e,this.name="TwigException",this.type="TwigException",this.file=t},y.Error.prototype.toString=function(){return this.name+": "+this.message},y.log={trace:function(){y.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){y.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?"undefined"!=typeof console.error?y.log.error=function(){console.error.apply(console,arguments)}:"undefined"!=typeof console.log&&(y.log.error=function(){console.log.apply(console,arguments)}):y.log.error=function(){},y.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},y.token={},y.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},y.token.definitions=[{type:y.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:y.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:y.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:y.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:y.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:y.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:y.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:y.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:y.token.type.output,open:"{{",close:"}}"},{type:y.token.type.logic,open:"{%",close:"%}"},{type:y.token.type.comment,open:"{#",close:"#}"}],y.token.strings=['"',"'"],y.token.findStart=function(e){var t,i,n,s,o={position:null,close_position:null,def:null};for(t=0;t<y.token.definitions.length;t++)i=y.token.definitions[t],n=e.indexOf(i.open),s=e.indexOf(i.close),y.log.trace("Twig.token.findStart: ","Searching for ",i.open," found at ",n),0<=n&&i.open.length!==i.close.length&&s<0||(0<=n&&(null===o.position||n<o.position)?(o.position=n,o.def=i,o.close_position=s):0<=n&&null!==o.position&&n===o.position&&(i.open.length>o.def.open.length?(o.position=n,o.def=i,o.close_position=s):i.open.length===o.def.open.length&&(i.close.length,o.def.close.length,0<=s&&s<o.close_position&&(o.position=n,o.def=i,o.close_position=s))));return delete o.close_position,o},y.token.findEnd=function(e,t,i){for(var n,s,o=null,a=!1,r=0,l=null,u=null,c=null,d=null,p=null,h=null;!a;){if(u=l=null,!(0<=(c=e.indexOf(t.close,r))))throw new y.Error("Unable to find closing bracket '"+t.close+"' opened near template position "+i);if(o=c,a=!0,t.type===y.token.type.comment)break;if(t.type===y.token.type.raw)break;for(s=y.token.strings.length,n=0;n<s;n+=1)0<(p=e.indexOf(y.token.strings[n],r))&&p<c&&(null===l||p<l)&&(l=p,u=y.token.strings[n]);if(null!==l)for(d=l+1,o=null,a=!1;;){if((h=e.indexOf(u,d))<0)throw"Unclosed string in template";if("\\"!==e.substr(h-1,1)){r=h+1;break}d=h+1}}return o},y.tokenize=function(e){for(var t=[],i=0,n=null,s=null;0<e.length;)if(n=y.token.findStart(e),y.log.trace("Twig.tokenize: ","Found token: ",n),null!==n.position){if(0<n.position&&t.push({type:y.token.type.raw,value:e.substring(0,n.position)}),e=e.substr(n.position+n.def.open.length),i+=n.position+n.def.open.length,s=y.token.findEnd(e,n.def,i),y.log.trace("Twig.tokenize: ","Token ends at ",s),t.push({type:n.def.type,value:e.substring(0,s).trim()}),"\n"===e.substr(s+n.def.close.length,1))switch(n.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":s+=1}e=e.substr(s+n.def.close.length),i+=s+n.def.close.length}else t.push({type:y.token.type.raw,value:e}),e="";return t},y.compile=function(e){try{for(var t=[],i=[],n=[],s=null,o=null,a=null,r=null,l=null,u=null,c=null,d=null,p=null,h=null,f=null,g=null,m=function(e){y.expression.compile.apply(this,[e]),0<i.length?n.push(e):t.push(e)},v=function(e){if(o=y.logic.compile.apply(this,[e]),h=o.type,f=y.logic.handler[h].open,g=y.logic.handler[h].next,y.log.trace("Twig.compile: ","Compiled logic token to ",o," next is: ",g," open is : ",f),void 0!==f&&!f){if(r=i.pop(),c=y.logic.handler[r.type],y.indexOf(c.next,h)<0)throw new Error(h+" not expected after a "+r.type);r.output=r.output||[],r.output=r.output.concat(n),n=[],p={type:y.token.type.logic,token:r},0<i.length?n.push(p):t.push(p)}void 0!==g&&0<g.length?(y.log.trace("Twig.compile: ","Pushing ",o," to logic stack."),0<i.length&&((r=i.pop()).output=r.output||[],r.output=r.output.concat(n),i.push(r),n=[]),i.push(o)):void 0!==f&&f&&(p={type:y.token.type.logic,token:o},0<i.length?n.push(p):t.push(p))};0<e.length;){switch(s=e.shift(),l=t[t.length-1],u=n[n.length-1],d=e[0],y.log.trace("Compiling token ",s),s.type){case y.token.type.raw:0<i.length?n.push(s):t.push(s);break;case y.token.type.logic:v.call(this,s);break;case y.token.type.comment:break;case y.token.type.output:m.call(this,s);break;case y.token.type.logic_whitespace_pre:case y.token.type.logic_whitespace_post:case y.token.type.logic_whitespace_both:case y.token.type.output_whitespace_pre:case y.token.type.output_whitespace_post:case y.token.type.output_whitespace_both:switch(s.type!==y.token.type.output_whitespace_post&&s.type!==y.token.type.logic_whitespace_post&&(l&&l.type===y.token.type.raw&&(t.pop(),null===l.value.match(/^\s*$/)&&(l.value=l.value.trim(),t.push(l))),u&&u.type===y.token.type.raw&&(n.pop(),null===u.value.match(/^\s*$/)&&(u.value=u.value.trim(),n.push(u)))),s.type){case y.token.type.output_whitespace_pre:case y.token.type.output_whitespace_post:case y.token.type.output_whitespace_both:m.call(this,s);break;case y.token.type.logic_whitespace_pre:case y.token.type.logic_whitespace_post:case y.token.type.logic_whitespace_both:v.call(this,s)}s.type!==y.token.type.output_whitespace_pre&&s.type!==y.token.type.logic_whitespace_pre&&d&&d.type===y.token.type.raw&&(e.shift(),null===d.value.match(/^\s*$/)&&(d.value=d.value.trim(),e.unshift(d)))}y.log.trace("Twig.compile: "," Output: ",t," Logic Stack: ",i," Pending Output: ",n)}if(0<i.length)throw a=i.pop(),new Error("Unable to find an end tag for "+a.type+", expecting one of "+a.next);return t}catch(e){if(this.options.rethrow)throw"TwigException"!=e.type||e.file||(e.file=this.id),e;y.log.error("Error compiling twig template "+this.id+": "),e.stack?y.log.error(e.stack):y.log.error(e.toString())}},y.parse=function(e,i,t){function n(e){if(o.options.rethrow)throw"string"==typeof e&&(e=new y.Error(e)),"TwigException"!=e.type||e.file||(e.file=o.id),e;if(y.log.error("Error parsing twig template "+o.id+": "),e.stack?y.log.error(e.stack):y.log.error(e.toString()),y.debug)return e.toString()}var s,o=this,a=[],r=null,l=!0,u=!0;if(s=y.async.forEach(e,function(e){switch(y.log.debug("Twig.parse: ","Parsing token: ",e),e.type){case y.token.type.raw:a.push(y.filters.raw(e.value));break;case y.token.type.logic:var t=e.token;return y.logic.parseAsync.apply(o,[t,i,u]).then(function(e){void 0!==e.chain&&(u=e.chain),void 0!==e.context&&(i=e.context),void 0!==e.output&&a.push(e.output)});case y.token.type.comment:break;case y.token.type.output_whitespace_pre:case y.token.type.output_whitespace_post:case y.token.type.output_whitespace_both:case y.token.type.output:return y.log.debug("Twig.parse: ","Output token: ",e.stack),y.expression.parseAsync.apply(o,[e.stack,i]).then(function(e){a.push(e)})}}).then(function(){return a=y.output.apply(o,[a]),l=!1,a})["catch"](function(e){t&&n(e),r=e}),t)return s;if(null!==r)return n(r);if(l)throw new y.Error("You are using Twig.js in sync mode in combination with async extensions.");return a},y.prepare=function(e){var t,i;return y.log.debug("Twig.prepare: ","Tokenizing ",e),i=y.tokenize.apply(this,[e]),y.log.debug("Twig.prepare: ","Compiling ",i),t=y.compile.apply(this,[i]),y.log.debug("Twig.prepare: ","Compiled ",t),t},y.output=function(e){if(!this.options.autoescape)return e.join("");var t="html";"string"==typeof this.options.autoescape&&(t=this.options.autoescape);var i=[];return y.forEach(e,function(e){e&&!0!==e.twig_markup&&e.twig_markup!=t&&(e=y.filters.escape(e,[t])),i.push(e)}),y.Markup(i.join(""))},y.Templates={loaders:{},parsers:{},registry:{}},y.validateId=function(e){if("prototype"===e)throw new y.Error(e+" is not a valid twig identifier");if(y.cache&&y.Templates.registry.hasOwnProperty(e))throw new y.Error("There is already a template with the ID "+e);return!0},y.Templates.registerLoader=function(e,t,i){if("function"!=typeof t)throw new y.Error("Unable to add loader for "+e+": Invalid function reference given.");i&&(t=t.bind(i)),this.loaders[e]=t},y.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},y.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},y.Templates.registerParser=function(e,t,i){if("function"!=typeof t)throw new y.Error("Unable to add parser for "+e+": Invalid function regerence given.");i&&(t=t.bind(i)),this.parsers[e]=t},y.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},y.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},y.Templates.save=function(e){if(void 0===e.id)throw new y.Error("Unable to save template with no id");y.Templates.registry[e.id]=e},y.Templates.load=function(e){return y.Templates.registry.hasOwnProperty(e)?y.Templates.registry[e]:null},y.Templates.loadRemote=function(e,t,i,n){return void 0===t.async&&(t.async=!0),void 0===t.id&&(t.id=e),y.cache&&y.Templates.registry.hasOwnProperty(t.id)?("function"==typeof i&&i(y.Templates.registry[t.id]),y.Templates.registry[t.id]):(t.parser=t.parser||"twig",(this.loaders[t.method]||this.loaders.fs).apply(this,arguments))},y.Template=function(e){var t=e.data,i=e.id,n=e.blocks,s=e.macros||{},o=e.base,a=e.path,r=e.url,l=e.name,u=e.method,c=e.options;this.id=i,this.method=u,this.base=o,this.path=a,this.url=r,this.name=l,this.macros=s,this.options=c,this.reset(n),function d(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e}("String",t)?this.tokens=y.prepare.apply(this,[t]):this.tokens=t,void 0!==i&&y.Templates.save(this)},y.Template.prototype.reset=function(e){y.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:e||{}},this.extend=null},y.Template.prototype.render=function(e,i,t){i=i||{};var n,s,o,a=this,r=null,l=!0;this.context=e||{},this.reset(),i.blocks&&(this.blocks=i.blocks),i.macros&&(this.macros=i.macros);if(o=y.parseAsync.apply(this,[this.tokens,this.context]).then(function(e){var t;return a.extend?(a.options.allowInlineIncludes&&(t=y.Templates.load(a.extend))&&(t.options=a.options),t||(s=y.path.parsePath(a,a.extend),t=y.Templates.loadRemote(s,{method:a.getLoaderMethod(),base:a.base,async:!1,id:s,options:a.options})),a.parent=t,a.parent.renderAsync(a.context,{blocks:a.blocks})):"blocks"==i.output?a.blocks:"macros"==i.output?a.macros:e}).then(function(e){return l=!1,n=e})["catch"](function(e){if(t)throw e;r=e}),t)return o;if(null!==r)throw r;if(l)throw new y.Error("You are using Twig.js in sync mode in combination with async extensions.");return n},y.Template.prototype.importFile=function(e){var t,i;if(this.url||!this.options.allowInlineIncludes)return t=y.path.parsePath(this,e),y.Templates.loadRemote(t,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:t});if(e=this.path?y.path.parsePath(this,e):e,!(i=y.Templates.load(e))&&!(i=y.Templates.loadRemote(t,{id:e,method:this.getLoaderMethod(),async:!1,path:e,options:this.options})))throw new y.Error("Unable to find the template "+e);return i.options=this.options,i},y.Template.prototype.importBlocks=function(e,t){var i=this.importFile(e),n=this.context,s=this;t=t||!1,i.render(n),y.forEach(Object.keys(i.blocks),function(e){(t||void 0===s.blocks[e])&&(s.blocks[e]=i.blocks[e],s.importedBlocks.push(e))})},y.Template.prototype.importMacros=function(e){var t=y.path.parsePath(this,e);return y.Templates.loadRemote(t,{method:this.getLoaderMethod(),async:!1,id:t})},y.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},y.Template.prototype.compile=function(e){return y.compiler.compile(this,e)},y.Markup=function(e,t){return void 0===t&&(t=!0),"string"==typeof e&&0<e.length&&((e=new String(e)).twig_markup=t),e},y}},function(e,t){e.exports=function(o){return o.compiler={module:{}},o.compiler.compile=function(e,t){var i,n=JSON.stringify(e.tokens),s=e.id;if(t.module){if(void 0===o.compiler.module[t.module])throw new o.Error("Unable to find module type "+t.module);i=o.compiler.module[t.module](s,n,t.twig)}else i=o.compiler.wrap(s,n);return i},o.compiler.module={amd:function(e,t,i){return'define(["'+i+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+o.compiler.wrap(e,t)+"\n\treturn templates;\n});"},node:function(e,t){return'var twig = require("twig").twig;\nexports.template = '+o.compiler.wrap(e,t)},cjs2:function(e,t,i){return'module.declare([{ twig: "'+i+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+o.compiler.wrap(e,t)+"\n});"}},o.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},o}},function(e,t,i){e.exports=function(d){"use strict";function u(e,t,i){return t?d.expression.parseAsync.apply(e,[t,i]):d.Promise.resolve(!1)}for(d.expression={},i(4)(d),d.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if"],d.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},d.expression.set={operations:[d.expression.type.filter,d.expression.type.operator.unary,d.expression.type.operator.binary,d.expression.type.array.end,d.expression.type.object.end,d.expression.type.parameter.end,d.expression.type.subexpression.end,d.expression.type.comma,d.expression.type.test],expressions:[d.expression.type._function,d.expression.type.bool,d.expression.type.string,d.expression.type.variable,d.expression.type.number,d.expression.type._null,d.expression.type.context,d.expression.type.parameter.start,d.expression.type.array.start,d.expression.type.object.start,d.expression.type.subexpression.start,d.expression.type.operator.unary]},d.expression.set.operations_extended=d.expression.set.operations.concat([d.expression.type.key.period,d.expression.type.key.brackets,d.expression.type.slice]),d.expression.fn={compile:{push:function(e,t,i){i.push(e)},push_both:function(e,t,i){i.push(e),t.push(e)}},parse:{push:function(e,t,i){t.push(e)},push_value:function(e,t,i){t.push(e.value)}}},d.expression.definitions=[{type:d.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*(\s?as)?)/,next:d.expression.set.operations.concat([d.expression.type.parameter.start]),compile:function(e,t,i){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(i,n,e){var s=n.pop();return u(this,i.params,e).then(function(e){var t=d.test(i.filter,s,e);"not"==i.modifier?n.push(!t):n.push(t)})}},{type:d.expression.type.comma,regex:/^,/,next:d.expression.set.expressions.concat([d.expression.type.array.end,d.expression.type.object.end]),compile:function(e,t,i){var n,s=t.length-1;for(delete e.match,delete e.value;0<=s;s--){if((n=t.pop()).type===d.expression.type.object.start||n.type===d.expression.type.parameter.start||n.type===d.expression.type.array.start){t.push(n);break}i.push(n)}i.push(e)}},{type:d.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:d.expression.set.operations,compile:function(e,t,i){e.value=Number(e.value),i.push(e)},parse:d.expression.fn.parse.push_value},{type:d.expression.type.operator.binary,regex:/(^\?\:|^(b\-and)|^(b\-or)|^(b\-xor)|^[\+\-~%\?]|^[\:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[\(|\s+]|^(or)[\(|\s+]|^(in)[\(|\s+]|^(not in)[\(|\s+]|^\.\.)/,next:d.expression.set.expressions,transform:function(e,t){switch(e[0]){case"and(":case"or(":case"in(":case"not in(":return t[t.length-1].value=e[2],e[0];default:return""}},compile:function(e,t,i){delete e.match,e.value=e.value.trim();var n=e.value,s=d.expression.operator.lookup(n,e);for(d.log.trace("Twig.expression.compile: ","Operator: ",s," from ",n);0<t.length&&(t[t.length-1].type==d.expression.type.operator.unary||t[t.length-1].type==d.expression.type.operator.binary)&&(s.associativity===d.expression.operator.leftToRight&&s.precidence>=t[t.length-1].precidence||s.associativity===d.expression.operator.rightToLeft&&s.precidence>t[t.length-1].precidence);){var o=t.pop();i.push(o)}if(":"===n){if(!t[t.length-1]||"?"!==t[t.length-1].value){var a=i.pop();if(a.type===d.expression.type.string||a.type===d.expression.type.variable)e.key=a.value;else if(a.type===d.expression.type.number)e.key=a.value.toString();else{if(!a.expression||a.type!==d.expression.type.parameter.end&&a.type!=d.expression.type.subexpression.end)throw new d.Error("Unexpected value before ':' of "+a.type+" = "+a.value);e.params=a.params}return void i.push(e)}}else t.push(s)},parse:function(t,i,n){if(t.key)i.push(t);else{if(t.params)return d.expression.parseAsync.apply(this,[t.params,n]).then(function(e){t.key=e,i.push(t),n.loop||delete t.params});d.expression.operator.parse(t.value,i)}}},{type:d.expression.type.operator.unary,regex:/(^not\s+)/,next:d.expression.set.expressions,compile:function(e,t,i){delete e.match,e.value=e.value.trim();var n=e.value,s=d.expression.operator.lookup(n,e);for(d.log.trace("Twig.expression.compile: ","Operator: ",s," from ",n);0<t.length&&(t[t.length-1].type==d.expression.type.operator.unary||t[t.length-1].type==d.expression.type.operator.binary)&&(s.associativity===d.expression.operator.leftToRight&&s.precidence>=t[t.length-1].precidence||s.associativity===d.expression.operator.rightToLeft&&s.precidence>t[t.length-1].precidence);){var o=t.pop();i.push(o)}t.push(s)},parse:function(e,t,i){d.expression.operator.parse(e.value,t)}},{type:d.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:d.expression.set.operations_extended,compile:function(e,t,i){var n=e.value;delete e.match,n='"'===n.substring(0,1)?n.replace('\\"','"'):n.replace("\\'","'"),e.value=n.substring(1,n.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),d.log.trace("Twig.expression.compile: ","String value: ",e.value),i.push(e)},parse:d.expression.fn.parse.push_value},{type:d.expression.type.subexpression.start,regex:/^\(/,next:d.expression.set.expressions.concat([d.expression.type.subexpression.end]),compile:function(e,t,i){e.value="(",i.push(e),t.push(e)},parse:d.expression.fn.parse.push},{type:d.expression.type.subexpression.end,regex:/^\)/,next:d.expression.set.operations_extended,validate:function(e,t){for(var i=t.length-1,n=!1,s=!1,o=0;!n&&0<=i;){var a=t[i];(n=a.type===d.expression.type.subexpression.start)&&s&&(n=s=!1),a.type===d.expression.type.parameter.start?o++:a.type===d.expression.type.parameter.end?o--:a.type===d.expression.type.subexpression.end&&(s=!0),i--}return n&&0===o},compile:function(e,t,i){var n,s=e;for(n=t.pop();0<t.length&&n.type!=d.expression.type.subexpression.start;)i.push(n),n=t.pop();for(var o=[];e.type!==d.expression.type.subexpression.start;)o.unshift(e),e=i.pop();o.unshift(e),void 0===(n=t[t.length-1])||n.type!==d.expression.type._function&&n.type!==d.expression.type.filter&&n.type!==d.expression.type.test&&n.type!==d.expression.type.key.brackets?(s.expression=!0,o.pop(),o.shift(),s.params=o,i.push(s)):(s.expression=!1,n.params=o)},parse:function(e,t,i){if(e.expression)return d.expression.parseAsync.apply(this,[e.params,i]).then(function(e){t.push(e)});throw new d.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:d.expression.type.parameter.start,regex:/^\(/,next:d.expression.set.expressions.concat([d.expression.type.parameter.end]),validate:function(e,t){var i=t[t.length-1];return i&&d.indexOf(d.expression.reservedWords,i.value.trim())<0},compile:d.expression.fn.compile.push_both,parse:d.expression.fn.parse.push},{type:d.expression.type.parameter.end,regex:/^\)/,next:d.expression.set.operations_extended,compile:function(e,t,i){var n,s=e;for(n=t.pop();0<t.length&&n.type!=d.expression.type.parameter.start;)i.push(n),n=t.pop();for(var o=[];e.type!==d.expression.type.parameter.start;)o.unshift(e),e=i.pop();o.unshift(e),void 0===(e=i[i.length-1])||e.type!==d.expression.type._function&&e.type!==d.expression.type.filter&&e.type!==d.expression.type.test&&e.type!==d.expression.type.key.brackets?(s.expression=!0,o.pop(),o.shift(),s.params=o,i.push(s)):(s.expression=!1,e.params=o)},parse:function(e,t,i){var n=[],s=!1,o=null;if(e.expression)return d.expression.parseAsync.apply(this,[e.params,i]).then(function(e){t.push(e)});for(;0<t.length;){if((o=t.pop())&&o.type&&o.type==d.expression.type.parameter.start){s=!0;break}n.unshift(o)}if(!s)throw new d.Error("Expected end of parameter set.");t.push(n)}},{type:d.expression.type.slice,regex:/^\[(\d*\:\d*)\]/,next:d.expression.set.operations_extended,compile:function(e,t,i){var n=e.match[1].split(":"),s=n[0]?parseInt(n[0]):void 0,o=n[1]?parseInt(n[1]):void 0;e.value="slice",e.params=[s,o],o||(e.params=[s]),i.push(e)},parse:function(e,t,i){var n=t.pop(),s=e.params;t.push(d.filter.apply(this,[e.value,n,s]))}},{type:d.expression.type.array.start,regex:/^\[/,next:d.expression.set.expressions.concat([d.expression.type.array.end]),compile:d.expression.fn.compile.push_both,parse:d.expression.fn.parse.push},{type:d.expression.type.array.end,regex:/^\]/,next:d.expression.set.operations_extended,compile:function(e,t,i){for(var n,s=t.length-1;0<=s&&(n=t.pop()).type!==d.expression.type.array.start;s--)i.push(n);i.push(e)},parse:function(e,t,i){for(var n=[],s=!1,o=null;0<t.length;){if((o=t.pop()).type&&o.type==d.expression.type.array.start){s=!0;break}n.unshift(o)}if(!s)throw new d.Error("Expected end of array.");t.push(n)}},{type:d.expression.type.object.start,regex:/^\{/,next:d.expression.set.expressions.concat([d.expression.type.object.end]),compile:d.expression.fn.compile.push_both,parse:d.expression.fn.parse.push},{type:d.expression.type.object.end,regex:/^\}/,next:d.expression.set.operations_extended,compile:function(e,t,i){for(var n,s=t.length-1;0<=s&&(!(n=t.pop())||n.type!==d.expression.type.object.start);s--)i.push(n);i.push(e)},parse:function(e,t,i){for(var n={},s=!1,o=null,a=!1,r=null;0<t.length;){if((o=t.pop())&&o.type&&o.type===d.expression.type.object.start){s=!0;break}if(o&&o.type&&(o.type===d.expression.type.operator.binary||o.type===d.expression.type.operator.unary)&&o.key){if(!a)throw new d.Error("Missing value for key '"+o.key+"' in object definition.");n[o.key]=r,void 0===n._keys&&(n._keys=[]),n._keys.unshift(o.key),r=null,a=!1}else a=!0,r=o}if(!s)throw new d.Error("Unexpected end of object.");t.push(n)}},{type:d.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:d.expression.set.operations_extended.concat([d.expression.type.parameter.start]),compile:function(e,t,i){e.value=e.match[1],i.push(e)},parse:function(t,i,e){var n=this,s=i.pop();return u(this,t.params,e).then(function(e){return d.filter.apply(n,[t.value,s,e])}).then(function(e){i.push(e)})}},{type:d.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:d.expression.type.parameter.start,validate:function(e,t){return e[1]&&d.indexOf(d.expression.reservedWords,e[1])<0},transform:function(e,t){return"("},compile:function(e,t,i){var n=e.match[1];e.fn=n,delete e.match,delete e.value,i.push(e)},parse:function(e,t,i){var n,s=this,o=e.fn;return u(this,e.params,i).then(function(e){if(d.functions[o])n=d.functions[o].apply(s,e);else{if("function"!=typeof i[o])throw new d.Error(o+" function does not exist and is not defined in the context");n=i[o].apply(i,e)}return n}).then(function(e){t.push(e)})}},{type:d.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:d.expression.set.operations_extended.concat([d.expression.type.parameter.start]),compile:d.expression.fn.compile.push,validate:function(e,t){return d.indexOf(d.expression.reservedWords,e[0])<0},parse:function(e,t,i){return d.expression.resolveAsync.apply(this,[i[e.value],i]).then(function(e){t.push(e)})}},{type:d.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:d.expression.set.operations_extended.concat([d.expression.type.parameter.start]),compile:function(e,t,i){e.key=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(e,t,i,n){var s,o=this,a=e.key,r=t.pop();return u(this,e.params,i).then(function(e){if(null==r){if(o.options.strict_variables)throw new d.Error("Can't access a key "+a+" on an null or undefined object.");s=void 0}else{var t=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};s="object"==typeof r&&a in r?r[a]:void 0!==r["get"+t(a)]?r["get"+t(a)]:void 0!==r["is"+t(a)]?r["is"+t(a)]:void 0}return d.expression.resolveAsync.apply(o,[s,i,e,n,r])}).then(function(e){t.push(e)})}},{type:d.expression.type.key.brackets,regex:/^\[([^\]\:]*)\]/,next:d.expression.set.operations_extended.concat([d.expression.type.parameter.start]),compile:function(e,t,i){var n=e.match[1];delete e.value,delete e.match,e.stack=d.expression.compile({value:n}).stack,i.push(e)},parse:function(t,i,n,s){var o,a,r=this,l=null;return u(this,t.params,n).then(function(e){return l=e,d.expression.parseAsync.apply(r,[t.stack,n])}).then(function(e){if(null!=(o=i.pop()))return a="object"==typeof o&&e in o?o[e]:null,d.expression.resolveAsync.apply(r,[a,o,l,s]);if(r.options.strict_variables)throw new d.Error("Can't access a key "+e+" on an null or undefined object.");return null}).then(function(e){i.push(e)})}},{type:d.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:d.expression.set.operations,compile:function(e,t,i){delete e.match,e.value=null,i.push(e)},parse:d.expression.fn.parse.push_value},{type:d.expression.type.context,regex:/^_context/,next:d.expression.set.operations_extended.concat([d.expression.type.parameter.start]),compile:d.expression.fn.compile.push,parse:function(e,t,i){t.push(i)}},{type:d.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:d.expression.set.operations,compile:function(e,t,i){e.value="true"===e.match[0].toLowerCase(),delete e.match,i.push(e)},parse:d.expression.fn.parse.push_value}],d.expression.resolveAsync=function(t,i,e,n,s){if("function"!=typeof t)return d.Promise.resolve(t);var o=d.Promise.resolve(e);if(n&&n.type===d.expression.type.parameter.end){o=o.then(function(){return n.params&&d.expression.parseAsync.apply(this,[n.params,i,!0])}).then(function(e){return n.cleanup=!0,e})}return o.then(function(e){return t.apply(s||i,e||[])})},d.expression.resolve=function(e,t,i,n,s){var o,a=!0;if(d.expression.resolveAsync.apply(this,[e,t,i,n,s]).then(function(e){a=!1,o=e}),a)throw new d.Error("You are using Twig.js in sync mode in combination with async extensions.");return o},d.expression.handler={},d.expression.extendType=function(e){d.expression.type[e]="Twig.expression.type."+e},d.expression.extend=function(e){if(!e.type)throw new d.Error("Unable to extend logic definition. No type provided for "+e);d.expression.handler[e.type]=e};0<d.expression.definitions.length;)d.expression.extend(d.expression.definitions.shift());return d.expression.tokenize=function(e){var t,i,n,s,o,a,r=[],l=0,u=null,c=[];for(a=function(){var e=Array.prototype.slice.apply(arguments);return e.pop(),e.pop(),d.log.trace("Twig.expression.tokenize","Matched a ",t," regular expression of ",e),u&&d.indexOf(u,t)<0?(c.push(t+" cannot follow a "+r[r.length-1].type+" at template:"+l+" near '"+e[0].substring(0,20)+"...'"),e[0]):d.expression.handler[t].validate&&!d.expression.handler[t].validate(e,r)?e[0]:(c=[],r.push({type:t,value:e[0],match:e}),o=!0,u=s,l+=e[0].length,d.expression.handler[t].transform?d.expression.handler[t].transform(e,r):"")},d.log.debug("Twig.expression.tokenize","Tokenizing expression ",e);0<e.length;){for(t in e=e.trim(),d.expression.handler)if(d.expression.handler.hasOwnProperty(t)){for(s=d.expression.handler[t].next,i=d.expression.handler[t].regex,d.log.trace("Checking type ",t," on ",e),n=i instanceof Array?i:[i],o=!1;0<n.length;)i=n.pop(),e=e.replace(i,a);if(o)break}if(!o)throw 0<c.length?new d.Error(c.join(" OR ")):new d.Error("Unable to parse '"+e+"' at template position"+l)}return d.log.trace("Twig.expression.tokenize","Tokenized to ",r),r},d.expression.compile=function(e){var t=e.value,i=d.expression.tokenize(t),n=null,s=[],o=[],a=null;for(d.log.trace("Twig.expression.compile: ","Compiling ",t);0<i.length;)n=i.shift(),a=d.expression.handler[n.type],d.log.trace("Twig.expression.compile: ","Compiling ",n),a.compile&&a.compile(n,o,s),d.log.trace("Twig.expression.compile: ","Stack is",o),d.log.trace("Twig.expression.compile: ","Output is",s);for(;0<o.length;)s.push(o.pop());return d.log.trace("Twig.expression.compile: ","Final output is",s),e.stack=s,delete e.value,e},d.expression.parse=function(n,s,t,i){var o=this;n instanceof Array||(n=[n]);var a,e,r=[],l=!0,u=null,c=[];if(e=d.async.forEach(n,function(e,t){if(!e.cleanup){var i=null;return n.length>t+1&&(a=n[t+1]),(u=d.expression.handler[e.type]).parse&&(i=u.parse.apply(o,[e,r,s,a])),s.loop&&e.type===d.expression.type.operator.binary&&c.push(e),i}}).then(function(){if(d.forEach(c,function(e){e.params&&e.key&&delete e.key}),t){for(var e=[];0<r.length;)e.unshift(r.pop());r.push(e)}if(i)return d.Promise.resolve(r.pop())}).then(function(e){return l=!1,e}),i)return e;if(l)throw new d.Error("You are using Twig.js in sync mode in combination with async extensions.");return r.pop()},d}},function(e,t){e.exports=function(o){"use strict";o.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var a=function(e,t){if(null==t)return null;if(void 0!==t.indexOf)return e===t||""!==e&&-1<t.indexOf(e);var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1};return o.expression.operator.lookup=function(e,t){switch(e){case"..":t.precidence=20,t.associativity=o.expression.operator.leftToRight;break;case",":t.precidence=18,t.associativity=o.expression.operator.leftToRight;break;case"?:":case"?":case":":t.precidence=16,t.associativity=o.expression.operator.rightToLeft;break;case"or":t.precidence=14,t.associativity=o.expression.operator.leftToRight;break;case"and":t.precidence=13,t.associativity=o.expression.operator.leftToRight;break;case"b-or":t.precidence=12,t.associativity=o.expression.operator.leftToRight;break;case"b-xor":t.precidence=11,t.associativity=o.expression.operator.leftToRight;break;case"b-and":t.precidence=10,t.associativity=o.expression.operator.leftToRight;break;case"==":case"!=":t.precidence=9,t.associativity=o.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":t.precidence=8,t.associativity=o.expression.operator.leftToRight;break;case"~":case"+":case"-":t.precidence=6,t.associativity=o.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":t.precidence=5,t.associativity=o.expression.operator.leftToRight;break;case"not":t.precidence=3,t.associativity=o.expression.operator.rightToLeft;break;default:throw new o.Error("Failed to lookup operator: "+e+" is an unknown operator.")}return t.operator=e,t},o.expression.operator.parse=function(e,t){var i,n,s;switch(o.log.trace("Twig.expression.operator.parse: ","Handling ",e),"?"===e&&(s=t.pop()),n=t.pop(),"not"!==e&&(i=t.pop()),"in"!==e&&"not in"!==e&&(i&&Array.isArray(i)&&(i=i.length),n&&Array.isArray(n)&&(n=n.length)),e){case":":break;case"?:":o.lib.boolval(i)?t.push(i):t.push(n);break;case"?":void 0===i&&(i=n,n=s,s=void 0),o.lib.boolval(i)?t.push(n):t.push(s);break;case"+":n=parseFloat(n),i=parseFloat(i),t.push(i+n);break;case"-":n=parseFloat(n),i=parseFloat(i),t.push(i-n);break;case"*":n=parseFloat(n),i=parseFloat(i),t.push(i*n);break;case"/":n=parseFloat(n),i=parseFloat(i),t.push(i/n);break;case"//":n=parseFloat(n),i=parseFloat(i),t.push(Math.floor(i/n));break;case"%":n=parseFloat(n),i=parseFloat(i),t.push(i%n);break;case"~":t.push((null!=i?i.toString():"")+(null!=n?n.toString():""));break;case"not":case"!":t.push(!o.lib.boolval(n));break;case"<":t.push(i<n);break;case"<=":t.push(i<=n);break;case">":t.push(n<i);break;case">=":t.push(n<=i);break;case"===":t.push(i===n);break;case"==":t.push(i==n);break;case"!==":t.push(i!==n);break;case"!=":t.push(i!=n);break;case"or":t.push(o.lib.boolval(i)||o.lib.boolval(n));break;case"b-or":t.push(i|n);break;case"b-xor":t.push(i^n);break;case"and":t.push(o.lib.boolval(i)&&o.lib.boolval(n));break;case"b-and":t.push(i&n);break;case"**":t.push(Math.pow(i,n));break;case"not in":t.push(!a(i,n));break;case"in":t.push(a(i,n));break;case"..":t.push(o.functions.range(i,n));break;default:throw new o.Error("Failed to parse operator: "+e+" is an unknown operator.")}},o}},function(e,t){e.exports=function(l){function o(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e}return l.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,i){return t+i.toUpperCase()})},length:function(e){return l.lib.is("Array",e)||"string"==typeof e?e.length:l.lib.is("Object",e)?void 0===e._keys?Object.keys(e).length:e._keys.length:0},reverse:function(e){if(o("Array",e))return e.reverse();if(o("String",e))return e.split("").reverse().join("");if(o("Object",e)){var t=e._keys||Object.keys(e).reverse();return e._keys=t,e}},sort:function(n){if(o("Array",n))return n.sort();if(o("Object",n)){delete n._keys;var e=Object.keys(n).sort(function(e,t){var i;return n[e]>n[t]==!(n[e]<=n[t])?n[e]>n[t]?1:n[e]<n[t]?-1:0:isNaN(i=parseFloat(n[e]))||isNaN(b1=parseFloat(n[t]))?"string"==typeof n[e]?n[e]>n[t].toString()?1:n[e]<n[t].toString()?-1:0:"string"==typeof n[t]?n[e].toString()>n[t]?1:n[e].toString()<n[t]?-1:0:null:i>b1?1:i<b1?-1:0});return n._keys=e,n}},keys:function(t){if(null!=t){var e=t._keys||Object.keys(t),i=[];return l.forEach(e,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&i.push(e)}),i}},url_encode:function(e){if(null!=e){var t=encodeURIComponent(e);return t.replace("'","%27")}},join:function(t,e){if(null!=t){var i="",n=[],s=null;return e&&e[0]&&(i=e[0]),o("Array",t)?n=t:(s=t._keys||Object.keys(t),l.forEach(s,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&n.push(t[e])})),n.join(i)}},"default":function(e,t){if(void 0!==t&&1<t.length)throw new l.Error("default filter expects one argument");return null==e||""===e?void 0===t?"":t[0]:e},json_encode:function(t){if(null==t)return"null";if("object"==typeof t&&o("Array",t))return i=[],l.forEach(t,function(e){i.push(l.filters.json_encode(e))}),"["+i.join(",")+"]";if("object"!=typeof t)return JSON.stringify(t);var e=t._keys||Object.keys(t),i=[];return l.forEach(e,function(e){i.push(JSON.stringify(e)+":"+l.filters.json_encode(t[e]))}),"{"+i.join(",")+"}"},merge:function(i,e){var n=[],s=0,t=[];if(o("Array",i)?l.forEach(e,function(e){o("Array",e)||(n={})}):n={},o("Array",n)||(n._keys=[]),o("Array",i)?l.forEach(i,function(e){n._keys&&n._keys.push(s),n[s]=e,s++}):(t=i._keys||Object.keys(i),l.forEach(t,function(e){n[e]=i[e],n._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&s<=t&&(s=t+1)})),l.forEach(e,function(i){o("Array",i)?l.forEach(i,function(e){n._keys&&n._keys.push(s),n[s]=e,s++}):(t=i._keys||Object.keys(i),l.forEach(t,function(e){n[e]||n._keys.push(e),n[e]=i[e];var t=parseInt(e,10);!isNaN(t)&&s<=t&&(s=t+1)}))}),0===e.length)throw new l.Error("Filter merge expects at least one parameter");return n},date:function(e,t){var i=l.functions.date(e),n=t&&t.length?t[0]:"F j, Y H:i";return l.lib.date(n,i)},date_modify:function(e,t){if(null!=e){if(void 0===t||1!==t.length)throw new l.Error("date_modify filter expects 1 argument");var i,n=t[0];return l.lib.is("Date",e)&&(i=l.lib.strtotime(n,e.getTime()/1e3)),l.lib.is("String",e)&&(i=l.lib.strtotime(n,l.lib.strtotime(e))),l.lib.is("Number",e)&&(i=l.lib.strtotime(n,e)),new Date(1e3*i)}},replace:function(e,t){if(null!=e){var i,n=t[0];for(i in n)n.hasOwnProperty(i)&&"_keys"!==i&&(e=l.lib.replaceAll(e,i,n[i]));return e}},format:function(e,t){if(null!=e)return l.lib.vsprintf(e,t)},striptags:function(e){if(null!=e)return l.lib.strip_tags(e)},escape:function(e,t){if(null!=e){var i="html";if(t&&t.length&&!0!==t[0]&&(i=t[0]),"html"==i){var n=e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return l.Markup(n,"html")}if("js"==i){n=e.toString();for(var s="",o=0;o<n.length;o++)if(n[o].match(/^[a-zA-Z0-9,\._]$/))s+=n[o];else{s+=(a=n.charCodeAt(o))<128?"\\x"+a.toString(16).toUpperCase():l.lib.sprintf("\\u%04s",a.toString(16).toUpperCase())}return l.Markup(s,"js")}if("css"==i){for(n=e.toString(),s="",o=0;o<n.length;o++)if(n[o].match(/^[a-zA-Z0-9]$/))s+=n[o];else{s+="\\"+(a=n.charCodeAt(o)).toString(16).toUpperCase()+" "}return l.Markup(s,"css")}if("url"==i){s=l.filters.url_encode(e);return l.Markup(s,"url")}if("html_attr"!=i)throw new l.Error("escape strategy unsupported");for(n=e.toString(),s="",o=0;o<n.length;o++)if(n[o].match(/^[a-zA-Z0-9,\.\-_]$/))s+=n[o];else if(n[o].match(/^[&<>"]$/))s+=n[o].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var a;s+=(a=n.charCodeAt(o))<=31&&9!=a&&10!=a&&13!=a?"&#xFFFD;":a<128?l.lib.sprintf("&#x%02s;",a.toString(16).toUpperCase()):l.lib.sprintf("&#x%04s;",a.toString(16).toUpperCase())}return l.Markup(s,"html_attr")}},e:function(e,t){return l.filters.escape(e,t)},nl2br:function(e){if(null!=e){var t="BACKSLASH_n_replace",i="<br />"+t;return e=l.filters.escape(e).replace(/\r\n/g,i).replace(/\r/g,i).replace(/\n/g,i),e=l.lib.replaceAll(e,t,"\n"),l.Markup(e)}},number_format:function(e,t){var i=e,n=t&&t[0]?t[0]:void 0,s=t&&void 0!==t[1]?t[1]:".",o=t&&void 0!==t[2]?t[2]:",";i=(i+"").replace(/[^0-9+\-Ee.]/g,"");var a,r,l,u=isFinite(+i)?+i:0,c=isFinite(+n)?Math.abs(n):0,d="";return 3<(d=(c?(a=u,r=c,l=Math.pow(10,r),""+Math.round(a*l)/l):""+Math.round(u)).split("."))[0].length&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(d[1]||"").length<c&&(d[1]=d[1]||"",d[1]+=new Array(c-d[1].length+1).join("0")),d.join(s)},trim:function(e,t){if(null!=e){var i,n=l.filters.escape(""+e);i=t&&t[0]?""+t[0]:" \n\r\t\f\x0B            ​\u2028\u2029　";for(var s=0;s<n.length;s++)if(-1===i.indexOf(n.charAt(s))){n=n.substring(s);break}for(s=n.length-1;0<=s;s--)if(-1===i.indexOf(n.charAt(s))){n=n.substring(0,s+1);break}return-1===i.indexOf(n.charAt(0))?n:""}},truncate:function(e,t){var i=30,n=!1,s="...";if(e+="",t&&(t[0]&&(i=t[0]),t[1]&&(n=t[1]),t[2]&&(s=t[2])),e.length>i){if(n&&-1===(i=e.indexOf(" ",i)))return e;e=e.substr(0,i)+s}return e},slice:function(e,t){if(null!=e){if(void 0===t||t.length<1)throw new l.Error("slice filter expects at least 1 argument");var i=t[0]||0,n=1<t.length?t[1]:e.length,s=0<=i?i:Math.max(e.length+i,0);if(l.lib.is("Array",e)){for(var o=[],a=s;a<s+n&&a<e.length;a++)o.push(e[a]);return o}if(l.lib.is("String",e))return e.substr(s,n);throw new l.Error("slice filter expects value to be an array or string")}},abs:function(e){if(null!=e)return Math.abs(e)},first:function(e){if(o("Array",e))return e[0];if(o("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(e,t){if(null!=e){if(void 0===t||t.length<1||2<t.length)throw new l.Error("split filter expects 1 or 2 argument");if(l.lib.is("String",e)){var i=t[0],n=t[1],s=e.split(i);if(void 0===n)return s;if(n<0)return e.split(i,s.length+n);var o=[];if(""==i)for(;0<s.length;){for(var a="",r=0;r<n&&0<s.length;r++)a+=s.shift();o.push(a)}else{for(r=0;r<n-1&&0<s.length;r++)o.push(s.shift());0<s.length&&o.push(s.join(i))}return o}throw new l.Error("split filter expects value to be a string")}},last:function(e){var t;return l.lib.is("Object",e)?e[(t=void 0===e._keys?Object.keys(e):e._keys)[t.length-1]]:e[e.length-1]},raw:function(e){return l.Markup(e)},batch:function(e,t){var i,n,s,o=t.shift(),a=t.shift();if(!l.lib.is("Array",e))throw new l.Error("batch filter expects items to be an array");if(!l.lib.is("Number",o))throw new l.Error("batch filter expects size to be a number");if(o=Math.ceil(o),i=l.lib.chunkArray(e,o),a&&e.length%o!=0){for(s=o-(n=i.pop()).length;s--;)n.push(a);i.push(n)}return i},round:function(e,t){var i=0<(t=t||[]).length?t[0]:0,n=1<t.length?t[1]:"common";if(e=parseFloat(e),i&&!l.lib.is("Number",i))throw new l.Error("round filter expects precision to be a number");if("common"===n)return l.lib.round(e,i);if(!l.lib.is("Function",Math[n]))throw new l.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[n](e*Math.pow(10,i))/Math.pow(10,i)}},l.filter=function(e,t,i){if(!l.filters[e])throw"Unable to find filter "+e;return l.filters[e].apply(this,[t,i])},l.filter.extend=function(e,t){l.filters[e]=t},l}},function(r,e){r.exports=function(a){return a.functions={range:function(e,t,i){var n,s,o=[],a=i||1,r=!1;if(!((s=isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(r=!0,n=e.charCodeAt(0),t.charCodeAt(0)):(n=isNaN(e)?0:e,isNaN(t)?0:t):(n=parseInt(e,10),parseInt(t,10)))<n))for(;n<=s;)o.push(r?String.fromCharCode(n):n),n+=a;else for(;s<=n;)o.push(r?String.fromCharCode(n):n),n-=a;return o},cycle:function(e,t){return e[t%e.length]},dump:function(){var i=0,n="",e=Array.prototype.slice.call(arguments),s=function(e){for(var t="";0<e;)e--,t+="  ";return t},o=function(e){n+=s(i),"object"==typeof e?t(e):"function"==typeof e?n+="function()\n":"string"==typeof e?n+="string("+e.length+') "'+e+'"\n':"number"==typeof e?n+="number("+e+")\n":"boolean"==typeof e&&(n+="bool("+e+")\n")},t=function(e){var t;if(null===e)n+="NULL\n";else if(void 0===e)n+="undefined\n";else if("object"==typeof e){for(t in n+=s(i)+typeof e,i++,n+="("+function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(e)+") {\n",e)n+=s(i)+"["+t+"]=> \n",o(e[t]);n+=s(--i)+"}\n"}else o(e)};return 0==e.length&&e.push(this.context),a.forEach(e,function(e){t(e)}),n},date:function(e,t){var i;if(null==e||""===e)i=new Date;else if(a.lib.is("Date",e))i=e;else if(a.lib.is("String",e))i=e.match(/^[0-9]+$/)?new Date(1e3*e):new Date(1e3*a.lib.strtotime(e));else{if(!a.lib.is("Number",e))throw new a.Error("Unable to parse date "+e);i=new Date(1e3*e)}return i},block:function(e){return this.originalBlockTokens[e]?a.logic.parse.apply(this,[this.originalBlockTokens[e],this.context]).output:this.blocks[e]},parent:function(){return a.placeholders.parent},attribute:function(e,t,i){return a.lib.is("Object",e)&&e.hasOwnProperty(t)?"function"==typeof e[t]?e[t].apply(void 0,i):e[t]:e[t]||void 0},max:function(e){return a.lib.is("Object",e)?(delete e._keys,a.lib.max(e)):a.lib.max.apply(null,arguments)},min:function(e){return a.lib.is("Object",e)?(delete e._keys,a.lib.min(e)):a.lib.min.apply(null,arguments)},template_from_string:function(e){return void 0===e&&(e=""),a.Templates.parsers.twig({options:this.options,data:e})},random:function(e){function t(e){var t=Math.floor(Math.random()*o),i=[0,e],n=Math.min.apply(null,i),s=Math.max.apply(null,i);return n+Math.floor((s-n+1)*t/o)}var o=2147483648;if(a.lib.is("Number",e))return t(e);if(a.lib.is("String",e))return e.charAt(t(e.length-1));if(a.lib.is("Array",e))return e[t(e.length-1)];if(a.lib.is("Object",e)){var i=Object.keys(e);return e[i[t(i.length-1)]]}return t(o-1)},source:function(e,t){var i,n,s=!1,o={id:e,path:void 0!==r&&"undefined"!=typeof r.exports&&"undefined"==typeof window?(n="fs",__dirname+"/"+e):(n="ajax",e),method:n,parser:"source",async:!1,fetchTemplateSource:!0};void 0===t&&(t=!1);try{null==(i=a.Templates.loadRemote(e,o))?i="":s=!0}catch(r){a.log.debug("Twig.functions.source: ","Problem loading template  ",r)}return s||t?i:'Template "{name}" is not defined.'.replace("{name}",e)}},a._function=function(e,t,i){if(!a.functions[e])throw"Unable to find function "+e;return a.functions[e](t,i)},a._function.extend=function(e,t){a.functions[e]=t},a}},function(e,t,i){e.exports=function(o){return o.lib={},o.lib.sprintf=i(8),o.lib.vsprintf=i(9),o.lib.round=i(10),o.lib.max=i(11),o.lib.min=i(12),o.lib.strip_tags=i(13),o.lib.strtotime=i(14),o.lib.date=i(15),o.lib.boolval=i(16),o.lib.is=function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e},o.lib.copy=function(e){var t,i={};for(t in e)i[t]=e[t];return i},o.lib.extend=function(e,t){var i,n=Object.keys(t);for(i=n.length;i--;)e[n[i]]=t[n[i]];return e},o.lib.replaceAll=function(e,t,i){return e.split(t).join(i)},o.lib.chunkArray=function(e,t){var i=[],n=0,s=e.length;if(t<1||!o.lib.is("Array",e))return[];for(;n<s;)i.push(e.slice(n,n+=t));return i},o}},function(e,t){"use strict";e.exports=function(){var y=arguments,_=0,e=y[_++],b=function(e,t,i,n){i||(i=" ");var s=e.length>=t?"":new Array(1+t-e.length>>>0).join(i);return n?e+s:s+e},x=function(e,t,i,n,s,o){var a=n-e.length;return 0<a&&(e=i||!s?b(e,n,o,i):[e.slice(0,t.length),b("",a,"0",!0),e.slice(t.length)].join("")),e},w=function(e,t,i,n,s,o,a){var r=e>>>0;return e=(i=i&&r&&{2:"0b",8:"0",16:"0x"}[t]||"")+b(r.toString(t),o||0,"0",!1),x(e,i,n,s,a)},k=function(e,t,i,n,s,o){return null!=n&&(e=e.slice(0,n)),x(e,"",t,i,s,o)};return e.replace(/%%|%(\d+\$)?([\-+'#0 ]*)(\*\d+\$|\*|\d+)?(?:\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,i,n,s,o){var a,r,l,u,c;if("%%"===e)return"%";var d,p=!1,h="",f=!1,g=!1,m=" ",v=i.length;for(d=0;d<v;d++)switch(i.charAt(d)){case" ":h=" ";break;case"+":h="+";break;case"-":p=!0;break;case"'":m=i.charAt(d+1);break;case"0":f=!0,m="0";break;case"#":g=!0}if((n=n?"*"===n?+y[_++]:"*"===n.charAt(0)?+y[n.slice(1,-1)]:+n:0)<0&&(n=-n,p=!0),!isFinite(n))throw new Error("sprintf: (minimum-)width must be finite");switch(s=s?"*"===s?+y[_++]:"*"===s.charAt(0)?+y[s.slice(1,-1)]:+s:-1<"fFeE".indexOf(o)?6:"d"===o?0:void 0,c=t?y[t.slice(0,-1)]:y[_++],o){case"s":return k(c+"",p,n,s,f,m);case"c":return k(String.fromCharCode(+c),p,n,s,f);case"b":return w(c,2,g,p,n,s,f);case"o":return w(c,8,g,p,n,s,f);case"x":return w(c,16,g,p,n,s,f);case"X":return w(c,16,g,p,n,s,f).toUpperCase();case"u":return w(c,10,g,p,n,s,f);case"i":case"d":return a=+c||0,c=(r=(a=Math.round(a-a%1))<0?"-":h)+b(String(Math.abs(a)),s,"0",!1),x(c,r,p,n,f);case"e":case"E":case"f":case"F":case"g":case"G":return r=(a=+c)<0?"-":h,l=["toExponential","toFixed","toPrecision"]["efg".indexOf(o.toLowerCase())],u=["toString","toUpperCase"]["eEfFgG".indexOf(o)%2],c=r+Math.abs(a)[l](s),x(c,r,p,n,f)[u]();default:return e}})}},function(e,t,i){"use strict";e.exports=function(e,t){return i(8).apply(this,[e].concat(t))}},function(e,t){"use strict";e.exports=function(e,t,i){var n,s,o,a;if(t|=0,o=(e*=n=Math.pow(10,t))%1==.5*(a=0<e|-(e<0)),s=Math.floor(e),o)switch(i){case"PHP_ROUND_HALF_DOWN":e=s+(a<0);break;case"PHP_ROUND_HALF_EVEN":e=s+s%2*a;break;case"PHP_ROUND_HALF_ODD":e=s+!(s%2);break;default:e=s+(0<a)}return(o?e:Math.round(e))/n}},function(e,t){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(){var r,e,t,i=0,n=arguments,s=n.length,l=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},o=function r(e,t){var i=0,n=0,s=0,o=0,a=0;if(e===t)return 0;if("object"!==(void 0===e?"undefined":u(e)))return"object"===(void 0===t?"undefined":u(t))?1:isNaN(t)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0===t?0:0<t?1:-1:t===e?0:e<t?1:-1;if("object"!==(void 0===t?"undefined":u(t)))return-1;if(e=l(e),t=l(t),(a=e.length)<(o=t.length))return 1;if(o<a)return-1;for(i=0,n=a;i<n;++i){if(1===(s=r(e[i],t[i])))return 1;if(-1===s)return-1}return 0};if(0===s)throw new Error("At least one value should be passed to max()");if(1===s){if("object"!==u(n[0]))throw new Error("Wrong parameter count for max()");if(0===(r=l(n[0])).length)throw new Error("Array must contain at least one element for max()")}else r=n;for(e=r[0],i=1,t=r.length;i<t;++i)1===o(e,r[i])&&(e=r[i]);return e}},function(e,t){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(){var r,e,t,i=0,n=arguments,s=n.length,l=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},o=function r(e,t){var i=0,n=0,s=0,o=0,a=0;if(e===t)return 0;if("object"!==(void 0===e?"undefined":u(e)))return"object"===(void 0===t?"undefined":u(t))?1:isNaN(t)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0===t?0:0<t?1:-1:t===e?0:e<t?1:-1;if("object"!==(void 0===t?"undefined":u(t)))return-1;if(e=l(e),t=l(t),(a=e.length)<(o=t.length))return 1;if(o<a)return-1;for(i=0,n=a;i<n;++i){if(1===(s=r(e[i],t[i])))return 1;if(-1===s)return-1}return 0};if(0===s)throw new Error("At least one value should be passed to min()");if(1===s){if("object"!==u(n[0]))throw new Error("Wrong parameter count for min()");if(0===(r=l(n[0])).length)throw new Error("Array must contain at least one element for min()")}else r=n;for(e=r[0],i=1,t=r.length;i<t;++i)-1===o(e,r[i])&&(e=r[i]);return e}},function(e,t){"use strict";e.exports=function(e,i){i=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,t){return-1<i.indexOf("<"+t.toLowerCase()+">")?e:""})}},function(e,t){"use strict";e.exports=function(e,t){function i(e){var t=e.split(" "),i=t[0],n=t[1].substring(0,3),s=/\d+/.test(i),o=("last"===i?-1:1)*("ago"===t[2]?-1:1);if(s&&(o*=parseInt(i,10)),u.hasOwnProperty(n)&&!t[1].match(/^mon(day|\.)?$/i))return r["set"+u[n]](r["get"+u[n]]()+o);if("wee"===n)return r.setDate(r.getDate()+7*o);if("next"===i||"last"===i)!function a(e,t,i){var n,s=l[t];void 0!==s&&(0==(n=s-r.getDay())?n=7*i:0<n&&"last"===e?n-=7:n<0&&"next"===e&&(n+=7),r.setDate(r.getDate()+n))}(i,n,o);else if(!s)return!1;return!0}var n,s,o,a,r,l,u,c,d,p;if(!e)return!1;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();var h=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if((s=e.match(h))&&s[2]===s[4])if(1901<s[1])switch(s[2]){case"-":return!(12<s[3]||31<s[5])&&new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case".":return!1;case"/":return!(12<s[3]||31<s[5])&&new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else if(1901<s[5])switch(s[2]){case"-":case".":return!(12<s[3]||31<s[1])&&new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case"/":return!(12<s[1]||31<s[3])&&new Date(s[5],parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else switch(s[2]){case"-":return!(12<s[3]||31<s[5]||s[1]<70&&38<s[1])&&(a=0<=s[1]&&s[1]<=38?+s[1]+2e3:s[1],new Date(a,parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case".":return 70<=s[5]?!(12<s[3]||31<s[1])&&new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3:s[5]<60&&!s[6]&&(!(23<s[1]||59<s[3])&&(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),s[1]||0,s[3]||0,s[5]||0,s[9]||0)/1e3));case"/":return!(12<s[1]||31<s[3]||s[5]<70&&38<s[5])&&(a=0<=s[5]&&s[5]<=38?+s[5]+2e3:s[5],new Date(a,parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case":":return!(23<s[1]||59<s[3]||59<s[5])&&(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),s[1]||0,s[3]||0,s[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(n=Date.parse(e)))return n/1e3|0;if(h=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),(s=e.match(h))&&("z"===s[4]?s[4]="Z":s[4].match(/^([\+-][0-9]{2})$/)&&(s[4]=s[4]+":00"),!isNaN(n=Date.parse(s[1]+"T"+s[2]+s[4]))))return n/1e3|0;if(r=t?new Date(1e3*t):new Date,l={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},u={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},"([+-]?\\d+\\s"+(d="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)")+"|(last|next)\\s"+d+")(\\sago)?",!(s=e.match(new RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi"))))return!1;for(p=0,c=s.length;p<c;p++)if(!i(s[p]))return!1;return r.getTime()/1e3}},function(e,t){"use strict";e.exports=function(e,t){var n,i,s=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],o=/\\?(.?)/gi,a=function(e,t){return i[e]?i[e]():t},r=function(e,t){for(e=String(e);e.length<t;)e="0"+e;return e};i={d:function(){return r(i.j(),2)},D:function(){return i.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return s[i.w()]+"day"},N:function(){return i.w()||7},S:function(){var e=i.j(),t=e%10;return t<=3&&1===parseInt(e%100/10,10)&&(t=0),["st","nd","rd"][t-1]||"th"},w:function(){return n.getDay()},z:function(){var e=new Date(i.Y(),i.n()-1,i.j()),t=new Date(i.Y(),0,1);return Math.round((e-t)/864e5)},W:function(){var e=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),t=new Date(e.getFullYear(),0,4);return r(1+Math.round((e-t)/864e5/7),2)},F:function(){return s[6+i.n()]},m:function(){return r(i.n(),2)},M:function(){return i.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(i.Y(),i.n(),0).getDate()},L:function(){var e=i.Y();return e%4==0&e%100!=0|e%400==0},o:function(){var e=i.n(),t=i.W();return i.Y()+(12===e&&t<9?1:1===e&&9<t?-1:0)},Y:function(){return n.getFullYear()},y:function(){return i.Y().toString().slice(-2)},a:function(){return 11<n.getHours()?"pm":"am"},A:function(){return i.a().toUpperCase()},B:function(){var e=3600*n.getUTCHours(),t=60*n.getUTCMinutes(),i=n.getUTCSeconds();return r(Math.floor((e+t+i+3600)/86.4)%1e3,3)},g:function(){return i.G()%12||12},G:function(){return n.getHours()},h:function(){return r(i.g(),2)},H:function(){return r(i.G(),2)},i:function(){return r(n.getMinutes(),2)},s:function(){return r(n.getSeconds(),2)},u:function(){return r(1e3*n.getMilliseconds(),6)},e:function(){throw new Error("Not supported (see source code of date() for timezone on how to add support)")},I:function(){return new Date(i.Y(),0)-Date.UTC(i.Y(),0)!=new Date(i.Y(),6)-Date.UTC(i.Y(),6)?1:0},O:function(){var e=n.getTimezoneOffset(),t=Math.abs(e);return(0<e?"-":"+")+r(100*Math.floor(t/60)+t%60,4)},P:function(){var e=i.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-n.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(o,a)},r:function(){return"D, d M Y H:i:s O".replace(o,a)},U:function(){return n/1e3|0}};var l,u;return l=e,n=void 0===(u=t)?new Date:u instanceof Date?new Date(u):new Date(1e3*u),l.replace(o,a)}},function(e,t){"use strict";e.exports=function(e){return!1!==e&&0!==e&&0!==e&&""!==e&&"0"!==e&&(!Array.isArray(e)||0!==e.length)&&null!=e}},function(e,t){e.exports=function(u){"use strict";u.Templates.registerLoader("ajax",function(t,i,n,s){var o,a,r=i.precompiled,l=this.parsers[i.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new u.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return(a=new XMLHttpRequest).onreadystatechange=function(){var e=null;4===a.readyState&&(200===a.status||window.cordova&&0==a.status?(u.log.debug("Got template ",a.responseText),e=!0===r?JSON.parse(a.responseText):a.responseText,i.url=t,i.data=e,o=l.call(this,i),"function"==typeof n&&n(o)):"function"==typeof s&&s(a))},a.open("GET",t,!!i.async),a.send(),!!i.async||o})}},function(e,t,i){e.exports=function(c){"use strict";var d,t;try{d=i(19),t=i(20)}catch(c){}c.Templates.registerLoader("fs",function(i,n,s,o){var a,e,r=n.precompiled,l=this.parsers[n.parser]||this.parser.twig;if(!d||!t)throw new c.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var u=function(e,t){return e?void("function"==typeof o&&o(e)):(!0===r&&(t=JSON.parse(t)),n.data=t,n.path=n.path||i,a=l.call(this,n),void("function"==typeof s&&s(a)))};if(n.path=n.path||i,n.async)return d.stat(n.path,function(e,t){return e||!t.isFile()?void("function"==typeof o&&o(new c.Error("Unable to find template file "+n.path))):void d.readFile(n.path,"utf8",u)}),!0;try{if(!d.statSync(n.path).isFile())throw new c.Error("Unable to find template file "+n.path)}catch(d){throw new c.Error("Unable to find template file "+n.path)}return e=d.readFileSync(n.path,"utf8"),u(void 0,e),a})}},function(e,t){},function(e,u,t){(function(s){function o(e,t){for(var i=0,n=e.length-1;0<=n;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return t.exec(e).slice(1)};u.resolve=function(){for(var e="",t=!1,i=arguments.length-1;-1<=i&&!t;i--){var n=0<=i?arguments[i]:s.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},u.normalize=function(e){var t=u.isAbsolute(e),i="/"===n(e,-1);return(e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},u.isAbsolute=function(e){return"/"===e.charAt(0)},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},u.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;0<=i&&""===e[i];i--);return i<t?[]:e.slice(t,i-t+1)}e=u.resolve(e).substr(1),t=u.resolve(t).substr(1);for(var n=i(e.split("/")),s=i(t.split("/")),o=Math.min(n.length,s.length),a=o,r=0;r<o;r++)if(n[r]!==s[r]){a=r;break}var l=[];for(r=a;r<n.length;r++)l.push("..");return(l=l.concat(s.slice(a))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){var t=r(e),i=t[0],n=t[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},u.basename=function(e,t){var i=r(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},u.extname=function(e){return r(e)[3]};var n="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(u,t(21))},function(e,n){function t(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(n){try{return u.call(null,e,0)}catch(n){return u.call(this,e,0)}}}function a(){f&&p&&(f=!1,p.length?h=p.concat(h):g=-1,h.length&&r())}function r(){if(!f){var e=o(a);f=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,f=!1,function i(e){if(c===clearTimeout)return clearTimeout(e);if((c===s||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(n){try{return c.call(null,e)}catch(n){return c.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function i(){}var u,c,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(e){u=t}try{c="function"==typeof clearTimeout?clearTimeout:s}catch(e){c=s}}();var p,h=[],f=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new l(e,t)),1!==h.length||f||o(r)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=i,d.addListener=i,d.once=i,d.off=i,d.removeListener=i,d.removeAllListeners=i,d.emit=i,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=function(h){"use strict";for(h.logic={},h.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},h.logic.definitions=[{type:h.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[h.logic.type.else_,h.logic.type.elseif,h.logic.type.endif],open:!0,compile:function(e){var t=e.match[1];return e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:t}]).stack,delete e.match,e},parse:function(t,i,n){var s=this;return h.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return n=!0,h.lib.boolval(e)?(n=!1,h.parseAsync.apply(s,[t.output,i])):""}).then(function(e){return{chain:n,output:e}})}},{type:h.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[h.logic.type.else_,h.logic.type.elseif,h.logic.type.endif],open:!1,compile:function(e){var t=e.match[1];return e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:t}]).stack,delete e.match,e},parse:function(t,i,n){var s=this;return h.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return n&&h.lib.boolval(e)?(n=!1,h.parseAsync.apply(s,[t.output,i])):""}).then(function(e){return{chain:n,output:e}})}},{type:h.logic.type.else_,regex:/^else$/,next:[h.logic.type.endif,h.logic.type.endfor],open:!1,parse:function(e,t,i){var n=h.Promise.resolve("");return i&&(n=h.parseAsync.apply(this,[e.output,t])),n.then(function(e){return{chain:i,output:e}})}},{type:h.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:h.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[h.logic.type.else_,h.logic.type.endfor],open:!0,compile:function(e){var t=e.match[1],i=e.match[2],n=e.match[3],s=null;if(e.key_var=null,e.value_var=null,0<=t.indexOf(",")){if(2!==(s=t.split(",")).length)throw new h.Error("Invalid expression in for loop: "+t);e.key_var=s[0].trim(),e.value_var=s[1].trim()}else e.value_var=t;return e.expression=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:i}]).stack,n&&(e.conditional=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:n}]).stack),delete e.match,e},parse:function(a,r,e){var l,i,u=[],c=0,d=this,p=a.conditional,n=function(e,t){var i,n,s,o=h.ChildContext(r);o[a.value_var]=t,a.key_var&&(o[a.key_var]=e),o.loop=(n=l,{index:(i=c)+1,index0:i,revindex:(s=void 0!==p)?void 0:n-i,revindex0:s?void 0:n-i-1,first:0===i,last:s?void 0:i===n-1,length:s?void 0:n,parent:r}),(void 0===p?h.Promise.resolve(!0):h.expression.parseAsync.apply(d,[p,o])).then(function(e){if(e)return h.parseAsync.apply(d,[a.output,o]).then(function(e){u.push(e),c+=1})}).then(function(){delete o.loop,delete o[a.value_var],delete o[a.key_var],h.merge(r,o,!0)})};return h.expression.parseAsync.apply(this,[a.expression,r]).then(function(t){return h.lib.is("Array",t)?(l=t.length,h.async.forEach(t,function(e){return n(c,e)})):h.lib.is("Object",t)&&(i=void 0!==t._keys?t._keys:Object.keys(t),l=i.length,h.forEach(i,function(e){"_keys"!==e&&n(e,t[e])})),{chain:0===u.length,output:h.output.apply(d,[u])}})}},{type:h.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:h.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim(),i=e.match[2],n=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:i}]).stack;return e.key=t,e.expression=n,delete e.match,e},parse:function(e,t,i){var n=e.key;return h.expression.parseAsync.apply(this,[e.expression,t]).then(function(e){return e===t&&(e=h.lib.copy(e)),t[n]=e,{chain:i,context:t}})}},{type:h.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[h.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(e,t,i){var n=this,s=e.key;return h.parseAsync.apply(this,[e.output,t]).then(function(e){return n.context[s]=e,t[s]=e,{chain:i,context:t}})}},{type:h.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:h.logic.type.filter,regex:/^filter\s+(.+)$/,next:[h.logic.type.endfilter],open:!0,compile:function(e){var t="|"+e.match[1].trim();return e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:t}]).stack,delete e.match,e},parse:function(i,n,t){return h.parseAsync.apply(this,[i.output,n]).then(function(e){var t=[{type:h.expression.type.string,value:e}].concat(i.stack);return h.expression.parseAsync.apply(that,[t,n])}).then(function(e){return{chain:t,output:e}})}},{type:h.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:h.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[h.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,i,e){var n,s=this,o=h.Promise.resolve(),a=-1<h.indexOf(this.importedBlocks,t.block),r=this.blocks[t.block]&&-1<h.indexOf(this.blocks[t.block],h.placeholders.parent);return(void 0===this.blocks[t.block]||a||r||i.loop||t.overwrite)&&(o=(o=t.expression?h.expression.parseAsync.apply(this,[t.output,i]).then(function(e){return h.expression.parseAsync.apply(s,[{type:h.expression.type.string,value:e},i])}):h.parseAsync.apply(this,[t.output,i]).then(function(e){return h.expression.parseAsync.apply(s,[{type:h.expression.type.string,value:e},i])})).then(function(e){a&&s.importedBlocks.splice(s.importedBlocks.indexOf(t.block),1),s.blocks[t.block]=r?h.Markup(s.blocks[t.block].replace(h.placeholders.parent,e)):e,s.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}})),o.then(function(){return n=s.child.blocks[t.block]?s.child.blocks[t.block]:s.blocks[t.block],{chain:e,output:n}})}},{type:h.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(e){return e.expression=e.match[2].trim(),e.output=h.expression.compile({type:h.expression.type.expression,value:e.expression}).stack,e.block=e.match[1].trim(),delete e.match,e},parse:function(e,t,i){return h.logic.handler[h.logic.type.block].parse.apply(this,arguments)}},{type:h.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:h.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim();return delete e.match,e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:t}]).stack,e},parse:function(e,t,i){var n=this,s=h.ChildContext(t);return h.expression.parseAsync.apply(this,[e.stack,t]).then(function(e){return n.extend=e,(e instanceof h.Template?e:n.importFile(e)).renderAsync(s)}).then(function(){return h.lib.extend(t,s),{chain:i,output:""}})}},{type:h.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim();return delete e.match,e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:t}]).stack,e},parse:function(e,t,i){var n=this;return h.expression.parseAsync.apply(this,[e.stack,t]).then(function(e){return n.importBlocks(e),{chain:i,output:""}})}},{type:h.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile:function(e){var t=e.match,i=t[1].trim(),n=void 0!==t[2],s=t[3],o=void 0!==t[4]&&t[4].length;return delete e.match,e.only=o,e.ignoreMissing=n,e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:i}]).stack,void 0!==s&&(e.withStack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:s.trim()}]).stack),e},parse:function(t,e,i){var n,s,o={},a=this,r=h.Promise.resolve();return t.only||(o=h.ChildContext(e)),void 0!==t.withStack&&(r=h.expression.parseAsync.apply(this,[t.withStack,e]).then(function(e){for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n])})),r.then(function(){return h.expression.parseAsync.apply(a,[t.stack,e])}).then(function(e){if(e instanceof h.Template)s=e;else try{s=a.importFile(e)}catch(h){if(t.ignoreMissing)return"";throw h}return s.renderAsync(o)}).then(function(e){return{chain:i,output:e}})}},{type:h.logic.type.spaceless,regex:/^spaceless$/,next:[h.logic.type.endspaceless],open:!0,parse:function(e,t,i){return h.parseAsync.apply(this,[e.output,t]).then(function(e){var t=e.replace(/>\s+</g,"><").trim();return t=h.Markup(t),{chain:i,output:t}})}},{type:h.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:h.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[h.logic.type.endmacro],open:!0,compile:function(e){for(var t=e.match[1],i=e.match[2].split(/[\s,]+/),n=0;n<i.length;n++)for(var s=0;s<i.length;s++)if(i[n]===i[s]&&n!==s)throw new h.Error("Duplicate arguments for parameter: "+i[n]);return e.macroName=t,e.parameters=i,delete e.match,e},parse:function(n,e,t){var s=this;return this.macros[n.macroName]=function(){for(var e={_self:s.macros},t=0;t<n.parameters.length;t++){var i=n.parameters[t];"undefined"!=typeof arguments[t]?e[i]=arguments[t]:e[i]=void 0}return h.parseAsync.apply(s,[n.output,e])},{chain:t,output:""}}},{type:h.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:h.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(e){var t=e.match[1].trim(),i=e.match[2].trim();return delete e.match,e.expression=t,e.contextName=i,e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:t}]).stack,e},parse:function(t,i,e){var n=this,s={chain:e,output:""};return"_self"===t.expression?(i[t.contextName]=this.macros,h.Promise.resolve(s)):h.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return n.importFile(e||t.expression)}).then(function(e){return i[t.contextName]=e.renderAsync({},{output:"macros"}),s})}},{type:h.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(e){for(var t=e.match[1].trim(),i=e.match[2].trim().split(/\s*,\s*/),n={},s=0;s<i.length;s++){var o=i[s],a=o.match(/^([a-zA-Z0-9_]+)\s+as\s+([a-zA-Z0-9_]+)$/);a?n[a[1].trim()]=a[2].trim():o.match(/^([a-zA-Z0-9_]+)$/)&&(n[o]=o)}return delete e.match,e.expression=t,e.macroNames=n,e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:t}]).stack,e},parse:function(i,n,s){var t=this,e=h.Promise.resolve(this.macros);return"_self"!==i.expression&&(e=h.expression.parseAsync.apply(this,[i.stack,n]).then(function(e){return t.importFile(e||i.expression)}).then(function(e){return e.renderAsync({},{output:"macros"})})),e.then(function(e){for(var t in i.macroNames)e.hasOwnProperty(t)&&(n[i.macroNames[t]]=e[t]);return{chain:s,output:""}})}},{type:h.logic.type.embed,regex:/^embed\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[h.logic.type.endembed],open:!0,compile:function(e){var t=e.match,i=t[1].trim(),n=void 0!==t[2],s=t[3],o=void 0!==t[4]&&t[4].length;return delete e.match,e.only=o,e.ignoreMissing=n,e.stack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:i}]).stack,void 0!==s&&(e.withStack=h.expression.compile.apply(this,[{type:h.expression.type.expression,value:s.trim()}]).stack),e},parse:function(t,e,i){var n,s,o={},a=this,r=h.Promise.resolve();if(!t.only)for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return void 0!==t.withStack&&(r=h.expression.parseAsync.apply(this,[t.withStack,e]).then(function(e){for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n])})),r.then(function(){return h.expression.parseAsync.apply(a,[t.stack,o])}).then(function(e){if(e instanceof h.Template)s=e;else try{s=a.importFile(e)}catch(h){if(t.ignoreMissing)return"";throw h}return a.blocks={},h.parseAsync.apply(a,[t.output,o]).then(function(){return s.renderAsync(o,{blocks:a.blocks})})}).then(function(e){return{chain:i,output:e}})}},{type:h.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],h.logic.handler={},h.logic.extendType=function(e,t){t=t||"Twig.logic.type"+e,h.logic.type[e]=t},h.logic.extend=function(e){if(!e.type)throw new h.Error("Unable to extend logic definition. No type provided for "+e);h.logic.extendType(e.type),h.logic.handler[e.type]=e};0<h.logic.definitions.length;)h.logic.extend(h.logic.definitions.shift());return h.logic.compile=function(e){var t=e.value.trim(),i=h.logic.tokenize.apply(this,[t]),n=h.logic.handler[i.type];return n.compile&&(i=n.compile.apply(this,[i]),h.log.trace("Twig.logic.compile: ","Compiled logic token to ",i)),i},h.logic.tokenize=function(e){var t={},i=null,n=null,s=null,o=null,a=null;for(i in e=e.trim(),h.logic.handler)if(h.logic.handler.hasOwnProperty(i))for(n=h.logic.handler[i].type,o=[],(s=h.logic.handler[i].regex)instanceof Array?o=s:o.push(s);0<o.length;)if(null!==(a=o.shift().exec(e.trim())))return t.type=n,t.match=a,h.log.trace("Twig.logic.tokenize: ","Matched a ",n," regular expression of ",a),t;throw new h.Error("Unable to parse '"+e.trim()+"'")},h.logic.parse=function(e,t,i,n){var s,o,a="",r=!0;if(t=t||{},h.log.debug("Twig.logic.parse: ","Parsing logic token ",e),(o=h.logic.handler[e.type]).parse&&(a=o.parse.apply(this,[e,t,i])),(s=h.isPromise(a)?a:h.Promise.resolve(a)).then(function(e){r=!1,a=e}),n)return s||h.Promise.resolve(a);if(r)throw new h.Error("You are using Twig.js in sync mode in combination with async extensions.");return a},h}},function(e,t){e.exports=function(e){"use strict";e.Templates.registerParser("source",function(e){return e.data||""})}},function(e,t){e.exports=function(t){"use strict";t.Templates.registerParser("twig",function(e){return new t.Template(e)})}},function(e,t,d){e.exports=function(c){"use strict";return c.path={},c.path.parsePath=function(e,t){var i=null;t=t||"";if("object"==typeof e&&"object"==typeof e.options&&(i=e.options.namespaces),"object"==typeof i&&0<t.indexOf("::")||0<=t.indexOf("@")){for(var n in i)i.hasOwnProperty(n)&&(t=(t=t.replace(n+"::",i[n])).replace("@"+n,i[n]));return t}return c.path.relativePath(e,t)},c.path.relativePath=function(e,t){var i,n,s,o="/",a=[];t=t||"";if(e.url)i="undefined"!=typeof e.base?e.base+("/"===e.base.charAt(e.base.length-1)?"":"/"):e.url;else if(e.path){var r=d(20),l=r.sep||o,u=new RegExp("^\\.{1,2}"+l.replace("\\","\\\\"));t=t.replace(/\//g,l),i=(i=void 0!==e.base&&null==t.match(u)?(t=t.replace(e.base,""),e.base+l):r.normalize(e.path)).replace(l+l,l),o=l}else{if(!e.name&&!e.id||!e.method||"fs"===e.method||"ajax"===e.method)throw new c.Error("Cannot extend an inline template.");i=e.base||e.name||e.id}for((n=i.split(o)).pop(),n=n.concat(t.split(o));0<n.length;)"."==(s=n.shift())||(".."==s&&0<a.length&&".."!=a[a.length-1]?a.pop():a.push(s));return a.join(o)},c}},function(e,t){e.exports=function(n){"use strict";return n.tests={empty:function(e){if(null==e)return!0;if("number"==typeof e)return!1;if(e.length&&0<e.length)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2==1},even:function(e){return e%2==0},divisibleby:function(e,t){return e%t[0]==0},defined:function(e){return void 0!==e},none:function(e){return null===e},"null":function(e){return this.none(e)},"same as":function(e,t){return e===t[0]},sameas:function(e,t){return console.warn("`sameas` is deprecated use `same as`"),n.tests["same as"](e,t)},iterable:function(e){return e&&(n.lib.is("Array",e)||n.lib.is("Object",e))}},n.test=function(e,t,i){if(!n.tests[e])throw"Test "+e+" is not defined.";return n.tests[e](t,i)},n.test.extend=function(e,t){n.tests[e]=t},n}},function(e,t){e.exports=function(c){"use strict";return c.parseAsync=function(e,t){return c.parse.apply(this,[e,t,!0])},c.expression.parseAsync=function(e,t,i){return c.expression.parse.apply(this,[e,t,i,!0])},c.logic.parseAsync=function(e,t,i){return c.logic.parse.apply(this,[e,t,i,!0])},c.Template.prototype.renderAsync=function(e,t){return this.render(e,t,!0)},c.async={},c.isPromise=function(e){return e&&"function"==typeof e.then},c.Promise=function(e){function i(e,t){o=e,a=t,function i(){l&&(c.forEach(l,function(e){r(e.resolve,e.reject)}),l=null)}()}function n(e){i("reject",e)}function r(e,t){var i={resolve:e,reject:t};return"unknown"==o?(l=l||[]).push(i):void(i[o]&&i[o](a))}function s(e,t,i){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,i(e))})}catch(e){n=!0,i(e)}}var o="unknown",a=null,l=null;return s(e,function u(e){try{if(!c.isPromise(e))return function t(e){i("resolve",e)}(e);s(e.then.bind(e),u,n)}catch(c){n(c)}},n),{then:function(n,s){var o="function"==typeof n,a="function"==typeof s;return new c.Promise(function(t,i){r(function(e){if(o)try{t(n(e))}catch(t){i(t)}else t(e)},function(e){if(a)try{t(s(e))}catch(t){i(t)}else i(e)})})},"catch":function(e){return this.then(null,e)}}},c.Promise.resolve=function(t){return new c.Promise(function(e){e(t)})},c.Promise.reject=function(i){return new c.Promise(function(e,t){t(i)})},c.Promise.all=function(e){var i=[];return c.async.forEach(e,function(e,t){return c.isPromise(e)?e.then(function(e){i[t]=e}):void(i[t]=e)}).then(function(){return i})},c.async.forEach=function(t,i){function n(e){r.reject(e)}function s(e){return c.isPromise(e)?void e.then(s,n):o()}function o(){var e=a++;return e==t.length?void r.resolve():void s(i(t[e],e))}var a=0,r={},e=new c.Promise(function(e,t){r={resolve:e,reject:t}});return o(),e},c}},function(e,t){e.exports=function(r){"use strict";return r.exports={VERSION:r.VERSION},r.exports.twig=function(e){var t=e.id,i={strict_variables:e.strict_variables||!1,autoescape:null!=e.autoescape&&e.autoescape||!1,allowInlineIncludes:e.allowInlineIncludes||!1,rethrow:e.rethrow||!1,namespaces:e.namespaces};if(r.cache&&t&&r.validateId(t),void 0!==e.debug&&(r.debug=e.debug),void 0!==e.trace&&(r.trace=e.trace),void 0!==e.data)return r.Templates.parsers.twig({data:e.data,path:e.hasOwnProperty("path")?e.path:void 0,module:e.module,id:t,options:i});if(void 0!==e.ref){if(void 0!==e.id)throw new r.Error("Both ref and id cannot be set on a twig.js template.");return r.Templates.load(e.ref)}if(void 0===e.method)return void 0!==e.href?r.Templates.loadRemote(e.href,{id:t,method:"ajax",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error):void 0!==e.path?r.Templates.loadRemote(e.path,{id:t,method:"fs",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error):void 0;if(!r.Templates.isRegisteredLoader(e.method))throw new r.Error('Loader for "'+e.method+'" is not defined.');return r.Templates.loadRemote(e.name||e.href||e.path||t||void 0,{id:t,method:e.method,parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error)},r.exports.extendFilter=function(e,t){r.filter.extend(e,t)},r.exports.extendFunction=function(e,t){r._function.extend(e,t)},r.exports.extendTest=function(e,t){r.test.extend(e,t)},r.exports.extendTag=function(e){r.logic.extend(e)},r.exports.extend=function(e){e(r)},r.exports.compile=function(e,t){var i,n=t.filename,s=t.filename;return i=new r.Template({data:e,path:s,id:n,options:t.settings["twig options"]}),function(e){return i.render(e)}},r.exports.renderFile=function(e,t,i){"function"==typeof t&&(i=t,t={});var n=(t=t||{}).settings||{},s={path:e,base:n.views,load:function(e){i(null,""+e.render(t))}},o=n["twig options"];if(o)for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);r.exports.twig(s)},r.exports.__express=r.exports.renderFile,r.exports.cache=function(e){r.cache=e},r.exports.path=r.path,r.exports.filters=r.filters,r}}])});var sdselect2=void $(".select2").select2();products=void $("#form-product-select-param").on("change",function(){var e=$(this).find("option:selected"),t=$(e).data("options"),i=$("#form-product-select-value");$(i).html(t)}),function(d){if("undefined"!=typeof category_data){var i=JSON.parse(category_data);d(".category_tree_input").each(function(e,t){!function n(e,t){(e=d(e)).hide(),e.data("data",t);var a=e.data("root")||"Вся категория",r=e.data("empty"),i=(e.data("refresh_url"),e.val());el=l(i,t),e.after(u(el.id,t));for(;el&&(e.after(u(el.parent,t,el.id)),0!=el.parent);)el=l(el.parent,t);function l(e,t){if(!t)return!1;for(var i=0;i<t.length;i++)if(t[i].id==e)return t[i];return!1}function u(e,t,i){if(!t)return!1;var n=0,s='<select class="form-control" style="margin-top:5px;margin-bottom:5px;">';0<e?s+="<option value=0>"+a+"</option>":(r&&(s+='<option value="">'+r+"</option>"),s+='<option value="'+(r?"0":"")+'">Выберите категорию</option>');for(var o=0;o<t.length;o++)t[o].parent==e&&(n++,s+="<option value="+t[o].id+" data-index="+o+"  "+(t[o].id==i?"selected":"")+">"+t[o].name+"</option>");return s+="</select>",0!=n&&((s=d(s)).on("change",function(){var e=d(this);e.nextAll().remove();var t=e.closest(".form-group").find("input");if("0"===e.val())return t.val(e.prev("select").length?e.prev("select").val():e.val()),void c(t);if(""===e.val())return t.val(""),void c(t);t.val(e.val()),c(t);var i=t.data("data"),n=l(t.val(),i);e.after(u(n.id,i))}),s)}function c(o){var a=o.data("refresh_slave"),e=o.data("refresh_url");e&&a&&d.get(e,{id:o.val(),except:o.data("id")},function(e){var t=d("#"+a);if(t){var i=o.data("slave_prompt")||"Выберите значение";t.html("");var n='<option value="">'+i+"</option>";if(e.length)for(var s=0;s<e.length;s++)n+='<option value="'+e[s].id+'">'+e[s].name+"</option>";t.html(n)}},"json");var t=o.data("hide_on_no_empty");t&&0<d(t).length&&(0==o.val()||0==o.val().length?d(t).removeClass("hide"):d(t).addClass("hide"))}}(t,i)})}d(".form-imput-depend-empty").on("change",function(){$this=d(this);var e=$this.data("depend-slave");if(e){e=e.split(",");for(var t=0;t<e.length;t++)if(e[t]){var i=d("#"+e[t]);i&&($this.val()?d(i).closest(".form-group").hide():d(i).closest(".form-group").show())}}})}(jQuery);