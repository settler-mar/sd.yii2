function ajaxForm(e){function t(e){l=+new Date;var t=this,i=t.form,n=t.wrap,s=t.wrap_html;if(e.render?(e.notyfy_class="notify_white",notification.alert(e)):(n.removeClass("loading"),i.removeClass("loading"),e.html?(n.html(e.html),ajaxForm(n)):e.error||(i.removeClass("loading"),n.html(s),i.find("input[type=text],textarea").val(""),ajaxForm(n))),"object"==typeof e.error)for(var o in e.error)notification.notifi({type:"err",title:e.title?e.title:lg("error"),message:e.error[o]});else if(Array.isArray(e.error))for(var a=0;a<e.error.length;a++)notification.notifi({type:"err",title:e.title?e.title:lg("error"),message:e.error[a]});else(e.error||e.message)&&notification.notifi({type:e.error===!1?"success":"err",title:e.title?e.title:lg(e.error===!1?"success":"error"),message:e.message?e.message:e.error})}function i(){l=+new Date;var e=this,t=(e.form,e.wrap);t.removeClass("loading"),t.html("<h3>"+lg("sorry_not_expected_error")+"<h3>"+lg("it_happens_sometimes")),ajaxForm(t)}function n(e){e.preventDefault();var t=+new Date;if(t-l<2e3)return!1;l=t;var i=this,n=i.form,a=i.wrap;i.wrap_html=a.html();for(var r=!0,u=n.find('input.required, textarea.required, input[id="support-recaptcha"]'),c=0;c<u.length;c++){var d=u.eq(c).closest(".form-group").find(".help-block"),p=d&&d.data("message")?d.data("message"):lg("required");u.eq(c).val().length<1?($(d).closest(".form-group").addClass("has-error"),d.html(p),d.addClass("help-block-error"),r=!1):(d.html(""),$(d).closest(".form-group").removeClass("has-error"),d.removeClass("help-block-error"))}if(!r)return!1;if(n.yiiActiveForm){n.off("afterValidate"),n.on("afterValidate",s.bind(i)),n.yiiActiveForm("validate",!0);var h=n.data("yiiActiveForm");return h&&(h.validated=!0,n.data("yiiActiveForm",h),n.yiiActiveForm("validate"),r=h.validated),e.stopImmediatePropagation(),e.stopPropagation(),!1}return!!(r=r&&0==n.find(i.param.error_class).length)&&(e.stopImmediatePropagation(),e.stopPropagation(),o(i),void 0)}function s(e){var t=data.form;return 0==t.find(data.param.error_class).length&&o(this),!0}function o(e){var n=e.form;n.serializeObject||addSRO();var s=n.serializeObject();n.addClass("loading"),n.html(""),e.wrap.html('<div style="text-align:center;"><p>'+lg("sending_data")+"</p></div>"),e.url+=(e.url.indexOf("?")>0?"&":"?")+"rc="+Math.random(),"undefined"!=typeof lang&&e.url.indexOf(lang.href_prefix)==-1&&(e.url="/"+lang.href_prefix+e.url,e.url=e.url.replace("//","/").replace("//","/")),$.post(e.url,s,t.bind(e),"json").fail(i.bind(e))}function a(e){form=e.find("form"),data={form:form,param:r,wrap:e},data.url=form.attr("action")||location.href,data.method=form.attr("method")||"post",form.unbind("submit"),form.on("submit",n.bind(data))}var r=(!!(window.File&&window.FileReader&&window.FileList&&window.Blob),{error_class:".has-error"}),l=!1;e.find("[required]").addClass("required").removeAttr("required");for(var u=0;u<e.length;u++)a(e.eq(u));"function"==typeof placeholder&&placeholder()}function addSRO(){$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}}function testImgPrew(){$("input[type=file]").on("change",function(e){var t=e.target.files,i=t[0];if(!i.type.match("image.*"))return!1;var n=new FileReader;data={el:this,f:i},n.onload=function(e){return function(t){img=$('[for="'+e.el.name+'"]'),img.length>0&&img.attr("src",t.target.result)}}(data),n.readAsDataURL(i)}),$(".file_select input").on("change",function(e){var t=$('[for="'+this.name+'"]');t.length>0&&t.attr("src",this.value)})}function float_in_input(e){code=e.keyCode||e.charCode,char=String.fromCharCode(code),code>=48&&code<=57||13==code||(","!=char&&"."!=char||(val=this.value,val.indexOf(",")!=-1||val.indexOf(".")!=-1))&&(show_gritter(this),e.preventDefault())}function no_letters_in_input(e){code=e.keyCode||e.charCode,code>=48&&code<=57||13==code||(show_gritter(this),e.preventDefault())}function only_letters_in_input(e){code=e.keyCode||e.charCode,code>=97&&code<=122||13==code||code>=65&&code<=90||32==code||(show_gritter(this),e.preventDefault())}function only_no_foreign_letters_in_input(e){code=e.keyCode||e.charCode,code>=48&&code<=57||code>=97&&code<=122||code>=65&&code<=90||44==code||46==code||13==code||32==code||33==code||64==code||35==code||36==code||37==code||94==code||38==code||42==code||40==code||41==code||95==code||43==code||45==code||61==code||8==code||9==code||39==code||(show_gritter(this),e.preventDefault())}function show_gritter(e){}function stopEvent(e){return e.preventDefault(),!1}function showControl(e){return $(".temp_show.active").removeClass("active"),id=$(this).attr("for"),control_d=eval(id),control=$("#"+id+"-wrap"),control.addClass("active").html(control_d),e.preventDefault(),!1}function init_template(){template||(template=function(){function e(e,t){return n[e]?n[e].render(t):""}function t(){return i}var i=!1,n={};return $.get("/tpls",function(e){for(index in e)n[index]=Twig.twig({data:e[index]});i=!0},"json"),{render:e,ready:t}}())}var lg=function(){function e(e){if(e=e.replace(/\s+/g," "),str=e.match(/\{(.*?)\}/g),null!=str)for(i=0;i<str.length;i++)str_t=str[i].replace(/ /g,""),e=e.replace(str[i],str_t);return e}var t={};return url="/language/"+document.documentElement.lang+".json",$.get(url,function(i){for(var n in i)i[n]=e(i[n]);t=i;var s=new CustomEvent("language_loaded");document.dispatchEvent(s)},"json"),function(e,i){if("undefined"==typeof t[e])return console.log("lang not found: "+e),e;if(e=t[e],"object"==typeof i)for(var n in i)e=e.split("{"+n+"}").join(i[n]);return e}}();!function(e){function t(t){var i=e(this),n=null,s=[],o=null,a=null,r=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=3,u=300,c=function(e){s.push({x:e.pageX,y:e.pageY}),s.length>l&&s.shift()},d=function(){a&&clearTimeout(a),r.exitMenu(this)&&(n&&r.deactivate(n),n=null)},p=function(){a&&clearTimeout(a),r.enter(this),m(this)},h=function(){r.exit(this)},f=function(){g(this)},g=function(e){e!=n&&(n&&r.deactivate(n),r.activate(e),n=e)},m=function(e){var t=v();t?a=setTimeout(function(){m(e)},t):g(e)},v=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!n||!e(n).is(r.submenuSelector))return 0;var a=i.offset(),l={x:a.left,y:a.top-r.tolerance},c={x:a.left+i.outerWidth(),y:l.y},d={x:a.left,y:a.top+i.outerHeight()+r.tolerance},p={x:a.left+i.outerWidth(),y:d.y},h=s[s.length-1],f=s[0];if(!h)return 0;if(f||(f=h),f.x<a.left||f.x>p.x||f.y<a.top||f.y>p.y)return 0;if(o&&h.x==o.x&&h.y==o.y)return 0;var g=c,m=p;"left"==r.submenuDirection?(g=d,m=l):"below"==r.submenuDirection?(g=p,m=d):"above"==r.submenuDirection&&(g=l,m=c);var v=t(h,g),y=t(h,m),_=t(f,g),b=t(f,m);return v<_&&y>b?(o=h,u):(o=null,0)};i.mouseleave(d).find(r.rowSelector).mouseenter(p).mouseleave(h).click(f),e(document).mousemove(c)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery),!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.Circles=t()}(this,function(){"use strict";var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t=function(e){var t=e.id;if(this._el=document.getElementById(t),null!==this._el){this._radius=e.radius||10,this._duration=void 0===e.duration?500:e.duration,this._value=0,this._maxValue=e.maxValue||100,this._text=void 0===e.text?function(e){return this.htmlifyNumber(e)}:e.text,this._strokeWidth=e.width||10,this._colors=e.colors||["#EEE","#F00"],this._svg=null,this._movingPath=null,this._wrapContainer=null,this._textContainer=null,this._wrpClass=e.wrpClass||"circles-wrp",this._textClass=e.textClass||"circles-text",this._valClass=e.valueStrokeClass||"circles-valueStroke",this._maxValClass=e.maxValueStrokeClass||"circles-maxValueStroke",this._styleWrapper=e.styleWrapper!==!1,this._styleText=e.styleText!==!1;var i=Math.PI/180*270;this._start=-Math.PI/180*90,this._startPrecise=this._precise(this._start),this._circ=i-this._start,this._generate().update(e.value||0)}};return t.prototype={VERSION:"0.0.6",_generate:function(){return this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._generateSvg()._generateText()._generateWrapper(),this._el.innerHTML="",this._el.appendChild(this._wrapContainer),this},_setPercentage:function(e){this._movingPath.setAttribute("d",this._calculatePath(e,!0)),this._textContainer.innerHTML=this._getText(this.getValueFromPercent(e))},_generateWrapper:function(){return this._wrapContainer=document.createElement("div"),this._wrapContainer.className=this._wrpClass,this._styleWrapper&&(this._wrapContainer.style.position="relative",this._wrapContainer.style.display="inline-block"),this._wrapContainer.appendChild(this._svg),this._wrapContainer.appendChild(this._textContainer),this},_generateText:function(){if(this._textContainer=document.createElement("div"),this._textContainer.className=this._textClass,this._styleText){var e={position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"};for(var t in e)this._textContainer.style[t]=e[t]}return this._textContainer.innerHTML=this._getText(0),this},_getText:function(e){return this._text?(void 0===e&&(e=this._value),e=parseFloat(e.toFixed(2)),"function"==typeof this._text?this._text.call(this,e):this._text):""},_generateSvg:function(){return this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttribute("width",this._svgSize),this._svg.setAttribute("height",this._svgSize),this._generatePath(100,!1,this._colors[0],this._maxValClass)._generatePath(1,!0,this._colors[1],this._valClass),this._movingPath=this._svg.getElementsByTagName("path")[1],this},_generatePath:function(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("fill","transparent"),s.setAttribute("stroke",i),s.setAttribute("stroke-width",this._strokeWidth),s.setAttribute("d",this._calculatePath(e,t)),s.setAttribute("class",n),this._svg.appendChild(s),this},_calculatePath:function(e,t){var i=this._start+e/100*this._circ,n=this._precise(i);return this._arc(n,t)},_arc:function(e,t){var i=e-.001,n=e-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,n,1,this._radius+this._radiusAdjusted*Math.cos(i),this._radius+this._radiusAdjusted*Math.sin(i),t?"":"Z"].join(" ")},_precise:function(e){return Math.round(1e3*e)/1e3},htmlifyNumber:function(e,t,i){t=t||"circles-integer",i=i||"circles-decimals";var n=(e+"").split("."),s='<span class="'+t+'">'+n[0]+"</span>";return n.length>1&&(s+='.<span class="'+i+'">'+n[1].substring(0,2)+"</span>"),s},updateRadius:function(e){return this._radius=e,this._generate().update(!0)},updateWidth:function(e){return this._strokeWidth=e,this._generate().update(!0)},updateColors:function(e){this._colors=e;var t=this._svg.getElementsByTagName("path");return t[0].setAttribute("stroke",e[0]),t[1].setAttribute("stroke",e[1]),this},getPercent:function(){return 100*this._value/this._maxValue},getValueFromPercent:function(e){return this._maxValue*e/100},getValue:function(){return this._value},getMaxValue:function(){return this._maxValue},update:function(t,i){if(t===!0)return this._setPercentage(this.getPercent()),this;if(this._value==t||isNaN(t))return this;void 0===i&&(i=this._duration);var n,s,o,a,r=this,l=r.getPercent(),u=1;return this._value=Math.min(this._maxValue,Math.max(0,t)),i?(n=r.getPercent(),s=n>l,u+=n%1,o=Math.floor(Math.abs(n-l)/u),a=i/o,function c(t){if(s?l+=u:l-=u,s&&l>=n||!s&&n>=l)return void e(function(){r._setPercentage(n)});e(function(){r._setPercentage(l)});var i=Date.now(),o=i-t;o>=a?c(i):setTimeout(function(){c(Date.now())},a-o)}(Date.now()),this):(this._setPercentage(this.getPercent()),this)}},t.create=function(e){return new t(e)},t});var Datepicker;if(function(e,t,i){var n,s,o,a="datepicker",r=".datepicker-here",l=!1,u='<div class="datepicker"><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>',c={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},onSelect:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},d={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]};Datepicker=function(e,s){this.el=e,this.$el=t(e),this.opts=t.extend(!0,{},c,s,this.$el.data()),n==i&&(n=t("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this.init()},o=Datepicker,o.prototype={viewIndexes:["days","months","years"],init:function(){l||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.views[this.currentView]=new Datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new Datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date((-86399999136e5)),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("input.adp",this._onInput.bind(this)),t(e).on("resize.adp",this._onResize.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},isWeekend:function(e){return this.opts.weekends.indexOf(e)!==-1},_defineLocale:function(e){"string"==typeof e?(this.loc=Datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=t.extend(!0,{},Datepicker.language.ru)),this.loc=t.extend(!0,{},Datepicker.language.ru,Datepicker.language[e])):this.loc=t.extend(!0,{},Datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay)},_buildDatepickersContainer:function(){l=!0,n.append('<div class="datepickers-container" id="datepickers-container"></div>'),s=t("#datepickers-container")},_buildBaseHtml:function(){var e,i=t('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?i.insertAfter(this.$el):s:i.appendTo(this.$el),this.$datepicker=t(u).appendTo(e),this.$content=t(".datepicker--content",this.$datepicker),this.$nav=t(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return this.opts.onSelect("","",this);var e,t=this.selectedDates,i=o.getParsedDate(t[0]),n=this,s=new Date(i.year,i.month,i.date);e=t.map(function(e){return n.formatDate(n.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(s=t.map(function(e){var t=o.getParsedDate(e);return new Date(t.year,t.month,t.date)})),this.opts.onSelect(e,s,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i=e,n=this._getWordBoundaryRegExp,s=this.loc,a=o.getDecade(t),r=o.getParsedDate(t);switch(!0){case/@/.test(i):i=i.replace(/@/,t.getTime());case/dd/.test(i):i=i.replace(n("dd"),r.fullDate);case/d/.test(i):i=i.replace(n("d"),r.date);case/DD/.test(i):i=i.replace(n("DD"),s.days[r.day]);case/D/.test(i):i=i.replace(n("D"),s.daysShort[r.day]);case/mm/.test(i):i=i.replace(n("mm"),r.fullMonth);case/m/.test(i):i=i.replace(n("m"),r.month+1);case/MM/.test(i):i=i.replace(n("MM"),this.loc.months[r.month]);case/M/.test(i):i=i.replace(n("M"),s.monthsShort[r.month]);case/yyyy/.test(i):i=i.replace(n("yyyy"),r.year);case/yyyy1/.test(i):i=i.replace(n("yyyy1"),a[0]);case/yyyy2/.test(i):i=i.replace(n("yyyy2"),a[1]);case/yy/.test(i):i=i.replace(n("yy"),r.year.toString().slice(-2))}return i},_getWordBoundaryRegExp:function(e){return new RegExp("\\b(?=[a-zA-Z0-9äöüßÄÖÜ<])"+e+"(?![>a-zA-Z0-9äöüßÄÖÜ])")},selectDate:function(e){var t=this,i=t.opts,n=t.parsedDate,s=t.selectedDates,o=s.length,a="";if(e instanceof Date){if("days"==t.view&&e.getMonth()!=n.month&&i.moveToOtherMonthsOnSelect&&(a=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=n.year&&i.moveToOtherYearsOnSelect&&(a=new Date(e.getFullYear(),0,1)),a&&(t.silent=!0,t.date=a,t.silent=!1,t.nav._render()),i.multipleDates&&!i.range){if(o===i.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else i.range?2==o?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==o?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),i.onSelect&&t._triggerOnChange(),i.autoClose&&(i.multipleDates||i.range?i.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(e){var t=this.selectedDates,i=this;if(e instanceof Date)return t.some(function(n,s){if(o.isSame(n,e))return t.splice(s,1),i.selectedDates.length||(i.minRange="",i.maxRange=""),i.views[i.currentView]._render(),i._setInputValue(),i.opts.onSelect&&i._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,i){var n=arguments.length;return 2==n?this.opts[e]=i:1==n&&"object"==typeof e&&(this.opts=t.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(e,t){return this.selectedDates.some(function(i){return o.isSame(i,e,t)})},_setInputValue:function(){var e,t=this,i=t.opts,n=t.loc.dateFormat,s=i.altFieldDateFormat,o=t.selectedDates.map(function(e){return t.formatDate(n,e)});i.altField&&t.$altField.length&&(e=this.selectedDates.map(function(e){return t.formatDate(s,e)}),e=e.join(this.opts.multipleDatesSeparator),this.$altField.val(e)),o=o.join(this.opts.multipleDatesSeparator),this.$el.val(o)},_isInRange:function(e,t){var i=e.getTime(),n=o.getParsedDate(e),s=o.getParsedDate(this.minDate),a=o.getParsedDate(this.maxDate),r=new Date(n.year,n.month,s.date).getTime(),l=new Date(n.year,n.month,a.date).getTime(),u={day:i>=this.minTime&&i<=this.maxTime,month:r>=this.minTime&&l<=this.maxTime,year:n.year>=s.year&&n.year<=a.year};return t?u[t]:u.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,n=e.data("year")||t.year,s=e.data("month")==i?t.month:e.data("month"),o=e.data("date")||1;return new Date(n,s,o)},_setPositionClasses:function(e){e=e.split(" ");var t=e[0],i=e[1],n="datepicker -"+t+"-"+i+"- -from-"+t+"-";this.visible&&(n+=" active"),this.$datepicker.removeAttr("class").addClass(n)},setPosition:function(e){e=e||this.opts.position;var t,i,n=this._getDimensions(this.$el),s=this._getDimensions(this.$datepicker),o=e.split(" "),a=this.opts.offset,r=o[0],l=o[1];switch(r){case"top":t=n.top-s.height-a;break;case"right":i=n.left+n.width+a;break;case"bottom":t=n.top+n.height+a;break;case"left":i=n.left-s.width-a}switch(l){case"top":t=n.top;break;case"right":i=n.left+n.width-s.width;break;case"bottom":t=n.top+n.height-s.height;break;case"left":i=n.left;break;case"center":/left|right/.test(r)?t=n.top+n.height/2-s.height/2:i=n.left+n.width/2-s.width/2}this.$datepicker.css({left:i,top:t})},show:function(){this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0},hide:function(){this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur()},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_changeView:function(e,t){e=e||this.focused||this.date;var i="up"==t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[i]},_handleHotKey:function(e){var t,i,n,s=o.getParsedDate(this._getFocusedDate()),a=this.opts,r=!1,l=!1,u=!1,c=s.year,d=s.month,p=s.date;switch(e){case"ctrlRight":case"ctrlUp":d+=1,r=!0;break;case"ctrlLeft":case"ctrlDown":d-=1,r=!0;break;case"shiftRight":case"shiftUp":l=!0,c+=1;break;case"shiftLeft":case"shiftDown":l=!0,c-=1;break;case"altRight":case"altUp":u=!0,c+=10;break;case"altLeft":case"altDown":u=!0,c-=10;break;case"ctrlShiftUp":this.up()}n=o.getDaysCount(new Date(c,d)),i=new Date(c,d,p),n<p&&(p=n),i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i,t=o.getParsedDate(i),r&&a.onChangeMonth&&a.onChangeMonth(t.month,t.year),l&&a.onChangeYear&&a.onChangeYear(t.year),u&&a.onChangeDecade&&a.onChangeDecade(this.curDecade)},_registerKey:function(e){var t=this.keys.some(function(t){return t==e});t||this.keys.push(e)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,i=this,n=this.keys.sort();for(var s in d)e=d[s],n.length==e.length&&e.every(function(e,t){return e==n[t]})&&(i._trigger("hotKey",s),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=o.getParsedDate(this._getFocusedDate()),n=i.year,s=i.month,a=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t?a-=1:"","month"==t?s-=1:"","year"==t?n-=1:"";break;case 38:"day"==t?a-=7:"","month"==t?s-=3:"","year"==t?n-=4:"";break;case 39:"day"==t?a+=1:"","month"==t?s+=1:"","year"==t?n+=1:"";break;case 40:"day"==t?a+=7:"","month"==t?s+=3:"","year"==t?n+=4:""}var r=new Date(n,s,a);r.getTime()<this.minTime?r=this.minDate:r.getTime()>this.maxTime&&(r=this.maxDate),this.focused=r}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,t){t=t||this.cellType;var i,n=o.getParsedDate(e),s='.datepicker--cell[data-year="'+n.year+'"]';switch(t){case"month":s='[data-month="'+n.month+'"]';break;case"day":s+='[data-month="'+n.month+'"][data-date="'+n.date+'"]'}return i=this.views[this.currentView].$el.find(s),i.length?i:""},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_onShowEvent:function(){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,this.$el.focus()},_onInput:function(){var e=this.$el.val();e||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),t>=37&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var i=this._isSelected(this.focused,this.cellType);i?i&&this.opts.toggleSelected&&this.removeDate(this.focused):this.selectDate(this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var i=t(e.target).closest(".datepicker--cell"),n=this._getDateFromCell(i);this.silent=!0,this.focused&&(this.focused=""),i.addClass("-focus-"),this.focused=n,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){var i=t(e.target).closest(".datepicker--cell");i.removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",o.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return o.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new Datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=o.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=o.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return o.getDecade(this.date)}},o.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},o.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay()}},o.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},o.template=function(e,t){return e.replace(/#\{([\w]+)\}/g,function(e,i){if(t[i]||0===t[i])return t[i]})},o.isSame=function(e,t,i){if(!e||!t)return!1;var n=o.getParsedDate(e),s=o.getParsedDate(t),a=i?i:"day",r={day:n.date==s.date&&n.month==s.month&&n.year==s.year,month:n.month==s.month&&n.year==s.year,year:n.year==s.year};return r[a]},o.less=function(e,t,i){return!(!e||!t)&&t.getTime()<e.getTime()},o.bigger=function(e,t,i){return!(!e||!t)&&t.getTime()>e.getTime()},Datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",firstDay:1}},t.fn[a]=function(e){return this.each(function(){if(t.data(this,a)){var i=t.data(this,a);i.opts=t.extend(!0,i.opts,e),i.update()}else t.data(this,a,new Datepicker(this,e))})},t(function(){t(r).datepicker()})}(window,jQuery),function(){var e={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},t=Datepicker;t.Body=function(e,t,i){this.d=e,this.type=t,this.opts=i,this.init()},t.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",$.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=$(e[this.type]).appendTo(this.d.$content),this.$names=$(".datepicker--days-names",this.$el),this.$cells=$(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,i,n){return t=void 0!=t?t:e,i=i?i:"",n=void 0!=n?n:0,n>7?i:7==t?this._getDayNamesHtml(e,0,i,++n):(i+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,i,++n))},_getCellContents:function(e,i){var n="datepicker--cell datepicker--cell-"+i,s=new Date,o=this.d,a=o.opts,r=t.getParsedDate(e),l={},u=r.date;switch(a.onRenderCell&&(l=a.onRenderCell(e,i)||{},u=l.html?l.html:u,n+=l.classes?" "+l.classes:""),i){case"day":o.isWeekend(r.day)&&(n+=" -weekend-"),
r.month!=this.d.parsedDate.month&&(n+=" -other-month-",a.selectOtherMonths||(n+=" -disabled-"),a.showOtherMonths||(u=""));break;case"month":u=o.loc[o.opts.monthsField][r.month];break;case"year":var c=o.curDecade;u=r.year,(r.year<c[0]||r.year>c[1])&&(n+=" -other-decade-",a.selectOtherYears||(n+=" -disabled-"),a.showOtherYears||(u=""))}return a.onRenderCell&&(l=a.onRenderCell(e,i)||{},u=l.html?l.html:u,n+=l.classes?" "+l.classes:""),a.range&&(t.isSame(o.minRange,e,i)&&(n+=" -range-from-"),t.isSame(o.maxRange,e,i)&&(n+=" -range-to-"),1==o.selectedDates.length&&o.focused?((t.bigger(o.minRange,e)&&t.less(o.focused,e)||t.less(o.maxRange,e)&&t.bigger(o.focused,e))&&(n+=" -in-range-"),t.less(o.maxRange,e)&&t.isSame(o.focused,e)&&(n+=" -range-from-"),t.bigger(o.minRange,e)&&t.isSame(o.focused,e)&&(n+=" -range-to-")):2==o.selectedDates.length&&t.bigger(o.minRange,e)&&t.less(o.maxRange,e)&&(n+=" -in-range-")),t.isSame(s,e,i)&&(n+=" -current-"),o.focused&&t.isSame(e,o.focused,i)&&(n+=" -focus-"),o._isSelected(e,i)&&(n+=" -selected-"),o._isInRange(e,i)&&!l.disabled||(n+=" -disabled-"),{html:u,classes:n}},_getDaysHtml:function(e){var i=t.getDaysCount(e),n=new Date(e.getFullYear(),e.getMonth(),1).getDay(),s=new Date(e.getFullYear(),e.getMonth(),i).getDay(),o=n-this.d.loc.firstDay,a=6-s+this.d.loc.firstDay;o=o<0?o+7:o,a=a>6?a-7:a;for(var r,l,u=-o+1,c="",d=u,p=i+a;d<=p;d++)l=e.getFullYear(),r=e.getMonth(),c+=this._getDayHtml(new Date(l,r,d));return c},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var i="",n=t.getParsedDate(e),s=0;s<12;)i+=this._getMonthHtml(new Date(n.year,s)),s++;return i},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){var i=(t.getParsedDate(e),t.getDecade(e)),n=i[0]-1,s="",o=n;for(o;o<=i[1]+1;o++)s+=this._getYearHtml(new Date(o,0));return s},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this._renderTypes[this.type].bind(this)()},_update:function(){var e,t,i,n=$(".datepicker--cell",this.$cells),s=this;n.each(function(n,o){t=$(this),i=s.d._getDateFromCell($(this)),e=s._getCellContents(i,s.d.cellType),t.attr("class",e.classes)})},show:function(){this.$el.addClass("active"),this.acitve=!0},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,n=e.data("year")||this.d.parsedDate.year;if(this.d.view!=this.opts.minView)return void this.d.down(new Date(n,i,t));var s=new Date(n,i,t),o=this.d._isSelected(s,this.d.cellType);o?o&&this.opts.toggleSelected&&this.d.removeDate(s):this.d.selectDate(s)},_onClickCell:function(e){var t=$(e.target).closest(".datepicker--cell");t.hasClass("-disabled-")||this._handleClick.bind(this)(t)}}}(),function(){var e='<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',t='<div class="datepicker--buttons"></div>',i='<span class="datepicker--button" data-action="#{action}">#{label}</span>';Datepicker.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},Datepicker.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",$.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",$.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",$.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var t=this._getTitle(this.d.currentDate),i=Datepicker.template(e,$.extend({title:t},this.opts));this.d.$nav.html(i),"years"==this.d.view&&$(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var t={action:e,label:this.d.loc[e]},n=Datepicker.template(i,t);$("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(n)},_addButtonsContainer:function(){this.d.$datepicker.append(t),this.$buttonsContainer=$(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,i=e.year,n=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(i,t-1,n),"month")||this._disableNav("prev"),this.d._isInRange(new Date(i,t+1,n),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(i-1,t,n),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+1,t,n),"year")||this._disableNav("next");break;case"years":this.d._isInRange(new Date(i-10,t,n),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+10,t,n),"year")||this._disableNav("next")}}},_disableNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){$('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var t=$(e.target).closest("[data-action]"),i=t.data("action");this.d[i]()},_onClickNavTitle:function(e){if(!$(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:this.options.themeClassName=this.options.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var i=e("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(i):this.$bar.append(i);var n=this;e.each(this.options.buttons,function(t,i){var s=e("<button/>").addClass(i.addClass?i.addClass:"gray").html(i.text).attr("id",i.id?i.id:"button-"+t).attr("title",i.title).appendTo(n.$bar.find(".noty_buttons")).on("click",function(t){e.isFunction(i.onClick)&&i.onClick.call(s,n,t)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===e.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector),[t.options.within]),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),-1==e.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),"string"==typeof t.options.animation.open?(t.$bar.css("height",t.$bar.innerHeight()),t.$bar.on("click",function(e){t.wasClicked=!0}),t.$bar.show().addClass(t.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0,t.hasOwnProperty("wasClicked")&&(t.$bar.off("click",function(e){t.wasClicked=!0}),t.close())})):t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var t=this;if(this.showing)return void t.$bar.queue(function(){t.close.apply(t)});if(!this.shown&&!this.showing){var i=[];return e.each(e.noty.queue,function(e,n){n.options.id!=t.options.id&&i.push(n)}),void(e.noty.queue=i)}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),"string"==typeof t.options.animation.close?t.$bar.addClass(t.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t),t.closeCleanUp()}):t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.closeCleanUp()})}},closeCleanUp:function(){var t=this;t.options.modal&&(e.notyRenderer.setModalCount(-1),0==e.notyRenderer.getModalCount()&&e(".noty_modal").fadeOut(t.options.animation.fadeSpeed,function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),0==e.notyRenderer.getLayoutCountFor(t)&&e(t.options.layout.container.selector).remove(),"undefined"!=typeof t.$bar&&null!==t.$bar&&("string"==typeof t.options.animation.close?(t.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),t.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){t.$bar.remove(),t.$bar=null,t.closed=!0,t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t)})):(t.$bar.remove(),t.$bar=null,t.closed=!0)),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render()},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,"undefined"!=typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(i){var n=Object.create(t).init(i);return n.options.killer&&e.noty.closeAll(),n.options.force?e.noty.queue.unshift(n):e.noty.queue.push(n),e.notyRenderer.render(),"object"==e.noty.returns?n:n.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];"object"===e.type(t)?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" > li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?0==t.options.custom.find(t.options.layout.container.selector).length?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):0==e(t.options.layout.container.selector).length?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){if(0==e(".noty_modal").length){var i=e("<div/>").addClass("noty_modal").addClass(t.options.theme).data("noty_modal_count",0);t.options.theme.modal&&t.options.theme.modal.css&&i.css(t.options.theme.modal.css),i.prependTo(e("body")).fadeIn(t.options.animation.fadeSpeed),e.inArray("backdrop",t.options.closeWith)>-1&&i.on("click",function(t){e.noty.closeAll()})}},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,i){return e(t.options.layout.container.selector).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+i)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return!!e.noty.store.hasOwnProperty(t)&&e.noty.store[t]},e.noty.close=function(t){return!!e.noty.get(t)&&e.noty.get(t).close()},e.noty.setText=function(t,i){return!!e.noty.get(t)&&e.noty.get(t).setText(i)},e.noty.setType=function(t,i){return!!e.noty.get(t)&&e.noty.get(t).setType(i)},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var i=window.alert;return e.noty.consumeAlert=function(t){window.alert=function(i){t?t.text=i:t={text:i},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=i},e.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500,fadeSpeed:"fast"},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).on("resize",function(){e.each(e.noty.layouts,function(t,i){i.container.style.apply(e(i.container.selector))})}),window.noty=function(t){return e.notyRenderer.init(t)},e.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){e(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},e.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){e(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){e(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){e(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var i=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-i)/2+"px"}):e(this).animate({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-i)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){e(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var i=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-i)/2+"px"}):e(this).animate({top:(e(window).height()-i)/2+"px"},500),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){e(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var i=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-i)/2+"px"}):e(this).animate({top:(e(window).height()-i)/2+"px"},500),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){e(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},e.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){e(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},e.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){e(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){e(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){e(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},e.noty.themes.bootstrapTheme={name:"bootstrapTheme",modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){var t=this.options.layout.container.selector;switch(e(t).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("list-group-item").css("padding","0px"),this.options.type){case"alert":case"notification":this.$bar.addClass("list-group-item-info");break;case"warning":this.$bar.addClass("list-group-item-warning");break;case"error":this.$bar.addClass("list-group-item-danger");break;case"information":this.$bar.addClass("list-group-item-info");break;case"success":this.$bar.addClass("list-group-item-success")}this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"})},callback:{onShow:function(){},onClose:function(){}}},e.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var t=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),e(t).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAQAAAClM0ndAAAAhklEQVR4AdXO0QrCMBBE0bttkk38/w8WRERpdyjzVOc+HxhIHqJGMQcFFkpYRQotLLSw0IJ5aBdovruMYDA/kT8plF9ZKLFQcgF18hDj1SbQOMlCA4kao0iiXmah7qBWPdxpohsgVZyj7e5I9KcID+EhiDI5gxBYKLBQYKHAQoGFAoEks/YEGHYKB7hFxf0AAAAASUVORK5CYII=') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}},e.noty.themes.relax={name:"relax",helpers:{},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",margin:"4px 0",borderRadius:"2px"}),this.$message.css({fontSize:"14px",lineHeight:"16px",textAlign:"center",padding:"10px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderTop:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderBottom:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#dedede",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#FF8181",borderColor:"#e25353",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#78C5E7",borderColor:"#3badd6",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#BCF5BC",borderColor:"#7cdd77",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){},onClose:function(){}}},window.noty}),function(e){function t(t){void 0==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t});try{var i=(new DOMParser).parseFromString(t,"text/xml");if(!e.isXMLDoc(i))throw"Unable to parse XML";var n=e("parsererror",i);if(1==n.length)throw"Error: "+e(i).text();return i}catch(s){var o=void 0==s.name?s:s.name+": "+s.message;return void e(document).trigger("xmlParseError",[o])}}function i(t,i,n){(t.context?e(t.context):e.event).trigger(i,n)}function n(t,i){var s=!0;return"string"==typeof i?e.isFunction(t.test)?t.test(i):t==i:(e.each(t,function(o){return void 0===i[o]?s=!1:void("object"==typeof i[o]&&null!==i[o]?(s&&e.isArray(i[o])&&(s=e.isArray(t[o])&&i[o].length===t[o].length),s=s&&n(t[o],i[o])):s=t[o]&&e.isFunction(t[o].test)?s&&t[o].test(i[o]):s&&t[o]==i[o])}),s)}function s(t,i){return t[i]===e.mockjaxSettings[i]}function o(t,i){if(e.isFunction(t))return t(i);
if(e.isFunction(t.url.test)){if(!t.url.test(i.url))return null}else{var s=t.url.indexOf("*");if(t.url!==i.url&&s===-1||!new RegExp(t.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(i.url))return null}return!t.data||i.data&&n(t.data,i.data)?t&&t.type&&t.type.toLowerCase()!=i.type.toLowerCase()?null:t:null}function a(i,n,o){var a=function(s){return function(){return function(){var s;this.status=i.status,this.statusText=i.statusText,this.readyState=4,e.isFunction(i.response)&&i.response(o),"json"==n.dataType&&"object"==typeof i.responseText?this.responseText=JSON.stringify(i.responseText):"xml"==n.dataType?"string"==typeof i.responseXML?(this.responseXML=t(i.responseXML),this.responseText=i.responseXML):this.responseXML=i.responseXML:this.responseText=i.responseText,"number"!=typeof i.status&&"string"!=typeof i.status||(this.status=i.status),"string"==typeof i.statusText&&(this.statusText=i.statusText),s=this.onreadystatechange||this.onload,e.isFunction(s)?(i.isTimeout&&(this.status=-1),s.call(this,i.isTimeout?"timeout":void 0)):i.isTimeout&&(this.status=-1)}.apply(s)}}(this);i.proxy?m({global:!1,url:i.proxy,type:i.proxyType,data:i.data,dataType:"script"===n.dataType?"text/plain":n.dataType,complete:function(e){i.responseXML=e.responseXML,i.responseText=e.responseText,s(i,"status")&&(i.status=e.status),s(i,"statusText")&&(i.statusText=e.statusText),this.responseTimer=setTimeout(a,i.responseTime||0)}}):n.async===!1?a():this.responseTimer=setTimeout(a,i.responseTime||50)}function r(t,i,n,s){return t=e.extend(!0,{},e.mockjaxSettings,t),"undefined"==typeof t.headers&&(t.headers={}),t.contentType&&(t.headers["content-type"]=t.contentType),{status:t.status,statusText:t.statusText,readyState:1,open:function(){},send:function(){s.fired=!0,a.call(this,t,i,n)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(e,i){t.headers[e]=i},getResponseHeader:function(e){return t.headers&&t.headers[e]?t.headers[e]:"last-modified"==e.toLowerCase()?t.lastModified||(new Date).toString():"etag"==e.toLowerCase()?t.etag||"":"content-type"==e.toLowerCase()?t.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var i="";return e.each(t.headers,function(e,t){i+=e+": "+t+"\n"}),i}}}function l(e,t,i){if(u(e),e.dataType="json",e.data&&_.test(e.data)||_.test(e.url)){d(e,t,i);var n=/^(\w+:)?\/\/([^\/?#]+)/,s=n.exec(e.url),o=s&&(s[1]&&s[1]!==location.protocol||s[2]!==location.host);if(e.dataType="script","GET"===e.type.toUpperCase()&&o){var a=c(e,t,i);return!a||a}}return null}function u(e){"GET"===e.type.toUpperCase()?_.test(e.url)||(e.url+=(/\?/.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?"):e.data&&_.test(e.data)||(e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?")}function c(t,i,n){var s=n&&n.context||t,o=null;return i.response&&e.isFunction(i.response)?i.response(n):"object"==typeof i.responseText?e.globalEval("("+JSON.stringify(i.responseText)+")"):e.globalEval("("+i.responseText+")"),p(t,s,i),h(t,s,i),e.Deferred&&(o=new e.Deferred,"object"==typeof i.responseText?o.resolveWith(s,[i.responseText]):o.resolveWith(s,[e.parseJSON(i.responseText)])),o}function d(e,t,i){var n=i&&i.context||e,s=e.jsonpCallback||"jsonp"+b++;e.data&&(e.data=(e.data+"").replace(_,"="+s+"$1")),e.url=e.url.replace(_,"="+s+"$1"),window[s]=window[s]||function(i){data=i,p(e,n,t),h(e,n,t),window[s]=void 0;try{delete window[s]}catch(o){}head&&head.removeChild(script)}}function p(e,t,n){e.success&&e.success.call(t,n.responseText||"",status,{}),e.global&&i(e,"ajaxSuccess",[{},e])}function h(t,n){t.complete&&t.complete.call(n,{},status),t.global&&i("ajaxComplete",[{},t]),t.global&&!--e.active&&e.event.trigger("ajaxStop")}function f(t,i){var n,s,a;"object"==typeof t?(i=t,t=void 0):(i=i||{},i.url=t),s=e.extend(!0,{},e.ajaxSettings,i);for(var u=0;u<v.length;u++)if(v[u]&&(a=o(v[u],s)))return y.push(s),e.mockjaxSettings.log(a,s),s.dataType&&"JSONP"===s.dataType.toUpperCase()&&(n=l(s,a,i))?n:(a.cache=s.cache,a.timeout=s.timeout,a.global=s.global,g(a,i),function(t,i,s,o){n=m.call(e,e.extend(!0,{},s,{xhr:function(){return r(t,i,s,o)}}))}(a,s,i,v[u]),n);if(e.mockjaxSettings.throwUnmocked===!0)throw"AJAX not mocked: "+i.url;return m.apply(e,[i])}function g(e,t){if(e.url instanceof RegExp&&e.hasOwnProperty("urlParams")){var i=e.url.exec(t.url);if(1!==i.length){i.shift();var n=0,s=i.length,o=e.urlParams.length,a=Math.min(s,o),r={};for(n;n<a;n++){var l=e.urlParams[n];r[l]=i[n]}t.urlParams=r}}}var m=e.ajax,v=[],y=[],_=/=\?(&|$)/,b=(new Date).getTime();e.extend({ajax:f}),e.mockjaxSettings={log:function(t,i){if(t.logging!==!1&&("undefined"!=typeof t.logging||e.mockjaxSettings.logging!==!1)&&window.console&&console.log){var n="MOCK "+i.type.toUpperCase()+": "+i.url,s=e.extend({},i);if("function"==typeof console.log)console.log(n,s);else try{console.log(n+" "+JSON.stringify(s))}catch(o){console.log(n)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,throwUnmocked:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},e.mockjax=function(e){var t=v.length;return v[t]=e,t},e.mockjaxClear=function(e){1==arguments.length?v[e]=null:v=[],y=[]},e.mockjax.handler=function(e){if(1==arguments.length)return v[e]},e.mockjax.mockedAjaxCalls=function(){return y}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(e){"use strict";function t(i,n){var s=function(){},o=this,a={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:s,onSearchComplete:s,onSearchError:s,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,i){return e.value.toLowerCase().indexOf(i)!==-1},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};o.element=i,o.el=e(i),o.suggestions=[],o.badQueries=[],o.selectedIndex=-1,o.currentValue=o.element.value,o.intervalId=0,o.cachedResponse={},o.onChangeInterval=null,o.onChange=null,o.isLocal=!1,o.suggestionsContainer=null,o.noSuggestionsContainer=null,o.options=e.extend({},a,n),o.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},o.hint=null,o.hintValue="",o.selection=null,o.initialize(),o.setOptions(n)}var i=function(){return{escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}}}(),n={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};t.utils=i,e.Autocomplete=t,t.formatResult=function(e,t){if(!t)return e.value;var n="("+i.escapeRegExChars(t)+")";return e.value.replace(new RegExp(n,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},t.prototype={killerFn:null,initialize:function(){var i,n=this,s="."+n.classes.suggestion,o=n.classes.selected,a=n.options;n.element.setAttribute("autocomplete","off"),n.killerFn=function(t){0===e(t.target).closest("."+n.options.containerClass).length&&(n.killSuggestions(),n.disableKillerFn())},n.noSuggestionsContainer=e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=t.utils.createNode(a.containerClass),i=e(n.suggestionsContainer),i.appendTo(a.appendTo),"auto"!==a.width&&i.width(a.width),i.on("mouseover.autocomplete",s,function(){n.activate(e(this).data("index"))}),i.on("mouseout.autocomplete",function(){n.selectedIndex=-1,i.children("."+o).removeClass(o)}),i.on("click.autocomplete",s,function(){n.select(e(this).data("index"))}),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},e(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",function(e){n.onKeyPress(e)}),n.el.on("keyup.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("blur.autocomplete",function(){n.onBlur()}),n.el.on("focus.autocomplete",function(){n.onFocus()}),n.el.on("change.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("input.autocomplete",function(e){n.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),e.el.val().length>=e.options.minChars&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var i=this,n=i.options;e.extend(n,t),i.isLocal=e.isArray(n.lookup),i.isLocal&&(n.lookup=i.verifySuggestionsFormat(n.lookup)),n.orientation=i.validateOrientation(n.orientation,"bottom"),e(i.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,i=e(t.suggestionsContainer),n=i.parent().get(0);if(n===document.body||t.options.forceFixPosition){var s=t.options.orientation,o=i.outerHeight(),a=t.el.outerHeight(),r=t.el.offset(),l={top:r.top,left:r.left};if("auto"===s){var u=e(window).height(),c=e(window).scrollTop(),d=-c+r.top-o,p=c+u-(r.top+a+o);s=Math.max(d,p)===d?"top":"bottom"}if("top"===s?l.top+=-o:l.top+=a,n!==document.body){var h,f=i.css("opacity");t.visible||i.css("opacity",0).show(),h=i.offsetParent().offset(),l.top-=h.top,l.left-=h.left,t.visible||i.css("opacity",f).hide()}"auto"===t.options.width&&(l.width=t.el.outerWidth()-2+"px"),i.css(l)}},enableKillerFn:function(){var t=this;e(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;e(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this,i=t.el.val().length,n=t.element.selectionStart;return"number"==typeof n?n===i:!document.selection||(e=document.selection.createRange(),e.moveStart("character",-i),i===e.text.length)},onKeyPress:function(e){var t=this;if(!t.disabled&&!t.visible&&e.which===n.DOWN&&t.currentValue)return void t.suggest();if(!t.disabled&&t.visible){switch(e.which){case n.ESC:t.el.val(t.currentValue),t.hide();break;case n.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case n.TAB:if(t.hint&&t.options.onHint)return void t.selectHint();if(t.selectedIndex===-1)return void t.hide();if(t.select(t.selectedIndex),t.options.tabDisabled===!1)return;break;case n.RETURN:if(t.selectedIndex===-1)return void t.hide();t.select(t.selectedIndex);break;case n.UP:t.moveUp();break;case n.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case n.UP:case n.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t=this,i=t.options,n=t.el.val(),s=t.getQuery(n);return t.selection&&t.currentValue!==s&&(t.selection=null,(i.onInvalidateSelection||e.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=n,t.selectedIndex=-1,i.triggerSelectOnValidInput&&t.isExactMatch(s)?void t.select(0):void(s.length<i.minChars?t.hide():t.getSuggestions(s))},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(t){var i,n=this.options.delimiter;return n?(i=t.split(n),e.trim(i[i.length-1])):t},getSuggestionsLocal:function(t){var i,n=this,s=n.options,o=t.toLowerCase(),a=s.lookupFilter,r=parseInt(s.lookupLimit,10);return i={suggestions:e.grep(s.lookup,function(e){return a(e,t,o)})},r&&i.suggestions.length>r&&(i.suggestions=i.suggestions.slice(0,r)),i},getSuggestions:function(t){var i,n,s,o,a=this,r=a.options,l=r.serviceUrl;if(r.params[r.paramName]=t,n=r.ignoreParams?null:r.params,r.onSearchStart.call(a.element,r.params)!==!1){if(e.isFunction(r.lookup))return void r.lookup(t,function(e){a.suggestions=e.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,e.suggestions)});a.isLocal?i=a.getSuggestionsLocal(t):(e.isFunction(l)&&(l=l.call(a.element,t)),s=l+"?"+e.param(n||{}),i=a.cachedResponse[s]),i&&e.isArray(i.suggestions)?(a.suggestions=i.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,i.suggestions)):a.isBadQuery(t)?r.onSearchComplete.call(a.element,t,[]):(a.abortAjax(),o={url:l,data:n,type:r.type,dataType:r.dataType},e.extend(o,r.ajaxSettings),a.currentRequest=e.ajax(o).done(function(e){var i;a.currentRequest=null,i=r.transformResult(e,t),a.processResponse(i,t,s),r.onSearchComplete.call(a.element,t,i.suggestions)}).fail(function(e,i,n){r.onSearchError.call(a.element,t,e,i,n)}))}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(0===e.indexOf(t[i]))return!0;return!1},hide:function(){var t=this,i=e(t.suggestionsContainer);e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,i),t.visible=!1,t.selectedIndex=-1,clearInterval(t.onChangeInterval),e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var t,i=this,n=i.options,s=n.groupBy,o=n.formatResult,a=i.getQuery(i.currentValue),r=i.classes.suggestion,l=i.classes.selected,u=e(i.suggestionsContainer),c=e(i.noSuggestionsContainer),d=n.beforeRender,p="",h=function(e,i){var n=e.data[s];return t===n?"":(t=n,'<div class="autocomplete-group"><strong>'+t+"</strong></div>")};return n.triggerSelectOnValidInput&&i.isExactMatch(a)?void i.select(0):(e.each(i.suggestions,function(e,t){s&&(p+=h(t,a,e)),p+='<div class="'+r+'" data-index="'+e+'">'+o(t,a)+"</div>"}),this.adjustContainerWidth(),c.detach(),u.html(p),e.isFunction(d)&&d.call(i.element,u),i.fixPosition(),u.show(),n.autoSelectFirst&&(i.selectedIndex=0,u.scrollTop(0),u.children("."+r).first().addClass(l)),i.visible=!0,void i.findBestHint())},noSuggestions:function(){var t=this,i=e(t.suggestionsContainer),n=e(t.noSuggestionsContainer);this.adjustContainerWidth(),n.detach(),i.empty(),i.append(n),t.fixPosition(),i.show(),t.visible=!0},adjustContainerWidth:function(){var t,i=this,n=i.options,s=e(i.suggestionsContainer);"auto"===n.width&&(t=i.el.outerWidth()-2,s.width(t>0?t:300))},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),n=null;i&&(e.each(t.suggestions,function(e,t){var s=0===t.value.toLowerCase().indexOf(i);return s&&(n=t),!s}),t.signalHint(n))},signalHint:function(t){var i="",n=this;t&&(i=n.currentValue+t.value.substr(n.currentValue.length)),n.hintValue!==i&&(n.hintValue=i,n.hint=t,(this.options.onHint||e.noop)(i))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},validateOrientation:function(t,i){return t=e.trim(t||"").toLowerCase(),e.inArray(t,["auto","bottom","top"])===-1&&(t=i),t},processResponse:function(e,t,i){var n=this,s=n.options;e.suggestions=n.verifySuggestionsFormat(e.suggestions),s.noCache||(n.cachedResponse[i]=e,s.preventBadQueries&&0===e.suggestions.length&&n.badQueries.push(t)),t===n.getQuery(n.currentValue)&&(n.suggestions=e.suggestions,n.suggest())},activate:function(t){var i,n=this,s=n.classes.selected,o=e(n.suggestionsContainer),a=o.find("."+n.classes.suggestion);return o.find("."+s).removeClass(s),n.selectedIndex=t,n.selectedIndex!==-1&&a.length>n.selectedIndex?(i=a.get(n.selectedIndex),e(i).addClass(s),i):null},selectHint:function(){var t=this,i=e.inArray(t.hint,t.suggestions);t.select(i)},select:function(e){var t=this;t.hide(),t.onSelect(e)},moveUp:function(){var t=this;if(t.selectedIndex!==-1)return 0===t.selectedIndex?(e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var i=this,n=i.activate(t);if(n){var s,o,a,r=e(n).outerHeight();s=n.offsetTop,o=e(i.suggestionsContainer).scrollTop(),a=o+i.options.maxHeight-r,s<o?e(i.suggestionsContainer).scrollTop(s):s>a&&e(i.suggestionsContainer).scrollTop(s-i.options.maxHeight+r),i.options.preserveInput||i.el.val(i.getValue(i.suggestions[t].value)),i.signalHint(null)}},onSelect:function(t){var i=this,n=i.options.onSelect,s=i.suggestions[t];i.currentValue=i.getValue(s.value),i.currentValue===i.el.val()||i.options.preserveInput||i.el.val(i.currentValue),i.signalHint(null),i.suggestions=[],i.selection=s,e.isFunction(n)&&n.call(i.element,s)},getValue:function(e){var t,i,n=this,s=n.options.delimiter;return s?(t=n.currentValue,i=t.split(s),1===i.length?e:t.substr(0,t.length-i[i.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=e.fn.devbridgeAutocomplete=function(i,n){var s="autocomplete";return 0===arguments.length?this.first().data(s):this.each(function(){var o=e(this),a=o.data(s);"string"==typeof i?a&&"function"==typeof a[i]&&a[i](n):(a&&a.dispose&&a.dispose(),a=new t(this,i),o.data(s,a))})}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?i=t:t={};var e,i,n;!function(t){function s(e,t){return b.call(e,t)}function o(e,t){var i,n,s,o,a,r,l,u,c,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&w.test(e[a])&&(e[a]=e[a].replace(w,"")),e=h.slice(0,h.length-1).concat(e),c=0;c<e.length;c+=1)if(p=e[c],"."===p)e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&f){for(i=e.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),h)for(d=h.length;d>0;d-=1)if(s=f[h.slice(0,d).join("/")],s&&(s=s[n])){o=s,r=c;break}if(o)break;!l&&g&&g[n]&&(l=g[n],u=c)}!o&&l&&(o=l,r=u),o&&(i.splice(0,r,o),e=i.join("/"))}return e}function a(e,i){return function(){var n=x.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),h.apply(t,n.concat([e,i]))}}function r(e){return function(t){return o(t,e)}}function l(e){return function(t){m[e]=t}}function u(e){if(s(v,e)){var i=v[e];delete v[e],_[e]=!0,p.apply(t,i)}if(!s(m,e)&&!s(_,e))throw new Error("No "+e);return m[e]}function c(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function d(e){return function(){return y&&y.config&&y.config[e]||{}}}var p,h,f,g,m={},v={},y={},_={},b=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;f=function(e,t){var i,n=c(e),s=n[0];return e=n[1],s&&(s=o(s,t),i=u(s)),s?e=i&&i.normalize?i.normalize(e,r(t)):o(e,t):(e=o(e,t),n=c(e),s=n[0],e=n[1],s&&(i=u(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:i}},g={require:function(e){return a(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:d(e)}}},p=function(e,i,n,o){var r,c,d,p,h,y,b=[],x=typeof n;if(o=o||e,"undefined"===x||"function"===x){for(i=!i.length&&n.length?["require","exports","module"]:i,h=0;h<i.length;h+=1)if(p=f(i[h],o),c=p.f,"require"===c)b[h]=g.require(e);else if("exports"===c)b[h]=g.exports(e),y=!0;else if("module"===c)r=b[h]=g.module(e);else if(s(m,c)||s(v,c)||s(_,c))b[h]=u(c);else{if(!p.p)throw new Error(e+" missing "+c);p.p.load(p.n,a(o,!0),l(c),{}),b[h]=m[c]}d=n?n.apply(m[e],b):void 0,e&&(r&&r.exports!==t&&r.exports!==m[e]?m[e]=r.exports:d===t&&y||(m[e]=d))}else e&&(m[e]=n)},e=i=h=function(e,i,n,s,o){if("string"==typeof e)return g[e]?g[e](i):u(f(e,i).f);if(!e.splice){if(y=e,y.deps&&h(y.deps,y.callback),!i)return;i.splice?(e=i,i=n,n=null):e=t}return i=i||function(){},"function"==typeof n&&(n=s,s=o),s?p(t,e,i,n):setTimeout(function(){p(t,e,i,n)},4),h},h.config=function(e){return h(e)},e._defined=m,n=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),s(m,e)||s(v,e)||(v[e]=[e,t,i])},n.amd={jQuery:!0}}(),t.requirejs=e,t.require=i,t.define=n}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,i=[];for(var n in t){var s=t[n];"function"==typeof s&&"constructor"!==n&&i.push(n)}return i}var i={};i.Extend=function(e,t){function i(){this.constructor=e}var n={}.hasOwnProperty;for(var s in t)n.call(t,s)&&(e[s]=t[s]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},i.Decorate=function(e,i){function n(){var t=Array.prototype.unshift,n=i.prototype.constructor.length,s=e.prototype.constructor;n>0&&(t.call(arguments,e.prototype.constructor),s=i.prototype.constructor),s.apply(this,arguments)}function s(){this.constructor=n}var o=t(i),a=t(e);i.displayName=e.displayName,n.prototype=new s;for(var r=0;r<a.length;r++){var l=a[r];n.prototype[l]=e.prototype[l]}for(var u=(function(e){var t=function(){};e in n.prototype&&(t=n.prototype[e]);var s=i.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,t),s.apply(this,arguments)}}),c=0;c<o.length;c++){var d=o[c];n.prototype[d]=u(d)}return n};var n=function(){this.listeners={}};return n.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},n.prototype.trigger=function(e){var t=Array.prototype.slice,i=t.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),i[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(e,t){for(var i=0,n=e.length;n>i;i++)e[i].apply(this,t)},i.Observable=n,i.generateChars=function(e){for(var t="",i=0;e>i;i++){var n=Math.floor(36*Math.random());t+=n.toString(36)}return t},i.bind=function(e,t){return function(){e.apply(t,arguments)}},i._convertData=function(e){for(var t in e){var i=t.split("-"),n=e;if(1!==i.length){for(var s=0;s<i.length;s++){var o=i[s];o=o.substring(0,1).toLowerCase()+o.substring(1),o in n||(n[o]={}),s==i.length-1&&(n[o]=e[t]),n=n[o]}delete e[t]}}return e},i.hasScroll=function(t,i){var n=e(i),s=i.style.overflowX,o=i.style.overflowY;return(s!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===s||"scroll"===o||(n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth))},i.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},i.appendMany=function(t,i){if("1.7"===e.fn.jquery.substr(0,3)){var n=e();e.map(i,function(e){n=n.add(e)}),i=n}t.append(i)},i}),t.define("select2/results",["jquery","./utils"],function(e,t){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),s=this.options.get("translations").get(t.message);n.append(i(s(t.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i],s=this.option(n);t.push(s)}this.$results.append(t)},i.prototype.position=function(e,t){var i=t.find(".select2-results");i.append(e)},i.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var n=e.map(i,function(e){return e.id.toString()}),s=t.$results.find(".select2-results__option[aria-selected]");s.each(function(){var t=e(this),i=e.data(this,"data"),s=""+i.id;null!=i.element&&i.element.selected||null==i.element&&e.inArray(s,n)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},i.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),i={disabled:!0,loading:!0,text:t(e)},n=this.option(i);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(t){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};t.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==t.id&&delete n["aria-selected"],null!=t._resultId&&(i.id=t._resultId),t.title&&(i.title=t.title),t.children&&(n.role="group",n["aria-label"]=t.text,delete n["aria-selected"]);for(var s in n){var o=n[s];i.setAttribute(s,o)}if(t.children){var a=e(i),r=document.createElement("strong");r.className="select2-results__group",e(r),this.template(t,r);for(var l=[],u=0;u<t.children.length;u++){var c=t.children[u],d=this.option(c);l.push(d)}var p=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});p.append(l),a.append(r),a.append(p)}else this.template(t,i);return e.data(i,"data",t),i},i.prototype.bind=function(t,i){var n=this,s=t.id+"-results";this.$results.attr("id",s),t.on("results:all",function(e){n.clear(),n.append(e.data),t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("results:append",function(e){n.append(e.data),t.isOpen()&&n.setClasses()}),t.on("query",function(e){n.hideMessages(),n.showLoading(e)}),t.on("select",function(){t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("open",function(){n.$results.attr("aria-expanded","true"),n.$results.attr("aria-hidden","false"),n.setClasses(),n.ensureHighlightVisible()}),t.on("close",function(){n.$results.attr("aria-expanded","false"),n.$results.attr("aria-hidden","true"),n.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=n.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=n.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?n.trigger("close",{}):n.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=n.getHighlightedResults(),t=n.$results.find("[aria-selected]"),i=t.index(e);if(0!==i){var s=i-1;0===e.length&&(s=0);var o=t.eq(s);o.trigger("mouseenter");var a=n.$results.offset().top,r=o.offset().top,l=n.$results.scrollTop()+(r-a);0===s?n.$results.scrollTop(0):0>r-a&&n.$results.scrollTop(l)}}),t.on("results:next",function(){var e=n.getHighlightedResults(),t=n.$results.find("[aria-selected]"),i=t.index(e),s=i+1;if(!(s>=t.length)){var o=t.eq(s);o.trigger("mouseenter");var a=n.$results.offset().top+n.$results.outerHeight(!1),r=o.offset().top+o.outerHeight(!1),l=n.$results.scrollTop()+r-a;0===s?n.$results.scrollTop(0):r>a&&n.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){n.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=n.$results.scrollTop(),i=n.$results.get(0).scrollHeight-t+e.deltaY,s=e.deltaY>0&&t-e.deltaY<=0,o=e.deltaY<0&&i<=n.$results.height();s?(n.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var i=e(this),s=i.data("data");return"true"===i.attr("aria-selected")?void(n.options.get("multiple")?n.trigger("unselect",{originalEvent:t,data:s}):n.trigger("close",{})):void n.trigger("select",{originalEvent:t,data:s})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var i=e(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted"),n.trigger("results:focus",{data:i,element:e(this)})})},i.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),i=t.index(e),n=this.$results.offset().top,s=e.offset().top,o=this.$results.scrollTop()+(s-n),a=s-n;o-=2*e.outerHeight(!1),2>=i?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(o)}},i.prototype.template=function(t,i){var n=this.options.get("templateResult"),s=this.options.get("escapeMarkup"),o=n(t,i);null==o?i.style.display="none":"string"==typeof o?i.innerHTML=s(o):e(i).append(o)},i}),t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,i){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},n.prototype.bind=function(e,t){var n=this,s=(e.id+"-container",e.id+"-results");this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){
n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",s),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.focus(),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex)}),e.on("disable",function(){n.$selection.attr("tabindex","-1")})},n.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||e.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)},1)},n.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var i=e(t.target),n=i.closest(".select2"),s=e(".select2.select2-container--open");s.each(function(){var t=e(this);if(this!=n[0]){var i=t.data("element");i.select2("close")}})})},n.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},n.prototype.position=function(e,t){var i=t.find(".selection");i.append(e)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},n}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,n){function s(){s.__super__.constructor.apply(this,arguments)}return i.Extend(s,t),s.prototype.render=function(){var e=s.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},s.prototype.bind=function(e,t){var i=this;s.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(e){1===e.which&&i.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||i.$selection.focus()}),e.on("selection:update",function(e){i.update(e.data)})},s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},s.prototype.display=function(e,t){var i=this.options.get("templateSelection"),n=this.options.get("escapeMarkup");return n(i(e,t))},s.prototype.selectionContainer=function(){return e("<span></span>")},s.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(t,i);i.empty().append(n),i.prop("title",t.title||t.text)},s}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,i){function n(e,t){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,t),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(t,i){var s=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){s.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!s.options.get("disabled")){var i=e(this),n=i.parent(),o=n.data("data");s.trigger("unselect",{originalEvent:t,data:o})}})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(e,t){var i=this.options.get("templateSelection"),n=this.options.get("escapeMarkup");return n(i(e,t))},n.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var s=e[n],o=this.selectionContainer(),a=this.display(s,o);o.append(a),o.prop("title",s.title||s.text),o.data("data",s),t.push(o)}var r=this.$selection.find(".select2-selection__rendered");i.appendMany(r,t)}},n}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(e,t){var i=1==t.length&&t[0].id!=this.placeholder.id,n=t.length>1;if(n||i)return e.call(this,t);this.clear();var s=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(s)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function i(){}return i.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)}),t.on("keypress",function(e){n._handleKeyboardClear(e,t)})},i.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();for(var n=i.data("data"),s=0;s<n.length;s++){var o={data:n[s]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},i.prototype._handleKeyboardClear=function(e,i,n){n.isOpen()||(i.which==t.DELETE||i.which==t.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(t,i){if(t.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var n=e('<span class="select2-selection__clear">&times;</span>');n.data("data",i),this.$selection.find(".select2-selection__rendered").prepend(n)}},i}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,i){function n(e,t,i){e.call(this,t,i)}return n.prototype.render=function(t){var i=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=t.call(this);return this._transferTabIndex(),n},n.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n),t.on("open",function(){s.$search.trigger("focus")}),t.on("close",function(){s.$search.val(""),s.$search.removeAttr("aria-activedescendant"),s.$search.trigger("focus")}),t.on("enable",function(){s.$search.prop("disabled",!1),s._transferTabIndex()}),t.on("disable",function(){s.$search.prop("disabled",!0)}),t.on("focus",function(e){s.$search.trigger("focus")}),t.on("results:focus",function(e){s.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){s.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){s._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===i.BACKSPACE&&""===s.$search.val()){var n=s.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var o=n.data("data");s.searchRemoveChoice(o),e.preventDefault()}}});var o=document.documentMode,a=o&&11>=o;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return a?void s.$selection.off("input.search input.searchcheck"):void s.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(a&&"input"===e.type)return void s.$selection.off("input.search input.searchcheck");var t=e.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&s.handleSearch(e)})},n.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},n.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=.75*t+"em"}this.$search.css("width",e)},n}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,i,n){var s=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];t.call(this,i,n),i.on("*",function(t,i){if(-1!==e.inArray(t,o)){i=i||{};var n=e.Event("select2:"+t,{params:i});s.$element.trigger(n),-1!==e.inArray(t,a)&&(i.prevented=n.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(e){if(!(e in i._cache)){var n=t(e);i._cache[e]=n}return new i(i._cache[e])},i}),t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return e}),t.define("select2/data/base",["../utils"],function(e){function t(e,i){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var n=t.id+"-result-";return n+=e.generateChars(4),n+=null!=i.id?"-"+i.id.toString():"-"+e.generateChars(4)},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,i){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,e),n.prototype.current=function(e){var t=[],n=this;this.$element.find(":selected").each(function(){var e=i(this),s=n.item(e);t.push(s)}),e(t)},n.prototype.select=function(e){var t=this;if(e.selected=!0,i(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(n){var s=[];e=[e],e.push.apply(e,n);for(var o=0;o<e.length;o++){var a=e[o].id;-1===i.inArray(a,s)&&s.push(a)}t.$element.val(s),t.$element.trigger("change")});else{var n=e.id;this.$element.val(n),this.$element.trigger("change")}},n.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple"))return e.selected=!1,i(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(n){for(var s=[],o=0;o<n.length;o++){var a=n[o].id;a!==e.id&&-1===i.inArray(a,s)&&s.push(a)}t.$element.val(s),t.$element.trigger("change")})},n.prototype.bind=function(e,t){var i=this;this.container=e,e.on("select",function(e){i.select(e.data)}),e.on("unselect",function(e){i.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},n.prototype.query=function(e,t){var n=[],s=this,o=this.$element.children();o.each(function(){var t=i(this);if(t.is("option")||t.is("optgroup")){var o=s.item(t),a=s.matches(e,o);null!==a&&n.push(a)}}),t({results:n})},n.prototype.addOptions=function(e){t.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=i(t),s=this._normalizeItem(e);return s.element=t,i.data(t,"data",s),n},n.prototype.item=function(e){var t={};if(t=i.data(e[0],"data"),null!=t)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var n=e.children("option"),s=[],o=0;o<n.length;o++){var a=i(n[o]),r=this.item(a);s.push(r)}t.children=s}return t=this._normalizeItem(t),t.element=e[0],i.data(e[0],"data",t),t},n.prototype._normalizeItem=function(e){i.isPlainObject(e)||(e={id:e,text:e}),e=i.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),i.extend({},t,e)},n.prototype.matches=function(e,t){var i=this.options.get("matcher");return i(e,t)},n}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,i){function n(e,t){var i=t.get("data")||[];n.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(i))}return t.Extend(n,e),n.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,i){return i.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),n.__super__.select.call(this,e)},n.prototype.convertToOptions=function(e){function n(e){return function(){return i(this).val()==e.id}}for(var s=this,o=this.$element.find("option"),a=o.map(function(){return s.item(i(this)).id}).get(),r=[],l=0;l<e.length;l++){var u=this._normalizeItem(e[l]);if(i.inArray(u.id,a)>=0){var c=o.filter(n(u)),d=this.item(c),p=i.extend(!0,{},u,d),h=this.option(p);c.replaceWith(h)}else{var f=this.option(u);if(u.children){var g=this.convertToOptions(u.children);t.appendMany(f,g)}r.push(f)}}return r},n}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){var s=i.ajax(e);return s.then(t),s.fail(n),s}};return i.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(e,t){function n(){var n=o.transport(o,function(n){var o=s.processResults(n,e);s.options.get("debug")&&window.console&&console.error&&(o&&o.results&&i.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(o)},function(){n.status&&"0"===n.status||s.trigger("results:message",{message:"errorLoading"})});s._request=n}var s=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(n,this.ajaxOptions.delay)):n()},n}),t.define("select2/data/tags",["jquery"],function(e){function t(t,i,n){var s=n.get("tags"),o=n.get("createTag");void 0!==o&&(this.createTag=o);var a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,i,n),e.isArray(s))for(var r=0;r<s.length;r++){var l=s[r],u=this._normalizeItem(l),c=this.option(u);this.$element.append(c)}}return t.prototype.query=function(e,t,i){function n(e,o){for(var a=e.results,r=0;r<a.length;r++){var l=a[r],u=null!=l.children&&!n({results:l.children},!0),c=l.text===t.term;if(c||u)return!o&&(e.data=a,void i(e))}if(o)return!0;var d=s.createTag(t);if(null!=d){var p=s.option(d);p.attr("data-select2-tag",!0),s.addOptions([p]),s.insertTag(a,d)}e.results=a,i(e)}var s=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,i):void e.call(this,t,n)},t.prototype.createTag=function(t,i){var n=e.trim(i.term);return""===n?null:{id:n,text:n}},t.prototype.insertTag=function(e,t,i){t.unshift(i)},t.prototype._removeOldTags=function(t){var i=(this._lastTag,this.$element.find("option[data-select2-tag]"));i.each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),e.call(this,t,i)}return t.prototype.bind=function(e,t,i){e.call(this,t,i),this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,i,n){function s(t){var i=a._normalizeItem(t),n=a.$element.find("option").filter(function(){return e(this).val()===i.id});if(!n.length){var s=a.option(i);s.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([s])}o(i)}function o(e){a.trigger("select",{data:e})}var a=this;i.term=i.term||"";var r=this.tokenizer(i,this.options,s);r.term!==i.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),i.term=r.term),t.call(this,i,n)},t.prototype.tokenizer=function(t,i,n,s){for(var o=n.get("tokenSeparators")||[],a=i.term,r=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};r<a.length;){var u=a[r];if(-1!==e.inArray(u,o)){var c=a.substr(0,r),d=e.extend({},i,{term:c}),p=l(d);null!=p?(s(p),a=a.substr(r+1)||"",r=0):r++}else r++}return{term:a}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,i)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){var n=this;this.current(function(s){var o=null!=s?s.length:0;return n.maximumSelectionLength>0&&o>=n.maximumSelectionLength?void n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):void e.call(n,t,i)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.bind=function(){},i.prototype.position=function(e,t){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function i(){}return i.prototype.render=function(t){var i=t.call(this),n=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},i.prototype.bind=function(t,i,n){var s=this;t.call(this,i,n),this.$search.on("keydown",function(e){s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){s.handleSearch(e)}),i.on("open",function(){s.$search.attr("tabindex",0),s.$search.focus(),window.setTimeout(function(){s.$search.focus()},0)}),i.on("close",function(){s.$search.attr("tabindex",-1),s.$search.val("")}),i.on("focus",function(){i.isOpen()&&s.$search.focus()}),i.on("results:all",function(e){if(null==e.query.term||""===e.query.term){var t=s.showSearch(e);t?s.$searchContainer.removeClass("select2-search--hide"):s.$searchContainer.addClass("select2-search--hide")}})},i.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.showSearch=function(e,t){return!0},i}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i,n)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var i=t.slice(0),n=t.length-1;n>=0;n--){var s=t[n];this.placeholder.id===s.id&&i.splice(n,1)}return i},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,i,n){this.lastParams={},e.call(this,t,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,i,n){var s=this;t.call(this,i,n),i.on("query",function(e){s.lastParams=e,s.loading=!0}),i.on("query:append",function(e){s.lastParams=e,s.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,s.$loadingMore[0]);if(!s.loading&&t){var i=s.$results.offset().top+s.$results.outerHeight(!1),n=s.$loadingMore.offset().top+s.$loadingMore.outerHeight(!1);i+50>=n&&s.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function i(t,i,n){this.$dropdownParent=n.get("dropdownParent")||e(document.body),t.call(this,i,n)}return i.prototype.bind=function(e,t,i){var n=this,s=!1;e.call(this,t,i),t.on("open",function(){n._showDropdown(),n._attachPositioningHandler(t),s||(s=!0,t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),t.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},i.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(e,t,i){t.attr("class",i.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(t){var i=e("<span></span>"),n=t.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i,n){var s=this,o="scroll.select2."+n.id,a="resize.select2."+n.id,r="orientationchange.select2."+n.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(o,function(t){var i=e(this).data("select2-scroll-position");e(this).scrollTop(i.y)}),e(window).on(o+" "+a+" "+r,function(e){s._positionDropdown(),s._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,n){var s="scroll.select2."+n.id,o="resize.select2."+n.id,a="orientationchange.select2."+n.id,r=this.$container.parents().filter(t.hasScroll);r.off(s),e(window).off(s+" "+o+" "+a)},i.prototype._positionDropdown=function(){var t=e(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),s=null,o=this.$container.offset();
o.bottom=o.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=o.top,a.bottom=o.top+a.height;var r={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},u=l.top<o.top-r.height,c=l.bottom>o.bottom+r.height,d={left:o.left,top:a.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left,i||n||(s="below"),c||!u||i?!u&&c&&i&&(s="below"):s="above",("above"==s||i&&"below"!==s)&&(d.top=a.top-h.top-r.height),null!=s&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)),this.$dropdownContainer.css(d)},i.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},i.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var i=0,n=0;n<t.length;n++){var s=t[n];s.children?i+=e(s.children):i++}return i}function t(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,i,n)}return t.prototype.showSearch=function(t,i){return!(e(i.data.results)<this.minimumResultsForSearch)&&t.call(this,i)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("close",function(e){n._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var i=t.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var n=this.getHighlightedResults();if(!(n.length<1)){var s=n.data("data");null!=s.element&&s.element.selected||null==s.element&&s.selected||this.trigger("select",{data:s})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("select",function(e){n._selectTriggered(e)}),t.on("unselect",function(e){n._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(e){var t=e.minimum-e.input.length,i="Please enter "+t+" or more characters";return i},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,i,n,s,o,a,r,l,u,c,d,p,h,f,g,m,v,y,_,b,x,w,k,C,D,$,A,E){function T(){this.reset()}T.prototype.apply=function(d){if(d=e.extend(!0,{},this.defaults,d),null==d.dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=h:d.dataAdapter=p,d.minimumInputLength>0&&(d.dataAdapter=u.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=u.Decorate(d.dataAdapter,y)),d.maximumSelectionLength>0&&(d.dataAdapter=u.Decorate(d.dataAdapter,_)),d.tags&&(d.dataAdapter=u.Decorate(d.dataAdapter,g)),(null!=d.tokenSeparators||null!=d.tokenizer)&&(d.dataAdapter=u.Decorate(d.dataAdapter,m)),null!=d.query){var E=t(d.amdBase+"compat/query");d.dataAdapter=u.Decorate(d.dataAdapter,E)}if(null!=d.initSelection){var T=t(d.amdBase+"compat/initSelection");d.dataAdapter=u.Decorate(d.dataAdapter,T)}}if(null==d.resultsAdapter&&(d.resultsAdapter=i,null!=d.ajax&&(d.resultsAdapter=u.Decorate(d.resultsAdapter,k)),null!=d.placeholder&&(d.resultsAdapter=u.Decorate(d.resultsAdapter,w)),d.selectOnClose&&(d.resultsAdapter=u.Decorate(d.resultsAdapter,$))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=b;else{var S=u.Decorate(b,x);d.dropdownAdapter=S}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=u.Decorate(d.dropdownAdapter,D)),d.closeOnSelect&&(d.dropdownAdapter=u.Decorate(d.dropdownAdapter,A)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var O=t(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=u.Decorate(d.dropdownAdapter,O)}d.dropdownAdapter=u.Decorate(d.dropdownAdapter,C)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=s:d.selectionAdapter=n,null!=d.placeholder&&(d.selectionAdapter=u.Decorate(d.selectionAdapter,o)),d.allowClear&&(d.selectionAdapter=u.Decorate(d.selectionAdapter,a)),d.multiple&&(d.selectionAdapter=u.Decorate(d.selectionAdapter,r)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var M=t(d.amdBase+"compat/containerCss");d.selectionAdapter=u.Decorate(d.selectionAdapter,M)}d.selectionAdapter=u.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var F=d.language.split("-"),I=F[0];d.language=[d.language,I]}else d.language=[d.language];if(e.isArray(d.language)){var j=new c;d.language.push("en");for(var R=d.language,N=0;N<R.length;N++){var P=R[N],L={};try{L=c.loadPath(P)}catch(B){try{P=this.defaults.amdLanguageBase+P,L=c.loadPath(P)}catch(q){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+P+'" could not be automatically loaded. A fallback will be used instead.');continue}}j.extend(L)}d.translations=j}else{var z=c.loadPath(this.defaults.amdLanguageBase+"en"),H=new c(d.language);H.extend(z),d.translations=H}return d},T.prototype.reset=function(){function t(e){function t(e){return d[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function i(n,s){if(""===e.trim(n.term))return s;if(s.children&&s.children.length>0){for(var o=e.extend(!0,{},s),a=s.children.length-1;a>=0;a--){var r=s.children[a],l=i(n,r);null==l&&o.children.splice(a,1)}return o.children.length>0?o:i(n,o)}var u=t(s.text).toUpperCase(),c=t(n.term).toUpperCase();return u.indexOf(c)>-1?s:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:u.escapeMarkup,language:E,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},T.prototype.set=function(t,i){var n=e.camelCase(t),s={};s[n]=i;var o=u._convertData(s);e.extend(this.defaults,o)};var S=new T;return S}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,i,n){function s(t,s){if(this.options=t,null!=s&&this.fromElement(s),this.options=i.apply(this.options),s&&s.is("input")){var o=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,o)}}return s.prototype.fromElement=function(e){var i=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var s={};s=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var o=t.extend(!0,{},s);o=n._convertData(o);for(var a in o)t.inArray(a,i)>-1||(t.isPlainObject(this.options[a])?t.extend(this.options[a],o[a]):this.options[a]=o[a]);return this},s.prototype.get=function(e){return this.options[e]},s.prototype.set=function(e,t){this.options[e]=t},s}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,i,n){var s=function(e,i){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),i=i||{},this.options=new t(i,e),s.__super__.constructor.call(this);var n=e.attr("tabindex")||0;e.data("old-tabindex",n),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var a=this.render();this._placeContainer(a);var r=this.options.get("selectionAdapter");this.selection=new r(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var u=this.options.get("resultsAdapter");this.results=new u(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){c.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return i.Extend(s,i.Observable),s.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},s.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},s.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var n=this._resolveWidth(e,"style");return null!=n?n:this._resolveWidth(e,"element")}if("element"==t){var s=e.outerWidth(!1);return 0>=s?"auto":s+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var a=o.split(";"),r=0,l=a.length;l>r;r+=1){var u=a[r].replace(/\s/g,""),c=u.match(i);if(null!==c&&c.length>=1)return c[1]}return null}return t},s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},s.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=n?(this._observer=new n(function(i){e.each(i,t._syncA),e.each(i,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},s.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,i){e.trigger(t,i)})},s.prototype._registerSelectionEvents=function(){var t=this,i=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(n,s){-1===e.inArray(n,i)&&t.trigger(n,s)})},s.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,i){e.trigger(t,i)})},s.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,i){e.trigger(t,i)})},s.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(i){e.trigger("results:all",{data:i,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(i){e.trigger("results:append",{data:i,query:t})})}),this.on("keypress",function(t){var i=t.which;e.isOpen()?i===n.ESC||i===n.TAB||i===n.UP&&t.altKey?(e.close(),t.preventDefault()):i===n.ENTER?(e.trigger("results:select",{}),t.preventDefault()):i===n.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):i===n.UP?(e.trigger("results:previous",{}),t.preventDefault()):i===n.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},s.prototype._syncSubtree=function(e,t){var i=!1,n=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var s=0;s<t.addedNodes.length;s++){var o=t.addedNodes[s];o.selected&&(i=!0)}else t.removedNodes&&t.removedNodes.length>0&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(e){n.trigger("selection:update",{data:e})})}},s.prototype.trigger=function(e,t){var i=s.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in n){var o=n[e],a={prevented:!1,name:e,args:t};if(i.call(this,o,a),a.prevented)return void(t.prevented=!0)}i.call(this,e,t)},s.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},s.prototype.open=function(){this.isOpen()||this.trigger("query",{})},s.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},s.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},s.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},s.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},s.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},s.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},s.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var i=t[0];e.isArray(i)&&(i=e.map(i,function(e){return e.toString()})),this.$element.val(i).trigger("change")},s.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},s.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},s}),t.define("select2/compat/utils",["jquery"],function(e){function t(t,i,n){var s,o,a=[];s=e.trim(t.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&a.push(this)})),s=e.trim(i.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(o=n(this),null!=o&&a.push(o))})),t.attr("class",a.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(e,t){function i(e){return null}function n(){}return n.prototype.render=function(n){var s=n.call(this),o=this.options.get("containerCssClass")||"";e.isFunction(o)&&(o=o(this.$element));var a=this.options.get("adaptContainerCssClass");if(a=a||i,-1!==o.indexOf(":all:")){o=o.replace(":all:","");var r=a;a=function(e){var t=r(e);return null!=t?t+" "+e:e}}var l=this.options.get("containerCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(s,this.$element,a),s.css(l),s.addClass(o),s},n}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(e,t){function i(e){return null}function n(){}return n.prototype.render=function(n){var s=n.call(this),o=this.options.get("dropdownCssClass")||"";e.isFunction(o)&&(o=o(this.$element));var a=this.options.get("adaptDropdownCssClass");if(a=a||i,-1!==o.indexOf(":all:")){o=o.replace(":all:","");var r=a;a=function(e){var t=r(e);return null!=t?t+" "+e:e}}var l=this.options.get("dropdownCss")||{};return e.isFunction(l)&&(l=l(this.$element)),t.syncCssClasses(s,this.$element,a),s.css(l),s.addClass(o),s},n}),t.define("select2/compat/initSelection",["jquery"],function(e){function t(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,e.call(this,t,i)}return t.prototype.current=function(t,i){var n=this;return this._isInitialized?void t.call(this,i):void this.initSelection.call(null,this.$element,function(t){n._isInitialized=!0,e.isArray(t)||(t=[t]),i(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(e){function t(e,t,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===t.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,i)}return t.prototype.current=function(t,i){function n(t,i){var s=[];return t.selected||-1!==e.inArray(t.id,i)?(t.selected=!0,s.push(t)):t.selected=!1,t.children&&s.push.apply(s,n(t.children,i)),s}for(var s=[],o=0;o<this._currentData.length;o++){var a=this._currentData[o];s.push.apply(s,n(a,this.$element.val().split(this._valueSeparator)))}i(s)},t.prototype.select=function(t,i){if(this.options.get("multiple")){var n=this.$element.val();n+=this._valueSeparator+i.id,this.$element.val(n),this.$element.trigger("change")}else this.current(function(t){e.map(t,function(e){e.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},t.prototype.unselect=function(e,t){var i=this;t.selected=!1,this.current(function(e){for(var n=[],s=0;s<e.length;s++){var o=e[s];t.id!=o.id&&n.push(o.id)}i.$element.val(n.join(i._valueSeparator)),i.$element.trigger("change")})},t.prototype.query=function(e,t,i){for(var n=[],s=0;s<this._currentData.length;s++){var o=this._currentData[s],a=this.matches(t,o);null!==a&&n.push(a)}i({results:n})},t.prototype.addOptions=function(t,i){var n=e.map(i,function(t){return e.data(t[0],"data")});this._currentData.push.apply(this._currentData,n)},t}),t.define("select2/compat/matcher",["jquery"],function(e){function t(t){function i(i,n){var s=e.extend(!0,{},n);if(null==i.term||""===e.trim(i.term))return s;if(n.children){for(var o=n.children.length-1;o>=0;o--){var a=n.children[o],r=t(i.term,a.text,a);r||s.children.splice(o,1)}if(s.children.length>0)return s}return t(i.term,n.text,n)?s:null}return i}return t}),t.define("select2/compat/query",[],function(){function e(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.callback=i;var n=this.options.get("query");n.call(null,t)},e}),t.define("select2/dropdown/attachContainer",[],function(){function e(e,t,i){e.call(this,t,i)}return e.prototype.position=function(e,t,i){var n=i.find(".dropdown-wrapper");n.append(t),t.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},e}),t.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(n.join(" "),function(e){e.stopPropagation()})},e}),t.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(n.join(" "),function(e){e.stopPropagation()})},e}),function(i){"function"==typeof t.define&&t.define.amd?t.define("jquery-mousewheel",["jquery"],i):"object"==typeof exports?module.exports=i:i(e)}(function(e){function t(t){var a=t||window.event,r=l.call(arguments,1),u=0,d=0,p=0,h=0,f=0,g=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*p,p=0),u=0===p?d:p,"deltaY"in a&&(p=-1*a.deltaY,u=p),"deltaX"in a&&(d=a.deltaX,0===p&&(u=-1*d)),0!==p||0!==d){if(1===a.deltaMode){var m=e.data(this,"mousewheel-line-height");u*=m,p*=m,d*=m}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");u*=v,p*=v,d*=v}if(h=Math.max(Math.abs(p),Math.abs(d)),(!o||o>h)&&(o=h,n(a,h)&&(o/=40)),n(a,h)&&(u/=40,d/=40,p/=40),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),p=Math[p>=1?"floor":"ceil"](p/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=t.clientX-y.left,g=t.clientY-y.top}return t.deltaX=d,t.deltaY=p,t.deltaFactor=o,t.offsetX=f,t.offsetY=g,t.deltaMode=0,r.unshift(t,u,d,p),s&&clearTimeout(s),s=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function i(){o=null}function n(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var s,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=r.length;i;)this.addEventListener(r[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=r.length;i;)this.removeEventListener(r[--i],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),n=i["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,i,n){if(null==e.fn.select2){var s=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"==typeof t)return this.each(function(){var n=e.extend(!0,{},t);new i(e(this),n)}),this;if("string"==typeof t){var n,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=e(this).data("select2");null==i&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=i[t].apply(i,o)}),e.inArray(t,s)>-1?this:n}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=n),i}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return e.fn.select2.amd=t,i}),$(function(){$("input[name=d_from], input[name=d_to]").datepicker({dateFormat:"yyyy-mm-dd"}),$("form[name=categories-edit-stores] input[type=checkbox]").click(function(){var e=$(this),t=$("form[name=categories-edit-stores]");if(e.is(":checked")&&"0"!=e.attr("data-parent-id"))t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1).prop("checked",!0);else if(!e.is(":checked")&&"0"!=e.attr("data-parent-id")){var i=!0;t.find("input[data-parent-id="+e.attr("data-parent-id")+"]").each(function(){$(this).is(":checked")&&(i=!1)}),i&&t.find("input[data-uid="+e.attr("data-parent-id")+"]").prop("checked",!1)}}),$(".select2-users").select2({ajax:{url:"/admin/users/list",type:"post",dataType:"json",delay:250,data:function(e){return{email:e.term}},processResults:function(e){return{results:e}},cache:!0},placeholder:"Выберите пользователя",minimumInputLength:1}),$(".input-datepicker").datepicker({dateFormat:"yyyy-mm-dd"}),$("#charity-checkbox-0").click(function(){var e=this.checked;Array.from(document.getElementsByClassName("charity-checkbox")).forEach(function(t){t.checked=e})}),$(".ajax-confirm").on("click",function(e){e.preventDefault(),$this=$(this),data={question:$this.data("question")||"Вы увуренны?",title:$this.data("title")||"Подтверждение действия",callbackYes:function(){$this=$(this),$.post("/admin/stores/import-cat/id:"+$this.data("store"),function(e){e.error?notification.notifi({message:e.error,type:"err"}):location.reload()},"json").fail(function(){notification.notifi({message:"Ошибка передачи данных",type:"err"})})},obj:$this},notification.confirm(data)}),$(".form-group input.toggle_items_check").on("click",function(e){$(this).closest(".form-group").find("input[type=checkbox]").prop("checked",$(this).prop("checked"))})}),$(function(){$(".get_admitad").on("click",function(e){e.preventDefault(),href=this.href||"",$(".user_data").html(""),ad=$(".admitad_data"),ad.addClass("loading"),ad.removeClass("normal_load"),ad.text(""),tr=ad.closest("tr"),ids=[];for(var t=0;t<tr.length;t++)id=tr.eq(t).data("key"),id&&ids.push(id);return 0==ids.length?(ad.removeClass("loading"),void alert("Нет заказов для проверки")):($.post("/ru/admin/payments/admitad-test",{ids:ids,update:href.indexOf("update")>0?1:0},function(e){e=JSON.parse(e),ad=$(".admitad_data"),ad.text("данные не найдены"),ad.removeClass("loading"),tr=ad.closest("tr");for(var t=0;t<tr.length;t++){var i=tr.eq(t);if(id=i.data("key"),e[id]){tds=i.find(".admitad_data");for(var n=0;n<tds.length;n++){var s=tds.eq(n);key=s.data("col"),e[id][key]&&(s.html(e[id][key]),s.addClass("normal_load"))}}}e.user_data&&(user=e.user_data,user_data="<H2>Баланс пользователя "+user.email+" ("+user.uid+") обновлен</H2>",user_data+="<table class='table table-sum'>",user_data+="<tr>",user_data+="<th></th>",user_data+="<th>Старые данные</th>",user_data+="<th>Новые данные</th>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_pending+"</td>",user_data+="<td class='value'>"+user["new"].cnt_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>В ожидании (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_pending+"</td>",user_data+="<td class='value'>"+user["new"].sum_pending+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_declined+"</td>",user_data+="<td class='value'>"+user["new"].cnt_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Отклонено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_declined+"</td>",user_data+="<td class='value'>"+user["new"].sum_declined+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (кол-во)</td>",user_data+="<td class='value'>"+user.old.cnt_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].cnt_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Подтверждено (сумма)</td>",user_data+="<td class='value'>"+user.old.sum_confirmed+"</td>",user_data+="<td class='value'>"+user["new"].sum_confirmed+"</td>",user_data+="</tr>",user_data+="<tr>",user_data+="<td>Баланс (общий)</td>",user_data+="<td class='value'>"+user.old.balans+"</td>",user_data+="<td class='value'>"+user["new"].balans+"</td>",user_data+="</tr>",user_data+="</table>",$(".user_data").html(user_data));
}).fail(function(){ad.removeClass("loading"),alert("Ошибка обработки запроса")}),!1)})}),"undefined"==typeof mihaildev||!mihaildev){var mihaildev={};mihaildev.elFinder={openManager:function(e){var t="menubar=no,toolbar=no,location=no,directories=no,status=no,fullscreen=no";"auto"==e.width&&(e.width=$(window).width()/1.5),"auto"==e.height&&(e.height=$(window).height()/1.5),t=t+",width="+e.width,t=t+",height="+e.height;var i=window.open(e.url,"ElFinderManager"+e.id,t);i.focus()},functions:{},register:function(e,t){this.functions[e]=t},callFunction:function(e,t){return this.functions[e](t,e)},functionReturnToInput:function(e,t){return jQuery("#"+t).val(e.url),!0}}}var megaslider=function(){function e(e){if(0!=e.length){e.wrap('<div class="select_img">'),e=e.parent(),e.append('<button type="button" class="file_button"><i class="mce-ico mce-i-browse"></i></button>');for(var t=0;t<e.length;t++){var i=e.eq(t).find("input");i.attr("id")||i.attr("id","file_"+t+"_"+Date.now());var n=i.attr("id");mihaildev.elFinder.register(n,function(e,t){return $("#"+t).val(e.url).change(),!0})}$(document).on("click",".file_button",function(){var e=$(this).prev(),t=e.attr("id");mihaildev.elFinder.openManager({url:"/manager/elfinder?filter=image&callback="+t+"&lang=ru",width:"auto",height:"auto",id:t})})}}function t(e){var t='<input class="'+(e.inputClass||"")+'" value="'+(e.value||"")+'">';if(e.label&&(t="<label><span>"+e.label+"</span>"+t+"</label>"),e.parent&&(t="<"+e.parent+">"+t+"</"+e.parent+">"),t=$(t),e.onChange){var i;e.bind?(e.bind.input=t.find("input"),i=e.onChange.bind(e.bind)):i=e.onChange.bind(t.find("input")),t.find("input").on("change",i)}return t}function n(e){var t=$("<select/>"),i=D[0][e.gr];e.index!==!1&&(i=i[e.index]),i[e.param]?e.value=i[e.param]:e.value=0,e.start_option&&t.append(e.start_option);for(var n=0;n<e.list.length;n++){var s,o=e.list[n];0==e.val_type?s=e.list[n]:1==e.val_type?s=n:2==e.val_type&&(s=n,o=e.val_list[n]);var a=s==e.value?"selected":"";"selected"==a&&t.attr("t_val",e.list[n]);var r='<option value="'+s+'" '+a+">"+o+"</option>";2==e.val_type&&(r=$(r).attr("code",e.list[n])),t.append(r)}if(t.on("change",function(){e=this;var t=e.el.val(),i=e.el.find("option[value="+t+"]"),n=i.text(),s=i.attr("code");s||(s=n),e.index!==!1?D[0][e.gr][e.index][e.param]=t:D[0][e.gr][e.param]=t,e.obj.removeClass(e.prefix+e.el.attr("t_val")),e.obj.addClass(e.prefix+s),e.el.attr("t_val",s),$("textarea#slide_data").text(JSON.stringify(D[0]))}.bind({el:t,obj:e.obj,gr:e.gr,index:e.index,param:e.param,prefix:e.prefix||""})),e.parent){var l=$("<"+e.parent+"/>");return l.append(t),l}return t}function s(e){var t,i=[];return 0==e.type&&i.push("<span>Show animation</span>"),i.push(n({list:U,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"show_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Show delay</span>"),i.push(n({list:L,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"show_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(i.push("<br/>"),i.push("<span>Hide animation</span>")),i.push(n({list:Y,val_type:0,obj:e.obj,gr:e.gr,index:e.index,param:"hide_animation",prefix:"slide_",parent:e.parent})),0==e.type&&i.push("<span>Hide delay</span>"),i.push(n({list:B,val_type:1,obj:e.obj,gr:e.gr,index:e.index,param:"hide_delay",prefix:"slide_",parent:e.parent})),0==e.type&&(t=$('<div class="anim_sel"/>'),t.append(i)),1==e.type&&(t=i),t}function o(){$("#w1").remove(),$("#w1_button").remove(),D[0].mobile=D[0].mobile.split("?")[0];var i=$("#mega_slider_controle"),o=$('<div class="btn_box"/>');i.append("<h2>Управление</h2>"),i.append($("<textarea/>",{text:JSON.stringify(D[0]),id:"slide_data",name:x}));var l=$('<button class=""/>').text("Активировать слайд");o.append(l),l.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).addClass("slider-active"),$("#mega_slider .slide").eq(0).removeClass("hide_slide")});var l=$('<button class=""/>').text("Деактивировать слайд");o.append(l),l.on("click",function(e){e.preventDefault(),$("#mega_slider .slide").eq(0).removeClass("slider-active"),$("#mega_slider .slide").eq(0).addClass("hide_slide")}),i.append(o),i.append("<h2>Общие параметры</h2>"),i.append(t({value:D[0].mobile,label:"Слайд для телефона",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),D[0].mobile=$(this).val(),$(".mob_bg").eq(0).css("background-image","url("+D[0].mobile+")"),$("textarea#slide_data").text(JSON.stringify(D[0]))}})),i.append(t({value:D[0].fon,label:"Осноной фон",inputClass:"fileSelect",onChange:function(e){e.preventDefault(),D[0].fon=$(this).val(),$("#mega_slider .slide").eq(0).css("background-image","url("+D[0].fon+")"),$("textarea#slide_data").text(JSON.stringify(D[0]))}}));var u=$('<div class="btns"/>');u.append("<h3>Кнопка перехода(для ПК версии)</h3>"),u.append(t({value:D[0].button.text,label:"Текст",onChange:function(e){e.preventDefault(),D[0].button.text=$(this).val(),$("#mega_slider .slider__href").eq(0).text(D[0].button.text),$("textarea#slide_data").text(JSON.stringify(D[0]))}}));var c=$("#mega_slider .slider__href").eq(0);u.append(t({value:D[0].button.href,label:"Ссылка",onChange:function(e){e.preventDefault(),D[0].button.href=$(this).val(),$("#mega_slider .slider__href").eq(0).attr("href",D[0].button.href),$("textarea#slide_data").text(JSON.stringify(D[0]))}})),u.append("<br/>");var d=$("<label/>");u.append(d),d.append("<span>Оформление кнопки</span>"),d.append(n({list:H,val_type:0,obj:c,gr:"button",index:!1,param:"color"})),u.append("<br/>"),d=$("<label/>"),u.append(d),d.append("<span>Положение кнопки</span>"),d.append(n({list:N,val_list:P,val_type:2,obj:c.parent().parent(),gr:"button",index:!1,param:"pos"})),u.append(s({type:0,obj:c.parent(),gr:"button",index:!1})),i.append(u);var p=$('<div class="fixed_layer"/>');p.append("<h2>Статические слои</h2>");var h="<th>№</th><th>Картинка</th><th>Положение</th><th>Слой на всю высоту</th><th>Анимация появления</th><th>Задержка появления</th><th>Анимация исчезновения</th><th>Задержка исчезновения</th><th>Действие</th>";k=$('<table border="1"><tr>'+h+"</tr></table>");var f=D[0].fixed;if(f&&f.length>0)for(var g=0;g<f.length;g++)a(f[g]);p.append(k);var m=$("<button/>",{text:"Добавить слой"});m.on("click",function(t){t.preventDefault(),f=a(!1),e(f.editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:D})),p.append(m),i.append(p);var p=$('<div class="paralax_layer"/>');p.append("<h2>Паралакс слои</h2>");var h="<th>№</th><th>Картинка</th><th>Положение</th><th>Удаленность (целое положительное число)</th><th>Действие</th>";C=$('<table border="1"><tr>'+h+"</tr></table>");var f=D[0].paralax;if(f&&f.length>0)for(var g=0;g<f.length;g++)r(f[g]);p.append(C);var m=$("<button/>",{text:"Добавить слой"});m.on("click",function(t){t.preventDefault(),f=r(!1),e(f.editor.find(".fileSelect")),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({slider_data:D})),p.append(m),i.append(p),e(i.find(".fileSelect"))}function a(e){var i=k.find("tr").length-1;if(!e){e={img:"",full_height:0,pos:0,show_delay:1,show_animation:"lightSpeedIn",hide_delay:1,hide_animation:"bounceOut"},D[0].fixed.push(e);var o=$("#mega_slider .fixed_group");d(e,o,!0)}var a=$("<tr/>");a.append('<td class="td_counter"/>'),a.append(t({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{gr:"fixed",index:i,param:"img",obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer")},onChange:function(e){e.preventDefault();var t=this;t.obj.css("background-image","url("+t.input.val()+")"),D[0].fixed[t.index].img=t.input.val(),$("textarea#slide_data").text(JSON.stringify(D[0]))}})),a.append(n({list:N,val_list:P,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"pos",parent:"td"})),a.append(n({list:z,val_list:q,val_type:2,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i),gr:"fixed",index:i,param:"full_height",parent:"td"})),a.append(s({type:1,obj:$("#mega_slider .fixed_group .fixed__layer").eq(i).find(".animation_layer"),gr:"fixed",index:i,parent:"td"}));var r=$("<button/>",{text:"Удалить"});r.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].fixed.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:r,slider_data:D}));var l=$("<td/>").append(r);return a.append(l),k.append(a),{editor:a,data:e}}function r(e){var i=C.find("tr").length-1;if(!e){e={img:"",z:1},D[0].paralax.push(e);var s=$("#mega_slider .parallax__group");c(e,s)}var o=$("<tr/>");o.append('<td class="td_counter"/>'),o.append(t({value:e.img,label:!1,parent:"td",inputClass:"fileSelect",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span")},onChange:function(e){e.preventDefault();var t=this;t.obj.css("background-image","url("+t.input.val()+")"),D[0].paralax[t.index].img=t.input.val(),$("textarea#slide_data").text(JSON.stringify(D[0]))}})),o.append(n({list:N,val_list:P,val_type:2,obj:$("#mega_slider .parallax__group .parallax__layer").eq(i).find("span"),gr:"paralax",index:i,param:"pos",parent:"td",start_option:'<option value="" code="">на весь экран</option>'})),o.append(t({value:e.z,label:!1,parent:"td",bind:{index:i,param:"img",obj:$("#mega_slider .parallax__group .parallax__layer").eq(i)},onChange:function(e){e.preventDefault();var t=this;t.obj.attr("z",t.input.val()),D[0].paralax[t.index].z=t.input.val(),$("textarea#slide_data").text(JSON.stringify(D[0]))}}));var a=$("<button/>",{text:"Удалить"});a.on("click",function(e){e.preventDefault();var t=$(this.el);i=t.closest("tr").index()-1,$("#mega_slider .fixed_group .fixed__layer").eq(i).remove(),t.closest("tr").remove(),this.slider_data[0].paralax.splice(i,1),$("textarea#slide_data").text(JSON.stringify(this.slider_data[0]))}.bind({el:a,slider_data:D}));var r=$("<td/>").append(a);return o.append(r),C.append(o),{editor:o,data:e}}function l(e,t){var i=$("<div/>",{"class":"animation_layer"});return"undefined"!=typeof t.show_delay&&(i.addClass(L[t.show_delay]),t.show_animation&&i.addClass("slide_"+t.show_animation)),"undefined"!=typeof t.hide_delay&&(i.addClass(B[t.hide_delay]),t.hide_animation&&i.addClass("slide_"+t.hide_animation)),e.append(i),e}function u(e){var t=$('<div class="slide"/>'),i=$('<a class="mob_bg" href="'+e.button.href+'"/>');if(i.css("background-image","url("+e.mobile+")"),t.append(i),M)return t;if(e.fon&&t.css("background-image","url("+e.fon+")"),e.paralax&&e.paralax.length>0){for(var n=$('<div class="parallax__group"/>'),s=0;s<e.paralax.length;s++)c(e.paralax[s],n);t.append(n)}for(var o=$('<div class="fixed_group"/>'),s=0;s<e.fixed.length;s++)d(e.fixed[s],o);var a=$("<div class='fixed__layer'/>");a.addClass(N[e.button.pos]);var r=$("<a class='slider__href'/>");return r.attr("href",e.button.href),r.text(e.button.text),r.addClass(e.button.color),a=l(a,e.button),a.find("div").append(r),o.append(a),t.append(o),t}function c(e,t){var n=$('<div class="parallax__layer">');n.attr("z",e.z||10*i);var s=$("<span class='slider__text'/>");e.pos&&s.addClass(N[e.pos]),s.css("background-image","url("+e.img+")"),n.append(s),t.append(n)}function d(e,t,i){var n=$("<div class='fixed__layer'/>");n.addClass(N[e.pos]),e.full_height&&n.addClass("fixed__full-height"),n=l(n,e),n.find(".animation_layer").css("background-image","url("+e.img+")"),i?t.find(".slider__href").closest(".fixed__layer").before(n):t.append(n)}function p(){if(!$("#mega_slider").hasClass("stop_slide")){var e=$(".slide_select_box .slide_select"),t=e.length,i=$(".slide_select_box .slider-active").index()+1;i>=t&&(i=0),e.eq(i).click(),w=setTimeout(p,R)}}function h(e){var t=$("<img/>");t.on("load",function(){y--,0==y&&(_.append(u(D[j])),b.find("li").eq(j).removeClass("disabled"),0==j&&(_.find(".slide").addClass("first_show").addClass("slider-active"),b.find("li").eq(0).addClass("slider-active"),x||(w&&clearTimeout(w),w=setTimeout(function(){$(this).find(".first_show").removeClass("first_show")}.bind(_),R)),M===!1&&(E=$(A+" .slider-active .parallax__group>*"),S=0,T=setInterval(v,100)),x?o():(w&&clearTimeout(w),w=setTimeout(p,R),$(".slide_select_box").on("click",".slide_select",function(){var e=$(this);if(!e.hasClass("slider-active")){var t=e.index();$(".slide_select_box .slider-active").removeClass("slider-active"),e.addClass("slider-active"),$(A+" .slide.slider-active").removeClass("slider-active"),$(A+" .slide").eq(t).addClass("slider-active"),E=$(A+" .slider-active .parallax__group>*")}}),$("#mega_slider").hover(function(){w&&clearTimeout(w),$("#mega_slider").addClass("stop_slide")},function(){w=setTimeout(p,R),$("#mega_slider").removeClass("stop_slide")}))),j++,j<D.length&&f())}).on("error",function(){y--}),t.prop("src",e)}function f(){var e=D[j];if(y=1,M===!1){if(y++,h(e.fon),e.paralax&&e.paralax.length>0){y+=e.paralax.length;for(var t=0;t<e.paralax.length;t++)h(e.paralax[t].img)}if(e.fixed&&e.fixed.length>0){y+=e.fixed.length;for(var t=0;t<e.fixed.length;t++)h(e.fixed[t].img)}}h(e.mobile)}function g(e){function t(){var e=performance.now();if(n=$(this),e-=parseInt(n.attr("time")),e>F)M=!0;else{var t=screen.height>screen.width?screen.height:screen.width;M=t<I}1==M&&$(A).addClass("mobile_mode"),j=0,f(),$(".sk-folding-cube").remove()}var i=performance.now(),n=$("<img/>");n.attr("time",i),n.on("load",t()),D.length>0?(D[0].mobile=D[0].mobile+"?r="+Math.random(),n.prop("src",D[0].mobile)):t().bind(n)}function m(e,t){D=e,x=t;var i=$(A);i.html(""),_=$("<div/>",{"class":"slides"});var n=$("<div/>",{"class":"slide_control"});b=$("<ul/>",{"class":"slide_select_box"});var s='<div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>';i.html(s),g(e[0]);for(var o=0;o<e.length;o++)b.append('<li class="slide_select disabled"/>');i.append(_),n.append(b),i.append(n)}function v(){if(!E)return!1;for(var e=(S-10)/2,t=0;t<E.length;t++){var i=E.eq(t),n=i.attr("z"),s="rotate3d(0.1,0.8,0,"+e+"deg) scale("+(1+.5*n)+") translateZ(-"+(10+20*n)+"px)";i.css("transform",s)}S+=.1*O,S>=20&&(O=-O),S<=0&&(O=-O)}var y,_,b,x,w,k,C,D=!1,A="section#mega_slider",E=!1,T=!1,S=0,O=1,M=-1,F=300,I=700,j=0,R=6e3,N=["slider__text-lt","slider__text-ct","slider__text-rt","slider__text-lc","slider__text-cc","slider__text-rc","slider__text-lb","slider__text-cb","slider__text-rb"],P=["Лево верх","центр верх","право верх","Лево центр","центр","право центр","Лево низ","центр низ","право низ"],L=["show_no_delay","show_delay_05","show_delay_10","show_delay_15","show_delay_20","show_delay_25","show_delay_30"],B=["hide_no_delay","hide_delay_05","hide_delay_10","hide_delay_15","hide_delay_20"],q=["no","yes"],z=["","fixed__full-height"],H=["none","bordo","black","blue","dark-blue","red","orange","green","light-green","dark-green","pink","yellow"],U=["not_animate","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","fadeIn","fadeInDown","fadeInLeft","fadeInRight","fadeInUp","flipInX","flipInY","lightSpeedIn","rotateIn","rotateInDownLeft","rotateInUpLeft","rotateInUpRight","jackInTheBox","rollIn","zoomIn"],Y=["not_animate","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeOut","fadeOutDown","fadeOutLeft","fadeOutRight","fadeOutUp","flipOutX","lipOutY","lightSpeedOut","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","hinge","rollOut"];return e($(".fileSelect")),{init:m}}();!function(e){function t(e){this.init(e)}function i(){var e=this;e["this"].parent().removeClass("ajaxSavingFailed"),e["this"].parent().removeClass("ajaxSavingOk")}t.prototype.init=function(t){tagName=t.tagName.toLowerCase(),t=e(t),"input"==tagName||"select"==tagName?obj=t:obj=t.find("input,select"),post_url=t.attr("save_url"),uid=t.attr("uid");for(var n=0;n<obj.length;n++){var s={url:post_url,id:uid,"this":obj.eq(n)};s["this"].off("change").on("change",function(){var t=this,n=t["this"].val(),s=t["this"].attr("type");s&&"checkbox"==s.toLowerCase()&&(t["this"].prop("checked")||(n=0));var o={id:t.id,value:n,name:t["this"].attr("name")};t["this"].parent().addClass("ajaxInSaving"),e.post(t.url,o,function(){var e=this;e["this"].parent().removeClass("ajaxInSaving"),e["this"].parent().addClass("ajaxSavingOk"),setTimeout(i.bind(e),3e3)}.bind(t)).fail(function(){var e=this;e["this"].parent().removeClass("ajaxInSaving"),e["this"].parent().addClass("ajaxSavingFailed"),setTimeout(i.bind(e),4e3)}.bind(t))}.bind(s))}},e.fn.ajax_save=function(){return e(this).each(function(){new t(this)}),this}}(jQuery),$(".ajax_save").ajax_save(),$(function(){function e(){$this=$(this),post={id:$this.attr("uid"),type:$this.attr("mode")},$.post($this.attr("url"),post,function(e){return e&&"err"==e?(msg=$this.data("remove-error"),msg||(msg="Невозможно удалить элемент"),void notification.notifi({message:msg,type:"err"})):(mode=$this.attr("mode"),mode||(mode="rm"),"rm"==mode&&(rm=$this.closest(".to_remove"),rm_class=rm.attr("rm_class"),rm_class&&$(rm_class).remove(),rm.remove(),notification.notifi({message:"Успешное удаление.",type:"info"})),void("reload"==mode&&(location.reload(),location.href=location.href)))}).fail(function(){notification.notifi({message:"Ошибка удалния",type:"err"})})}$("body").on("click",".ajax_remove",function(){notification.confirm({callbackYes:e,obj:$(this),notyfy_class:"notify_box-alert"})})});var notification=function(){function testIphone(){/(iPhone|iPad|iPod).*(OS 11)/.test(navigator.userAgent)&&(notification_box.css("position","absolute"),notification_box.css("top",$(document).scrollTop()))}function init(){is_init=!0,notification_box=$(".notification_box"),notification_box.length>0||($("body").append("<div class='notification_box'></div>"),notification_box=$(".notification_box"),notification_box.on("click",".notify_control",closeModal),notification_box.on("click",".notify_close",closeModal),notification_box.on("click",closeModalFon))}function closeModal(){$("html").removeClass("show_notifi"),$(".notification_box .notify_content").html("")}function closeModalFon(e){var t=e.target||e.srcElement;"notification_box"==t.className&&closeModal()}function alert(e){e||(e={}),alert_opt=objects(alert_opt,{buttonYes:lg("yes")}),e=objects(alert_opt,e),is_init||init(),testIphone(),notyfy_class="notify_box ",e.notyfy_class&&(notyfy_class+=e.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+="<div>"+e.title+"</div>",box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=e.question,box_html+="</div>",(e.buttonYes||e.buttonNo)&&(box_html+='<div class="notify_control">',e.buttonYes&&(box_html+="<"+e.buttonTag+' class="notify_btn_yes" '+e.buttonYesDop+">"+e.buttonYes+"</"+e.buttonTag+">"),e.buttonNo&&(box_html+="<"+e.buttonTag+' class="notify_btn_no" '+e.buttonNoDop+">"+e.buttonNo+"</"+e.buttonTag+">"),box_html+="</div>"),box_html+="</div>",notification_box.html(box_html),setTimeout(function(){$("html").addClass("show_notifi")},100)}function confirm(data){if(data||(data={}),confirm_opt=objects(confirm_opt,{title:lg("deleting"),question:lg("are_you_sure_to_delete"),buttonYes:lg("yes"),buttonNo:lg("no")}),data=objects(confirm_opt,data),"string"==typeof data.callbackYes){var code="data.callbackYes = function(){"+data.callbackYes+"}";eval(code)}is_init||init(),testIphone(),notyfy_class="notify_box ",data.notyfy_class&&(notyfy_class+=data.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+=data.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=data.question,box_html+="</div>",(data.buttonYes||data.buttonNo)&&(box_html+='<div class="notify_control">',data.buttonYes&&(box_html+='<div class="notify_btn_yes">'+data.buttonYes+"</div>"),data.buttonNo&&(box_html+='<div class="notify_btn_no">'+data.buttonNo+"</div>"),box_html+="</div>"),box_html+="</div>",notification_box.html(box_html),0!=data.callbackYes&&notification_box.find(".notify_btn_yes").on("click",data.callbackYes.bind(data.obj)),0!=data.callbackNo&&notification_box.find(".notify_btn_no").on("click",data.callbackNo.bind(data.obj)),setTimeout(function(){$("html").addClass("show_notifi")},100)}function notifi(e){e||(e={});var t={time:e.time||0===e.time?e.time:time};conteiner||(conteiner=$("<ul/>",{"class":"notification_container"}),$("body").append(conteiner),_setUpListeners());var i=$("<li/>",{"class":"notification_item"});e.type&&i.addClass("notification_item-"+e.type);var n=$("<span/>",{"class":"notification_close"});t.close=n,i.append(n);var s=$("<div/>",{"class":"notification_content"});if(e.title&&e.title.length>0){var o=$("<h5/>",{"class":"notification_title"});o.html(e.title),s.append(o)}var a=$("<div/>",{"class":"notification_text"});if(a.html(e.message),e.img&&e.img.length>0){var r=$("<div/>",{"class":"notification_img"});r.css("background-image","url("+e.img+")");var l=$("<div/>",{"class":"wrap"});l.append(r),l.append(a),s.append(l)}else s.append(a);i.append(s),conteiner.append(i),t.time>0&&(t.timer=setTimeout(_closePopup.bind(n),t.time)),i.data("option",t)}var conteiner,mouseOver=0,timerClearAll=null,animationEnd="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",time=1e4,notification_box=!1,is_init=!1,confirm_opt={callbackYes:!1,callbackNo:!1,obj:!1,buttonTag:"div",buttonYesDop:"",buttonNoDop:""},alert_opt={title:"",question:"message",callbackYes:!1,buttonTag:"div",obj:!1},_setUpListeners=function(){$("body").on("click",".notification_close",_closePopup),$("body").on("mouseenter",".notification_container",_onEnter),$("body").on("mouseleave",".notification_container",_onLeave)},_onEnter=function(e){e&&e.preventDefault(),null!=timerClearAll&&(clearTimeout(timerClearAll),timerClearAll=null),conteiner.find(".notification_item").each(function(e){var t=$(this).data("option");t.timer&&clearTimeout(t.timer)}),mouseOver=1},_onLeave=function(){conteiner.find(".notification_item").each(function(e){$this=$(this);var t=$this.data("option");t.time>0&&(t.timer=setTimeout(_closePopup.bind(t.close),t.time-1500+100*e),$this.data("option",t))}),mouseOver=0},_closePopup=function(e){e&&e.preventDefault();var t=$(this).parent();t.on(animationEnd,function(){$(this).remove()}),t.addClass("notification_hide")};return{alert:alert,confirm:confirm,notifi:notifi}}();$("[ref=popup]").on("click",function(e){e.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.alert(data)}),$("[ref=confirm]").on("click",function(e){e.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.confirm(data)}),$(".disabled").on("click",function(e){e.preventDefault(),$this=$(this),data=$this.data(),data.button_yes&&(data.buttonYes=data.button_yes),data.button_yes===!1&&(data.buttonYes=!1),notification.alert(data)}),$(function(){function e(e){$this=$(this),mode=$this.attr("mode"),"rate"==mode&&($parent=$this.closest(".acordion_content"),$parent=$parent.find("table"),e=$(e),e.ajax_save(),$parent.append(e)),"tariff"==mode&&($parent=$this.closest(".acordion_content"),e=$(e),e.find(".ajax_save").ajax_save(),$parent.append(e)),"action"==mode&&($parent=$this.closest(".cpa_box"),e=$(e),e.find(".ajax_save").ajax_save(),$parent.append(e)),"cpa"==mode&&(e=JSON.parse(e),$parent=$this.closest(".tarif_select_blk"),$parent.prepend(e.tab_head_suf),$parent.find(".tab_control").append(e.tab_head_but).ajax_save(),e=$(e.tab_body),e.find(".ajax_save").ajax_save(),$parent.find(".content_tab").append(e))}$("body").on("click",".add_shop_element",function(){$this=$(this),post={code:$this.attr("code"),parent:$this.attr("parent"),type:$this.attr("mode")},updateElement=e.bind($this),$.post("/admin/stores/ajax_insert/"+$this.attr("mode"),post,updateElement).fail(function(){alert("Ошибка добавления")})}),$("body").on("click",".cpa_box_change_store",function(){$(".edit_blk_store").toggleClass("hidden")})}),addSRO();var accordionControl=$(".accordion .accordion-control");accordionControl.on("click",function(e){return e.preventDefault(),$this=$(this),$accordion=$this.closest(".accordion"),$accordion.hasClass("open")?($accordion.find(".accordion-content").hide(300),$accordion.removeClass("open")):($accordion.find(".accordion-content").show(300),$accordion.addClass("open")),!1}),accordionControl.show(),objects=function(e,t){var i,n=t;for(i in e)e.hasOwnProperty(i)&&(n[i]=i in t?t[i]:e[i]);return n},$(document).ready(function(){function e(){data=this,0==data.type?data.img.attr("src",data.src):(data.img.css("background-image","url("+data.src+")"),data.img.removeClass("no_ava"))}imgs=$("section:not(.navigation)").find(".logo img");for(var t=0;t<imgs.length;t++)img=imgs.eq(t),i=img.attr("src"),img.attr("src","/images/template-logo.jpg"),data={src:i,img:img,type:0},image=$("<img/>",{src:i}).on("load",e.bind(data));imgs=$(".comment-photo");for(var t=0;t<imgs.length;t++)if(img=imgs.eq(t),!img.hasClass("no_ava")){var i=img.css("background-image");i=i.replace('url("',""),i=i.replace('")',""),img.addClass("no_ava"),img.css("background-image","url(/images/no_ava.png)"),data={src:i,img:img,type:1},image=$("<img/>",{src:i}).on("load",e.bind(data))}}),function(){for(els=$(".ajax_load").not("a"),i=0;i<els.length;i++)el=els.eq(i),url=el.attr("res"),$.get(url,function(e){$this=$(this),$this.html(e),ajaxForm($this)}.bind(el))}(),$("input[type=file]").on("change",function(e){var t=e.target.files,i=t[0];if(!i.type.match("image.*"))return!1;var n=new FileReader;data={el:this,f:i},n.onload=function(e){return function(t){img=$('[for="'+e.el.name+'"]'),img.length>0&&img.attr("src",t.target.result)}}(data),n.readAsDataURL(i)}),$("body").on("click","a.ajaxFormOpen",function(e){e.preventDefault(),href=this.href.split("#"),href=href[href.length-1],data={buttonYes:!1,notyfy_class:"notify_white loading",question:""},modal_class=$(this).data("modal-class"),notification.alert(data),$.get("/"+href,function(e){$(".notify_box").removeClass("loading"),$(".notify_box .notify_content").html(e.html),ajaxForm($(".notify_box .notify_content")),modal_class&&$(".notify_box .notify_content .row").addClass(modal_class)},"json")}),$(".ajax-action").click(function(e){e.preventDefault();var t=$(this).data("value"),i=$(this).data("param"),n=$(this).attr("href"),s=$("#grid-ajax-action").yiiGridView("getSelectedRows");if(s.length>0){if(!confirm("Подтвердите изменение записей"))return null;var o=$(this).closest(".ajax-action-content"),a=$(this).data();o?($(o).find("input,select").each(function(e,t){a[$(t).attr("name")]=$(t).val()}),a.id=s):a={status:t,param:i,id:s},$.ajax({url:n,type:"post",dataType:"json",data:a}).done(function(e){$("#grid-ajax-action").yiiGridView("applyFilter"),0!=e.error?notification.notifi({message:"Произошла ошибка!",type:"err"}):notification.notifi({message:"Операция выполнена!",type:"success"})}).fail(function(e){302!=e.status&&notification.notifi({message:"Произошла ошибка!",type:"err"})})}else notification.notifi({message:"Необходимо выбрать элементы!",type:"err"})}),$(document).ready(function(){$(".editible[disabled]").on("click",function(){$(this).prop("disabled",!1)}),$(".editible[disabled]").on("mousedown",function(){$(this).prop("disabled",!1)}),btn='<button class=unlock><i class="fa fa-unlock fa-4" aria-hidden="true"></i></button>',btn=$(btn),btn.on("click",function(e){return e.preventDefault(),$this=$(this),inp=$this.prev(),inp.prop("disabled",!1),!1}),$(".editible[disabled]").after(btn)}),$(function(){var e={control:{headerStoresMenu:$("#top").find(".submenu-handl"),storesSubmenus:$("#top").find(".submenu-handl").find(".submenu"),events:function(){var e=this;e.headerStoresMenu.hover(function(){var t=$(this).find(".submenu");$(window).width()>991&&(clearTimeout(e.storeHide),e.storesSubmenus.css("display","none"),e.storeShow=setTimeout(function(){t.clearQueue(),t.css("display","block").animate({opacity:1},350)},200))},function(){var t=$(this).find(".submenu");$(window).width()>991&&(clearTimeout(e.storeShow),e.storeHide=setTimeout(function(){t.clearQueue(),t.animate({opacity:0},200,function(){$(this).css("display","none")})},300))})}}};e.control.events()}),$(document).ready(function(){function e(e){var t=e.parent();if(0!=t.length&&"A"!=t[0].tagName){m_w=t.width()-30;var i=e.width();e.width("auto"),"IMG"==e[0].tagName&&i>e.width()&&(i=e.width()),n>50&&m_w>n&&(m_w=n),i>m_w>m_w?("IFRAME"==e[0].tagName&&(k=i/m_w,e.height(e.height()/k)),e.width(m_w)):e.width(i)}}function t(){var t=$(this);e(t)}var n=screen.width-40,s=$(".container img,.container iframe");for($(".container img").height("auto"),i=0;i<s.length;i++)if(el=s.eq(i),"IFRAME"==el[0].tagName)e(el);else{var o=el.attr("src");image=$("<img/>",{src:o}),image.on("load",t.bind(el))}}),function(){window.opener&&(document.referrer.indexOf("secretdiscounter")<0||(href=window.opener.location.href,href.indexOf("socials")>0||href.indexOf("login")>0||href.indexOf("admin")>0||href.indexOf("account")>0||(href.indexOf("store")>0||href.indexOf("coupon")>0||href.indexOf("settings")>0?window.opener.location.reload():window.opener.location.href=location.href,window.close())))}(),function(){function e(){var e=this,t=e.img;t.wrap('<div class="download"></div>');var i=t.parent();$("body").append(e.el),size=e.el.width()+"x"+e.el.height(),e.el.remove(),i.append("<span>"+size+'</span> <a href="'+e.src+'" download>Скачать</a>')}for(var t=$(".downloads_img img"),i=0;i<t.length;i++){var n=t.eq(i),s=n.attr("src");image=$("<img/>",{src:s}),data={src:s,img:n,el:image},image.on("load",e.bind(data))}}(),function(){$("body").on("beforeValidate","form",function(){for(var e=this,t=!0,i=$(e).find('input[required="true"], input[aria-required="true"], textarea[required="true"], textarea[aria-required="true"]'),n=!0,s=0;s<i.length;s++)if(i.eq(s).val().length<1&&(t=!1,notification.notifi({type:"err",message:"Необходимо заполнить "+i.eq(s).attr("name")}),n)){n=!1,$("html, body").animate({scrollTop:$(i.eq(s)).offset().top},500);var o=$(i.eq(s)).closest(".cpa_box");if(o)for(var a=o[0].classList,r=0;r<a.length;r++)if(a[r].indexOf("tab_")>-1){var l=a[r].substring(4);$(e).find('input[type="radio"][value="'+l+'"]').prop("checked",!0)}}if(!t)return!1})}(),function(e){"use strict";function t(t,n){var s=this,o=t.attr("name")||n.name||"";this.options=n,this.$el=t.hide(),this.$label=this.$el.closest("label"),0===this.$label.length&&this.$el.attr("id")&&(this.$label=e(i('label[for="%s"]',this.$el.attr("id").replace(/:/g,"\\:")))),this.$parent=e(i('<div class="ms-parent %s" %s/>',t.attr("class")||"",i('title="%s"',t.attr("title")))),this.$choice=e(i(['<button type="button" class="ms-choice">','<span class="placeholder">%s</span>',"<div></div>","</button>"].join(""),this.options.placeholder)),this.$drop=e(i('<div class="ms-drop %s"%s></div>',this.options.position,i(' style="width: %s"',this.options.dropWidth))),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",this.options.width||this.$el.css("width")||this.$el.outerWidth()+20),this.selectAllName='data-name="selectAll'+o+'"',this.selectGroupName='data-name="selectGroup'+o+'"',this.selectItemName='data-name="selectItem'+o+'"',this.options.keepOpen||e(document).click(function(i){e(i.target)[0]!==s.$choice[0]&&e(i.target).parents(".ms-choice")[0]!==s.$choice[0]&&(e(i.target)[0]===s.$drop[0]||e(i.target).parents(".ms-drop")[0]!==s.$drop[0]&&i.target!==t[0])&&s.options.isOpen&&s.close()})}var i=function(e){var t=arguments,i=!0,n=1;return e=e.replace(/%s/g,function(){var e=t[n++];return"undefined"==typeof e?(i=!1,""):e}),i?e:""},n=function(e){for(var t=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g
},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],i=0;i<t.length;i++)e=e.replace(t[i].letters,t[i].base);return e};t.prototype={constructor:t,init:function(){var t=this,n=e("<ul></ul>");this.$drop.html(""),this.options.filter&&this.$drop.append(['<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"].join("")),this.options.selectAll&&!this.options.single&&n.append(['<li class="ms-select-all">',"<label>",i('<input type="checkbox" %s /> ',this.selectAllName),this.options.selectAllDelimiter[0],this.options.selectAllText,this.options.selectAllDelimiter[1],"</label>","</li>"].join("")),e.each(this.$el.children(),function(e,i){n.append(t.optionToHtml(e,i))}),n.append(i('<li class="ms-no-results">%s</li>',this.options.noMatchesFound)),this.$drop.append(n),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open()},optionToHtml:function(t,n,s,o){var a,r=this,l=e(n),u=l.attr("class")||"",c=i('title="%s"',l.attr("title")),d=this.options.multiple?"multiple":"",p=this.options.single?"radio":"checkbox";if(l.is("option")){var h,f=l.val(),g=r.options.textTemplate(l),m=l.prop("selected"),v=i('style="%s"',this.options.styler(f));return a=o||l.prop("disabled"),h=e([i('<li class="%s %s" %s %s>',d,u,c,v),i('<label class="%s">',a?"disabled":""),i('<input type="%s" %s%s%s%s>',p,this.selectItemName,m?' checked="checked"':"",a?' disabled="disabled"':"",i(' data-group="%s"',s)),i("<span>%s</span>",g),"</label>","</li>"].join("")),h.find("input").val(f),h}if(l.is("optgroup")){var y=r.options.labelTemplate(l),_=e("<div/>");return s="group_"+t,a=l.prop("disabled"),_.append(['<li class="group">',i('<label class="optgroup %s" data-group="%s">',a?"disabled":"",s),this.options.hideOptgroupCheckboxes||this.options.single?"":i('<input type="checkbox" %s %s>',this.selectGroupName,a?'disabled="disabled"':""),y,"</label>","</li>"].join("")),e.each(l.children(),function(e,t){_.append(r.optionToHtml(e,t,s,a))}),_.html()}},events:function(){var t=this,n=function(e){e.preventDefault(),t[t.options.isOpen?"close":"open"]()};this.$label&&this.$label.off("click").on("click",function(e){"label"===e.target.nodeName.toLowerCase()&&e.target===this&&(n(e),t.options.filter&&t.options.isOpen||t.focus(),e.stopPropagation())}),this.$choice.off("click").on("click",n).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$parent.off("keydown").on("keydown",function(e){switch(e.which){case 27:t.close(),t.$choice.focus()}}),this.$searchInput.off("keydown").on("keydown",function(e){9===e.keyCode&&e.shiftKey&&t.close()}).off("keyup").on("keyup",function(e){return t.options.filterAcceptOnEnter&&(13===e.which||32==e.which)&&t.$searchInput.val()?(t.$selectAll.click(),t.close(),void t.focus()):void t.filter()}),this.$selectAll.off("click").on("click",function(){var i=e(this).prop("checked"),n=t.$selectItems.filter(":visible");n.length===t.$selectItems.length?t[i?"checkAll":"uncheckAll"]():(t.$selectGroups.prop("checked",i),n.prop("checked",i),t.options[i?"onCheckAll":"onUncheckAll"](),t.update())}),this.$selectGroups.off("click").on("click",function(){var n=e(this).parent().attr("data-group"),s=t.$selectItems.filter(":visible"),o=s.filter(i('[data-group="%s"]',n)),a=o.length!==o.filter(":checked").length;o.prop("checked",a),t.updateSelectAll(),t.update(),t.options.onOptgroupClick({label:e(this).parent().text(),checked:a,children:o.get(),instance:t})}),this.$selectItems.off("click").on("click",function(){if(t.updateSelectAll(),t.update(),t.updateOptGroupSelect(),t.options.onClick({label:e(this).parent().text(),value:e(this).val(),checked:e(this).prop("checked"),instance:t}),t.options.single&&t.options.isOpen&&!t.options.keepOpen&&t.close(),t.options.single){var i=e(this).val();t.$selectItems.filter(function(){return e(this).val()!==i}).each(function(){e(this).prop("checked",!1)}),t.update()}})},open:function(){if(!this.$choice.hasClass("disabled")){if(this.options.isOpen=!0,this.$choice.find(">div").addClass("open"),this.$drop[this.animateMethod("show")](),this.$selectAll.parent().show(),this.$noResults.hide(),this.$el.children().length||(this.$selectAll.parent().hide(),this.$noResults.show()),this.options.container){var t=this.$drop.offset();this.$drop.appendTo(e(this.options.container)),this.$drop.offset({top:t.top,left:t.left})}this.options.filter&&(this.$searchInput.val(""),this.$searchInput.focus(),this.filter()),this.options.onOpen()}},close:function(){this.options.isOpen=!1,this.$choice.find(">div").removeClass("open"),this.$drop[this.animateMethod("hide")](),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose()},animateMethod:function(e){var t={show:{fade:"fadeIn",slide:"slideDown"},hide:{fade:"fadeOut",slide:"slideUp"}};return t[e][this.options.animate]||e},update:function(t){var i=this.options.displayValues?this.getSelects():this.getSelects("text"),n=this.$choice.find(">span"),s=i.length;0===s?n.addClass("placeholder").html(this.options.placeholder):this.options.allSelected&&s===this.$selectItems.length+this.$disableItems.length?n.removeClass("placeholder").html(this.options.allSelected):this.options.ellipsis&&s>this.options.minimumCountSelected?n.removeClass("placeholder").text(i.slice(0,this.options.minimumCountSelected).join(this.options.delimiter)+"..."):this.options.countSelected&&s>this.options.minimumCountSelected?n.removeClass("placeholder").html(this.options.countSelected.replace("#",i.length).replace("%",this.$selectItems.length+this.$disableItems.length)):n.removeClass("placeholder").text(i.join(this.options.delimiter)),this.options.addTitle&&n.prop("title",this.getSelects("text")),this.$el.val(this.getSelects()).trigger("change"),this.$drop.find("li").removeClass("selected"),this.$drop.find("input:checked").each(function(){e(this).parents("li").first().addClass("selected")}),t||this.$el.trigger("change")},updateSelectAll:function(e){var t=this.$selectItems;e||(t=t.filter(":visible")),this.$selectAll.prop("checked",t.length&&t.length===t.filter(":checked").length),!e&&this.$selectAll.prop("checked")&&this.options.onCheckAll()},updateOptGroupSelect:function(){var t=this.$selectItems.filter(":visible");e.each(this.$selectGroups,function(n,s){var o=e(s).parent().attr("data-group"),a=t.filter(i('[data-group="%s"]',o));e(s).prop("checked",a.length&&a.length===a.filter(":checked").length)})},getSelects:function(t){var n=this,s=[],o=[];return this.$drop.find(i("input[%s]:checked",this.selectItemName)).each(function(){s.push(e(this).parents("li").first().text()),o.push(e(this).val())}),"text"===t&&this.$selectGroups.length&&(s=[],this.$selectGroups.each(function(){var t=[],o=e.trim(e(this).parent().text()),a=e(this).parent().data("group"),r=n.$drop.find(i('[%s][data-group="%s"]',n.selectItemName,a)),l=r.filter(":checked");if(l.length){if(t.push("["),t.push(o),r.length>l.length){var u=[];l.each(function(){u.push(e(this).parent().text())}),t.push(": "+u.join(", "))}t.push("]"),s.push(t.join(""))}})),"text"===t?s:o},setSelects:function(t){var n=this;this.$selectItems.prop("checked",!1),this.$disableItems.prop("checked",!1),e.each(t,function(e,t){n.$selectItems.filter(i('[value="%s"]',t)).prop("checked",!0),n.$disableItems.filter(i('[value="%s"]',t)).prop("checked",!0)}),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length+this.$disableItems.filter(":checked").length),e.each(n.$selectGroups,function(t,i){var s=e(i).parent().attr("data-group"),o=n.$selectItems.filter('[data-group="'+s+'"]');e(i).prop("checked",o.length&&o.length===o.filter(":checked").length)}),this.update()},enable:function(){this.$choice.removeClass("disabled")},disable:function(){this.$choice.addClass("disabled")},checkAll:function(){this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems.prop("checked",!1),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},focus:function(){this.$choice.focus(),this.options.onFocus()},blur:function(){this.$choice.blur(),this.options.onBlur()},refresh:function(){this.init()},destroy:function(){this.$el.show(),this.$parent.remove(),this.$el.data("multipleSelect",null)},filter:function(){var t=this,s=e.trim(this.$searchInput.val()).toLowerCase();0===s.length?(this.$selectAll.parent().show(),this.$selectItems.parent().show(),this.$disableItems.parent().show(),this.$selectGroups.parent().show(),this.$noResults.hide()):(this.$selectItems.each(function(){var t=e(this).parent();t[n(t.text().toLowerCase()).indexOf(n(s))<0?"hide":"show"]()}),this.$disableItems.parent().hide(),this.$selectGroups.each(function(){var n=e(this).parent(),s=n.attr("data-group"),o=t.$selectItems.filter(":visible");n[o.filter(i('[data-group="%s"]',s)).length?"show":"hide"]()}),this.$selectItems.parent().filter(":visible").length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll(),this.options.onFilter(s)}},e.fn.multipleSelect=function(){var i,n=arguments[0],s=arguments,o=["getSelects","setSelects","enable","disable","open","close","checkAll","uncheckAll","focus","blur","refresh","destroy"];return this.each(function(){var a=e(this),r=a.data("multipleSelect"),l=e.extend({},e.fn.multipleSelect.defaults,a.data(),"object"==typeof n&&n);if(r||(r=new t(a,l),a.data("multipleSelect",r)),"string"==typeof n){if(e.inArray(n,o)<0)throw"Unknown method: "+n;i=r[n](s[1])}else r.init(),s[1]&&(i=r[s[1]].apply(r,[].slice.call(s,2)))}),"undefined"!=typeof i?i:this},e.fn.multipleSelect.defaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllDelimiter:["[","]"],minimumCountSelected:3,ellipsis:!1,multiple:!1,multipleWidth:80,single:!1,filter:!1,width:void 0,dropWidth:void 0,maxHeight:250,container:null,position:"bottom",keepOpen:!1,animate:"none",displayValues:!1,delimiter:", ",addTitle:!1,filterAcceptOnEnter:!1,hideOptgroupCheckboxes:!1,selectAllText:"Select all",allSelected:"All selected",countSelected:"# of % selected",noMatchesFound:"No matches found",styler:function(){return!1},textTemplate:function(e){return e.html()},labelTemplate:function(e){return e.attr("label")},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onFilter:function(){return!1}},e("select[multiple]").multipleSelect()}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,s)}function s(){e.datepicker._isDisabledDatepicker(l.inline?l.dpDiv.parent()[0]:l.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function o(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.ui=e.ui||{},e.ui.version="1.12.1";var a=0,r=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{n=e._data(s,"events"),n&&n.remove&&e(s).triggerHandler("remove")}catch(a){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var s,o,a,r={},l=t.split(".")[0];t=t.split(".")[1];var u=l+"-"+t;return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr[":"][u.toLowerCase()]=function(t){return!!e.data(t,u)},e[l]=e[l]||{},s=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(r[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function s(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(r[t]=n)}),o.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||t:t},r,{constructor:o,namespace:l,widgetName:t,widgetFullName:u}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,n,s=r.call(arguments,1),o=0,a=s.length;a>o;o++)for(i in s[o])n=s[o][i],s[o].hasOwnProperty(i)&&void 0!==n&&(t[i]=e.isPlainObject(n)?e.isPlainObject(t[i])?e.widget.extend({},t[i],n):e.widget.extend({},n):n);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,a=r.call(arguments,1),l=this;return o?this.length||"instance"!==s?this.each(function(){var i,o=e.data(this,n);return"instance"===s?(l=o,!1):o?e.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,a),i!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):l=void 0:(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,n);t?(t.option(s||{}),t._init&&t._init()):e.data(this,n,new i(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,s,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},n=t.split("."),t=n.shift(),n.length){for(s=a[t]=e.widget.extend({},this.options[t]),o=0;n.length-1>o;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(t=n.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,s;for(i in t)s=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&s&&s.length&&(n=e(s.get()),this._removeClass(s,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=s.classesElementLookup[i[r]]||e(),a=e(t.add?e.unique(a.get().concat(t.element.get())):a.not(t.element).get()),s.classesElementLookup[i[r]]=a,n.push(i[r]),o&&t.classes[i[r]]&&n.push(t.classes[i[r]])}var n=[],s=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(n,s){-1!==e.inArray(t.target,s)&&(i.classesElementLookup[n]=e(s.not(t.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof e||null===e,o={extra:s?t:i,keys:s?e:t,element:s?this.element:e,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,a){function r(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?s.on(u,c,r):i.on(u,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var s,o,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&e.effects&&e.effects.effect[r]?n[t](s):r!==t&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}}),e.widget,function(){function t(e,t,i){return[parseFloat(e[0])*(d.test(e[0])?t/100:1),parseFloat(e[1])*(d.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var s,o=Math.max,a=Math.abs,r=/left|center|right/,l=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,d=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==s)return s;var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return e("body").append(n),t=o.offsetWidth,n.css("overflow","scroll"),i=o.offsetWidth,t===i&&(i=n[0].clientWidth),n.remove(),s=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType,o=!n&&!s;return{element:i,isWindow:n,isDocument:s,offset:o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},e.fn.position=function(s){if(!s||!s.of)return p.apply(this,arguments);s=e.extend({},s);var d,h,f,g,m,v,y=e(s.of),_=e.position.getWithinInfo(s.within),b=e.position.getScrollInfo(_),x=(s.collision||"flip").split(" "),w={};return v=n(y),y[0].preventDefault&&(s.at="left top"),h=v.width,f=v.height,g=v.offset,m=e.extend({},g),e.each(["my","at"],function(){var e,t,i=(s[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",e=u.exec(i[0]),t=u.exec(i[1]),w[this]=[e?e[0]:0,t?t[0]:0],s[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),
"right"===s.at[0]?m.left+=h:"center"===s.at[0]&&(m.left+=h/2),"bottom"===s.at[1]?m.top+=f:"center"===s.at[1]&&(m.top+=f/2),d=t(w.at,h,f),m.left+=d[0],m.top+=d[1],this.each(function(){var n,r,l=e(this),u=l.outerWidth(),c=l.outerHeight(),p=i(this,"marginLeft"),v=i(this,"marginTop"),k=u+p+i(this,"marginRight")+b.width,C=c+v+i(this,"marginBottom")+b.height,D=e.extend({},m),$=t(w.my,l.outerWidth(),l.outerHeight());"right"===s.my[0]?D.left-=u:"center"===s.my[0]&&(D.left-=u/2),"bottom"===s.my[1]?D.top-=c:"center"===s.my[1]&&(D.top-=c/2),D.left+=$[0],D.top+=$[1],n={marginLeft:p,marginTop:v},e.each(["left","top"],function(t,i){e.ui.position[x[t]]&&e.ui.position[x[t]][i](D,{targetWidth:h,targetHeight:f,elemWidth:u,elemHeight:c,collisionPosition:n,collisionWidth:k,collisionHeight:C,offset:[d[0]+$[0],d[1]+$[1]],my:s.my,at:s.at,within:_,elem:l})}),s.using&&(r=function(e){var t=g.left-D.left,i=t+h-u,n=g.top-D.top,r=n+f-c,d={target:{element:y,left:g.left,top:g.top,width:h,height:f},element:{element:l,left:D.left,top:D.top,width:u,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>r?"top":n>0?"bottom":"middle"};u>h&&h>a(t+i)&&(d.horizontal="center"),c>f&&f>a(n+r)&&(d.vertical="middle"),d.important=o(a(t),a(i))>o(a(n),a(r))?"horizontal":"vertical",s.using.call(this,e,d)}),l.offset(e.extend(D,{using:r}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,r=e.left-t.collisionPosition.marginLeft,l=s-r,u=r+t.collisionWidth-a-s;t.collisionWidth>a?l>0&&0>=u?(i=e.left+l+t.collisionWidth-a-s,e.left+=l-i):e.left=u>0&&0>=l?s:l>u?s+a-t.collisionWidth:s:l>0?e.left+=l:u>0?e.left-=u:e.left=o(e.left-r,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,l=s-r,u=r+t.collisionHeight-a-s;t.collisionHeight>a?l>0&&0>=u?(i=e.top+l+t.collisionHeight-a-s,e.top+=l-i):e.top=u>0&&0>=l?s:l>u?s+a-t.collisionHeight:s:l>0?e.top+=l:u>0?e.top-=u:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,d=u+t.collisionWidth-r-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>c?(i=e.left+p+h+f+t.collisionWidth-r-o,(0>i||a(c)>i)&&(e.left+=p+h+f)):d>0&&(n=e.left-t.collisionPosition.marginLeft+p+h+f-l,(n>0||d>a(n))&&(e.left+=p+h+f))},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,d=u+t.collisionHeight-r-l,p="top"===t.my[1],h=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];0>c?(n=e.top+h+f+g+t.collisionHeight-r-o,(0>n||a(c)>n)&&(e.top+=h+f+g)):d>0&&(i=e.top-t.collisionPosition.marginTop+h+f+g-l,(i>0||d>a(i))&&(e.top+=h+f+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position,e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)},e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");e.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}(),e.fn.labels=function(){var t,i,n,s,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(s=this.eq(0).parents("label"),n=this.attr("id"),n&&(t=this.eq(0).parents().last(),o=t.add(t.length?t.siblings():this.siblings()),i="label[for='"+e.ui.escapeSelector(n)+"']",s=s.add(o.find(i).addBack(i))),this.pushStack(s))},e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target),n=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){var i=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var i,n,s,o,a=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=!1,n=this.previousFilter||"",o=!1,s=t.keyCode>=96&&105>=t.keyCode?""+(t.keyCode-96):String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),s===n?o=!0:s=n+s,i=this._filterMenuItems(s),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(s=String.fromCharCode(t.keyCode),i=this._filterMenuItems(s)),i.length?(this.focus(t,i),this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i,n,s,o,a=this,r=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",!0);a._addClass(n,"ui-menu-icon","ui-icon "+r),i.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",i.attr("id"))}),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),t=l.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);a._isDivider(t)&&a._addClass(t,"ui-menu-divider","ui-widget-content")}),s=i.not(".ui-menu-item, .ui-menu-divider"),o=s.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(s,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e+""),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),s=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,o,a,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=t.outerHeight(),0>s?this.activeMenu.scrollTop(o+s):s+r>a&&this.activeMenu.scrollTop(o+s-a+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-n-s}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}}),e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,a="input"===s;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case o.UP:t=!0,this._keyEvent("previous",s);break;case o.DOWN:t=!0,this._keyEvent("next",s);break;case o.ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,i){var n,s;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(s=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:s})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value),n=i.item.attr("aria-label")||s.value,void(n&&e.trim(n).length&&(this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))))},menuselect:function(t,i){var n=i.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!n)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete,e.extend(e.ui,{datepicker:{version:"1.12.1"}});var l;e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,s,o;n=t.nodeName.toLowerCase(),s="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),s),o.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,o):s&&this._inlineDatepicker(t,o)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,s,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[r?"before":"after"](i.append)),t.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.on("focus",this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:s,title:s}):s)),t[r?"before":"after"](i.trigger),i.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,s,o=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(i=0,n=0,s=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,n=s);return n},o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,s,a){var r,l,u,c,d,p=this._dialogInst;return p||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],"datepicker",p)),o(p.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,u/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",p),this},_destroyDatepicker:function(t){var i,n=e(t),s=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty(),l===s&&(l=null))},_enableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var s,a,r,l,u=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):u?"all"===i?e.extend({},u.settings):this._get(u,i):null:(s=i||{},"string"==typeof i&&(s={},s[i]=n),void(u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(u,"min"),l=this._getMinMaxDate(u,"max"),o(u.settings,s),null!==r&&void 0!==s.dateFormat&&void 0===s.minDate&&(u.settings.minDate=this._formatDate(u,r)),null!==l&&void 0!==s.dateFormat&&void 0===s.maxDate&&(u.settings.maxDate=this._formatDate(u,l)),"disabled"in s&&(s.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,s,o=e.datepicker._getInst(t.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),s[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,s[0]),i=e.datepicker._get(o,"onSelect"),i?(n=e.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,s=e.datepicker._getInst(t.target);return e.datepicker._get(s,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);
if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(i){if(i=i.target||i,"input"!==i.nodeName.toLowerCase()&&(i=e("input",i.parentNode)[0]),!e.datepicker._isDisabledDatepicker(i)&&e.datepicker._lastInput!==i){var n,s,a,r,l,u,c;n=e.datepicker._getInst(i),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),s=e.datepicker._get(n,"beforeShow"),a=s?s.apply(i,[i,n]):{},a!==!1&&(o(n.settings,a),n.lastVal=null,e.datepicker._lastInput=i,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(i.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(i),e.datepicker._pos[1]+=i.offsetHeight),r=!1,e(i).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),l=e.datepicker._checkOffset(n,l,r),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),n.inline||(u=e.datepicker._get(n,"showAnim"),c=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",t(e(i))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[u]?n.dpDiv.show(u,e.datepicker._get(n,"showOptions"),c):n.dpDiv[u||"show"](u?c:null),e.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,l=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,n=this._getNumberOfMonths(t),o=n[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&s.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&t.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",a*o+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var s=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-a:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>u&&u>o?Math.abs(o+r):0),i},_findPos:function(t){for(var i,n=this._getInst(t),s=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,s,o,a=this._curInst;!a||t&&a!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),s=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,s):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var s=e(t),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var i,n=e(t),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var s=e(t),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(t,i,n,s){var o,a=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=e("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,s=e(t),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var i,n,s,o=this._get(t,"altField");o&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),s=this.formatDate(i,n,this._getFormatConfig(t)),e(o).val(s))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var s,o,a,r,l=0,u=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,_=!1,b=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},x=function(e){var t=b(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s="y"===e?n:1,o=RegExp("^\\d{"+s+","+n+"}"),a=i.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},w=function(t,n,s){var o=-1,a=e.map(b(t)?s:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(o=t[0],l+=n.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},k=function(){if(i.charAt(l)!==t.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;t.length>s;s++)if(_)"'"!==t.charAt(s)||b("'")?k():_=!1;else switch(t.charAt(s)){case"d":v=x("d");break;case"D":w("D",d,p);break;case"o":y=x("o");break;case"m":m=x("m");break;case"M":m=w("M",h,f);break;case"y":g=x("y");break;case"@":r=new Date(x("@")),g=r.getFullYear(),m=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,v=r.getDate();break;case"'":b("'")?k():_=!0;break;default:k()}if(i.length>l&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),y>-1)for(m=1,v=y;o=this._getDaysInMonth(g,m-1),!(o>=v);)m++,v-=o;if(r=this._daylightSavingAdjust(new Date(g,m-1,v)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},u=function(e,t,i){var n=""+t;if(l(e))for(;i>n.length;)n="0"+n;return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",p=!1;if(t)for(n=0;e.length>n;n++)if(p)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):p=!1;else switch(e.charAt(n)){case"d":d+=u("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),s,o);break;case"o":d+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),a,r);break;case"y":d+=l("y")?t.getFullYear():(10>t.getFullYear()%100?"0":"")+t.getFullYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":p=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,s=function(i){var n=e.length>t+1&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;e.length>t;t++)if(n)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),o=s,a=this._getFormatConfig(e);try{o=this.parseDate(i,n,a)||s}catch(r){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=s.getFullYear(),a=s.getMonth(),r=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=7*parseInt(u[1],10);break;case"m":case"M":a+=parseInt(u[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(u[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(o,a))}u=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?n:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),s===e.selectedMonth&&o===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,s,o,a,r,l,u,c,d,p,h,f,g,m,v,y,_,b,x,w,k,C,D,$,A,E,T,S,O,M,F,I,j,R,N,P,L,B=new Date,q=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),z=this._get(e,"isRTL"),H=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),Y=this._get(e,"navigationAsDateFormat"),W=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),G=1!==W[0]||1!==W[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),X=e.drawMonth-V,ee=e.drawYear;if(0>X&&(X+=12,ee--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-W[0]*W[1]+1,Z.getDate())),t=J&&J>t?J:t;this._daylightSavingAdjust(new Date(ee,X,1))>t;)X--,0>X&&(X=11,ee--);for(e.drawMonth=X,e.drawYear=ee,i=this._get(e,"prevText"),i=Y?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,X-K,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,X)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=Y?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,X+K,1)),this._getFormatConfig(e)):s,o=this._canAdjustMonth(e,1,ee,X)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+s+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+s+"</span></a>",a=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?Q:q,a=Y?this.formatDate(a,r,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(z?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(e,"showWeek"),p=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),_=this._getDefaultDate(e),b="",w=0;W[0]>w;w++){for(k="",this.maxRows=4,C=0;W[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(ee,X,e.selectedDay)),$=" ui-corner-all",A="",G){if(A+="<div class='ui-datepicker-group",W[1]>1)switch(C){case 0:A+=" ui-datepicker-group-first",$=" ui-corner-"+(z?"right":"left");break;case W[1]-1:A+=" ui-datepicker-group-last",$=" ui-corner-"+(z?"left":"right");break;default:A+=" ui-datepicker-group-middle",$=""}A+="'>"}for(A+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+$+"'>"+(/all|left/.test($)&&0===w?z?o:n:"")+(/all|right/.test($)&&0===w?z?n:o:"")+this._generateMonthYearHeader(e,X,ee,J,Z,w>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)T=(x+c)%7,E+="<th scope='col'"+((x+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[T]+"'>"+h[T]+"</span></th>";for(A+=E+"</tr></thead><tbody>",S=this._getDaysInMonth(ee,X),ee===e.selectedYear&&X===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,S)),O=(this._getFirstDayOfMonth(ee,X)-c+7)%7,M=Math.ceil((O+S)/7),F=G&&this.maxRows>M?this.maxRows:M,this.maxRows=F,I=this._daylightSavingAdjust(new Date(ee,X,1-O)),j=0;F>j;j++){for(A+="<tr>",R=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(I)+"</td>":"",x=0;7>x;x++)N=m?m.apply(e.input?e.input[0]:null,[I]):[!0,""],P=I.getMonth()!==X,L=P&&!y||!N[0]||J&&J>I||Z&&I>Z,R+="<td class='"+((x+c+6)%7>=5?" ui-datepicker-week-end":"")+(P?" ui-datepicker-other-month":"")+(I.getTime()===D.getTime()&&X===e.selectedMonth&&e._keyEvent||_.getTime()===I.getTime()&&_.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(P&&!v?"":" "+N[1]+(I.getTime()===Q.getTime()?" "+this._currentClass:"")+(I.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(P&&!v||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(P&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===q.getTime()?" ui-state-highlight":"")+(I.getTime()===Q.getTime()?" ui-state-active":"")+(P?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);A+=R+"</tr>"}X++,X>11&&(X=0,ee++),A+="</tbody></table>"+(G?"</div>"+(W[0]>0&&C===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=A}b+=k}return b+=u,e._keyEvent=!1,b},_generateMonthYearHeader:function(e,t,i,n,s,o,a,r){var l,u,c,d,p,h,f,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(o||!m)b+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=n&&n.getFullYear()===i,u=s&&s.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=n.getMonth())&&(!u||s.getMonth()>=c)&&(b+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+r[c]+"</option>");b+="</select>"}if(y||(_+=b+(!o&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),p=(new Date).getFullYear(),h=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?p+parseInt(e,10):parseInt(e,10);return isNaN(t)?p:t},f=h(d[0]),g=Math.max(f,h(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,g=s?Math.min(g,s.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",_+=e.yearshtml,e.yearshtml=null}return _+=this._get(e,"yearSuffix"),y&&(_+=(!o&&m&&v?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(e,t,i){var n=e.selectedYear+("Y"===i?t:0),s=e.selectedMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"===i?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,s=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||t.getTime()>=s.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1",e.datepicker,e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var u=!1;e(document).on("mouseup",function(){u=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,s=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!s&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,u=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var n=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&n.index!==t.focusIndex&&(t._trigger("focus",e,{item:n}),t.isOpen||t._select(n,e)),t.focusIndex=n.index,t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=e("<span>");return this._setText(i,t.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(t,i){var n=this,s="";e.each(i,function(i,o){var a;o.optgroup!==s&&(a=e("<li>",{text:o.optgroup}),n._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),a.appendTo(t),s=o.optgroup),n._renderItemData(t,o)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var n=e("<li>"),s=e("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(s,i.label),n.append(s).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,n,s=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),s+=":not(.ui-state-disabled)"),n="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](s).eq(-1):i[e+"All"](s).eq(0),n.length&&this.menuInstance.focus(t,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),
e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;return e===!1?void this.button.css("width",""):(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(e))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var i=this,n=[];t.each(function(t,s){n.push(i._parseOption(e(s),t))}),this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;i>t;t++)a.push(o);this.handles=s.add(e(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===t.range||"max"===t.range)&&this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,a,r,l,u,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-c.values(t));(s>i||s===i&&(t===c._lastChangedValue||c.values(t)===d.min))&&(s=i,o=e(this),a=t)}),r=this._start(t,a),r!==!1&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),l=o.offset(),u=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,s,o=this.value(),a=this.values();this._hasMultipleValues()&&(s=this.values(t?0:1),o=this.values(t),2===this.options.values.length&&this.options.range===!0&&(i=0===t?Math.min(s,i):Math.max(s,i)),a[t]=i),i!==o&&(n=this._trigger("slide",e,this._uiHash(t,i,a)),n!==!1&&(this._hasMultipleValues()?this.values(t,i):this.value(i)))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;n.length>o;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),this._super(t,i),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=s-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,n=Math.round((e-t)/i)*i;e=n+t,e>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,n,s,o,a=this.options.range,r=this.options,l=this,u=!this._animateOff&&r.animate,c={};this._hasMultipleValues()?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[u?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[u?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[u?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?100*((n-s)/(o-s)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(t){var i,n,s,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),i=this._start(t,a),i===!1))return}switch(o=this.options.step,n=s=this._hasMultipleValues()?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;s=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;s=this._trimAlignValue(n-o)}this._slide(t,a,s)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(e(t.target),null,"ui-state-active"))}}})}),CKEDITOR.disableAutoInline=!0;var app={};$(function(){$("body").on("keypress",".num",no_letters_in_input),$("body").on("keypress",".onlyFloat",float_in_input),$("body").on("keyup",".onlyFloat",function(){this.value=this.value.replace(",",".")}),$("body").on("click",".print,.modal_open",function(){var e=$(this),t=e.data("link");if(t){var i=e.data("type"),n=e.hasClass("modal_open")?modal_open:print_href;if(i){if("editor"==i)return $.post(t,{data:JSON.stringify(editor.getData())},function(){var e=this;e.f(e.href)}.bind({href:t,f:n})),!0;if("send"==i)return void $.post(t,{data:JSON.stringify(editor.getData())});"test"==i&&(t+="&"+$(".modal-body form").serialize(),$(".modal-header .close").click())}n(t)}}),$("body").on("click","[data-toggle=tab]",tab_select),$(document).on("click",'[data-toggle="popover"]',function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this),i=t.data("bs.popover");"undefined"!=typeof i&&t.data("bs.popover").$tip.is(":visible")?$(this).popover("hide"):($('[data-toggle="popover"]').not(this).popover("hide"),t.popover({html:!0,trigger:"manual"}).popover("show"))}),$(document).on("click",function(e){$('[data-toggle="popover"]').popover("hide")}),"undefined"!=typeof moment&&(moment.langData()._meridiemParse=/[ap]\.?m?\.?/i,moment.langData().meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"})});var modal_open=function(e){$.get(e,function(e){var t=$("#ajaxCrudModal").modal("show"),i=t.find(".modal-header");0==i.find(".modal-title").length&&i.append('<h4 class="modal-title"/>'),t.find(".modal-body").html(e.content),t.find(".modal-footer").html(e.footer),t.find(".modal-title").html(e.title)},"json")},tab_select=function(e){e.preventDefault();var t=this.href.split("#");if(2==t.length){t=t[1];var i=$("#"+t);if(0!=i.length&&!i.hasClass("active")){var n=i.closest(".tab-content");n.find(".tab-pane.active").removeClass("active").removeClass("in"),i.addClass("in").addClass("active");var s=$(this);return s.closest(".nav-tabs").find("li.active").removeClass("active"),$(this).closest("li").addClass("active"),!1}}};$(function(){$("body").on("click","button.file_select",function(e){var t=$("meta[name=csrf-param]").attr("content"),i=$("meta[name=csrf-token]").attr("content"),n={};n[t]=i,param={startPathHash:"",customData:n,useBrowserHistory:!1,resizable:!1,width:"100%",height:"100%",zIndex:99999,url:"/elfinder/connect?filter=image",lang:app.language.split("-")[0].toLowerCase(),dialogContained:!0,getFileCallback:function(e){var t=$(this),i=t.attr("for"),n=$('[name="'+i+'"]'),s=$('img[for="'+i+'"]');n.val(e.url),s.length>0&&s.attr("src",e.url),jQuery("button.ui-dialog-titlebar-close").click()}.bind(this)},jQuery("<div >").dialog({modal:!0,width:"80%",title:app.i18n.insert_img,zIndex:99999,create:function(e,t){jQuery(this).elfinder(param).elfinder("instance")}}),$(".ui-dialog").css({"z-index":999999})})});var template=!1;$(function(){function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}$("#ajaxCrudModal").on("show.bs.modal",function(e){$("#ajaxCrudModal").find(".modal-header button.close").show()}),app.ckeditor_init=function(e){CKEDITOR.inline(e,{height:100,language:app.language,toolbarGroups:[{name:"undo"},{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","align"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},"/",{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"mode"}],removeButtons:"Flash,Table,Smiley,SpecialChar,PageBreak,Iframe",removePlugins:"elementspath",extraPlugins:"sourcedialog,token,imageresizerowandcolumn",resize_enabled:!1,filebrowserBrowseUrl:"/elfinder/manager",filebrowserImageBrowseUrl:"/elfinder/manager?filter=image",filebrowserFlashBrowseUrl:"/elfinder/manager?filter=flash",on:{instanceReady:function(t){mihaildev.ckEditor.registerOnChange(e)}}})},app.ckeditor_toggleReadOnly=function(e){app.ckeditor_isReadOnly(e)?app.ckeditor_setReadOnly(e,!1):app.ckeditor_setReadOnly(e,!0)},app.ckeditor_setReadOnly=function(e,t){CKEDITOR.instances[e].setReadOnly(t)},app.ckeditor_isReadOnly=function(e){return CKEDITOR.instances[e].readOnly},app.ckeditor_destroy=function(e){CKEDITOR.instances[e].destroy()},$('[role="ckeditor-inline"]').each(function(e,t){var i=$(t).attr("id");"undefined"!=typeof i&&app.ckeditor_init(i)}),CKEDITOR.plugins.add("token",{requires:"widget",init:function(e){var t="{",i="}",n=t.length,s=0-i.length;e.widgets.add("token",{requiredContent:"span(cke_token)",init:function(){this.setData("name",this.element.getText().slice(n,s))},data:function(){this.element.setText(t+this.data.name+i)},downcast:function(){return new CKEDITOR.htmlParser.text(t+this.data.name+i)}}),e.addFeature(e.widgets.registered.token),e.on("paste",function(e){var t=e.data.dataTransfer.getData("token");t&&(e.data.dataValue='<span class="cke_token">'+t+"</span>")})},afterInit:function(t){var i="{",n="}",s=e(i),o=e(n),a=new RegExp(s+"([^"+s+o+"])+"+o,"g");t.dataProcessor.dataFilter.addRules({text:function(e,i){var n=i.parent&&CKEDITOR.dtd[i.parent.name];if(!n||n.span)return e.replace(a,function(e){var i=null,n=new CKEDITOR.htmlParser.element("span",{"class":"cke_token"});return n.add(new CKEDITOR.htmlParser.text(e)),i=t.widgets.wrapElement(n,"token"),i.getOuterHtml()})}})}}),CKEDITOR.on("instanceReady",function(){CKEDITOR.document.getById("tokensList").on("dragstart",function(e){var t=e.data.getTarget().getAscendant("span",!0);CKEDITOR.plugins.clipboard.initDragDataTransfer(e);var i=e.data.dataTransfer;i.setData("token",t.getText()),i.setData("text/html",t.getText()),i.$.setDragImage&&i.$.setDragImage(t.$,0,0)})});var t,i,n,s=$("meta[name=csrf-param]").attr("content"),o=$("meta[name=csrf-token]").attr("content"),a="/elfinder/connect",r={image:"",flash:"",files:"",link:"",fb:"l1_Lw"},l=400,u={},c=function(e,t){$("<img/>").attr("src",e).on("load",function(){var e=this.naturalWidth,i=this.naturalHeight,n=l;(e>n||i>n)&&(e>i?(i=Math.floor(i*(n/e)),e=n):(e=Math.floor(e*(n/i)),i=n)),t({width:e,height:i})})},d=function(e,t){var n,s=t.convAbsUrl(e.url),o=CKEDITOR.dialog.getCurrent(),a=o._.name,r=o._.currentTabId;if("image"==a)n="txtUrl";else if("flash"==a)n="src";else if("files"==a||"link"==a)n="url";else{if("image2"!=a)return;n="src"}if("Upload"==r&&(r="info",o.selectPage(r)),o.setValueOf(r,n,s),"image"==a&&"info"==r)c(s,function(e){o.setValueOf("info","txtWidth",e.width),o.setValueOf("info","txtHeight",e.height),o.preview.$.style.width=e.width+"px",o.preview.$.style.height=e.height+"px",o.setValueOf("Link","txtUrl",s),o.setValueOf("Link","cmbTarget","_blank")});else if("image2"==a&&"info"==r)o.setValueOf(r,"alt",e.name+" ("+i.formatSize(e.size)+")"),c(s,function(e){setTimeout(function(){o.setValueOf("info","width",e.width),o.setValueOf("info","height",e.height)},100)});else if("files"==a||"link"==a)try{o.setValueOf("info","linkDisplayText",e.name)}catch(l){}};u[s]=o,CKEDITOR.on("dialogDefinition",function(e){for(var s,o,a,l,c=e.editor,p=e.data.definition,h=p.contents.length,f=0;f<h;f++){try{s=p.contents[f].get("browse"),o=p.contents[f].get("upload"),a=p.contents[f].get("uploadButton")}catch(g){s=o=null}null!==s&&(s.hidden=!1,s.onClick=function(e,s){n=CKEDITOR.dialog.getCurrent()._.name,"image2"===n&&(n="image"),t&&(r[n]&&r[n]!=i.cwd().hash&&i.request({data:{cmd:"open",target:r[n]},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!0}),t.dialog("open"))}),null!==o&&null!==a&&(o.hidden=!1,a.hidden=!1,o.onChange=function(){l=this.domId},a.onClick=function(e){n=CKEDITOR.dialog.getCurrent()._.name,"image2"===n&&(n="image");var t=r[n]?r[n]:r.fb,s=$("#"+l),o=s.find("iframe").contents().find("form").find("input:file"),a=function(e){alert(i.i18n(e).replace("<br>","\n"))};if(o.val()){var p=new FormData;p.append("cmd","upload"),p.append("target",t),p.append("overwrite",0),$.each(u,function(e,t){p.append(e,t)}),p.append("upload[]",o[0].files[0]),$.ajax({url:c.config.filebrowserUploadUrl,type:"POST",data:p,processData:!1,contentType:!1,dataType:"json"}).done(function(e){e.added&&e.added[0]?(i.exec("reload"),d(e.added[0])):a(e.error||e.warning||"errUploadFile")}).fail(function(){a("errUploadFile")}).always(function(){o.val("")})}return!1})}}),CKEDITOR.on("instanceReady",function(e){t=$('<div style="padding:0;">'),t.dialog({autoOpen:!1,modal:!0,width:"80%",title:"Server File Manager",create:function(e,s){var o=r[n]&&r[n]?r[n]:"";i=$(this).elfinder({startPathHash:o,useBrowserHistory:!1,resizable:!1,width:"100%",url:a,lang:app.language,dialogContained:!0,getFileCallback:function(e,i){d(e,i),t.dialog("close")}}).elfinder("instance")},open:function(){t.find("div.elfinder-toolbar input").blur(),setTimeout(function(){i.enable()},100)},resizeStop:function(){t.trigger("resize")}}).parent().css({zIndex:"11000"});var s=e.editor;s.on("fileUploadRequest",function(e){var t=r.image?r.image:r.fb,i=e.data.fileLoader,n=i.xhr,s=new FormData;e.stop(),n.open("POST",i.uploadUrl,!0),s.append("cmd","upload"),s.append("target",t),s.append("upload[]",i.file,i.fileName),n.send(s)},null,null,4),s.on("fileUploadResponse",function(e){var t;e.stop();var n=e.data,s=JSON.parse(n.fileLoader.xhr.responseText);if(!s.added||s.added.length<1)n.message="Can not upload.",e.cancel();else{if(i.exec("reload"),t=s.added[0],t.url&&"1"!=t.url){n.url=t.url;try{n.url=decodeURIComponent(n.url)}catch(e){}}else n.url=i.options.url+(i.options.url.indexOf("?")===-1?"?":"&")+"cmd=file&target="+t.hash;n.url=i.convAbsUrl(n.url)}})}),$(document).on("click",".shop-open-link",function(e){e.preventDefault();var t=$(this),i=$("#__visit-form__");modal.doRemote(t.attr("href"),"POST",i.serialize(),{contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0})})}),$(function(){$(document).on("click",".show_out_of_stock",function(e){this.checked?$(".shop_item.is-not-active").show():$(".shop_item.is-not-active").hide()})}),editor=function(){function e(){g||(g=function(){function e(e,t){return n[e]?n[e].render(t):""}function t(){return i}var i=!1,n={};return $.get("/admin/template/tpls",function(e){for(index in e)n[index]=Twig.twig({data:e[index]});i=!0},"json"),{render:e,ready:t}}())}function t(){var e=$(this),t=e.closest(".form-group").find("input"),i=e.val();t.val(i),$(".editor-full").css("background-color",i)}function i(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}function n(e){var t;t="object"==typeof e?$(".on_edit"):this.el;var i=this.name,n=this.value,s=t.data("params"),o=t.data("data"),a="";if(s[i].isLanguage){var r=$("[name=language]:checked").val();a=o[i][r],o[i][r]=n}else a=o[i],o[i]=n;t.data("data",o),s=s[i],s.sufix&&(n+=s.sufix,a+=s.sufix),s.prefix&&(n=s.prefix+n,a=s.prefix+a);var e="this"==s.el?t:t.find(s.el);for(param_k in s.params){var l=s.params[param_k];0==l.indexOf("style.")?(l=l.split("style.")[1],e[0].style[l]=n):"class"==l?(e.removeClass(a),e.addClass(n)):e[0][l]=n}}function s(e,t,n,s){var r=o(t,n,s);if(!r)return void e.remove();e.addClass("tag_wrap"),e.html(r),e.find(".col-empty").attr("empty_msg","No content here. Drag content from components.");var l=e.find(".li_wrap");if(n&&l.data("data",n),e.data("tag",t),a(t,l,!0,s),"table"==t){e.data("sub-tag",s);var c=e.eq(0).find(".sort_list");c.sortable({revert:!0,placeholder:"sortable-placeholder",stop:function(e,t){for(var i=t.item.closest(".li_wrap"),n=t.item.parent().find("li"),s=i.data("data"),o=[],a=0;a<n.length;a++){var r=n.eq(a).data("name");r&&o.push(r)}s.items=o,i.data("data",s)}}).disableSelection();var d=Object.assign(l.data("data"));"undefined"!=typeof n.items?d.items=n.items:d.items=i(table_list[s].list),"undefined"!=typeof n.hidden?d.hidden=n.hidden:d.hidden=[],l.data("data",d),c.find(".hide_show").on("click",function(){var e=$(this).closest("li"),t=e.data("name"),i=e.closest(".li_wrap"),n=i.data("data");"undefined"==typeof n.hidden&&(n.hidden=[]);var s=n.hidden.indexOf(t);e.hasClass("el_hidden")?(e.removeClass("el_hidden"),s>=0&&n.hidden.splice(s,1)):(e.addClass("el_hidden"),s==-1&&n.hidden.push(t)),i.data("data",n)})}if("row"==t){var p=e.find(".blockbuilder-row-tool-editor ul").sortable(v);if("undefined"!=typeof n.items)for(var h=0;h<n.items.length;h++)u(p.eq(h),n.items[h])}}function o(e,t,i){if(!options_list[e])return!1;if(t=t?Object.assign(t):{},t.editor=!0,"table"==e){if(!table_list[i])return!1;t.table=Object.assign(table_list[i]),"undefined"!=typeof t.items&&(t.table_list=t.items),"undefined"!=typeof t.hidden?t.table.hidden=t.hidden:t.table.hidden=[],"undefined"!=typeof t.direction?t.table.type=t.direction:t.direction=t.table.type,"undefined"==typeof t.items&&(t.items=Object.keys(t.table.list))}else"row"==e&&"undefined"==typeof t.rows&&(t.rows=i);i&&(t.sub_type=i);var n=g.render("editor_"+e,t);return!!n&&(n="<div class=li_wrap type='"+("row"==e?"row":"content")+"'>"+n+'<i class="glyphicon glyphicon-move handle"></i><i class="glyphicon glyphicon-trash trash"></i></div>')}function a(e,t,i,n){var s="",o={};if(t.data("data"))o=t.data("data");else if(o={},"table"==e){var a=table_list[n].type;o.direction=a}var r={};n&&table_list[n]&&table_list[n].hide&&(r=table_list[n].hide);var l={},u=[];tag_params=options_list[e];for(var c=$("[name=language]:checked").val(),d=$("[name=language]"),p=0;p<tag_params.length;p++){k=tag_params[p].title||tag_params[p].name,s+="<h4>"+k+"</h4>";for(var h=0;h<tag_params[p].items.length;h++){var f,g="this"==tag_params[p].items[h].element?t:t.find(tag_params[p].items[h].element),v=tag_params[p].items[h].name,y=!1;l[v]={},"undefined"!=typeof tag_params[p].items[h].param&&(y=tag_params[p].items[h].param.split("|"),l[v].params=y,tag_params[p].items[h].sufix&&(l[v].sufix=tag_params[p].items[h].sufix),tag_params[p].items[h].prefix&&(l[v].prefix=tag_params[p].items[h].prefix));var a=tag_params[p].items[h].type;if(l[v].type=a,l[v].el=tag_params[p].items[h].element,l[v].isLanguage=!!tag_params[p].items[h].isLanguage,i){if(f=r[v]?r[v]:o[v]?tag_params[p].items[h].isLanguage?o[v][c]:o[v]:"undefined"==typeof tag_params[p].items[h]["default"]?o[v]:tag_params[p].items[h]["default"],tag_params[p].items[h].isLanguage)if(t.addClass("hasLanguage"),u.push(v),"undefined"==typeof o[v]){o[v]={};for(var _=0;_<d.length;_++){var b=d.eq(_).val();o[v][b]=b+" "+f}f=o[v][c]}else o[v][c]=f;else o[v]=f;if(tag_params[p].items[h].sufix&&(f+=tag_params[p].items[h].sufix),tag_params[p].items[h].prefix&&(f=tag_params[p].items[h].prefix+f),y)for(param_k in y){var x=y[param_k],w=!1;0==x.indexOf("style.")&&(w=!0,x=x.split("style.")[1]),g.length>0&&(w?g[0].style[x]=f:"style"==g[0][x]?g.addClass(f):g[0][x]=f)}}else f=tag_params[p].items[h].isLanguage?o[v][c]:o[v];if("none"!=a&&!r[v])if("ckeditor"!=a){var k=tag_params[p].items[h].title||tag_params[p].items[h].name,C="undefined"!=typeof tag_params[p].items[h].list?tag_params[p].items[h].list:[];if(s+=tag_params[p].items[h].isLanguage?"<label class='isLanguage'><span>"+k+"</span><br>":"<label>"+k+"<br>","text"==a&&(s+='<input name="'+v+'" value="'+f+'">'),"number"==a&&(s+='<input name="'+v+'" class=num value="'+f+'">'),"color"==a&&(s+='<input name="'+v+'" type=color value="'+f+'">'),"font"==a&&(C=["Arial","Verdana","Times New Roman","Georgia","Verdana","Courier New","Lucida Console"],a="select"),"align"==a&&(C=align_list,a="select"),"select"==a){s+='<select name="'+v+'">';for(var D in C){var A=Array.isArray(C)?C[D]:D,E=A==f?"  selected":"";s+="<option value='"+A+"'"+E+">"+C[D]+"</option>"}s+="</select>"}s+="</label>"}else if(l[v].editor_id=g.attr("id"),!l[v].editor_id){for(;$("#cedit_"+m).length>0;)m++;l[v].editor_id="cedit_"+m,g.attr("id","cedit_"+m),g.attr("name",v),g.html(f),g.on("change",function(){var e=this.el,t=this.parent,i=e.attr("name"),n=t.data("params"),s=t.data("data"),o=e.val(),a="";if(n[i].isLanguage){var r=$("[name=language]:checked").val();a=s[i][r],s[i][r]=o}else a=s[i],s[i]=o;t.data("data",s)}.bind({el:g,parent:t})),app.ckeditor_init("cedit_"+m),g.data("data",o)}}}return i&&(t.data("data",o),t.data("lg_var",u)),t.data("params",l),s}function r(e){for(var t=[],i=e.find(">li"),n=0;n<i.length;n++){var s=i.eq(n),o=Object.assign(s.find(">.li_wrap").data("data")),a=s.data("tag"),l=s.data("sub-tag"),u={type:a,data:o};if("table"==a&&(u.sub_type=l,u.data&&u.data.table&&delete u.data.table),u.data&&u.data.editor&&delete u.data.editor,"row"==a){$sub_ul=s.find(".editor-content-row"),u.data.items=[];for(var c=0;c<$sub_ul.length;c++)u.data.items.push(r($sub_ul.eq(c)))}t.push(u)}return t}function l(){data={data:r($(".editor-content"))},els=$("#content-subject,#content-text").find(".hasLanguage");for(var e=0;e<els.length;e++){var t=els.eq(e),i=t.data("data");data[t.attr("name")]=i}return data}function u(e,t){e.html("");for(var i=0;i<t.length;i++){var n=$("<li/>");e.append(n),s(n,t[i].type,t[i].data,t[i].sub_type)}e.find(">li").length>0&&e.removeClass("col-empty")}function c(e){if(!g.ready())return void setTimeout(function(){editor.setData(this)}.bind(e),100);"string"==typeof e&&(e=JSON.parse(e));var t=$(".editor-content");"undefined"!=typeof e.data&&u(t,e.data),"undefined"!=typeof e.subject&&$("#content-subject .editor-content-input").data("data",e.subject),"undefined"!=typeof e.text&&$("#content-text .editor-content-textarea").data("data",e.text),$("[name=language]").change()}function d(){var e,t=$("[name=language]:checked").val();e="DIV"===this.nodeName?f($(this).html()):$(this).val();var i=$(this).data("data");i[t]=e,$(this).data("data",i)}function p(e){el=this;var t=h(el.innerHTML,el.classList.contains("is_string"));if(el.innerHTML!=t){el.innerHTML=t;var i=document.createRange();i.selectNodeContents(el),i.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(i)}}function h(e,t){var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;e=e.replace(i,function(e,i){return"<span>".indexOf("<"+i.toLowerCase()+">")>-1?e:!t&&"<div><p><br>".indexOf("<"+i.toLowerCase()+">")>-1?e:"";
});var n=/\{\/?([a-z0-9\.\ _]*)\}/gi;return e=e.replace(n,function(e,t){return"<span contentEditable = false>{ <span>"+t.trim()+"</span> }</span>"})}function f(e){var t=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e=e.replace(t,function(e,t){return"<div><p><br>".indexOf("<"+t.toLowerCase()+">")>-1?"\n":""})}var g=!1;e();var m=0,v={revert:!0,placeholder:"sortable-placeholder",connectWith:".editor-content-row,.editor-content",handle:".handle",stop:function(e,t){if(t.item.hasClass("ui-draggable")){t.item[0].removeAttribute("class"),t.item[0].removeAttribute("style");var i=t.item.data("tag"),n=t.item.data("sub-tag");if("row"==i){n=[];var o=t.item.find(".blockbuilder-column");for(col_k in o){var a=o[col_k];for(class_k in a.classList){var r=a.classList[class_k];if(0==r.indexOf("col-")){n.push(r.substr(4));break}}}}s(t.item,i,{},n)}var l=t.item.closest(".editor-content-row");l.length>0&&l.find(".tag_wrap").length>0&&l.removeClass("col-empty")},start:function(e,t){var i=t.item.closest(".editor-content-row");i.length>0&&1==i.find(".tag_wrap").length&&i.addClass("col-empty")}};$("#editor-components li").draggable({connectToSortable:".editor-content,.editor-content-row",helper:"clone",revert:"invalid",opacity:.5}).disableSelection(),$("#editor-row li").draggable({connectToSortable:".editor-content",helper:"clone",revert:"invalid",opacity:.5}).disableSelection(),$(".editor-content").on("click","a",function(e){return e.preventDefault(),e.preventDefault(),e.stopPropagation(),!1}),$(".editor-panel .width").on("change",function(){$(".editor-content").css("width",this.value)}),$(".editor-panel .color").closest(".form-group").find("input").on("change",t).on("input",t).on("keyup",t),$("[name=language]").on("change",function(){var e=$(".editor-content .on_edit");e.length>0&&(e.removeClass("on_edit"),e.click());for(var t=$("[name=language]:checked").val(),i=$(".editor-content .hasLanguage"),s=0;s<i.length;s++){var o=i.eq(s),a=o.data("lg_var"),r=o.data("data"),l=o.data("params");for(name_i in a){var u=a[name_i];if("ckeditor"!=l[u].type){var c="undefined"!=typeof r[u]&&"undefined"!=typeof r[u][t]?r[u][t]:"";n.bind({name:u,value:c,el:o})()}else CKEDITOR.instances[l[u].editor_id].setData(r[u][t])}}i=$("#content-subject,#content-text").find(".hasLanguage");for(var s=0;s<i.length;s++){var o=i.eq(s),r=o.data("data"),c="undefined"!=typeof r[t]?r[t]:"";o.val(c),o.html(h(c).split("\n").join("<br>\n"))}}),$(".editor-content").sortable(v).on("click",".li_wrap",function(e){if($this=$(this),!$this.hasClass("on_edit")){$this.closest(".editor-content").find(".on_edit").removeClass("on_edit"),$this.addClass("on_edit");var t=$('.editor-panel [href="#editor-option"]');t.parent().removeClass("hidden"),tab_select.bind(t[0])(e);var i=$("#editor-option");return i.html(a($this.parent().data("tag"),$this,!1,$this.parent().data("subTag"))),i.find("input,select").on("change",n).on("input",n).on("keyup",n),!1}}).on("click",".trash",function(e){e.preventDefault(),e.stopPropagation();var t=$(this),i=t.closest(".tag_wrap");if(t.closest(".li_wrap").hasClass("on_edit")){var n=$('.editor-panel [href="#editor-option"]');n.parent().hasClass("active")&&tab_select.bind(n.closest("ul").find("li:first").find("a")[0])(e),n.parent().addClass("hidden")}var s=t.closest(".editor-content-row");s.length>0&&1==s.find(".tag_wrap").length&&s.addClass("col-empty"),i.remove()});var y=$("<div/>",{"class":"hasLanguage editor-content-input form-control is_string",contenteditable:"true",name:"subject"}).data("data",{}).on("input",p).on("keyup",d);$("#content-subject").append("Тема письма").append(y);var y=$("<div/>",{"class":"hasLanguage editor-content-textarea",contenteditable:"true",name:"text"}).data("data",{}).on("input",p).on("keyup",d);$("#content-text").find("div").append(y);var _=$(".w_editor");return 1==_.length&&(_.hide(),c(JSON.parse(_.val())),$(".editor-panel .btn-save").on("click",function(){$(".w_editor").val(JSON.stringify(l())),$(".w_editor").closest("form").submit()})),$(".editor-panel .btn-send").on("click",function(){var e={action:$(".w_editor").closest("form").attr("action"),language:$("[name=language]:checked").val(),data:JSON.stringify(l()),"_csrf-frontend":$(".w_editor").closest("form").find("[name=_csrf-frontend]").val()};$.post("/admin/template/preview?db=1",e,function(e){var t={buttonYes:!1,notyfy_class:"send-email",question:e.html};e.title&&(t.title=e.title),notification.alert(t),ajaxForm($(".notify_box .notify_content"))},"json")}),{getData:l,setData:c,sort_params:v}}(),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Twig=t():e.Twig=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var n={VERSION:"0.10.2"};i(1)(n),i(2)(n),i(3)(n),i(5)(n),i(6)(n),i(7)(n),i(17)(n),i(18)(n),i(22)(n),i(23)(n),i(24)(n),i(25)(n),i(26)(n),i(27)(n),i(28)(n),e.exports=n.exports},function(e,t){e.exports=function(e){"use strict";function t(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e}return e.trace=!1,e.debug=!1,e.cache=!0,e.noop=function(){},e.placeholders={parent:"{{|PARENT|}}"},e.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(void 0===e||null===e)throw new TypeError;var i=Object(e),n=i.length>>>0;if(0===n)return-1;var s=0;if(arguments.length>0&&(s=Number(arguments[1]),s!==s?s=0:0!==s&&s!==1/0&&s!==-(1/0)&&(s=(s>0||-1)*Math.floor(Math.abs(s)))),s>=n)return-1;for(var o=s>=0?s:Math.max(n-Math.abs(s),0);o<n;o++)if(o in i&&i[o]===t)return o;return e==t?0:-1},e.forEach=function(e,t,i){if(Array.prototype.forEach)return e.forEach(t,i);var n,s;if(null==e)throw new TypeError(" this is null or not defined");var o=Object(e),a=o.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(i&&(n=i),s=0;s<a;){var r;s in o&&(r=o[s],t.call(n,r,s,o)),s++}},e.merge=function(t,i,n){return e.forEach(Object.keys(i),function(e){(!n||e in t)&&(t[e]=i[e])}),t},e.Error=function(e,t){this.message=e,this.name="TwigException",this.type="TwigException",this.file=t},e.Error.prototype.toString=function(){var e=this.name+": "+this.message;return e},e.log={trace:function(){e.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){e.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?"undefined"!=typeof console.error?e.log.error=function(){console.error.apply(console,arguments)}:"undefined"!=typeof console.log&&(e.log.error=function(){console.log.apply(console,arguments)}):e.log.error=function(){},e.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},e.token={},e.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},e.token.definitions=[{type:e.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:e.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:e.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:e.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:e.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:e.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:e.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:e.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:e.token.type.output,open:"{{",close:"}}"},{type:e.token.type.logic,open:"{%",close:"%}"},{type:e.token.type.comment,open:"{#",close:"#}"}],e.token.strings=['"',"'"],e.token.findStart=function(t){var i,n,s,o,a={position:null,close_position:null,def:null};for(i=0;i<e.token.definitions.length;i++)n=e.token.definitions[i],s=t.indexOf(n.open),o=t.indexOf(n.close),e.log.trace("Twig.token.findStart: ","Searching for ",n.open," found at ",s),s>=0&&n.open.length!==n.close.length&&o<0||(s>=0&&(null===a.position||s<a.position)?(a.position=s,a.def=n,a.close_position=o):s>=0&&null!==a.position&&s===a.position&&(n.open.length>a.def.open.length?(a.position=s,a.def=n,a.close_position=o):n.open.length===a.def.open.length&&(n.close.length>a.def.close.length?o>=0&&o<a.close_position&&(a.position=s,a.def=n,a.close_position=o):o>=0&&o<a.close_position&&(a.position=s,a.def=n,a.close_position=o))));return delete a.close_position,a},e.token.findEnd=function(t,i,n){for(var s,o,a=null,r=!1,l=0,u=null,c=null,d=null,p=null,h=null,f=null;!r;){if(u=null,c=null,d=t.indexOf(i.close,l),!(d>=0))throw new e.Error("Unable to find closing bracket '"+i.close+"' opened near template position "+n);if(a=d,r=!0,i.type===e.token.type.comment)break;if(i.type===e.token.type.raw)break;for(o=e.token.strings.length,s=0;s<o;s+=1)h=t.indexOf(e.token.strings[s],l),h>0&&h<d&&(null===u||h<u)&&(u=h,c=e.token.strings[s]);if(null!==u)for(p=u+1,a=null,r=!1;;){if(f=t.indexOf(c,p),f<0)throw"Unclosed string in template";if("\\"!==t.substr(f-1,1)){l=f+1;break}p=f+1}}return a},e.tokenize=function(t){for(var i=[],n=0,s=null,o=null;t.length>0;)if(s=e.token.findStart(t),e.log.trace("Twig.tokenize: ","Found token: ",s),null!==s.position){if(s.position>0&&i.push({type:e.token.type.raw,value:t.substring(0,s.position)}),t=t.substr(s.position+s.def.open.length),n+=s.position+s.def.open.length,o=e.token.findEnd(t,s.def,n),e.log.trace("Twig.tokenize: ","Token ends at ",o),i.push({type:s.def.type,value:t.substring(0,o).trim()}),"\n"===t.substr(o+s.def.close.length,1))switch(s.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":o+=1}t=t.substr(o+s.def.close.length),n+=o+s.def.close.length}else i.push({type:e.token.type.raw,value:t}),t="";return i},e.compile=function(t){try{for(var i=[],n=[],s=[],o=null,a=null,r=null,l=null,u=null,c=null,d=null,p=null,h=null,f=null,g=null,m=null,v=function(t){e.expression.compile.apply(this,[t]),n.length>0?s.push(t):i.push(t)},y=function(t){if(a=e.logic.compile.apply(this,[t]),f=a.type,g=e.logic.handler[f].open,m=e.logic.handler[f].next,e.log.trace("Twig.compile: ","Compiled logic token to ",a," next is: ",m," open is : ",g),void 0!==g&&!g){if(l=n.pop(),d=e.logic.handler[l.type],e.indexOf(d.next,f)<0)throw new Error(f+" not expected after a "+l.type);l.output=l.output||[],l.output=l.output.concat(s),s=[],h={type:e.token.type.logic,token:l},n.length>0?s.push(h):i.push(h)}void 0!==m&&m.length>0?(e.log.trace("Twig.compile: ","Pushing ",a," to logic stack."),n.length>0&&(l=n.pop(),l.output=l.output||[],l.output=l.output.concat(s),n.push(l),s=[]),n.push(a)):void 0!==g&&g&&(h={type:e.token.type.logic,token:a},n.length>0?s.push(h):i.push(h))};t.length>0;){switch(o=t.shift(),u=i[i.length-1],c=s[s.length-1],p=t[0],e.log.trace("Compiling token ",o),o.type){case e.token.type.raw:n.length>0?s.push(o):i.push(o);break;case e.token.type.logic:y.call(this,o);break;case e.token.type.comment:break;case e.token.type.output:v.call(this,o);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:switch(o.type!==e.token.type.output_whitespace_post&&o.type!==e.token.type.logic_whitespace_post&&(u&&u.type===e.token.type.raw&&(i.pop(),null===u.value.match(/^\s*$/)&&(u.value=u.value.trim(),i.push(u))),c&&c.type===e.token.type.raw&&(s.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),s.push(c)))),o.type){case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:v.call(this,o);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:y.call(this,o)}o.type!==e.token.type.output_whitespace_pre&&o.type!==e.token.type.logic_whitespace_pre&&p&&p.type===e.token.type.raw&&(t.shift(),null===p.value.match(/^\s*$/)&&(p.value=p.value.trim(),t.unshift(p)))}e.log.trace("Twig.compile: "," Output: ",i," Logic Stack: ",n," Pending Output: ",s)}if(n.length>0)throw r=n.pop(),new Error("Unable to find an end tag for "+r.type+", expecting one of "+r.next);return i}catch(t){if(this.options.rethrow)throw"TwigException"!=t.type||t.file||(t.file=this.id),t;e.log.error("Error compiling twig template "+this.id+": "),t.stack?e.log.error(t.stack):e.log.error(t.toString())}},e.parse=function(t,i,n){function s(t){if(o.options.rethrow)throw"string"==typeof t&&(t=new e.Error(t)),"TwigException"!=t.type||t.file||(t.file=o.id),t;if(e.log.error("Error parsing twig template "+o.id+": "),t.stack?e.log.error(t.stack):e.log.error(t.toString()),e.debug)return t.toString()}var o=this,a=[],r=null,l=!0,u=null,c=!0;if(u=e.async.forEach(t,function(t){switch(e.log.debug("Twig.parse: ","Parsing token: ",t),t.type){case e.token.type.raw:a.push(e.filters.raw(t.value));break;case e.token.type.logic:var n=t.token;return e.logic.parseAsync.apply(o,[n,i,c]).then(function(e){void 0!==e.chain&&(c=e.chain),void 0!==e.context&&(i=e.context),void 0!==e.output&&a.push(e.output)});case e.token.type.comment:break;case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:case e.token.type.output:return e.log.debug("Twig.parse: ","Output token: ",t.stack),e.expression.parseAsync.apply(o,[t.stack,i]).then(function(e){a.push(e)})}}).then(function(){return a=e.output.apply(o,[a]),l=!1,a})["catch"](function(e){n&&s(e),r=e}),n)return u;if(null!==r)return s(r);if(l)throw new e.Error("You are using Twig.js in sync mode in combination with async extensions.");return a},e.prepare=function(t){var i,n;return e.log.debug("Twig.prepare: ","Tokenizing ",t),n=e.tokenize.apply(this,[t]),e.log.debug("Twig.prepare: ","Compiling ",n),i=e.compile.apply(this,[n]),e.log.debug("Twig.prepare: ","Compiled ",i),i},e.output=function(t){if(!this.options.autoescape)return t.join("");var i="html";"string"==typeof this.options.autoescape&&(i=this.options.autoescape);var n=[];return e.forEach(t,function(t){t&&t.twig_markup!==!0&&t.twig_markup!=i&&(t=e.filters.escape(t,[i])),n.push(t)}),e.Markup(n.join(""))},e.Templates={loaders:{},parsers:{},registry:{}},e.validateId=function(t){if("prototype"===t)throw new e.Error(t+" is not a valid twig identifier");if(e.cache&&e.Templates.registry.hasOwnProperty(t))throw new e.Error("There is already a template with the ID "+t);return!0},e.Templates.registerLoader=function(t,i,n){if("function"!=typeof i)throw new e.Error("Unable to add loader for "+t+": Invalid function reference given.");n&&(i=i.bind(n)),this.loaders[t]=i},e.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},e.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},e.Templates.registerParser=function(t,i,n){if("function"!=typeof i)throw new e.Error("Unable to add parser for "+t+": Invalid function regerence given.");n&&(i=i.bind(n)),this.parsers[t]=i},e.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},e.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error("Unable to save template with no id");e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,i,n,s){var o;return void 0===i.async&&(i.async=!0),void 0===i.id&&(i.id=t),e.cache&&e.Templates.registry.hasOwnProperty(i.id)?("function"==typeof n&&n(e.Templates.registry[i.id]),e.Templates.registry[i.id]):(i.parser=i.parser||"twig",o=this.loaders[i.method]||this.loaders.fs,o.apply(this,arguments))},e.Template=function(i){var n=i.data,s=i.id,o=i.blocks,a=i.macros||{},r=i.base,l=i.path,u=i.url,c=i.name,d=i.method,p=i.options;this.id=s,this.method=d,this.base=r,this.path=l,this.url=u,this.name=c,this.macros=a,this.options=p,this.reset(o),t("String",n)?this.tokens=e.prepare.apply(this,[n]):this.tokens=n,void 0!==s&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:t||{}},this.extend=null},e.Template.prototype.render=function(t,i,n){i=i||{};var s,o,a=this,r=null,l=!0,u=null;this.context=t||{},this.reset(),i.blocks&&(this.blocks=i.blocks),i.macros&&(this.macros=i.macros);var c=function(t){if(a.extend){var n;return a.options.allowInlineIncludes&&(n=e.Templates.load(a.extend),n&&(n.options=a.options)),n||(o=e.path.parsePath(a,a.extend),n=e.Templates.loadRemote(o,{method:a.getLoaderMethod(),base:a.base,async:!1,id:o,options:a.options})),a.parent=n,a.parent.renderAsync(a.context,{blocks:a.blocks})}return"blocks"==i.output?a.blocks:"macros"==i.output?a.macros:t};if(u=e.parseAsync.apply(this,[this.tokens,this.context]).then(c).then(function(e){return l=!1,s=e,e})["catch"](function(e){if(n)throw e;r=e}),n)return u;if(null!==r)throw r;if(l)throw new e.Error("You are using Twig.js in sync mode in combination with async extensions.");return s},e.Template.prototype.importFile=function(t){var i,n;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?e.path.parsePath(this,t):t,n=e.Templates.load(t),!n&&(n=e.Templates.loadRemote(i,{id:t,method:this.getLoaderMethod(),async:!1,path:t,options:this.options}),!n))throw new e.Error("Unable to find the template "+t);return n.options=this.options,n}return i=e.path.parsePath(this,t),n=e.Templates.loadRemote(i,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:i})},e.Template.prototype.importBlocks=function(t,i){var n=this.importFile(t),s=this.context,o=this;i=i||!1,n.render(s),e.forEach(Object.keys(n.blocks),function(e){(i||void 0===o.blocks[e])&&(o.blocks[e]=n.blocks[e],o.importedBlocks.push(e))})},e.Template.prototype.importMacros=function(t){var i=e.path.parsePath(this,t),n=e.Templates.loadRemote(i,{method:this.getLoaderMethod(),async:!1,id:i});return n},e.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e.Markup=function(e,t){return"undefined"==typeof t&&(t=!0),"string"==typeof e&&e.length>0&&(e=new String(e),e.twig_markup=t),e},e}},function(e,t){e.exports=function(e){return e.compiler={module:{}},e.compiler.compile=function(t,i){var n,s=JSON.stringify(t.tokens),o=t.id;if(i.module){if(void 0===e.compiler.module[i.module])throw new e.Error("Unable to find module type "+i.module);n=e.compiler.module[i.module](o,s,i.twig)}else n=e.compiler.wrap(o,s);return n},e.compiler.module={amd:function(t,i,n){return'define(["'+n+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+e.compiler.wrap(t,i)+"\n\treturn templates;\n});"},node:function(t,i){return'var twig = require("twig").twig;\nexports.template = '+e.compiler.wrap(t,i)},cjs2:function(t,i,n){return'module.declare([{ twig: "'+n+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+e.compiler.wrap(t,i)+"\n});"}},e.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},e}},function(e,t,i){e.exports=function(e){"use strict";function t(t,i,n){return i?e.expression.parseAsync.apply(t,[i,n]):e.Promise.resolve(!1)}e.expression={},i(4)(e),e.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if"],e.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.subexpression.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start,e.expression.type.subexpression.start,e.expression.type.operator.unary]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets,e.expression.type.slice]),e.expression.fn={compile:{push:function(e,t,i){i.push(e)},push_both:function(e,t,i){i.push(e),t.push(e)}},parse:{push:function(e,t,i){t.push(e)},push_value:function(e,t,i){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*(\s?as)?)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(i,n,s){var o=n.pop();return t(this,i.params,s).then(function(t){var s=e.test(i.filter,o,t);"not"==i.modifier?n.push(!s):n.push(s)})}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,i,n){var s,o=i.length-1;for(delete t.match,delete t.value;o>=0;o--){if(s=i.pop(),s.type===e.expression.type.object.start||s.type===e.expression.type.parameter.start||s.type===e.expression.type.array.start){i.push(s);break}n.push(s)}n.push(t)}},{type:e.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:e.expression.set.operations,compile:function(e,t,i){e.value=Number(e.value),i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.operator.binary,regex:/(^\?\:|^(b\-and)|^(b\-or)|^(b\-xor)|^[\+\-~%\?]|^[\:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[\(|\s+]|^(or)[\(|\s+]|^(in)[\(|\s+]|^(not in)[\(|\s+]|^\.\.)/,next:e.expression.set.expressions,transform:function(e,t){switch(e[0]){case"and(":case"or(":case"in(":case"not in(":return t[t.length-1].value=e[2],e[0];default:return""}},compile:function(t,i,n){delete t.match,t.value=t.value.trim();var s=t.value,o=e.expression.operator.lookup(s,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",o," from ",s);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(o.associativity===e.expression.operator.leftToRight&&o.precidence>=i[i.length-1].precidence||o.associativity===e.expression.operator.rightToLeft&&o.precidence>i[i.length-1].precidence);){var a=i.pop();n.push(a)}if(":"===s){if(!i[i.length-1]||"?"!==i[i.length-1].value){var r=n.pop();if(r.type===e.expression.type.string||r.type===e.expression.type.variable)t.key=r.value;else if(r.type===e.expression.type.number)t.key=r.value.toString();else{if(!r.expression||r.type!==e.expression.type.parameter.end&&r.type!=e.expression.type.subexpression.end)throw new e.Error("Unexpected value before ':' of "+r.type+" = "+r.value);t.params=r.params}return void n.push(t)}}else i.push(o)},parse:function(t,i,n){if(t.key)i.push(t);else{if(t.params)return e.expression.parseAsync.apply(this,[t.params,n]).then(function(e){t.key=e,i.push(t),n.loop||delete t.params});e.expression.operator.parse(t.value,i)}}},{type:e.expression.type.operator.unary,regex:/(^not\s+)/,next:e.expression.set.expressions,compile:function(t,i,n){delete t.match,t.value=t.value.trim();var s=t.value,o=e.expression.operator.lookup(s,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",o," from ",s);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(o.associativity===e.expression.operator.leftToRight&&o.precidence>=i[i.length-1].precidence||o.associativity===e.expression.operator.rightToLeft&&o.precidence>i[i.length-1].precidence);){var a=i.pop();n.push(a)}i.push(o)},parse:function(t,i,n){e.expression.operator.parse(t.value,i)}},{type:e.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:e.expression.set.operations_extended,compile:function(t,i,n){var s=t.value;delete t.match,s='"'===s.substring(0,1)?s.replace('\\"','"'):s.replace("\\'","'"),t.value=s.substring(1,s.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),e.log.trace("Twig.expression.compile: ","String value: ",t.value),n.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.subexpression.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.subexpression.end]),compile:function(e,t,i){e.value="(",i.push(e),t.push(e)},parse:e.expression.fn.parse.push},{type:e.expression.type.subexpression.end,regex:/^\)/,next:e.expression.set.operations_extended,validate:function(t,i){for(var n=i.length-1,s=!1,o=!1,a=0;!s&&n>=0;){var r=i[n];s=r.type===e.expression.type.subexpression.start,s&&o&&(o=!1,s=!1),r.type===e.expression.type.parameter.start?a++:r.type===e.expression.type.parameter.end?a--:r.type===e.expression.type.subexpression.end&&(o=!0),n--}return s&&0===a},compile:function(t,i,n){var s,o=t;for(s=i.pop();i.length>0&&s.type!=e.expression.type.subexpression.start;)n.push(s),s=i.pop();for(var a=[];t.type!==e.expression.type.subexpression.start;)a.unshift(t),t=n.pop();a.unshift(t),s=i[i.length-1],void 0===s||s.type!==e.expression.type._function&&s.type!==e.expression.type.filter&&s.type!==e.expression.type.test&&s.type!==e.expression.type.key.brackets?(o.expression=!0,a.pop(),a.shift(),o.params=a,n.push(o)):(o.expression=!1,s.params=a)},parse:function(t,i,n){if(t.expression)return e.expression.parseAsync.apply(this,[t.params,n]).then(function(e){i.push(e)});throw new e.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:e.expression.type.parameter.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),validate:function(t,i){var n=i[i.length-1];return n&&e.indexOf(e.expression.reservedWords,n.value.trim())<0},compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\)/,next:e.expression.set.operations_extended,compile:function(t,i,n){var s,o=t;for(s=i.pop();i.length>0&&s.type!=e.expression.type.parameter.start;)n.push(s),s=i.pop();for(var a=[];t.type!==e.expression.type.parameter.start;)a.unshift(t),t=n.pop();a.unshift(t),t=n[n.length-1],void 0===t||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets?(o.expression=!0,a.pop(),a.shift(),o.params=a,n.push(o)):(o.expression=!1,t.params=a)},parse:function(t,i,n){var s=[],o=!1,a=null;if(t.expression)return e.expression.parseAsync.apply(this,[t.params,n]).then(function(e){i.push(e)});for(;i.length>0;){if(a=i.pop(),a&&a.type&&a.type==e.expression.type.parameter.start){o=!0;break}s.unshift(a)}if(!o)throw new e.Error("Expected end of parameter set.");i.push(s)}},{type:e.expression.type.slice,regex:/^\[(\d*\:\d*)\]/,next:e.expression.set.operations_extended,compile:function(e,t,i){var n=e.match[1].split(":"),s=n[0]?parseInt(n[0]):void 0,o=n[1]?parseInt(n[1]):void 0;e.value="slice",e.params=[s,o],o||(e.params=[s]),i.push(e)},parse:function(t,i,n){var s=i.pop(),o=t.params;i.push(e.filter.apply(this,[t.value,s,o]))}},{type:e.expression.type.array.start,regex:/^\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\]/,next:e.expression.set.operations_extended,compile:function(t,i,n){for(var s,o=i.length-1;o>=0&&(s=i.pop(),s.type!==e.expression.type.array.start);o--)n.push(s);n.push(t)},parse:function(t,i,n){for(var s=[],o=!1,a=null;i.length>0;){if(a=i.pop(),a.type&&a.type==e.expression.type.array.start){o=!0;break}s.unshift(a)}if(!o)throw new e.Error("Expected end of array.");i.push(s)}},{type:e.expression.type.object.start,regex:/^\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\}/,next:e.expression.set.operations_extended,compile:function(t,i,n){for(var s,o=i.length-1;o>=0&&(s=i.pop(),!s||s.type!==e.expression.type.object.start);o--)n.push(s);n.push(t)},parse:function(t,i,n){for(var s={},o=!1,a=null,r=!1,l=null;i.length>0;){if(a=i.pop(),a&&a.type&&a.type===e.expression.type.object.start){o=!0;break}if(a&&a.type&&(a.type===e.expression.type.operator.binary||a.type===e.expression.type.operator.unary)&&a.key){if(!r)throw new e.Error("Missing value for key '"+a.key+"' in object definition.");s[a.key]=l,void 0===s._keys&&(s._keys=[]),s._keys.unshift(a.key),l=null,r=!1}else r=!0,l=a}if(!o)throw new e.Error("Unexpected end of object.");i.push(s)}},{type:e.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.value=e.match[1],i.push(e)},parse:function(i,n,s){var o=this,a=n.pop();return t(this,i.params,s).then(function(t){return e.filter.apply(o,[i.value,a,t])}).then(function(e){n.push(e)})}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:e.expression.type.parameter.start,validate:function(t,i){return t[1]&&e.indexOf(e.expression.reservedWords,t[1])<0},transform:function(e,t){return"("},compile:function(e,t,i){var n=e.match[1];e.fn=n,delete e.match,delete e.value,i.push(e)},parse:function(i,n,s){var o,a=this,r=i.fn;return t(this,i.params,s).then(function(t){if(e.functions[r])o=e.functions[r].apply(a,t);else{if("function"!=typeof s[r])throw new e.Error(r+" function does not exist and is not defined in the context");o=s[r].apply(s,t)}return o}).then(function(e){n.push(e)})}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t,i){return e.indexOf(e.expression.reservedWords,t[0])<0},parse:function(t,i,n){return e.expression.resolveAsync.apply(this,[n[t.value],n]).then(function(e){i.push(e)})}},{type:e.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.key=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(i,n,s,o){var a,r=this,l=i.key,u=n.pop();return t(this,i.params,s).then(function(t){if(null===u||void 0===u){if(r.options.strict_variables)throw new e.Error("Can't access a key "+l+" on an null or undefined object.");a=void 0}else{var i=function(e){return e.substr(0,1).toUpperCase()+e.substr(1);
};a="object"==typeof u&&l in u?u[l]:void 0!==u["get"+i(l)]?u["get"+i(l)]:void 0!==u["is"+i(l)]?u["is"+i(l)]:void 0}return e.expression.resolveAsync.apply(r,[a,s,t,o,u])}).then(function(e){n.push(e)})}},{type:e.expression.type.key.brackets,regex:/^\[([^\]\:]*)\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,i,n){var s=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:s}).stack,n.push(t)},parse:function(i,n,s,o){var a,r,l=this,u=null;return t(this,i.params,s).then(function(t){return u=t,e.expression.parseAsync.apply(l,[i.stack,s])}).then(function(t){if(a=n.pop(),null===a||void 0===a){if(l.options.strict_variables)throw new e.Error("Can't access a key "+t+" on an null or undefined object.");return null}return r="object"==typeof a&&t in a?a[t]:null,e.expression.resolveAsync.apply(l,[r,a,u,o])}).then(function(e){n.push(e)})}},{type:e.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:e.expression.set.operations,compile:function(e,t,i){delete e.match,e.value=null,i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,i){t.push(i)}},{type:e.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:e.expression.set.operations,compile:function(e,t,i){e.value="true"===e.match[0].toLowerCase(),delete e.match,i.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolveAsync=function(t,i,n,s,o){if("function"==typeof t){var a=e.Promise.resolve(n);if(s&&s.type===e.expression.type.parameter.end){var r=!0;a=a.then(function(){return s.params&&e.expression.parseAsync.apply(this,[s.params,i,r])}).then(function(e){return s.cleanup=!0,e})}return a.then(function(e){return t.apply(o||i,e||[])})}return e.Promise.resolve(t)},e.expression.resolve=function(t,i,n,s,o){var a,r=!0;if(e.expression.resolveAsync.apply(this,[t,i,n,s,o]).then(function(e){r=!1,a=e}),r)throw new e.Error("You are using Twig.js in sync mode in combination with async extensions.");return a},e.expression.handler={},e.expression.extendType=function(t){e.expression.type[t]="Twig.expression.type."+t},e.expression.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.expression.handler[t.type]=t};for(;e.expression.definitions.length>0;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var i,n,s,o,a,r,l=[],u=0,c=null,d=[];for(r=function(){var t=Array.prototype.slice.apply(arguments);return t.pop(),t.pop(),e.log.trace("Twig.expression.tokenize","Matched a ",i," regular expression of ",t),c&&e.indexOf(c,i)<0?(d.push(i+" cannot follow a "+l[l.length-1].type+" at template:"+u+" near '"+t[0].substring(0,20)+"...'"),t[0]):e.expression.handler[i].validate&&!e.expression.handler[i].validate(t,l)?t[0]:(d=[],l.push({type:i,value:t[0],match:t}),a=!0,c=o,u+=t[0].length,e.expression.handler[i].transform?e.expression.handler[i].transform(t,l):"")},e.log.debug("Twig.expression.tokenize","Tokenizing expression ",t);t.length>0;){t=t.trim();for(i in e.expression.handler)if(e.expression.handler.hasOwnProperty(i)){for(o=e.expression.handler[i].next,n=e.expression.handler[i].regex,e.log.trace("Checking type ",i," on ",t),s=n instanceof Array?n:[n],a=!1;s.length>0;)n=s.pop(),t=t.replace(n,r);if(a)break}if(!a)throw d.length>0?new e.Error(d.join(" OR ")):new e.Error("Unable to parse '"+t+"' at template position"+u)}return e.log.trace("Twig.expression.tokenize","Tokenized to ",l),l},e.expression.compile=function(t){var i=t.value,n=e.expression.tokenize(i),s=null,o=[],a=[],r=null;for(e.log.trace("Twig.expression.compile: ","Compiling ",i);n.length>0;)s=n.shift(),r=e.expression.handler[s.type],e.log.trace("Twig.expression.compile: ","Compiling ",s),r.compile&&r.compile(s,a,o),e.log.trace("Twig.expression.compile: ","Stack is",a),e.log.trace("Twig.expression.compile: ","Output is",o);for(;a.length>0;)o.push(a.pop());return e.log.trace("Twig.expression.compile: ","Final output is",o),t.stack=o,delete t.value,t},e.expression.parse=function(t,i,n,s){var o=this;t instanceof Array||(t=[t]);var a,r=[],l=null,u=!0,c=null,d=[];if(l=e.async.forEach(t,function(n,s){if(!n.cleanup){var l=null;return t.length>s+1&&(a=t[s+1]),c=e.expression.handler[n.type],c.parse&&(l=c.parse.apply(o,[n,r,i,a])),i.loop&&n.type===e.expression.type.operator.binary&&d.push(n),l}}).then(function(){if(e.forEach(d,function(e){e.params&&e.key&&delete e.key}),n){for(var t=[];r.length>0;)t.unshift(r.pop());r.push(t)}if(s)return e.Promise.resolve(r.pop())}).then(function(e){return u=!1,e}),s)return l;if(u)throw new e.Error("You are using Twig.js in sync mode in combination with async extensions.");return r.pop()},e}},function(e,t){e.exports=function(e){"use strict";e.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var t=function(e,t){if(void 0===t||null===t)return null;if(void 0!==t.indexOf)return e===t||""!==e&&t.indexOf(e)>-1;var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1};return e.expression.operator.lookup=function(t,i){switch(t){case"..":i.precidence=20,i.associativity=e.expression.operator.leftToRight;break;case",":i.precidence=18,i.associativity=e.expression.operator.leftToRight;break;case"?:":case"?":case":":i.precidence=16,i.associativity=e.expression.operator.rightToLeft;break;case"or":i.precidence=14,i.associativity=e.expression.operator.leftToRight;break;case"and":i.precidence=13,i.associativity=e.expression.operator.leftToRight;break;case"b-or":i.precidence=12,i.associativity=e.expression.operator.leftToRight;break;case"b-xor":i.precidence=11,i.associativity=e.expression.operator.leftToRight;break;case"b-and":i.precidence=10,i.associativity=e.expression.operator.leftToRight;break;case"==":case"!=":i.precidence=9,i.associativity=e.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":i.precidence=8,i.associativity=e.expression.operator.leftToRight;break;case"~":case"+":case"-":i.precidence=6,i.associativity=e.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":i.precidence=5,i.associativity=e.expression.operator.leftToRight;break;case"not":i.precidence=3,i.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error("Failed to lookup operator: "+t+" is an unknown operator.")}return i.operator=t,i},e.expression.operator.parse=function(i,n){e.log.trace("Twig.expression.operator.parse: ","Handling ",i);var s,o,a;switch("?"===i&&(a=n.pop()),o=n.pop(),"not"!==i&&(s=n.pop()),"in"!==i&&"not in"!==i&&(s&&Array.isArray(s)&&(s=s.length),o&&Array.isArray(o)&&(o=o.length)),i){case":":break;case"?:":e.lib.boolval(s)?n.push(s):n.push(o);break;case"?":void 0===s&&(s=o,o=a,a=void 0),e.lib.boolval(s)?n.push(o):n.push(a);break;case"+":o=parseFloat(o),s=parseFloat(s),n.push(s+o);break;case"-":o=parseFloat(o),s=parseFloat(s),n.push(s-o);break;case"*":o=parseFloat(o),s=parseFloat(s),n.push(s*o);break;case"/":o=parseFloat(o),s=parseFloat(s),n.push(s/o);break;case"//":o=parseFloat(o),s=parseFloat(s),n.push(Math.floor(s/o));break;case"%":o=parseFloat(o),s=parseFloat(s),n.push(s%o);break;case"~":n.push((null!=s?s.toString():"")+(null!=o?o.toString():""));break;case"not":case"!":n.push(!e.lib.boolval(o));break;case"<":n.push(s<o);break;case"<=":n.push(s<=o);break;case">":n.push(s>o);break;case">=":n.push(s>=o);break;case"===":n.push(s===o);break;case"==":n.push(s==o);break;case"!==":n.push(s!==o);break;case"!=":n.push(s!=o);break;case"or":n.push(e.lib.boolval(s)||e.lib.boolval(o));break;case"b-or":n.push(s|o);break;case"b-xor":n.push(s^o);break;case"and":n.push(e.lib.boolval(s)&&e.lib.boolval(o));break;case"b-and":n.push(s&o);break;case"**":n.push(Math.pow(s,o));break;case"not in":n.push(!t(s,o));break;case"in":n.push(t(s,o));break;case"..":n.push(e.functions.range(s,o));break;default:throw new e.Error("Failed to parse operator: "+i+" is an unknown operator.")}},e}},function(e,t){e.exports=function(e){function t(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e}return e.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,i){return t+i.toUpperCase()})},length:function(t){return e.lib.is("Array",t)||"string"==typeof t?t.length:e.lib.is("Object",t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t("Array",e))return e.reverse();if(t("String",e))return e.split("").reverse().join("");if(t("Object",e)){var i=e._keys||Object.keys(e).reverse();return e._keys=i,e}},sort:function(e){if(t("Array",e))return e.sort();if(t("Object",e)){delete e._keys;var i=Object.keys(e),n=i.sort(function(t,i){var n;return e[t]>e[i]==!(e[t]<=e[i])?e[t]>e[i]?1:e[t]<e[i]?-1:0:isNaN(n=parseFloat(e[t]))||isNaN(b1=parseFloat(e[i]))?"string"==typeof e[t]?e[t]>e[i].toString()?1:e[t]<e[i].toString()?-1:0:"string"==typeof e[i]?e[t].toString()>e[i]?1:e[t].toString()<e[i]?-1:0:null:n>b1?1:n<b1?-1:0});return e._keys=n,e}},keys:function(t){if(void 0!==t&&null!==t){var i=t._keys||Object.keys(t),n=[];return e.forEach(i,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&n.push(e)}),n}},url_encode:function(e){if(void 0!==e&&null!==e){var t=encodeURIComponent(e);return t=t.replace("'","%27")}},join:function(i,n){if(void 0!==i&&null!==i){var s="",o=[],a=null;return n&&n[0]&&(s=n[0]),t("Array",i)?o=i:(a=i._keys||Object.keys(i),e.forEach(a,function(e){"_keys"!==e&&i.hasOwnProperty(e)&&o.push(i[e])})),o.join(s)}},"default":function(t,i){if(void 0!==i&&i.length>1)throw new e.Error("default filter expects one argument");return void 0===t||null===t||""===t?void 0===i?"":i[0]:t},json_encode:function(i){if(void 0===i||null===i)return"null";if("object"==typeof i&&t("Array",i))return s=[],e.forEach(i,function(t){s.push(e.filters.json_encode(t))}),"["+s.join(",")+"]";if("object"==typeof i){var n=i._keys||Object.keys(i),s=[];return e.forEach(n,function(t){s.push(JSON.stringify(t)+":"+e.filters.json_encode(i[t]))}),"{"+s.join(",")+"}"}return JSON.stringify(i)},merge:function(i,n){var s=[],o=0,a=[];if(t("Array",i)?e.forEach(n,function(e){t("Array",e)||(s={})}):s={},t("Array",s)||(s._keys=[]),t("Array",i)?e.forEach(i,function(e){s._keys&&s._keys.push(o),s[o]=e,o++}):(a=i._keys||Object.keys(i),e.forEach(a,function(e){s[e]=i[e],s._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&t>=o&&(o=t+1)})),e.forEach(n,function(i){t("Array",i)?e.forEach(i,function(e){s._keys&&s._keys.push(o),s[o]=e,o++}):(a=i._keys||Object.keys(i),e.forEach(a,function(e){s[e]||s._keys.push(e),s[e]=i[e];var t=parseInt(e,10);!isNaN(t)&&t>=o&&(o=t+1)}))}),0===n.length)throw new e.Error("Filter merge expects at least one parameter");return s},date:function(t,i){var n=e.functions.date(t),s=i&&i.length?i[0]:"F j, Y H:i";return e.lib.date(s,n)},date_modify:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||1!==i.length)throw new e.Error("date_modify filter expects 1 argument");var n,s=i[0];return e.lib.is("Date",t)&&(n=e.lib.strtotime(s,t.getTime()/1e3)),e.lib.is("String",t)&&(n=e.lib.strtotime(s,e.lib.strtotime(t))),e.lib.is("Number",t)&&(n=e.lib.strtotime(s,t)),new Date(1e3*n)}},replace:function(t,i){if(void 0!==t&&null!==t){var n,s=i[0];for(n in s)s.hasOwnProperty(n)&&"_keys"!==n&&(t=e.lib.replaceAll(t,n,s[n]));return t}},format:function(t,i){if(void 0!==t&&null!==t)return e.lib.vsprintf(t,i)},striptags:function(t){if(void 0!==t&&null!==t)return e.lib.strip_tags(t)},escape:function(t,i){if(void 0!==t&&null!==t){var n="html";if(i&&i.length&&i[0]!==!0&&(n=i[0]),"html"==n){var s=t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e.Markup(s,"html")}if("js"==n){for(var s=t.toString(),o="",a=0;a<s.length;a++)if(s[a].match(/^[a-zA-Z0-9,\._]$/))o+=s[a];else{var r=s.charCodeAt(a);o+=r<128?"\\x"+r.toString(16).toUpperCase():e.lib.sprintf("\\u%04s",r.toString(16).toUpperCase())}return e.Markup(o,"js")}if("css"==n){for(var s=t.toString(),o="",a=0;a<s.length;a++)if(s[a].match(/^[a-zA-Z0-9]$/))o+=s[a];else{var r=s.charCodeAt(a);o+="\\"+r.toString(16).toUpperCase()+" "}return e.Markup(o,"css")}if("url"==n){var o=e.filters.url_encode(t);return e.Markup(o,"url")}if("html_attr"==n){for(var s=t.toString(),o="",a=0;a<s.length;a++)if(s[a].match(/^[a-zA-Z0-9,\.\-_]$/))o+=s[a];else if(s[a].match(/^[&<>"]$/))o+=s[a].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var r=s.charCodeAt(a);o+=r<=31&&9!=r&&10!=r&&13!=r?"&#xFFFD;":r<128?e.lib.sprintf("&#x%02s;",r.toString(16).toUpperCase()):e.lib.sprintf("&#x%04s;",r.toString(16).toUpperCase())}return e.Markup(o,"html_attr")}throw new e.Error("escape strategy unsupported")}},e:function(t,i){return e.filters.escape(t,i)},nl2br:function(t){if(void 0!==t&&null!==t){var i="BACKSLASH_n_replace",n="<br />"+i;return t=e.filters.escape(t).replace(/\r\n/g,n).replace(/\r/g,n).replace(/\n/g,n),t=e.lib.replaceAll(t,i,"\n"),e.Markup(t)}},number_format:function(e,t){var i=e,n=t&&t[0]?t[0]:void 0,s=t&&void 0!==t[1]?t[1]:".",o=t&&void 0!==t[2]?t[2]:",";i=(i+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+i)?+i:0,r=isFinite(+n)?Math.abs(n):0,l="",u=function(e,t){var i=Math.pow(10,t);return""+Math.round(e*i)/i};return l=(r?u(a,r):""+Math.round(a)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(l[1]||"").length<r&&(l[1]=l[1]||"",l[1]+=new Array(r-l[1].length+1).join("0")),l.join(s)},trim:function(t,i){if(void 0!==t&&null!==t){var n,s=e.filters.escape(""+t);n=i&&i[0]?""+i[0]:" \n\r\t\f\x0B            ​\u2028\u2029　";for(var o=0;o<s.length;o++)if(n.indexOf(s.charAt(o))===-1){s=s.substring(o);break}for(o=s.length-1;o>=0;o--)if(n.indexOf(s.charAt(o))===-1){s=s.substring(0,o+1);break}return n.indexOf(s.charAt(0))===-1?s:""}},truncate:function(e,t){var i=30,n=!1,s="...";if(e+="",t&&(t[0]&&(i=t[0]),t[1]&&(n=t[1]),t[2]&&(s=t[2])),e.length>i){if(n&&(i=e.indexOf(" ",i),i===-1))return e;e=e.substr(0,i)+s}return e},slice:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||i.length<1)throw new e.Error("slice filter expects at least 1 argument");var n=i[0]||0,s=i.length>1?i[1]:t.length,o=n>=0?n:Math.max(t.length+n,0);if(e.lib.is("Array",t)){for(var a=[],r=o;r<o+s&&r<t.length;r++)a.push(t[r]);return a}if(e.lib.is("String",t))return t.substr(o,s);throw new e.Error("slice filter expects value to be an array or string")}},abs:function(e){if(void 0!==e&&null!==e)return Math.abs(e)},first:function(e){if(t("Array",e))return e[0];if(t("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||i.length<1||i.length>2)throw new e.Error("split filter expects 1 or 2 argument");if(e.lib.is("String",t)){var n=i[0],s=i[1],o=t.split(n);if(void 0===s)return o;if(s<0)return t.split(n,o.length+s);var a=[];if(""==n)for(;o.length>0;){for(var r="",l=0;l<s&&o.length>0;l++)r+=o.shift();a.push(r)}else{for(var l=0;l<s-1&&o.length>0;l++)a.push(o.shift());o.length>0&&a.push(o.join(n))}return a}throw new e.Error("split filter expects value to be a string")}},last:function(t){if(e.lib.is("Object",t)){var i;return i=void 0===t._keys?Object.keys(t):t._keys,t[i[i.length-1]]}return t[t.length-1]},raw:function(t){return e.Markup(t)},batch:function(t,i){var n,s,o,a=i.shift(),r=i.shift();if(!e.lib.is("Array",t))throw new e.Error("batch filter expects items to be an array");if(!e.lib.is("Number",a))throw new e.Error("batch filter expects size to be a number");if(a=Math.ceil(a),n=e.lib.chunkArray(t,a),r&&t.length%a!=0){for(s=n.pop(),o=a-s.length;o--;)s.push(r);n.push(s)}return n},round:function(t,i){i=i||[];var n=i.length>0?i[0]:0,s=i.length>1?i[1]:"common";if(t=parseFloat(t),n&&!e.lib.is("Number",n))throw new e.Error("round filter expects precision to be a number");if("common"===s)return e.lib.round(t,n);if(!e.lib.is("Function",Math[s]))throw new e.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[s](t*Math.pow(10,n))/Math.pow(10,n)}},e.filter=function(t,i,n){if(!e.filters[t])throw"Unable to find filter "+t;return e.filters[t].apply(this,[i,n])},e.filter.extend=function(t,i){e.filters[t]=i},e}},function(e,t){e.exports=function(e){var t='Template "{name}" is not defined.';return e.functions={range:function(e,t,i){var n,s,o,a=[],r=i||1,l=!1;if(isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(l=!0,n=e.charCodeAt(0),s=t.charCodeAt(0)):(n=isNaN(e)?0:e,s=isNaN(t)?0:t):(n=parseInt(e,10),s=parseInt(t,10)),o=!(n>s))for(;n<=s;)a.push(l?String.fromCharCode(n):n),n+=r;else for(;n>=s;)a.push(l?String.fromCharCode(n):n),n-=r;return a},cycle:function(e,t){var i=t%e.length;return e[i]},dump:function(){var t="\n",i="  ",n=0,s="",o=Array.prototype.slice.call(arguments),a=function(e){for(var t="";e>0;)e--,t+=i;return t},r=function(e){s+=a(n),"object"==typeof e?l(e):"function"==typeof e?s+="function()"+t:"string"==typeof e?s+="string("+e.length+') "'+e+'"'+t:"number"==typeof e?s+="number("+e+")"+t:"boolean"==typeof e&&(s+="bool("+e+")"+t)},l=function(e){var i;if(null===e)s+="NULL"+t;else if(void 0===e)s+="undefined"+t;else if("object"==typeof e){s+=a(n)+typeof e,n++,s+="("+function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(e)+") {"+t;for(i in e)s+=a(n)+"["+i+"]=> "+t,r(e[i]);n--,s+=a(n)+"}"+t}else r(e)};return 0==o.length&&o.push(this.context),e.forEach(o,function(e){l(e)}),s},date:function(t,i){var n;if(void 0===t||null===t||""===t)n=new Date;else if(e.lib.is("Date",t))n=t;else if(e.lib.is("String",t))n=t.match(/^[0-9]+$/)?new Date(1e3*t):new Date(1e3*e.lib.strtotime(t));else{if(!e.lib.is("Number",t))throw new e.Error("Unable to parse date "+t);n=new Date(1e3*t)}return n},block:function(t){return this.originalBlockTokens[t]?e.logic.parse.apply(this,[this.originalBlockTokens[t],this.context]).output:this.blocks[t]},parent:function(){return e.placeholders.parent},attribute:function(t,i,n){return e.lib.is("Object",t)&&t.hasOwnProperty(i)?"function"==typeof t[i]?t[i].apply(void 0,n):t[i]:t[i]||void 0},max:function(t){return e.lib.is("Object",t)?(delete t._keys,e.lib.max(t)):e.lib.max.apply(null,arguments)},min:function(t){return e.lib.is("Object",t)?(delete t._keys,e.lib.min(t)):e.lib.min.apply(null,arguments)},template_from_string:function(t){return void 0===t&&(t=""),e.Templates.parsers.twig({options:this.options,data:t})},random:function(t){function i(e){var t=Math.floor(Math.random()*n),i=[0,e],s=Math.min.apply(null,i),o=Math.max.apply(null,i);return s+Math.floor((o-s+1)*t/n)}var n=2147483648;if(e.lib.is("Number",t))return i(t);if(e.lib.is("String",t))return t.charAt(i(t.length-1));if(e.lib.is("Array",t))return t[i(t.length-1)];if(e.lib.is("Object",t)){var s=Object.keys(t);return t[s[i(s.length-1)]]}return i(n-1)},source:function(i,n){var s,o,a,r=!1,l="undefined"!=typeof c&&"undefined"!=typeof c.exports&&"undefined"==typeof window;l?(o="fs",a=__dirname+"/"+i):(o="ajax",a=i);var u={id:i,path:a,method:o,parser:"source",async:!1,fetchTemplateSource:!0};"undefined"==typeof n&&(n=!1);try{s=e.Templates.loadRemote(i,u),"undefined"==typeof s||null===s?s="":r=!0}catch(c){e.log.debug("Twig.functions.source: ","Problem loading template  ",c)}return r||n?s:t.replace("{name}",i)}},e._function=function(t,i,n){if(!e.functions[t])throw"Unable to find function "+t;return e.functions[t](i,n)},e._function.extend=function(t,i){e.functions[t]=i},e}},function(e,t,i){e.exports=function(e){return e.lib={},e.lib.sprintf=i(8),e.lib.vsprintf=i(9),e.lib.round=i(10),e.lib.max=i(11),e.lib.min=i(12),e.lib.strip_tags=i(13),e.lib.strtotime=i(14),e.lib.date=i(15),e.lib.boolval=i(16),e.lib.is=function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e},e.lib.copy=function(e){var t,i={};for(t in e)i[t]=e[t];return i},e.lib.extend=function(e,t){var i,n=Object.keys(t);for(i=n.length;i--;)e[n[i]]=t[n[i]];return e},e.lib.replaceAll=function(e,t,i){return e.split(t).join(i)},e.lib.chunkArray=function(t,i){var n=[],s=0,o=t.length;if(i<1||!e.lib.is("Array",t))return[];for(;s<o;)n.push(t.slice(s,s+=i));return n},e}},function(e,t){"use strict";e.exports=function(){var e=/%%|%(\d+\$)?([\-+'#0 ]*)(\*\d+\$|\*|\d+)?(?:\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,i=0,n=t[i++],s=function(e,t,i,n){i||(i=" ");var s=e.length>=t?"":new Array(1+t-e.length>>>0).join(i);return n?e+s:s+e},o=function(e,t,i,n,o,a){var r=n-e.length;return r>0&&(e=i||!o?s(e,n,a,i):[e.slice(0,t.length),s("",r,"0",!0),e.slice(t.length)].join("")),e},a=function(e,t,i,n,a,r,l){var u=e>>>0;return i=i&&u&&{2:"0b",8:"0",16:"0x"}[t]||"",e=i+s(u.toString(t),r||0,"0",!1),o(e,i,n,a,l)},r=function(e,t,i,n,s,a){return null!==n&&void 0!==n&&(e=e.slice(0,n)),o(e,"",t,i,s,a)},l=function(e,n,l,u,c,d){var p,h,f,g,m;if("%%"===e)return"%";var v,y=!1,_="",b=!1,x=!1,w=" ",k=l.length;for(v=0;v<k;v++)switch(l.charAt(v)){case" ":_=" ";break;case"+":_="+";break;case"-":y=!0;break;case"'":w=l.charAt(v+1);break;case"0":b=!0,w="0";break;case"#":x=!0}if(u=u?"*"===u?+t[i++]:"*"===u.charAt(0)?+t[u.slice(1,-1)]:+u:0,u<0&&(u=-u,y=!0),!isFinite(u))throw new Error("sprintf: (minimum-)width must be finite");switch(c=c?"*"===c?+t[i++]:"*"===c.charAt(0)?+t[c.slice(1,-1)]:+c:"fFeE".indexOf(d)>-1?6:"d"===d?0:void 0,m=n?t[n.slice(0,-1)]:t[i++],d){case"s":return r(m+"",y,u,c,b,w);case"c":return r(String.fromCharCode(+m),y,u,c,b);case"b":return a(m,2,x,y,u,c,b);case"o":return a(m,8,x,y,u,c,b);case"x":return a(m,16,x,y,u,c,b);case"X":return a(m,16,x,y,u,c,b).toUpperCase();case"u":return a(m,10,x,y,u,c,b);case"i":case"d":return p=+m||0,p=Math.round(p-p%1),h=p<0?"-":_,m=h+s(String(Math.abs(p)),c,"0",!1),o(m,h,y,u,b);case"e":case"E":case"f":case"F":case"g":case"G":return p=+m,h=p<0?"-":_,f=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())],g=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2],m=h+Math.abs(p)[f](c),o(m,h,y,u,b)[g]();default:return e}};return n.replace(e,l)}},function(e,t,i){"use strict";e.exports=function(e,t){var n=i(8);return n.apply(this,[e].concat(t))}},function(e,t){"use strict";e.exports=function(e,t,i){var n,s,o,a;if(t|=0,n=Math.pow(10,t),e*=n,a=e>0|-(e<0),o=e%1===.5*a,s=Math.floor(e),o)switch(i){case"PHP_ROUND_HALF_DOWN":e=s+(a<0);break;case"PHP_ROUND_HALF_EVEN":e=s+s%2*a;break;case"PHP_ROUND_HALF_ODD":e=s+!(s%2);break;default:e=s+(a>0)}return(o?e:Math.round(e))/n}},function(e,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(){var e,t,n=0,s=0,o=arguments,a=o.length,r=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},l=function u(e,t){var n=0,s=0,o=0,a=0,l=0;if(e===t)return 0;if("object"===("undefined"==typeof e?"undefined":i(e))){if("object"===("undefined"==typeof t?"undefined":i(t))){if(e=r(e),t=r(t),l=e.length,a=t.length,a>l)return 1;if(a<l)return-1;for(n=0,s=l;n<s;++n){if(o=u(e[n],t[n]),1===o)return 1;if(o===-1)return-1}return 0}return-1}return"object"===("undefined"==typeof t?"undefined":i(t))?1:isNaN(t)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0===t?0:t>0?1:-1:t===e?0:t>e?1:-1};if(0===a)throw new Error("At least one value should be passed to max()");if(1===a){if("object"!==i(o[0]))throw new Error("Wrong parameter count for max()");if(e=r(o[0]),0===e.length)throw new Error("Array must contain at least one element for max()")}else e=o;for(t=e[0],n=1,s=e.length;n<s;++n)1===l(t,e[n])&&(t=e[n]);return t}},function(e,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(){var e,t,n=0,s=0,o=arguments,a=o.length,r=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},l=function u(e,t){var n=0,s=0,o=0,a=0,l=0;if(e===t)return 0;if("object"===("undefined"==typeof e?"undefined":i(e))){if("object"===("undefined"==typeof t?"undefined":i(t))){if(e=r(e),t=r(t),l=e.length,a=t.length,a>l)return 1;if(a<l)return-1;for(n=0,s=l;n<s;++n){if(o=u(e[n],t[n]),1===o)return 1;if(o===-1)return-1}return 0}return-1}return"object"===("undefined"==typeof t?"undefined":i(t))?1:isNaN(t)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0===t?0:t>0?1:-1:t===e?0:t>e?1:-1};if(0===a)throw new Error("At least one value should be passed to min()");if(1===a){if("object"!==i(o[0]))throw new Error("Wrong parameter count for min()");if(e=r(o[0]),0===e.length)throw new Error("Array must contain at least one element for min()")}else e=o;for(t=e[0],n=1,s=e.length;n<s;++n)l(t,e[n])===-1&&(t=e[n]);return t}},function(e,t){"use strict";e.exports=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(n,"").replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})}},function(e,t){"use strict";e.exports=function(e,t){function i(e,t,i){var n,s=u[t];"undefined"!=typeof s&&(n=s-l.getDay(),0===n?n=7*i:n>0&&"last"===e?n-=7:n<0&&"next"===e&&(n+=7),l.setDate(l.getDate()+n))}function n(e){var t=e.split(" "),n=t[0],s=t[1].substring(0,3),o=/\d+/.test(n),a="ago"===t[2],r=("last"===n?-1:1)*(a?-1:1);if(o&&(r*=parseInt(n,10)),c.hasOwnProperty(s)&&!t[1].match(/^mon(day|\.)?$/i))return l["set"+c[s]](l["get"+c[s]]()+r);if("wee"===s)return l.setDate(l.getDate()+7*r);if("next"===n||"last"===n)i(n,s,r);else if(!o)return!1;return!0}var s,o,a,r,l,u,c,d,p,h,f,g=!1;if(!e)return g;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();var m=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if(o=e.match(m),o&&o[2]===o[4])if(o[1]>1901)switch(o[2]){case"-":return o[3]>12||o[5]>31?g:new Date(o[1],parseInt(o[3],10)-1,o[5],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3;case".":return g;case"/":return o[3]>12||o[5]>31?g:new Date(o[1],parseInt(o[3],10)-1,o[5],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3}else if(o[5]>1901)switch(o[2]){case"-":return o[3]>12||o[1]>31?g:new Date(o[5],parseInt(o[3],10)-1,o[1],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3;case".":return o[3]>12||o[1]>31?g:new Date(o[5],parseInt(o[3],10)-1,o[1],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3;case"/":return o[1]>12||o[3]>31?g:new Date(o[5],parseInt(o[1],10)-1,o[3],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3}else switch(o[2]){case"-":return o[3]>12||o[5]>31||o[1]<70&&o[1]>38?g:(r=o[1]>=0&&o[1]<=38?+o[1]+2e3:o[1],new Date(r,parseInt(o[3],10)-1,o[5],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3);case".":return o[5]>=70?o[3]>12||o[1]>31?g:new Date(o[5],parseInt(o[3],10)-1,o[1],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3:o[5]<60&&!o[6]?o[1]>23||o[3]>59?g:(a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate(),o[1]||0,o[3]||0,o[5]||0,o[9]||0)/1e3):g;case"/":return o[1]>12||o[3]>31||o[5]<70&&o[5]>38?g:(r=o[5]>=0&&o[5]<=38?+o[5]+2e3:o[5],new Date(r,parseInt(o[1],10)-1,o[3],o[6]||0,o[7]||0,o[8]||0,o[9]||0)/1e3);case":":return o[1]>23||o[3]>59||o[5]>59?g:(a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate(),o[1]||0,o[3]||0,o[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(s=Date.parse(e)))return s/1e3|0;if(m=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),o=e.match(m),o&&("z"===o[4]?o[4]="Z":o[4].match(/^([\+-][0-9]{2})$/)&&(o[4]=o[4]+":00"),!isNaN(s=Date.parse(o[1]+"T"+o[2]+o[4]))))return s/1e3|0;if(l=t?new Date(1e3*t):new Date,u={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},c={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},p="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",h="([+-]?\\d+\\s"+p+"|(last|next)\\s"+p+")(\\sago)?",o=e.match(new RegExp(h,"gi")),!o)return g;for(f=0,d=o.length;f<d;f++)if(!n(o[f]))return g;return l.getTime()/1e3}},function(e,t){"use strict";e.exports=function(e,t){var i,n,s=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],o=/\\?(.?)/gi,a=function(e,t){return n[e]?n[e]():t},r=function(e,t){for(e=String(e);e.length<t;)e="0"+e;return e};n={d:function(){return r(n.j(),2)},D:function(){return n.l().slice(0,3)},j:function(){return i.getDate()},l:function(){return s[n.w()]+"day"},N:function(){return n.w()||7},S:function(){var e=n.j(),t=e%10;return t<=3&&1===parseInt(e%100/10,10)&&(t=0),["st","nd","rd"][t-1]||"th"},w:function(){return i.getDay()},z:function(){var e=new Date(n.Y(),n.n()-1,n.j()),t=new Date(n.Y(),0,1);return Math.round((e-t)/864e5)},W:function(){var e=new Date(n.Y(),n.n()-1,n.j()-n.N()+3),t=new Date(e.getFullYear(),0,4);return r(1+Math.round((e-t)/864e5/7),2)},F:function(){return s[6+n.n()]},m:function(){return r(n.n(),2)},M:function(){return n.F().slice(0,3)},n:function(){return i.getMonth()+1},t:function(){return new Date(n.Y(),n.n(),0).getDate()},L:function(){var e=n.Y();return e%4===0&e%100!==0|e%400===0},o:function(){var e=n.n(),t=n.W(),i=n.Y();return i+(12===e&&t<9?1:1===e&&t>9?-1:0)},Y:function(){return i.getFullYear()},y:function(){return n.Y().toString().slice(-2)},a:function(){return i.getHours()>11?"pm":"am"},A:function(){return n.a().toUpperCase()},B:function(){var e=3600*i.getUTCHours(),t=60*i.getUTCMinutes(),n=i.getUTCSeconds();return r(Math.floor((e+t+n+3600)/86.4)%1e3,3)},g:function(){return n.G()%12||12},G:function(){return i.getHours()},h:function(){return r(n.g(),2)},H:function(){return r(n.G(),2)},i:function(){return r(i.getMinutes(),2)},s:function(){return r(i.getSeconds(),2)},u:function(){return r(1e3*i.getMilliseconds(),6)},e:function(){var e="Not supported (see source code of date() for timezone on how to add support)";throw new Error(e)},I:function(){var e=new Date(n.Y(),0),t=Date.UTC(n.Y(),0),i=new Date(n.Y(),6),s=Date.UTC(n.Y(),6);return e-t!==i-s?1:0},O:function(){var e=i.getTimezoneOffset(),t=Math.abs(e);return(e>0?"-":"+")+r(100*Math.floor(t/60)+t%60,4)},P:function(){var e=n.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-i.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(o,a)},r:function(){return"D, d M Y H:i:s O".replace(o,a)},U:function(){return i/1e3|0}};var l=function(e,t){return i=void 0===t?new Date:t instanceof Date?new Date(t):new Date(1e3*t),e.replace(o,a)};return l(e,t)}},function(e,t){"use strict";e.exports=function(e){return e!==!1&&0!==e&&0!==e&&""!==e&&"0"!==e&&(!Array.isArray(e)||0!==e.length)&&null!==e&&void 0!==e}},function(e,t){e.exports=function(e){"use strict";e.Templates.registerLoader("ajax",function(t,i,n,s){var o,a,r=i.precompiled,l=this.parsers[i.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new e.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return a=new XMLHttpRequest,a.onreadystatechange=function(){var u=null;4===a.readyState&&(200===a.status||window.cordova&&0==a.status?(e.log.debug("Got template ",a.responseText),u=r===!0?JSON.parse(a.responseText):a.responseText,i.url=t,i.data=u,o=l.call(this,i),"function"==typeof n&&n(o)):"function"==typeof s&&s(a))},a.open("GET",t,!!i.async),a.send(),
!!i.async||o})}},function(e,t,i){e.exports=function(e){"use strict";var t,n;try{t=i(19),n=i(20)}catch(e){}e.Templates.registerLoader("fs",function(t,i,s,o){var a,r=null,l=i.precompiled,u=this.parsers[i.parser]||this.parser.twig;if(!d||!n)throw new e.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var c=function(e,n){return e?void("function"==typeof o&&o(e)):(l===!0&&(n=JSON.parse(n)),i.data=n,i.path=i.path||t,a=u.call(this,i),void("function"==typeof s&&s(a)))};if(i.path=i.path||t,i.async)return d.stat(i.path,function(t,n){return t||!n.isFile()?void("function"==typeof o&&o(new e.Error("Unable to find template file "+i.path))):void d.readFile(i.path,"utf8",c)}),!0;try{if(!d.statSync(i.path).isFile())throw new e.Error("Unable to find template file "+i.path)}catch(d){throw new e.Error("Unable to find template file "+i.path)}return r=d.readFileSync(i.path,"utf8"),c(void 0,r),a})}},function(e,t){},function(e,t,i){(function(e){function i(e,t){for(var i=0,n=e.length-1;n>=0;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return s.exec(e).slice(1)};t.resolve=function(){for(var t="",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,s="/"===a.charAt(0))}return t=i(n(t.split("/"),function(e){return!!e}),!s).join("/"),(s?"/":"")+t||"."},t.normalize=function(e){var s=t.isAbsolute(e),o="/"===a(e,-1);return e=i(n(e.split("/"),function(e){return!!e}),!s).join("/"),e||s||(e="."),e&&o&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,i){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=t.resolve(e).substr(1),i=t.resolve(i).substr(1);for(var s=n(e.split("/")),o=n(i.split("/")),a=Math.min(s.length,o.length),r=a,l=0;l<a;l++)if(s[l]!==o[l]){r=l;break}for(var u=[],l=r;l<s.length;l++)u.push("..");return u=u.concat(o.slice(r)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),i=t[0],n=t[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},t.basename=function(e,t){var i=o(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},t.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(t,i(21))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function s(e){if(c===setTimeout)return setTimeout(e,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&h&&(g=!1,h.length?f=h.concat(f):m=-1,f.length&&r())}function r(){if(!g){var e=s(a);g=!0;for(var t=f.length;t;){for(h=f,f=[];++m<t;)h&&h[m].run();m=-1,t=f.length}h=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(e){c=i}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var h,f=[],g=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];f.push(new l(e,t)),1!==f.length||g||s(r)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t){e.exports=function(e){"use strict";for(e.logic={},e.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,n){var s=this;return e.expression.parseAsync.apply(this,[t.stack,i]).then(function(o){return n=!0,e.lib.boolval(o)?(n=!1,e.parseAsync.apply(s,[t.output,i])):""}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,n){var s=this;return e.expression.parseAsync.apply(this,[t.stack,i]).then(function(o){return n&&e.lib.boolval(o)?(n=!1,e.parseAsync.apply(s,[t.output,i])):""}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,i,n){var s=e.Promise.resolve("");return n&&(s=e.parseAsync.apply(this,[t.output,i])),s.then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var i=t.match[1],n=t.match[2],s=t.match[3],o=null;if(t.key_var=null,t.value_var=null,i.indexOf(",")>=0){if(o=i.split(","),2!==o.length)throw new e.Error("Invalid expression in for loop: "+i);t.key_var=o[0].trim(),t.value_var=o[1].trim()}else t.value_var=i;return t.expression=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,s&&(t.conditional=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:s}]).stack),delete t.match,t},parse:function(t,i,n){var s,o,a=[],r=0,l=this,u=t.conditional,c=function(e,t){var n=void 0!==u;return{index:e+1,index0:e,revindex:n?void 0:t-e,revindex0:n?void 0:t-e-1,first:0===e,last:n?void 0:e===t-1,length:n?void 0:t,parent:i}},d=function(n,o){var d=e.ChildContext(i);d[t.value_var]=o,t.key_var&&(d[t.key_var]=n),d.loop=c(r,s);var p=void 0===u?e.Promise.resolve(!0):e.expression.parseAsync.apply(l,[u,d]);p.then(function(i){if(i)return e.parseAsync.apply(l,[t.output,d]).then(function(e){a.push(e),r+=1})}).then(function(){delete d.loop,delete d[t.value_var],delete d[t.key_var],e.merge(i,d,!0)})};return e.expression.parseAsync.apply(this,[t.expression,i]).then(function(t){return e.lib.is("Array",t)?(s=t.length,e.async.forEach(t,function(e){var t=r;return d(t,e)})):e.lib.is("Object",t)&&(o=void 0!==t._keys?t._keys:Object.keys(t),s=o.length,e.forEach(o,function(e){"_keys"!==e&&d(e,t[e])})),n=0===a.length,{chain:n,output:e.output.apply(l,[a])}})}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),n=t.match[2],s=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack;return t.key=i,t.expression=s,delete t.match,t},parse:function(t,i,n){var s=t.key;return e.expression.parseAsync.apply(this,[t.expression,i]).then(function(t){return t===i&&(t=e.lib.copy(t)),i[s]=t,{chain:n,context:i}})}},{type:e.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[e.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(t,i,n){var s=this,o=t.key;return e.parseAsync.apply(this,[t.output,i]).then(function(e){return s.context[o]=e,i[o]=e,{chain:n,context:i}})}},{type:e.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:e.logic.type.filter,regex:/^filter\s+(.+)$/,next:[e.logic.type.endfilter],open:!0,compile:function(t){var i="|"+t.match[1].trim();return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,n){return e.parseAsync.apply(this,[t.output,i]).then(function(n){var s=[{type:e.expression.type.string,value:n}].concat(t.stack);return e.expression.parseAsync.apply(that,[s,i])}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:e.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,i,n){var s,o=this,a=e.Promise.resolve(),r=e.indexOf(this.importedBlocks,t.block)>-1,l=this.blocks[t.block]&&e.indexOf(this.blocks[t.block],e.placeholders.parent)>-1;return(void 0===this.blocks[t.block]||r||l||i.loop||t.overwrite)&&(a=t.expression?e.expression.parseAsync.apply(this,[t.output,i]).then(function(t){return e.expression.parseAsync.apply(o,[{type:e.expression.type.string,value:t},i])}):e.parseAsync.apply(this,[t.output,i]).then(function(t){return e.expression.parseAsync.apply(o,[{type:e.expression.type.string,value:t},i])}),a=a.then(function(i){r&&o.importedBlocks.splice(o.importedBlocks.indexOf(t.block),1),l?o.blocks[t.block]=e.Markup(o.blocks[t.block].replace(e.placeholders.parent,i)):o.blocks[t.block]=i,o.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}})),a.then(function(){return s=o.child.blocks[t.block]?o.child.blocks[t.block]:o.blocks[t.block],{chain:n,output:s}})}},{type:e.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(t){return t.expression=t.match[2].trim(),t.output=e.expression.compile({type:e.expression.type.expression,value:t.expression}).stack,t.block=t.match[1].trim(),delete t.match,t},parse:function(t,i,n){return e.logic.handler[e.logic.type.block].parse.apply(this,arguments)}},{type:e.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,n){var s,o=this,a=e.ChildContext(i);return e.expression.parseAsync.apply(this,[t.stack,i]).then(function(t){return o.extend=t,s=t instanceof e.Template?t:o.importFile(t),s.renderAsync(a)}).then(function(){return e.lib.extend(i,a),{chain:n,output:""}})}},{type:e.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,n){var s=this;return e.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return s.importBlocks(e),{chain:n,output:""}})}},{type:e.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile:function(t){var i=t.match,n=i[1].trim(),s=void 0!==i[2],o=i[3],a=void 0!==i[4]&&i[4].length;return delete t.match,t.only=a,t.ignoreMissing=s,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,void 0!==o&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o.trim()}]).stack),t},parse:function(t,i,n){var s,o,a={},r=this,l=e.Promise.resolve();return t.only||(a=e.ChildContext(i)),void 0!==t.withStack&&(l=e.expression.parseAsync.apply(this,[t.withStack,i]).then(function(e){for(s in e)e.hasOwnProperty(s)&&(a[s]=e[s])})),l.then(function(){return e.expression.parseAsync.apply(r,[t.stack,i])}).then(function(e){if(e instanceof i.Template)o=e;else try{o=r.importFile(e)}catch(i){if(t.ignoreMissing)return"";throw i}return o.renderAsync(a)}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.spaceless,regex:/^spaceless$/,next:[e.logic.type.endspaceless],open:!0,parse:function(t,i,n){return e.parseAsync.apply(this,[t.output,i]).then(function(t){var i=/>\s+</g,s=t.replace(i,"><").trim();return s=e.Markup(s),{chain:n,output:s}})}},{type:e.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:e.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[e.logic.type.endmacro],open:!0,compile:function(t){for(var i=t.match[1],n=t.match[2].split(/[\s,]+/),s=0;s<n.length;s++)for(var o=0;o<n.length;o++)if(n[s]===n[o]&&s!==o)throw new e.Error("Duplicate arguments for parameter: "+n[s]);return t.macroName=i,t.parameters=n,delete t.match,t},parse:function(t,i,n){var s=this;return this.macros[t.macroName]=function(){for(var i={_self:s.macros},n=0;n<t.parameters.length;n++){var o=t.parameters[n];"undefined"!=typeof arguments[n]?i[o]=arguments[n]:i[o]=void 0}return e.parseAsync.apply(s,[t.output,i])},{chain:n,output:""}}},{type:e.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:e.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),n=t.match[2].trim();return delete t.match,t.expression=i,t.contextName=n,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,n){var s=this,o={chain:n,output:""};return"_self"===t.expression?(i[t.contextName]=this.macros,e.Promise.resolve(o)):e.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return s.importFile(e||t.expression)}).then(function(e){return i[t.contextName]=e.renderAsync({},{output:"macros"}),o})}},{type:e.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(t){for(var i=t.match[1].trim(),n=t.match[2].trim().split(/\s*,\s*/),s={},o=0;o<n.length;o++){var a=n[o],r=a.match(/^([a-zA-Z0-9_]+)\s+as\s+([a-zA-Z0-9_]+)$/);r?s[r[1].trim()]=r[2].trim():a.match(/^([a-zA-Z0-9_]+)$/)&&(s[a]=a)}return delete t.match,t.expression=i,t.macroNames=s,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,n){var s=this,o=e.Promise.resolve(this.macros);return"_self"!==t.expression&&(o=e.expression.parseAsync.apply(this,[t.stack,i]).then(function(e){return s.importFile(e||t.expression)}).then(function(e){return e.renderAsync({},{output:"macros"})})),o.then(function(e){for(var s in t.macroNames)e.hasOwnProperty(s)&&(i[t.macroNames[s]]=e[s]);return{chain:n,output:""}})}},{type:e.logic.type.embed,regex:/^embed\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[e.logic.type.endembed],open:!0,compile:function(t){var i=t.match,n=i[1].trim(),s=void 0!==i[2],o=i[3],a=void 0!==i[4]&&i[4].length;return delete t.match,t.only=a,t.ignoreMissing=s,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,void 0!==o&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o.trim()}]).stack),t},parse:function(t,i,n){var s,o,a={},r=this,l=e.Promise.resolve();if(!t.only)for(s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);return void 0!==t.withStack&&(l=e.expression.parseAsync.apply(this,[t.withStack,i]).then(function(e){for(s in e)e.hasOwnProperty(s)&&(a[s]=e[s])})),l.then(function(){return e.expression.parseAsync.apply(r,[t.stack,a])}).then(function(e){if(e instanceof i.Template)o=e;else try{o=r.importFile(e)}catch(i){if(t.ignoreMissing)return"";throw i}return r.blocks={},i.parseAsync.apply(r,[t.output,a]).then(function(){return o.renderAsync(a,{blocks:r.blocks})})}).then(function(e){return{chain:n,output:e}})}},{type:e.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],e.logic.handler={},e.logic.extendType=function(t,i){i=i||"Twig.logic.type"+t,e.logic.type[t]=i},e.logic.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.logic.extendType(t.type),e.logic.handler[t.type]=t};e.logic.definitions.length>0;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var i=t.value.trim(),n=e.logic.tokenize.apply(this,[i]),s=e.logic.handler[n.type];return s.compile&&(n=s.compile.apply(this,[n]),e.log.trace("Twig.logic.compile: ","Compiled logic token to ",n)),n},e.logic.tokenize=function(t){var i={},n=null,s=null,o=null,a=null,r=null,l=null;t=t.trim();for(n in e.logic.handler)if(e.logic.handler.hasOwnProperty(n))for(s=e.logic.handler[n].type,o=e.logic.handler[n].regex,a=[],o instanceof Array?a=o:a.push(o);a.length>0;)if(r=a.shift(),l=r.exec(t.trim()),null!==l)return i.type=s,i.match=l,e.log.trace("Twig.logic.tokenize: ","Matched a ",s," regular expression of ",l),i;throw new e.Error("Unable to parse '"+t.trim()+"'")},e.logic.parse=function(t,i,n,s){var o,a,r="",l=!0;if(i=i||{},e.log.debug("Twig.logic.parse: ","Parsing logic token ",t),a=e.logic.handler[t.type],a.parse&&(r=a.parse.apply(this,[t,i,n])),o=e.isPromise(r)?r:e.Promise.resolve(r),o.then(function(e){l=!1,r=e}),s)return o||e.Promise.resolve(r);if(l)throw new e.Error("You are using Twig.js in sync mode in combination with async extensions.");return r},e}},function(e,t){e.exports=function(e){"use strict";e.Templates.registerParser("source",function(e){return e.data||""})}},function(e,t){e.exports=function(e){"use strict";e.Templates.registerParser("twig",function(t){return new e.Template(t)})}},function(e,t,i){e.exports=function(e){"use strict";return e.path={},e.path.parsePath=function(t,i){var n=null,i=i||"";if("object"==typeof t&&"object"==typeof t.options&&(n=t.options.namespaces),"object"==typeof n&&i.indexOf("::")>0||i.indexOf("@")>=0){for(var s in n)n.hasOwnProperty(s)&&(i=i.replace(s+"::",n[s]),i=i.replace("@"+s,n[s]));return i}return e.path.relativePath(t,i)},e.path.relativePath=function(t,n){var s,o,a,r="/",l=[],n=n||"";if(t.url)s="undefined"!=typeof t.base?t.base+("/"===t.base.charAt(t.base.length-1)?"":"/"):t.url;else if(t.path){var u=i(20),c=u.sep||r,d=new RegExp("^\\.{1,2}"+c.replace("\\","\\\\"));n=n.replace(/\//g,c),void 0!==t.base&&null==n.match(d)?(n=n.replace(t.base,""),s=t.base+c):s=u.normalize(t.path),s=s.replace(c+c,c),r=c}else{if(!t.name&&!t.id||!t.method||"fs"===t.method||"ajax"===t.method)throw new e.Error("Cannot extend an inline template.");s=t.base||t.name||t.id}for(o=s.split(r),o.pop(),o=o.concat(n.split(r));o.length>0;)a=o.shift(),"."==a||(".."==a&&l.length>0&&".."!=l[l.length-1]?l.pop():l.push(a));return l.join(r)},e}},function(e,t){e.exports=function(e){"use strict";return e.tests={empty:function(e){if(null===e||void 0===e)return!0;if("number"==typeof e)return!1;if(e.length&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2===1},even:function(e){return e%2===0},divisibleby:function(e,t){return e%t[0]===0},defined:function(e){return void 0!==e},none:function(e){return null===e},"null":function(e){return this.none(e)},"same as":function(e,t){return e===t[0]},sameas:function(t,i){return console.warn("`sameas` is deprecated use `same as`"),e.tests["same as"](t,i)},iterable:function(t){return t&&(e.lib.is("Array",t)||e.lib.is("Object",t))}},e.test=function(t,i,n){if(!e.tests[t])throw"Test "+t+" is not defined.";return e.tests[t](i,n)},e.test.extend=function(t,i){e.tests[t]=i},e}},function(e,t){e.exports=function(e){"use strict";return e.parseAsync=function(t,i){return e.parse.apply(this,[t,i,!0])},e.expression.parseAsync=function(t,i,n){return e.expression.parse.apply(this,[t,i,n,!0])},e.logic.parseAsync=function(t,i,n){return e.logic.parse.apply(this,[t,i,n,!0])},e.Template.prototype.renderAsync=function(e,t){return this.render(e,t,!0)},e.async={},e.isPromise=function(e){return e&&"function"==typeof e.then},e.Promise=function(t){function i(e,t){u=e,c=t,o()}function n(e){i("resolve",e)}function s(e){i("reject",e)}function o(){d&&(e.forEach(d,function(e){a(e.resolve,e.reject)}),d=null)}function a(e,t){var i={resolve:e,reject:t};return"unknown"==u?(d=d||[],d.push(i)):void(i[u]&&i[u](c))}function r(e,t,i){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,i(e))})}catch(e){n=!0,i(e)}}function l(e){try{if(!t.isPromise(e))return n(e);r(e.then.bind(e),l,s)}catch(t){s(t)}}var u="unknown",c=null,d=null;return r(t,l,s),{then:function(t,i){var n="function"==typeof t,s="function"==typeof i;return new e.Promise(function(e,o){a(function(e){if(n)try{i(t(e))}catch(i){o(i)}else i(e)},function(e){if(s)try{t(i(e))}catch(t){o(t)}else o(e)})})},"catch":function(e){return this.then(null,e)}}},e.Promise.resolve=function(t){return new e.Promise(function(e){e(t)})},e.Promise.reject=function(t){return new e.Promise(function(e,i){i(t)})},e.Promise.all=function(t){var i=[];return e.async.forEach(t,function(t,n){return e.isPromise(t)?t.then(function(e){i[n]=e}):void(i[n]=t)}).then(function(){return i})},e.async.forEach=function(t,i){function n(e){r.reject(e)}function s(t){return e.isPromise(t)?void t.then(s,n):o()}function o(){var e=a++;return e==t.length?void r.resolve():void s(i(t[e],e))}var a=0,r={},l=new e.Promise(function(e,t){r={resolve:e,reject:t}});return o(),l},e}},function(e,t){e.exports=function(e){"use strict";return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){var i=t.id,n={strict_variables:t.strict_variables||!1,autoescape:null!=t.autoescape&&t.autoescape||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1,namespaces:t.namespaces};if(e.cache&&i&&e.validateId(i),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return e.Templates.parsers.twig({data:t.data,path:t.hasOwnProperty("path")?t.path:void 0,module:t.module,id:i,options:n});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error("Both ref and id cannot be set on a twig.js template.");return e.Templates.load(t.ref)}if(void 0!==t.method){if(!e.Templates.isRegisteredLoader(t.method))throw new e.Error('Loader for "'+t.method+'" is not defined.');return e.Templates.loadRemote(t.name||t.href||t.path||i||void 0,{id:i,method:t.method,parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error)}return void 0!==t.href?e.Templates.loadRemote(t.href,{id:i,method:"ajax",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error):void 0!==t.path?e.Templates.loadRemote(t.path,{id:i,method:"fs",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error):void 0},e.exports.extendFilter=function(t,i){e.filter.extend(t,i)},e.exports.extendFunction=function(t,i){e._function.extend(t,i)},e.exports.extendTest=function(t,i){e.test.extend(t,i)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,i){var n,s=i.filename,o=i.filename;return n=new e.Template({data:t,path:o,id:s,options:i.settings["twig options"]}),function(e){return n.render(e)}},e.exports.renderFile=function(t,i,n){"function"==typeof i&&(n=i,i={}),i=i||{};var s=i.settings||{},o={path:t,base:s.views,load:function(e){n(null,""+e.render(i))}},a=s["twig options"];if(a)for(var r in a)a.hasOwnProperty(r)&&(o[r]=a[r]);e.exports.twig(o)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e.exports.path=e.path,e.exports.filters=e.filters,e}}])});var sdselect2=function(){$(".select2").select2()}();products=function(){$("#form-product-select-param").on("change",function(){var e=$(this).find("option:selected"),t=$(e).data("options"),i=$("#form-product-select-value");$(i).html(t)})}(),function(e){function t(t,i){function n(e,t){if(!t)return!1;for(var i=0;i<t.length;i++)if(t[i].id==e)return t[i];return!1}function s(t,i,l){if(!i)return!1;var u=0,c='<select class="form-control" style="margin-top:5px;margin-bottom:5px;">';t>0?c+="<option value=0>"+a+"</option>":(r&&(c+='<option value="">'+r+"</option>"),c+='<option value="'+(r?"0":"")+'">Выберите категорию</option>');for(var d=0;d<i.length;d++)i[d].parent==t&&(u++,c+="<option value="+i[d].id+" data-index="+d+"  "+(i[d].id==l?"selected":"")+">"+i[d].name+"</option>");return c+="</select>",0!=u&&(c=e(c),c.on("change",function(){var t=e(this);t.nextAll().remove();var i=t.closest(".form-group").find("input");if("0"===t.val())return i.val(t.prev("select").length?t.prev("select").val():t.val()),void o(i);if(""===t.val())return i.val(""),void o(i);i.val(t.val()),o(i);var a=i.data("data"),r=n(i.val(),a);t.after(s(r.id,a))}),c)}function o(t){var i=t.data("refresh_slave"),n=t.data("refresh_url");n&&i&&e.get(n,{id:t.val(),except:t.data("id")},function(n){var s=e("#"+i);if(s){var o=t.data("slave_prompt")||"Выберите значение";s.html("");var a='<option value="">'+o+"</option>";if(n.length)for(var r=0;r<n.length;r++)a+='<option value="'+n[r].id+'">'+n[r].name+"</option>";s.html(a)}},"json");var s=t.data("hide_on_no_empty");s&&e(s).length>0&&(0==t.val()||0==t.val().length?e(s).removeClass("hide"):e(s).addClass("hide"))}t=e(t),t.hide(),t.data("data",i);var a=t.data("root")||"Вся категория",r=t.data("empty"),l=(t.data("refresh_url"),t.val());for(el=n(l,i),t.after(s(el.id,i));el&&(t.after(s(el.parent,i,el.id)),0!=el.parent);)el=n(el.parent,i)}if("undefined"!=typeof category_data){var i=JSON.parse(category_data);e(".category_tree_input").each(function(e,n){t(n,i)})}e(".form-imput-depend-empty").on("change",function(){$this=e(this);var t=$this.data("depend-slave");if(t){t=t.split(",");for(var i=0;i<t.length;i++)if(t[i]){var n=e("#"+t[i]);n&&($this.val()?e(n).closest(".form-group").hide():e(n).closest(".form-group").show())}}})}(jQuery);