function ajaxForm(t){function o(t){var o=this;form=o.form,wrap=o.wrap,t.render?(t.notyfy_class="notify_white",notification.alert(t)):(wrap.removeClass("loading"),wrap.html(t.html),ajaxForm(wrap))}function i(){var t=this;form=t.form,wrap=t.wrap,wrap.removeClass("loading"),wrap.html("<h3>Упс... Возникла непредвиденная ошибка<h3><p>Часто это происходит в случае, если вы несколько раз подряд неверно ввели свои учетные данные. Но возможны и другие причины. В любом случае не расстраивайтесь и просто обратитесь к нашему оператору службы поддержки.</p><br><p>Спасибо.</p>"),ajaxForm(wrap)}function n(t){t.preventDefault();var n=this;if(form=n.form,wrap=n.wrap,form.yiiActiveForm&&form.yiiActiveForm("validate"),isValid=0==form.find(n.param.error_class).length,!isValid)return!1;for(required=form.find("input.required"),a=0;a<required.length;a++)if(required.eq(a).val().length<1)return!1;form.serializeObject||addSRO();var e=form.serializeObject();return form.addClass("loading"),form.html(""),wrap.html('<div style="text-align:center;"><p>Отправка данных</p></div>'),n.url+=(n.url.indexOf("?")>0?"&":"?")+"rc="+Math.random(),$.post(n.url,e,o.bind(n),"json").fail(i.bind(n)),!1}var e=(!!(window.File&&window.FileReader&&window.FileList&&window.Blob),{error_class:".has-error"});t.find("[required]").addClass("required").removeAttr("required");for(var a=0;a<t.length;a++)wrap=t.eq(a),form=wrap.find("form"),data={form:form,param:e,wrap:wrap},data.url=form.attr("action")||location.href,data.method=form.attr("method")||"post",form.off("submit"),form.on("submit",n.bind(data))}function addSRO(){$.fn.serializeObject=function(){var t={},o=this.serializeArray();return $.each(o,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}objects=function(t,o){var i,n=o;for(i in t)t.hasOwnProperty(i)&&(n[i]=i in o?o[i]:t[i]);return n},function(t,o,n){function e(){var t='<div class="scroll_box-control"></div>';t=n(t),t.insertAfter(r),t.data("slide-active",0),r.prepend("<div class=scroll_box-mover></div>"),t.on("click",".scroll_box-control_point",function(){var t=n(this),o=t.parent(),i=t.index();if(!t.hasClass("active")){o.find(".active").removeClass("active"),t.addClass("active");var e=o.data("slide-dx"),a=o.prev();a.find(".scroll_box-mover").css("margin-left",-e*i),o.data("slide-active",i),l.bind(a)()}})}function a(){var t=n(this);if(t.hasClass("scroll_box-active")){var o=setTimeout(s.bind(t),2e3);t.data("slide-timeoutId",o)}}function l(){var t=n(this),o=t.data("slide-timeoutId");t.data("slide-timeoutId",!1),t.hasClass("scroll_box-active")&&o&&clearTimeout(o)}function s(){var t=n(this);if(t.data("slide-timeoutId",!1),t.hasClass("scroll_box-active")){var o=t.next().find(">*"),i=t.data("slide-active"),e=o.length;i||(i=0),i++,i>=e&&(i=0),t.data("slide-active",i),o.eq(i).click(),a.bind(t)()}}function c(){for(i=0;i<r.length;i++){var o=r.eq(i),n=o.next(),e=o.data("scroll-width-max");if(t=o.width(),e&&t>e)n.removeClass("scroll_box-active"),n.data("slide-active",0);else{var l=o.data("scroll-elemet-ignore-class"),s=o.find(">*").not(".scroll_box-mover");if(l&&(s=s.not("."+l)),0!=s){var c=s.eq(1),d=c.outerWidth();d+=parseFloat(c.css("margin-left")),d+=parseFloat(c.css("margin-right"));var f=Math.floor(t/d);if(s<=f)o.removeClass("scroll_box-active"),n.data("slide-active",0);else{o.addClass("scroll_box-active");var m=s.length-f+1;if(n.find(">*").length!=m){active=o.data("slide-active"),active||(active=0),active>=m&&(active=m-1);for(var u="",h=0;h<m;h++)u+='<div class="scroll_box-control_point'+(h==active?" active":"")+'"></div>';n.html(u),n.data("slide-active",active),n.data("slide-count",m),n.data("slide-dx",d),o.data("slide-timeoutId")||a.bind(o)()}else n.data("slide-dx",d)}}else o.removeClass("scroll_box-active"),n.data("slide-active",0)}}}var r=n(".scroll_box");if(0!=r.length){n(r).wrap('<div class="scroll_box-wrap"></div>'),e(),c();var d,f;n(window).resize(function(){clearTimeout(d),clearTimeout(f),d=setTimeout(c,300),f=setTimeout(c,800)});for(var m=0;m<r.length;m++){var u=r.eq(m);u.parent().hover(l.bind(u),a.bind(u))}}}(window,document,jQuery);var accordionControl=$(".accordion .accordion-control");accordionControl.on("click",function(t){return t.preventDefault(),$this=$(this),$accordion=$this.closest(".accordion"),$accordion.hasClass("open")?($accordion.find(".accordion-content").hide(300),$accordion.removeClass("open")):($accordion.hasClass("accordion-slim")&&($other=$accordion.parent().find(".accordion-slim"),$other.find(".accordion-content").hide(300).removeClass("accordion-content_last-open"),$other.removeClass("open"),$other.removeClass("last-open"),$accordion.find(".accordion-content").addClass("accordion-content_last-open"),$accordion.addClass("last-open")),$accordion.find(".accordion-content").show(300),$accordion.addClass("open")),!1}),accordionControl.show(),accordionSlim=$(".accordion.accordion-slim"),accordionSlim.length>0&&accordionSlim.parent().find(".accordion-slim:first-child").addClass("open").addClass("last-open").find(".accordion-content").show(300).addClass("accordion-content_last-open"),addSRO();var notification=function(){function t(){m=!0,f=$(".notification_box"),f.length>0||($("body").append("<div class='notification_box'></div>"),f=$(".notification_box"),f.on("click",".notify_control",o),f.on("click",".notify_close",o),f.on("click",i))}function o(){$("html").removeClass("show_notifi"),$(".notification_box .notify_content").html("")}function i(t){var i=t.target||t.srcElement;"notification_box"==i.className&&o()}function n(o){o||(o={}),o=objects(h,o),m||t(),notyfy_class="notify_box ",o.notyfy_class&&(notyfy_class+=o.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+=o.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=o.question,box_html+="</div>",(o.buttonYes||o.buttonNo)&&(box_html+='<div class="notify_control">',o.buttonYes&&(box_html+="<"+o.buttonTag+' class="notify_btn_yes" '+o.buttonYesDop+">"+o.buttonYes+"</"+o.buttonTag+">"),o.buttonNo&&(box_html+="<"+o.buttonTag+' class="notify_btn_no" '+o.buttonNoDop+">"+o.buttonNo+"</"+o.buttonTag+">"),box_html+="</div>"),box_html+="</div>",f.html(box_html),setTimeout(function(){$("html").addClass("show_notifi")},100)}function e(o){o||(o={}),o=objects(u,o),m||t(),box_html='<div class="notify_box">',box_html+='<div class="notify_title">',box_html+=o.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=o.question,box_html+="</div>",(o.buttonYes||o.buttonNo)&&(box_html+='<div class="notify_control">',o.buttonYes&&(box_html+='<div class="notify_btn_yes">'+o.buttonYes+"</div>"),o.buttonNo&&(box_html+='<div class="notify_btn_no">'+o.buttonNo+"</div>"),box_html+="</div>"),box_html+="</div>",f.html(box_html),0!=o.callbackYes&&f.find(".notify_btn_yes").on("click",o.callbackYes.bind(o.obj)),0!=o.callbackNo&&f.find(".notify_btn_no").on("click",o.callbackNo.bind(o.obj)),setTimeout(function(){$("html").addClass("show_notifi")},100)}function a(t){t||(t={});var o={time:t.time||0===t.time?t.time:d};l||(l=$("<ul/>",{"class":"notification_container"}),$("body").append(l),v());var i=$("<li/>",{"class":"notification_item"});t.type&&i.addClass("notification_item-"+t.type);var n=$("<span/>",{"class":"notification_close"});o.close=n,i.append(n);var e=$("<div/>",{"class":"notification_content"});if(t.title&&t.title.length>0){var a=$("<h5/>",{"class":"notification_title"});a.html(t.title),e.append(a)}var s=$("<div/>",{"class":"notification_text"});if(s.html(t.message),t.img&&t.img.length>0){var c=$("<div/>",{"class":"notification_img"});c.css("background-image","url("+t.img+")");var r=$("<div/>",{"class":"wrap"});r.append(c),r.append(s),e.append(r)}else e.append(s);i.append(e),l.append(i),o.time>0&&(o.timer=setTimeout(_.bind(n),o.time)),i.data("option",o)}var l,s=0,c=null,r="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",d=1e4,f=!1,m=!1,u={title:"Удаление",question:"Вы действительно хотите удалить?",buttonYes:"Да",buttonNo:"Нет",callbackYes:!1,callbackNo:!1,obj:!1,buttonTag:"div",buttonYesDop:"",buttonNoDop:""},h={title:"",question:"Сообщение",buttonYes:"Да",callbackYes:!1,buttonTag:"div",obj:!1},v=function(){$("body").on("click",".notification_close",_),$("body").on("mouseenter",".notification_container",b),$("body").on("mouseleave",".notification_container",p)},b=function(t){t&&t.preventDefault(),null!=c&&(clearTimeout(c),c=null),l.find(".notification_item").each(function(t){var o=$(this).data("option");o.timer&&clearTimeout(o.timer)}),s=1},p=function(){l.find(".notification_item").each(function(t){$this=$(this);var o=$this.data("option");o.time>0&&(o.timer=setTimeout(_.bind(o.close),o.time-1500+100*t),$this.data("option",o))}),s=0},_=function(t){t&&t.preventDefault();var o=$(this).parent();o.on(r,function(){$(this).remove()}),o.addClass("notification_hide")};return{alert:n,confirm:e,notifi:a}}();$("[ref=popup]").on("click",function(t){t.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.alert(data)}),function(){$("body").on("click",".modals_open",function(t){t.preventDefault();var o=$("a[href='#showpromocode-noregister']").data("popup");return o?o.close():(o=$("div.popup_cont, div.popup_back"),o&&o.hide()),href=this.href.split("#"),href=href[href.length-1],data={buttonYes:!1,notyfy_class:"loading "+(0===href.indexOf("video")?"modals-full_screen":"notify_white"),question:""},notification.alert(data),$.get("/"+href,function(t){$(".notify_box").removeClass("loading"),$(".notify_box .notify_content").html(t.html),ajaxForm($(".notify_box .notify_content"))},"json"),console.log(this),!1})}();var headerActions=function(){var t=!1;$(".menu-toggle").click(function(t){t.preventDefault(),$(".header").toggleClass("header_open-menu")}),$(".search-toggle").click(function(t){t.preventDefault(),$(".header-search").toggleClass("open")}),$(".header-secondline_close").click(function(t){$(".header").removeClass("header_open-menu")}),window.onscroll=function(){var o=50,i=$(".header-secondline"),n=i.find(":hover"),e=$(".header");n.length?(i.addClass("scrollable"),e.addClass("scrollable")):(i.removeClass("scrollable"),e.removeClass("scrollable"),document.documentElement.scrollTop>o&&t===!1&&(t=!0,i.addClass("scroll-down")),document.documentElement.scrollTop<=o&&t===!0&&(t=!1,i.removeClass("scroll-down")))},$(".menu_angle-down").click(function(t){t.preventDefault();var o=$(this).closest(".drop-menu_group__up, .menu-group");return o&&($(o).siblings("li").removeClass("open"),$(o).toggleClass("open")),!1});var o=null;$(".account-menu-toggle").click(function(t){t.preventDefault();var i=$(".account-menu");i&&(clearTimeout(o),i.toggleClass("hidden"),i.hasClass("hidden")||(o=setTimeout(function(){i.addClass("hidden")},7e3)))})}();