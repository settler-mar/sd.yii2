function login_redirect(t){href=location.href,href.indexOf("store")>0||href.indexOf("coupon")>0?location.reload():location.href=t}function ajaxForm(t){function o(t){var o=this;form=o.form,wrap=o.wrap,t.render?(t.notyfy_class="notify_white",notification.alert(t)):(wrap.removeClass("loading"),wrap.html(t.html),ajaxForm(wrap))}function e(){var t=this;form=t.form,wrap=t.wrap,wrap.removeClass("loading"),wrap.html("<h3>Упс... Возникла непредвиденная ошибка<h3><p>Часто это происходит в случае, если вы несколько раз подряд неверно ввели свои учетные данные. Но возможны и другие причины. В любом случае не расстраивайтесь и просто обратитесь к нашему оператору службы поддержки.</p><br><p>Спасибо.</p>"),ajaxForm(wrap)}function i(t){t.preventDefault();var i=this;if(form=i.form,wrap=i.wrap,form.yiiActiveForm&&form.yiiActiveForm("validate"),isValid=0==form.find(i.param.error_class).length,!isValid)return!1;for(required=form.find("input.required"),s=0;s<required.length;s++)if(required.eq(s).val().length<1)return!1;form.serializeObject||addSRO();var n=form.serializeObject();return form.addClass("loading"),form.html(""),wrap.html('<div style="text-align:center;"><p>Отправка данных</p></div>'),i.url+=(i.url.indexOf("?")>0?"&":"?")+"rc="+Math.random(),$.post(i.url,n,o.bind(i),"json").fail(e.bind(i)),!1}var n=(!!(window.File&&window.FileReader&&window.FileList&&window.Blob),{error_class:".has-error"});t.find("[required]").addClass("required").removeAttr("required");for(var s=0;s<t.length;s++)wrap=t.eq(s),form=wrap.find("form"),data={form:form,param:n,wrap:wrap},data.url=form.attr("action")||location.href,data.method=form.attr("method")||"post",form.off("submit"),form.on("submit",i.bind(data))}function addSRO(){$.fn.serializeObject=function(){var t={},o=this.serializeArray();return $.each(o,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}objects=function(t,o){var e,i=o;for(e in t)t.hasOwnProperty(e)&&(i[e]=e in o?o[e]:t[e]);return i},function(t,o,e){function n(){var t='<div class="scroll_box-control"></div>';t=e(t),t.insertAfter(d),t.data("slide-active",0),d.prepend("<div class=scroll_box-mover></div>"),t.on("click",".scroll_box-control_point",function(){var t=e(this),o=t.parent(),i=t.index();if(!t.hasClass("active")){o.find(".active").removeClass("active"),t.addClass("active");var n=o.data("slide-dx"),s=o.prev();s.find(".scroll_box-mover").css("margin-left",-n*i),o.data("slide-active",i),r.bind(s)()}})}function s(){var t=e(this);if(t.hasClass("scroll_box-active")){var o=setTimeout(a.bind(t),2e3);t.data("slide-timeoutId",o)}}function r(){var t=e(this),o=t.data("slide-timeoutId");t.data("slide-timeoutId",!1),t.hasClass("scroll_box-active")&&o&&clearTimeout(o)}function a(){var t=e(this);if(t.data("slide-timeoutId",!1),t.hasClass("scroll_box-active")){var o=t.next().find(">*"),i=t.data("slide-active"),n=o.length;i||(i=0),i++,i>=n&&(i=0),t.data("slide-active",i),o.eq(i).click(),s.bind(t)()}}function l(){for(i=0;i<d.length;i++){var o=d.eq(i),e=o.next(),n=o.data("scroll-width-max");if(t=o.width(),n&&t>n)e.removeClass("scroll_box-active"),e.data("slide-active",0);else{var r=o.data("scroll-elemet-ignore-class"),a=o.find(">*").not(".scroll_box-mover");if(r&&(a=a.not("."+r)),0!=a){var l=a.eq(1),c=l.outerWidth();c+=parseFloat(l.css("margin-left")),c+=parseFloat(l.css("margin-right"));var f=Math.floor(t/c);if(a<=f)o.removeClass("scroll_box-active"),e.data("slide-active",0);else{o.addClass("scroll_box-active");var p=a.length-f+1;if(e.find(">*").length!=p){active=o.data("slide-active"),active||(active=0),active>=p&&(active=p-1);for(var h="",m=0;m<p;m++)h+='<div class="scroll_box-control_point'+(m==active?" active":"")+'"></div>';e.html(h),e.data("slide-active",active),e.data("slide-count",p),e.data("slide-dx",c),o.data("slide-timeoutId")||s.bind(o)()}else e.data("slide-dx",c)}}else o.removeClass("scroll_box-active"),e.data("slide-active",0)}}}var d=e(".scroll_box");if(0!=d.length){e(d).wrap('<div class="scroll_box-wrap"></div>'),n(),l();var c,f;e(window).resize(function(){clearTimeout(c),clearTimeout(f),c=setTimeout(l,300),f=setTimeout(l,800)});for(var p=0;p<d.length;p++){var h=d.eq(p);h.parent().hover(r.bind(h),s.bind(h))}}}(window,document,jQuery);var accordionControl=$(".accordion .accordion-control");accordionControl.on("click",function(t){return t.preventDefault(),$this=$(this),$accordion=$this.closest(".accordion"),$accordion.hasClass("open")?($accordion.find(".accordion-content").hide(300),$accordion.removeClass("open")):($accordion.hasClass("accordion-slim")&&($other=$accordion.parent().find(".accordion-slim"),$other.find(".accordion-content").hide(300).removeClass("accordion-content_last-open"),$other.removeClass("open"),$other.removeClass("last-open"),$accordion.find(".accordion-content").addClass("accordion-content_last-open"),$accordion.addClass("last-open")),$accordion.find(".accordion-content").show(300),$accordion.addClass("open")),!1}),accordionControl.show(),accordionSlim=$(".accordion.accordion-slim"),accordionSlim.length>0&&accordionSlim.parent().find(".accordion-slim:first-child").addClass("open").addClass("last-open").find(".accordion-content").show(300).addClass("accordion-content_last-open"),addSRO(),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function o(o,e){this.element=o,this.$element=t(this.element),this.doc=t(document),this.win=t(window),this.settings=t.extend({},r,e),"object"==typeof this.$element.data("tipso")&&t.extend(this.settings,this.$element.data("tipso"));for(var i=Object.keys(this.$element.data()),n={},l=0;l<i.length;l++){var d=i[l].replace(s,"");if(""!==d){d=d.charAt(0).toLowerCase()+d.slice(1),n[d]=this.$element.data(i[l]);for(var c in this.settings)c.toLowerCase()==d&&(this.settings[c]=n[d])}}this._defaults=r,this._name=s,this._title=this.$element.attr("title"),this.mode="hide",this.ieFade=!a,this.settings.preferedPosition=this.settings.position,this.init()}function e(o){var e=o.clone();e.css("visibility","hidden"),t("body").append(e);var i=e.outerHeight(),n=e.outerWidth();return e.remove(),{width:n,height:i}}function i(t){t.removeClass("top_right_corner bottom_right_corner top_left_corner bottom_left_corner"),t.find(".tipso_title").removeClass("top_right_corner bottom_right_corner top_left_corner bottom_left_corner")}function n(o){var s,r,a,l=o.tooltip(),d=o.$element,c=o,f=t(window),p=10,h=c.settings.background,m=c.titleContent();switch(void 0!==m&&""!==m&&(h=c.settings.titleBackground),d.parent().outerWidth()>f.outerWidth()&&(f=d.parent()),c.settings.position){case"top-right":r=d.offset().left+d.outerWidth(),s=d.offset().top-e(l).height-p,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s<f.scrollTop()?(s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({"border-bottom-color":h,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("bottom_right_corner"),l.find(".tipso_title").addClass("bottom_right_corner"),l.find(".tipso_arrow").css({"border-left-color":h}),l.removeClass("top-right top bottom left right"),l.addClass("bottom")):(l.find(".tipso_arrow").css({"border-top-color":c.settings.background,"border-bottom-color":"transparent ","border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("top_right_corner"),l.find(".tipso_arrow").css({"border-left-color":c.settings.background}),l.removeClass("top bottom left right"),l.addClass("top"));break;case"top-left":r=d.offset().left-e(l).width,s=d.offset().top-e(l).height-p,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s<f.scrollTop()?(s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({"border-bottom-color":h,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("bottom_left_corner"),l.find(".tipso_title").addClass("bottom_left_corner"),l.find(".tipso_arrow").css({"border-right-color":h}),l.removeClass("top-right top bottom left right"),l.addClass("bottom")):(l.find(".tipso_arrow").css({"border-top-color":c.settings.background,"border-bottom-color":"transparent ","border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("top_left_corner"),l.find(".tipso_arrow").css({"border-right-color":c.settings.background}),l.removeClass("top bottom left right"),l.addClass("top"));break;case"bottom-right":r=d.offset().left+d.outerWidth(),s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s+e(l).height>f.scrollTop()+f.outerHeight()?(s=d.offset().top-e(l).height-p,l.find(".tipso_arrow").css({"border-bottom-color":"transparent","border-top-color":c.settings.background,"border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("top_right_corner"),l.find(".tipso_title").addClass("top_left_corner"),l.find(".tipso_arrow").css({"border-left-color":c.settings.background}),l.removeClass("top-right top bottom left right"),l.addClass("top")):(l.find(".tipso_arrow").css({"border-top-color":"transparent","border-bottom-color":h,"border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("bottom_right_corner"),l.find(".tipso_title").addClass("bottom_right_corner"),l.find(".tipso_arrow").css({"border-left-color":h}),l.removeClass("top bottom left right"),l.addClass("bottom"));break;case"bottom-left":r=d.offset().left-e(l).width,s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s+e(l).height>f.scrollTop()+f.outerHeight()?(s=d.offset().top-e(l).height-p,l.find(".tipso_arrow").css({"border-bottom-color":"transparent","border-top-color":c.settings.background,"border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("top_left_corner"),l.find(".tipso_title").addClass("top_left_corner"),l.find(".tipso_arrow").css({"border-right-color":c.settings.background}),l.removeClass("top-right top bottom left right"),l.addClass("top")):(l.find(".tipso_arrow").css({"border-top-color":"transparent","border-bottom-color":h,"border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.addClass("bottom_left_corner"),l.find(".tipso_title").addClass("bottom_left_corner"),l.find(".tipso_arrow").css({"border-right-color":h}),l.removeClass("top bottom left right"),l.addClass("bottom"));break;case"top":r=d.offset().left+d.outerWidth()/2-e(l).width/2,s=d.offset().top-e(l).height-p,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s<f.scrollTop()?(s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({"border-bottom-color":h,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass("bottom")):(l.find(".tipso_arrow").css({"border-top-color":c.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass("top"));break;case"bottom":r=d.offset().left+d.outerWidth()/2-e(l).width/2,s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s+e(l).height>f.scrollTop()+f.outerHeight()?(s=d.offset().top-e(l).height-p,l.find(".tipso_arrow").css({"border-top-color":c.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass("top")):(l.find(".tipso_arrow").css({"border-bottom-color":h,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass(c.settings.position));break;case"left":r=d.offset().left-e(l).width-p,s=d.offset().top+d.outerHeight()/2-e(l).height/2,l.find(".tipso_arrow").css({marginTop:-c.settings.arrowWidth,marginLeft:""}),r<f.scrollLeft()?(r=d.offset().left+d.outerWidth()+p,l.find(".tipso_arrow").css({"border-right-color":c.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass("right")):(l.find(".tipso_arrow").css({"border-left-color":c.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass(c.settings.position));break;case"right":r=d.offset().left+d.outerWidth()+p,s=d.offset().top+d.outerHeight()/2-e(l).height/2,l.find(".tipso_arrow").css({marginTop:-c.settings.arrowWidth,marginLeft:""}),r+p+c.settings.width>f.scrollLeft()+f.outerWidth()?(r=d.offset().left-e(l).width-p,l.find(".tipso_arrow").css({"border-left-color":c.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass("left")):(l.find(".tipso_arrow").css({"border-right-color":c.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),l.removeClass("top bottom left right"),l.addClass(c.settings.position))}if("top-right"===c.settings.position&&l.find(".tipso_arrow").css({"margin-left":-c.settings.width/2}),"top-left"===c.settings.position){var u=l.find(".tipso_arrow").eq(0);u.css({"margin-left":c.settings.width/2-2*c.settings.arrowWidth})}if("bottom-right"===c.settings.position){var u=l.find(".tipso_arrow").eq(0);u.css({"margin-left":-c.settings.width/2,"margin-top":""})}if("bottom-left"===c.settings.position){var u=l.find(".tipso_arrow").eq(0);u.css({"margin-left":c.settings.width/2-2*c.settings.arrowWidth,"margin-top":""})}r<f.scrollLeft()&&("bottom"===c.settings.position||"top"===c.settings.position)&&(l.find(".tipso_arrow").css({marginLeft:r-c.settings.arrowWidth}),r=0),r+c.settings.width>f.outerWidth()&&("bottom"===c.settings.position||"top"===c.settings.position)&&(a=f.outerWidth()-(r+c.settings.width),l.find(".tipso_arrow").css({marginLeft:-a-c.settings.arrowWidth,marginTop:""}),r+=a),r<f.scrollLeft()&&("left"===c.settings.position||"right"===c.settings.position||"top-right"===c.settings.position||"top-left"===c.settings.position||"bottom-right"===c.settings.position||"bottom-left"===c.settings.position)&&(r=d.offset().left+d.outerWidth()/2-e(l).width/2,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s=d.offset().top-e(l).height-p,s<f.scrollTop()?(s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({"border-bottom-color":h,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),l.removeClass("top bottom left right"),i(l),l.addClass("bottom")):(l.find(".tipso_arrow").css({"border-top-color":c.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),l.removeClass("top bottom left right"),i(l),l.addClass("top")),r+c.settings.width>f.outerWidth()&&(a=f.outerWidth()-(r+c.settings.width),l.find(".tipso_arrow").css({marginLeft:-a-c.settings.arrowWidth,marginTop:""}),r+=a),r<f.scrollLeft()&&(l.find(".tipso_arrow").css({marginLeft:r-c.settings.arrowWidth}),r=0)),r+c.settings.width>f.outerWidth()&&("left"===c.settings.position||"right"===c.settings.position||"top-right"===c.settings.position||"top-left"===c.settings.position||"bottom-right"===c.settings.position||"bottom-right"===c.settings.position)&&(r=d.offset().left+d.outerWidth()/2-e(l).width/2,l.find(".tipso_arrow").css({marginLeft:-c.settings.arrowWidth,marginTop:""}),s=d.offset().top-e(l).height-p,s<f.scrollTop()?(s=d.offset().top+d.outerHeight()+p,l.find(".tipso_arrow").css({"border-bottom-color":h,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.removeClass("top bottom left right"),l.addClass("bottom")):(l.find(".tipso_arrow").css({"border-top-color":c.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(l),l.removeClass("top bottom left right"),l.addClass("top")),r+c.settings.width>f.outerWidth()&&(a=f.outerWidth()-(r+c.settings.width),l.find(".tipso_arrow").css({marginLeft:-a-c.settings.arrowWidth,marginTop:""}),r+=a),r<f.scrollLeft()&&(l.find(".tipso_arrow").css({marginLeft:r-c.settings.arrowWidth}),r=0)),l.css({left:r+c.settings.offsetX,top:s+c.settings.offsetY}),s<f.scrollTop()&&("right"===c.settings.position||"left"===c.settings.position)&&(d.tipso("update","position","bottom"),n(c)),s+e(l).height>f.scrollTop()+f.outerHeight()&&("right"===c.settings.position||"left"===c.settings.position)&&(d.tipso("update","position","top"),n(c))}var s="tipso",r={speed:400,background:"#55b555",titleBackground:"#333333",color:"#ffffff",titleColor:"#ffffff",titleContent:"",showArrow:!0,position:"top",width:200,maxWidth:"",delay:200,hideDelay:0,animationIn:"",animationOut:"",offsetX:0,offsetY:0,arrowWidth:8,tooltipHover:!1,content:null,ajaxContentUrl:null,ajaxContentBuffer:0,contentElementId:null,useTitle:!1,templateEngineFunc:null,onBeforeShow:null,onShow:null,onHide:null};t.extend(o.prototype,{init:function(){var t=this,o=this.$element;if(this.doc,o.addClass("tipso_style").removeAttr("title"),t.settings.tooltipHover){var e=null,i=null;o.on("mouseover."+s,function(){clearTimeout(e),clearTimeout(i),i=setTimeout(function(){t.show()},150)}),o.on("mouseout."+s,function(){clearTimeout(e),clearTimeout(i),e=setTimeout(function(){t.hide()},200),t.tooltip().on("mouseover."+s,function(){t.mode="tooltipHover"}).on("mouseout."+s,function(){t.mode="show",clearTimeout(e),e=setTimeout(function(){t.hide()},200)})})}else o.on("mouseover."+s,function(){t.show()}),o.on("mouseout."+s,function(){t.hide()});t.settings.ajaxContentUrl&&(t.ajaxContent=null)},tooltip:function(){return this.tipso_bubble||(this.tipso_bubble=t('<div class="tipso_bubble"><div class="tipso_title"></div><div class="tipso_content"></div><div class="tipso_arrow"></div></div>')),this.tipso_bubble},show:function(){var o=this.tooltip(),e=this,i=this.win;e.settings.showArrow===!1?o.find(".tipso_arrow").hide():o.find(".tipso_arrow").show(),"hide"===e.mode&&(t.isFunction(e.settings.onBeforeShow)&&e.settings.onBeforeShow(e.$element,e.element,e),e.settings.size&&o.addClass(e.settings.size),e.settings.width?o.css({background:e.settings.background,color:e.settings.color,width:e.settings.width}).hide():e.settings.maxWidth?o.css({background:e.settings.background,color:e.settings.color,maxWidth:e.settings.maxWidth}).hide():o.css({background:e.settings.background,color:e.settings.color,width:200}).hide(),o.find(".tipso_title").css({background:e.settings.titleBackground,color:e.settings.titleColor}),o.find(".tipso_content").html(e.content()),o.find(".tipso_title").html(e.titleContent()),n(e),i.on("resize."+s,function(){e.settings.position=e.settings.preferedPosition,n(e)}),window.clearTimeout(e.timeout),e.timeout=null,e.timeout=window.setTimeout(function(){e.ieFade||""===e.settings.animationIn||""===e.settings.animationOut?o.appendTo("body").stop(!0,!0).fadeIn(e.settings.speed,function(){e.mode="show",t.isFunction(e.settings.onShow)&&e.settings.onShow(e.$element,e.element,e)}):o.remove().appendTo("body").stop(!0,!0).removeClass("animated "+e.settings.animationOut).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+e.settings.animationIn).fadeIn(e.settings.speed,function(){t(this).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).removeClass("animated "+e.settings.animationIn)}),e.mode="show",t.isFunction(e.settings.onShow)&&e.settings.onShow(e.$element,e.element,e),i.off("resize."+s,null,"tipsoResizeHandler")})},e.settings.delay))},hide:function(o){var e=this,i=this.win,n=this.tooltip(),r=e.settings.hideDelay;o&&(r=0,e.mode="show"),window.clearTimeout(e.timeout),e.timeout=null,e.timeout=window.setTimeout(function(){"tooltipHover"!==e.mode&&(e.ieFade||""===e.settings.animationIn||""===e.settings.animationOut?n.stop(!0,!0).fadeOut(e.settings.speed,function(){t(this).remove(),t.isFunction(e.settings.onHide)&&"show"===e.mode&&e.settings.onHide(e.$element,e.element,e),e.mode="hide",i.off("resize."+s,null,"tipsoResizeHandler")}):n.stop(!0,!0).removeClass("animated "+e.settings.animationIn).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+e.settings.animationOut).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).removeClass("animated "+e.settings.animationOut).remove(),t.isFunction(e.settings.onHide)&&"show"===e.mode&&e.settings.onHide(e.$element,e.element,e),e.mode="hide",i.off("resize."+s,null,"tipsoResizeHandler")}))},r)},close:function(){this.hide(!0)},destroy:function(){var t=this.$element,o=this.win;this.doc,t.off("."+s),o.off("resize."+s,null,"tipsoResizeHandler"),t.removeData(s),t.removeClass("tipso_style").attr("title",this._title)},titleContent:function(){var t,o=this.$element,e=this;return t=e.settings.titleContent?e.settings.titleContent:o.data("tipso-title")},content:function(){var o,e=this.$element,i=this,n=this._title;return i.settings.ajaxContentUrl?i._ajaxContent?o=i._ajaxContent:(i._ajaxContent=o=t.ajax({type:"GET",url:i.settings.ajaxContentUrl,async:!1}).responseText,i.settings.ajaxContentBuffer>0?setTimeout(function(){i._ajaxContent=null},i.settings.ajaxContentBuffer):i._ajaxContent=null):i.settings.contentElementId?o=t("#"+i.settings.contentElementId).text():i.settings.content?o=i.settings.content:i.settings.useTitle===!0?o=n:"string"==typeof e.data("tipso")&&(o=e.data("tipso")),null!==i.settings.templateEngineFunc&&(o=i.settings.templateEngineFunc(o)),o},update:function(t,o){var e=this;return o?void(e.settings[t]=o):e.settings[t]}});var a=function(){var t=document.createElement("p").style,o=["ms","O","Moz","Webkit"];if(""===t.transition)return!0;for(;o.length;)if(o.pop()+"Transition"in t)return!0;return!1}();t[s]=t.fn[s]=function(e){var i=arguments;if(void 0===e||"object"==typeof e)return this instanceof t||t.extend(r,e),this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new o(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var n;return this.each(function(){var r=t.data(this,"plugin_"+s);r||(r=t.data(this,"plugin_"+s,new o(this,e))),r instanceof o&&"function"==typeof r[e]&&(n=r[e].apply(r,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+s,null)}),void 0!==n?n:this}}});var notification=function(){function t(){p=!0,f=$(".notification_box"),f.length>0||($("body").append("<div class='notification_box'></div>"),f=$(".notification_box"),f.on("click",".notify_control",o),f.on("click",".notify_close",o),f.on("click",e))}function o(){$("html").removeClass("show_notifi"),$(".notification_box .notify_content").html("")}function e(t){var e=t.target||t.srcElement;"notification_box"==e.className&&o()}function i(o){o||(o={}),o=objects(m,o),p||t(),notyfy_class="notify_box ",o.notyfy_class&&(notyfy_class+=o.notyfy_class),box_html='<div class="'+notyfy_class+'">',box_html+='<div class="notify_title">',box_html+=o.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=o.question,box_html+="</div>",(o.buttonYes||o.buttonNo)&&(box_html+='<div class="notify_control">',o.buttonYes&&(box_html+="<"+o.buttonTag+' class="notify_btn_yes" '+o.buttonYesDop+">"+o.buttonYes+"</"+o.buttonTag+">"),o.buttonNo&&(box_html+="<"+o.buttonTag+' class="notify_btn_no" '+o.buttonNoDop+">"+o.buttonNo+"</"+o.buttonTag+">"),box_html+="</div>"),box_html+="</div>",f.html(box_html),setTimeout(function(){$("html").addClass("show_notifi")},100)}function n(o){o||(o={}),o=objects(h,o),p||t(),box_html='<div class="notify_box">',box_html+='<div class="notify_title">',box_html+=o.title,box_html+='<span class="notify_close"></span>',box_html+="</div>",box_html+='<div class="notify_content">',box_html+=o.question,box_html+="</div>",(o.buttonYes||o.buttonNo)&&(box_html+='<div class="notify_control">',o.buttonYes&&(box_html+='<div class="notify_btn_yes">'+o.buttonYes+"</div>"),o.buttonNo&&(box_html+='<div class="notify_btn_no">'+o.buttonNo+"</div>"),box_html+="</div>"),box_html+="</div>",f.html(box_html),0!=o.callbackYes&&f.find(".notify_btn_yes").on("click",o.callbackYes.bind(o.obj)),0!=o.callbackNo&&f.find(".notify_btn_no").on("click",o.callbackNo.bind(o.obj)),setTimeout(function(){$("html").addClass("show_notifi")},100)}function s(t){t||(t={});var o={time:t.time||0===t.time?t.time:c};r||(r=$("<ul/>",{"class":"notification_container"}),$("body").append(r),u());var e=$("<li/>",{"class":"notification_item"});t.type&&e.addClass("notification_item-"+t.type);var i=$("<span/>",{"class":"notification_close"});o.close=i,e.append(i);var n=$("<div/>",{"class":"notification_content"});if(t.title&&t.title.length>0){var s=$("<h5/>",{"class":"notification_title"});s.html(t.title),n.append(s)}var a=$("<div/>",{"class":"notification_text"});if(a.html(t.message),t.img&&t.img.length>0){var l=$("<div/>",{"class":"notification_img"});l.css("background-image","url("+t.img+")");var d=$("<div/>",{"class":"wrap"});d.append(l),d.append(a),n.append(d)}else n.append(a);e.append(n),r.append(e),o.time>0&&(o.timer=setTimeout(v.bind(i),o.time)),e.data("option",o)}var r,a=0,l=null,d="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c=1e4,f=!1,p=!1,h={title:"Удаление",question:"Вы действительно хотите удалить?",buttonYes:"Да",buttonNo:"Нет",callbackYes:!1,callbackNo:!1,obj:!1,buttonTag:"div",buttonYesDop:"",buttonNoDop:""},m={title:"",question:"Сообщение",buttonYes:"Да",callbackYes:!1,buttonTag:"div",obj:!1},u=function(){$("body").on("click",".notification_close",v),$("body").on("mouseenter",".notification_container",g),$("body").on("mouseleave",".notification_container",b)},g=function(t){t&&t.preventDefault(),null!=l&&(clearTimeout(l),l=null),r.find(".notification_item").each(function(t){var o=$(this).data("option");o.timer&&clearTimeout(o.timer)}),a=1},b=function(){r.find(".notification_item").each(function(t){$this=$(this);var o=$this.data("option");o.time>0&&(o.timer=setTimeout(v.bind(o.close),o.time-1500+100*t),$this.data("option",o))}),a=0},v=function(t){t&&t.preventDefault();var o=$(this).parent();o.on(d,function(){$(this).remove()}),o.addClass("notification_hide")};return{alert:i,confirm:n,notifi:s}}();$("[ref=popup]").on("click",function(t){t.preventDefault(),$this=$(this),el=$($this.attr("href")),data=el.data(),data.question=el.html(),notification.alert(data)}),function(){$("body").on("click",".modals_open",function(t){t.preventDefault(),$(".header").removeClass("header_open-menu");var o=$("a[href='#showpromocode-noregister']").data("popup");return o?o.close():(o=$("div.popup_cont, div.popup_back"),o&&o.hide()),href=this.href.split("#"),href=href[href.length-1],data={buttonYes:!1,notyfy_class:"loading "+(0===href.indexOf("video")?"modals-full_screen":"notify_white"),question:""},notification.alert(data),$.get("/"+href,function(t){$(".notify_box").removeClass("loading"),$(".notify_box .notify_content").html(t.html),ajaxForm($(".notify_box .notify_content"))},"json"),!1})}(),$(".footer-menu-title").on("click",function(t){$this=$(this),$this.hasClass("footer-menu-title_open")?$this.removeClass("footer-menu-title_open"):($(".footer-menu-title_open").removeClass("footer-menu-title_open"),$this.addClass("footer-menu-title_open"))}),$(function(){function t(t){var o=$(".rating-wrapper .rating-star");o.addClass("rating-star-open");for(var e=0;e<t;e++)o.eq(e).removeClass("rating-star-open")}$(document).on("mouseover",".rating-wrapper .rating-star",function(o){t($(this).index()+1)}).on("mouseleave",".rating-wrapper",function(o){t($('.notify_content input[name="Reviews[rating]"]').val())}).on("click",".rating-wrapper .rating-star",function(o){t($(this).index()+1),$('.notify_content input[name="Reviews[rating]"]').val($(this).index()+1)})}),function(){var t=$(".header-logo_noty");1!=t.length&&$.get("/account/notification",function(o){if(o.notifications&&0!=o.notifications.length){var e='<div class=header-noty-box><ul class="header-noty-list">';t.find("a").removeAttr("href");for(var i=!1,n=0;n<o.notifications.length;n++){el=o.notifications[n];var s=1==el.is_viewed;e+='<li class="header-noty-item'+(s?" header-noty-item_new":"")+'">',e+="<div class=header-noty-data>"+el.data+"</div>",e+="<div class=header-noty-text>"+el.text+"</div>",e+="</li>",i=i||s}e+="</ul>",e+='<a class="btn" href="/account/notification">'+o.btn+"</a>",e+="</div>",$(".header").append(e),i&&t.addClass("tooltip").addClass("has-noty"),t.on("click",function(t){return t.preventDefault(),$(".header-noty-box").hasClass("header-noty-box_open")?($(".header-noty-box").removeClass("header-noty-box_open"),$("html").removeClass("no_scrol_laptop_min")):($(".header-noty-box").addClass("header-noty-box_open"),$("html").addClass("no_scrol_laptop_min"),$(this).hasClass("has-noty")&&$.post("/account/notification",function(){$(".header-logo_noty").removeClass("tooltip").removeClass("has-noty")})),!1}),$(".header-noty-box").on("click",function(t){$(".header-noty-box").removeClass("header-noty-box_open"),$("html").removeClass("no_scrol_laptop_min")}),$(".header-noty-list").on("click",function(t){return t.preventDefault(),!1})}},"json")}(),$(document).ready(function(){$(".shops .favorite-link").on("click",function(t){t.preventDefault();var o=$(this),e=o.attr("data-state"),i=o.attr("data-affiliate-id");return o.hasClass("disabled")?null:(o.addClass("disabled"),void $.post("/account/favorites",{type:e,affiliate_id:i},function(t){return o.removeClass("disabled"),t.error?(o.find("svg").removeClass("spin"),void notification.notifi({message:t.error,type:"err",title:!!t.title&&t.title})):(notification.notifi({message:t.msg,type:"success",title:!!t.title&&t.title}),"add"==e&&o.find(".item_icon").addClass("svg-no-fill"),o.attr({"data-state":t["data-state"],"data-original-title":t["data-original-title"]}),void("add"==e?o.find("svg").removeClass("spin svg-no-fill"):"delete"==e&&o.find("svg").removeClass("spin").addClass("svg-no-fill")))},"json").item_iconil(function(){o.removeClass("disabled"),notification.notifi({message:"<b>Технические работы!</b><br>В данный момент времени произведённое действие невозможно. Попробуйте позже. Приносим свои извинения за неудобство.",type:"err"}),"add"==e&&o.find("svg").addClass("svg-no-fill"),o.find("svg").removeClass("spin")}))})});var headerActions=function(){var t=!1,o=!1;$(".menu-toggle").click(function(t){t.preventDefault(),$(".header").toggleClass("header_open-menu"),$(".drop-menu").find("li").removeClass("open").removeClass("close"),$(".header").hasClass("header_open-menu")&&$(".header").removeClass("header-search-open")}),$(".search-toggle").click(function(t){t.preventDefault(),$(".header").toggleClass("header-search-open"),$("#autocomplete").fadeOut(),$(".header").hasClass("header-search-open")&&$(".header").removeClass("header_open-menu")}),$("#header").click(function(t){"header"==t.target.id&&($(this).removeClass("header_open-menu"),$(this).removeClass("header-search-open"))}),$(".header-search_form-button").click(function(t){t.preventDefault(),$(this).closest("form").submit()}),$(".header-secondline_close").click(function(t){$(".header").removeClass("header_open-menu")}),$(".header-upline").on("mouseover",function(o){$(".header-secondline").removeClass("scroll-down"),t=!1}),$(".tooltip").tipso({background:"#4A4A4A",size:"small",delay:100,speed:100,onBeforeShow:function(t,o){this.content=t.data("tooltip")}}),$("[data-toggle=tooltip]").tipso({background:"#4A4A4A",size:"small",delay:100,speed:100,onBeforeShow:function(t,o){this.content=t.data("original-title")}}),
$(window).on("load resize scroll",function(){var e=50,i=200,n=$(".header-secondline"),s=n.find(":hover"),r=$(".header");if(s.length)n.addClass("scrollable"),r.addClass("scrollable");else{n.removeClass("scrollable"),r.removeClass("scrollable");var a=$(window).scrollTop();a>e&&o===!1&&(o=!0,n.addClass("shadowed")),a<=e&&o===!0&&(o=!1,n.removeClass("shadowed")),a>i&&t===!1&&(t=!0,n.addClass("scroll-down")),a<=i&&t===!0&&(t=!1,n.removeClass("scroll-down"))}}),$(".menu_angle-down").click(function(t){t.preventDefault();var o=$(this).closest(".drop-menu_group__up, .menu-group"),e=$(this).closest(".drop-menu");return e&&$(e).siblings("ul").find("li").removeClass("open"),o&&($(o).siblings("li").removeClass("open"),$(o).toggleClass("open"),o.hasClass("open")?($(o).removeClass("close"),$(o).siblings("li").addClass("close"),e&&$(e).siblings("ul").children("li").addClass("close")):($(o).siblings("li").removeClass("close"),e&&$(e).siblings("ul").children("li").removeClass("close"))),!1});var e=null;$(".account-menu-toggle").click(function(t){t.preventDefault();var o=$(".account-menu");o&&(clearTimeout(e),o.toggleClass("hidden"),o.hasClass("hidden")||(e=setTimeout(function(){o.addClass("hidden")},7e3)))}),$(".header-search_form-input").on("input",function(t){t.preventDefault();var o=$(this).val(),e=$("#autocomplete"),i=$(e).find("ul");return o.length>1?$.ajax({url:"/search",type:"get",data:{query:o},dataType:"json",success:function(t){t.suggestions&&(e&&$(i).html(""),t.suggestions.length?(t.suggestions.forEach(function(t){var o='<a href="/stores/'+t.data.route+'">'+t.value+t.cashback+"</a>",e=document.createElement("li");e.innerHTML=o,i&&$(i).append(e)}),e&&$(e).fadeIn()):e&&$(e).fadeOut())}}):e&&($(i).html(""),$(e).fadeOut()),!1}).on("focusout",function(){$("#autocomplete").hide()})}();