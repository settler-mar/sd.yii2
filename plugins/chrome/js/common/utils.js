var utils=function(){function n(e){chrome.tabs&&(e.preventDefault(),chrome.tabs.create({url:this.getAttribute("href")}))}return{replaceTemplate:function r(e,t){for(var a in t=t||{})e=e.replace(new RegExp("{{"+a+"}}","g"),t[a]);return e},makeCashback:function l(e,t,a,r){var n=parseFloat(e.replace(/[^\d.]+/g,"")),s=1==a?2*n:n;if(e=e.replace(/до /,lg("upto")+" "),r&&(e=n+(0<e.indexOf("%")?" %":"")),result="",result=0<n?(result=e.replace(/[\d.]+/,s)+(e.match(/\%/)?"":" "+t),r?result:'<span class="cashback">'+result+"</span>"):r?"❤":'<span class="cashback cashback-charity">&#x2764;</span>',1==a&&0<n&&!r){var c=e+(e.match(/\%/)?"":" "+t);result+='<span class="cashback_old">'+c+"</span>"}return result},ucfirst:function t(e){return e.charAt(0).toUpperCase()+e.substr(1,e.length-1)},makeHrefs:function s(e,t){t=t||n;for(var a=e.getElementsByTagName("a"),r=0;r<a.length;r++)a[r].onclick=t},setClickHandlers:function c(e,t,a){elements=e.getElementsByClassName(t);for(var r=0;r<elements.length;r++)elements[r].onclick=a},copyToClipboard:function o(){var e=this.getAttribute("data-clipboard"),t=document.createElement("input");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),t.remove();for(var a=document.getElementsByClassName("copy-clipboard"),r=0;r<a.length;r++)a[r].classList.remove("copied");this.classList.add("copied")},getAvatar:function a(e,t){return t=t||siteUrl+"images/no_ava_square.png",e?-1<e.indexOf("http")?(e.replace("http:","https:"),$avatar):0===e.indexOf("//")?"https:"+e:siteUrl+e:t},log:function u(){if(debug)for(var e=0;e<arguments.length;e++)console.log(arguments[e])},doClickPlugunClose:function i(e){document.querySelector(".secretdiscounter-extension").style.display="none",chrome.tabs&&(e.preventDefault(),chrome.tabs.create({url:this.getAttribute("href")}))},href:function p(e){return"ru-RU"==language?e:language.substr(0,2)+"/"+e}}}();