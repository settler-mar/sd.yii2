console.log("utils.js");var utils=function(){function e(e,t){t=t||{};for(var a in t)e=e.replace(new RegExp("{{"+a+"}}","g"),t[a]);return e}function t(e,t,a,r){var s=parseFloat(e.replace(/[^\d.]+/g,"")),o=1==a?2*s:s;if(r&&(e=s+(e.indexOf("%")>0?" %":"")),s>0?(result=e.replace(/[\d.]+/,o)+(e.match(/\%/)?"":" "+t),result=r?result:'<span class="cashback">'+result+"</span>"):result=r?"‚ù§":'<span class="cashback cashback-charity">&#x2764;</span>',1==a&&s>0&&!r){var n=e+(e.match(/\%/)?"":" "+t);result+='<span class="cashback_old">'+n+"</span>"}return result}function a(e){var t=e.charAt(0).toUpperCase();return t+e.substr(1,e.length-1)}function r(e){var t=this.getAttribute("data-store");t&&(Storage.set(storeActiveStorageName+t,(new Date).getTime()),debug&&console.log(storeActiveStorageName+t,Storage.get(storeActiveStorageName+t))),chrome.tabs&&(e.preventDefault(),chrome.tabs.create({url:this.getAttribute("href")}))}function s(e){var t=this.getAttribute("data-store");t&&(Storage.set(storeActiveStorageName+t,(new Date).getTime()),debug&&console.log(storeActiveStorageName+t,Storage.get(storeActiveStorageName+t))),document.querySelector(".secretdiscounter-extension").style.display="none",chrome.tabs&&(e.preventDefault(),chrome.tabs.create({url:this.getAttribute("href")}))}function o(e){var t=Storage.get(storeActiveStorageName+e),a=null!==t&&(new Date).getTime()-t<60*storeActiveInterval*1e3;return a}function n(e,t){t=t||r;for(var a=e.getElementsByTagName("a"),s=0;s<a.length;s++)a[s].onclick=t}function c(){var e=this.getAttribute("data-clipboard"),t=document.createElement("input");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),t.remove();for(var a=document.getElementsByClassName("copy-clipboard"),r=0;r<a.length;r++)a[r].classList.remove("copied");this.classList.add("copied")}function l(e,t,a){elements=e.getElementsByClassName(t);for(var r=0;r<elements.length;r++)elements[r].onclick=a}function i(e,t){return t=t||siteUrl+"images/no_ava_square.png",e?e.indexOf("http")>-1?(e.replace("http:","https:"),$avatar):0===e.indexOf("//")?"https:"+e:siteUrl+e:t}function u(){if(debug)for(var e=0;e<arguments.length;e++)console.log(arguments[e])}return{replaceTemplate:e,makeCashback:t,ucfirst:a,makeHrefs:n,storeIsActivate:o,setClickHandlers:l,copyToClipboard:c,getAvatar:i,log:u,doClickPlugunClose:s}}();