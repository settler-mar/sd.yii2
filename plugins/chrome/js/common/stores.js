var storeUtil=function(){function e(e){return e=e.toLowerCase(),e=e.split("//"),e=e.length>1?e[1]:e[0],e=e.replace("www.","").split("/")[0].split("?")[0]}function t(t,r,n){if(n=n||!1,r=e(r),t===r)return!0;if(n){var o=t.indexOf(r);if(o<0)return!1;if("."!=t[o-1])return!1;if(t.substr(o)==r)return!0}return!1}function r(r,n,o){if(!r||0===r.length)return null;n=n||window.location.host;var a=e(n),i=!1;r.forEach(function(e){if(!i&&t(a,e.url,!1))return i=!0,o(e),!1;if(!i&&e.url_alternative&&e.url_alternative.length>3)for(var r=e.url_alternative.split(","),n=0;n<r.length;n++)if(t(a,r[n]),!1)return i=!0,o(e),!1}),i||r.forEach(function(e){if(!i&&t(a,e.url,!0))return i=!0,o(e),!1;if(!i&&e.url_alternative&&e.url_alternative.length>3)for(var r=e.url_alternative.split(","),n=0;n<r.length;n++)if(t(a,r[n],!0))return o(e),!1})}function n(e,t){t=t||!0,t?Storage.set(storeActiveStorageName+e,(new Date).getTime()):Storage.remove(storeActiveStorageName+e),debug&&console.log("активация шопа "+storeActiveStorageName+e+" "+Storage.get(storeActiveStorageName+e))}function o(){var e=document.querySelector(".ad-detect"),t=!!e&&e.getAttribute("data-store-route"),r=!!e&&"none"!==e.style.display;if(debug&&console.log("картинка для goto для шоп "+(e?" yes ":" no ")+t+" видимая "+r),e&&t&&r){n(t,!0);var o=setInterval(function(){e=document.querySelector(".ad-detect"),r=!!e&&"none"!==e.style.display,debug&&console.log("проверка видимости картинки на goto "+r),r||(n(t,!1),clearInterval(o))},500)}}function a(e){var t=Storage.get(storeActiveStorageName+e),r=null!==t&&(new Date).getTime()-t<60*storeActiveInterval*1e3;return debug&&console.log(storeActiveStorageName+e,t,r,((new Date).getTime()-t)/6e4),r}return{findShop:r,analizeActivated:o,isActivated:a}}();