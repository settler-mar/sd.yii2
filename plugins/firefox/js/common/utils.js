var utils=function(){function e(e,t){t=t||{};for(var a in t)e=e.replace(new RegExp("{{"+a+"}}","g"),t[a]);return e}function t(e,t,a,r){var n=parseFloat(e.replace(/[^\d.]+/g,"")),s=1==a?2*n:n;if(r&&(e=n+(e.indexOf("%")>0?" %":"")),n>0?(result=e.replace(/[\d.]+/,s)+(e.match(/\%/)?"":" "+t),result=r?result:'<span class="cashback">'+result+"</span>"):result=r?"‚ù§":'<span class="cashback cashback-charity">&#x2764;</span>',1==a&&n>0&&!r){var c=e+(e.match(/\%/)?"":" "+t);result+='<span class="cashback_old">'+c+"</span>"}return result}function a(e){var t=e.charAt(0).toUpperCase();return t+e.substr(1,e.length-1)}function r(e){chrome.tabs&&(e.preventDefault(),chrome.tabs.create({url:this.getAttribute("href")}))}function n(e){document.querySelector(".secretdiscounter-extension").style.display="none",chrome.tabs&&(e.preventDefault(),chrome.tabs.create({url:this.getAttribute("href")}))}function s(e,t){t=t||r;for(var a=e.getElementsByTagName("a"),n=0;n<a.length;n++)a[n].onclick=t}function c(){var e=this.getAttribute("data-clipboard"),t=document.createElement("input");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),t.remove();for(var a=document.getElementsByClassName("copy-clipboard"),r=0;r<a.length;r++)a[r].classList.remove("copied");this.classList.add("copied")}function l(e,t,a){elements=e.getElementsByClassName(t);for(var r=0;r<elements.length;r++)elements[r].onclick=a}function o(e,t){return t=t||siteUrl+"images/no_ava_square.png",e?e.indexOf("http")>-1?(e.replace("http:","https:"),$avatar):0===e.indexOf("//")?"https:"+e:siteUrl+e:t}function i(){if(debug)for(var e=0;e<arguments.length;e++)console.log(arguments[e])}return{replaceTemplate:e,makeCashback:t,ucfirst:a,makeHrefs:s,setClickHandlers:l,copyToClipboard:c,getAvatar:o,log:i,doClickPlugunClose:n}}();