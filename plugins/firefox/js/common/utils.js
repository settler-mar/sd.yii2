console.log("utils.js");var utils=function(){function e(e,t){t=t||{};for(var a in t)e=e.replace(new RegExp("{{"+a+"}}","g"),t[a]);return e}function t(e,t,a){var r=parseFloat(e.replace(/[^\d.]+/g,"")),s=1==a?2*r:r;if(r>0?result='<span class="cashback">'+e.replace(/[\d.]+/,s)+(e.match(/\%/)?"":" "+t)+"</span>":result='<span class="cashback cashback-charity">&#x2764;</span>',1==a&&r>0){var n=e+(e.match(/\%/)?"":" "+t);result+='<span class="cashback_old">'+n+"</span>"}return result}function a(e,t){var a=parseFloat(e.replace(/[^\d.]+/g,""));return 1==t?2*a:a}function r(e){var t=e.charAt(0).toUpperCase();return t+e.substr(1,e.length-1)}function s(){var e=this.getAttribute("data-store");e&&Storage.set(storeActiveStorageName+e,(new Date).getTime()),chrome.tabs.create({url:this.getAttribute("href")})}function n(){var e=this.getAttribute("data-store");e&&Storage.set(storeActiveStorageName+e,(new Date).getTime()),document.querySelector(".secretdiscounter-extension").style.display="none",chrome.tabs.create({url:this.getAttribute("href")})}function c(e){var t=Storage.get(storeActiveStorageName+e),a=null!==t&&(new Date).getTime()-t<60*storeActiveInterval*1e3;return a}function o(e,t){t=t||s,elements=e.getElementsByTagName("a");for(var a=0;a<elements.length;a++)elements[a].onclick=t}function l(){var e=this.getAttribute("data-clipboard"),t=document.createElement("input");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),t.remove();for(var a=document.getElementsByClassName("copy-clipboard"),r=0;r<a.length;r++)a[r].classList.remove("copied");this.classList.add("copied")}function i(e,t,a){elements=e.getElementsByClassName(t);for(var r=0;r<elements.length;r++)elements[r].onclick=a}function u(e,t){return t=t||siteUrl+"images/no_ava_square.png",e?e.indexOf("http")>-1?(e.replace("http:","https:"),$avatar):0===e.indexOf("//")?"https:"+e:siteUrl+e:t}function m(){if(debug)for(var e=0;e<arguments.length;e++)console.log(arguments[e])}return{replaceTemplate:e,makeCashback:t,makeCashbackNum:a,ucfirst:r,makeHrefs:o,storeIsActivate:c,setClickHandlers:i,copyToClipboard:l,getAvatar:u,log:m,doClickPlugunClose:n}}();